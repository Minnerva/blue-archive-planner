import{u as $,c as q,o as p,a as f,b as l,d as h,t as z,e as F,g as B,G as ie,s as de,f as ue,h as y,i as pe,j as fe,k as v,r as W,l as m,F as K,m as C,n as me,p as _e,q as J,v as he,w as ye,x as ge,y as ve,z as be,A as we,B as xe,D as $e,E as Ce,H as A,I as Q,J as g,K as x,L as ke,M as D,N as Le,O as Z,P as Be,Q as Ae,R as De,S as Fe}from"./vendor-IWjHr_Sr.js";import{C as O,L as Ve,a as Ie,P as Re,b as Ne,c as Se,p as Pe}from"./chart.js-_Nu5jp4G.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function s(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=s(a);fetch(a.href,n)}})();const Ue="/gacha-tracker-online/assets/logo-QuR3q7Cb.png",Me={class:"w-full h-12 shadow md:px-4 sm:px-6 px-4 sticky top-0"},He={class:"flex h-full items-center"},Ye={class:"flex-none w-14"},Oe=["src"],Ee={class:"flex-1 flex justify-end items-center"},Te=["title"],Ge={class:"w-20"},je={__name:"Nav",setup(e){const t=$(),s=q(()=>t.state.user),o=()=>{const n=B(),r=new ie;de(n,r).then(c=>{}).catch(c=>{console.log(c)})},a=()=>{const n=B();ue(n).then(r=>{}).catch(r=>{console.log(r)})};return(n,r)=>(p(),f("div",Me,[l("div",He,[l("div",Ye,[l("img",{src:h(Ue)},null,8,Oe)]),l("div",Ee,[s.value?(p(),f("span",{key:0,class:"mr-3 truncate max-w-52",title:s.value.ign},z(s.value.ign),9,Te)):F("",!0),l("div",Ge,[s.value?(p(),f("button",{key:1,onClick:a,class:"bg-white w-full p-1 border rounded-lg"},"Sign Out")):(p(),f("button",{key:0,onClick:o,class:"bg-white w-full p-1 border rounded-lg"},"Sign In"))])])])]))}},X=(e,t)=>{const s=e.__vccOpts||e;for(const[o,a]of t)s[o]=a;return s},qe={__name:"App",setup(e){y.extend(pe);const t=$(),o=fe({apiKey:"AIzaSyB8hRY_mV19i_4K-Mno7Sn8FpOJGEIvDKM",authDomain:"gacha-tracker-online.firebaseapp.com",projectId:"gacha-tracker-online",storageBucket:"gacha-tracker-online.appspot.com",messagingSenderId:"395636017581",appId:"1:395636017581:web:2f03e7f80569c9a537b924",measurementId:"G-HW1B3NSFH8",databaseURL:"https://gacha-tracker-online-default-rtdb.asia-southeast1.firebasedatabase.app/"}),a=B(o);return v(o),a.onAuthStateChanged(async n=>{if(!n&&t.state.user)window.location.reload();else if(!n)t.commit("setUser",!1);else{t.commit("setUID",n.uid);let r={};const c=y.utc().format("YYYY-MM-DD HH:mm:ss");t.dispatch("setUserListen",u=>{t.state.user||(u?(r={...u},r.last_signed_in_at=c):r={ign:"",active:!0,created_at:c,last_signed_in_at:c},t.dispatch("saveUser",r)),u&&t.commit("setUser",u)})}}),(n,r)=>{const c=W("router-view");return p(),f(K,null,[m(je),m(c)],64)}}},ze=e=>(e&&e[0]==="/"&&(e=e.substring(1)),`/gacha-tracker-online/${e||""}`),E=e=>y(`${e} 00:00:00`),T=e=>Math.floor(e/120),We=async e=>{const t=v();try{const o=(await _e(me(C(t),e))).val();return o||!1}catch(s){console.error(s)}},Ke=(e,t)=>{const s=v(),o=C(s,e);J(o,a=>{const n=a.val();t(n)})},ee=(e,t)=>{const s=v();he(C(s,e),t)},G=(e,t,s={})=>{const o=v(),a=[];let n=null;switch(s.order){case"child":a.push(ge(s.order_key));break;case"key":a.push(ye());break;case"value":a.push(orderByValue(s.order_key));break}switch(s.filter){case"first":a.push(xe(s.filter_value));break;case"last":a.push(we(s.filter_value));break;case"between":s.order==="key"&&(a.push(ve(s.filter_start)),a.push(be(s.filter_end)))}n=$e(C(o,e),...a),J(n,r=>t(r.val()))},Je={namespaced:!0,state:{DB_PATH_BA_CURRENCY_OWN:"/ba-currency-own",listGetListener:!1,listLatestListener:!1},mutations:{},actions:{get(){},save({state:e,rootState:t},{key:s,data:o}){ee(`${e.DB_PATH_BA_CURRENCY_OWN}/${t.uid}/${s}`,o)},setGetRecordsListen({state:e,rootState:t},{year:s,month:o,callback:a}){const{listGetListener:n}=e;n&&(n.off(),e.listGetListener=!1),e.listLatestListener=G(`${e.DB_PATH_BA_CURRENCY_OWN}/${t.uid}`,a,{order:"key",filter:"between",filter_start:`${s}-${o}-00`,filter_end:`${s}-${o}-99`})},setGetLatestRecordListen({state:e,rootState:t},s){const{listLatestListener:o}=e;o&&(o.off(),e.listLatestListener=!1),e.listLatestListener=G(`${e.DB_PATH_BA_CURRENCY_OWN}/${t.uid}`,s,{filter:"last",filter_value:1})}}},Qe={"ba-currency-own":Je},Ze=Ce({state:{DB_PATH_USER:"/users",DB_PATH_BLUE_ARCHIVE_CURRENCY:"/blue-archive-currencies",user:!1,uid:!1},mutations:{setUser(e,t){e.user=t?{...t}:!1},setUID(e,t){e.uid=t||!1}},actions:{findUser({state:e}){return We(`${e.DB_PATH_USER}/${e.uid}`)},setUserListen({state:e},t){Ke(`${e.DB_PATH_USER}/${e.uid}`,s=>t(s))},async saveUser({state:e},t){await ee(`${e.DB_PATH_USER}/${e.uid}`,t)}},modules:Qe}),Xe={},et={class:"relative shadow bg-white rounded-sm"},tt={class:"p-3"};function st(e,t){return p(),f("div",et,[A(e.$slots,"cover"),l("div",tt,[A(e.$slots,"body")])])}const te=X(Xe,[["render",st]]),at={class:"relative"},ot=["src","title"],nt=["placeholder","type","value"],rt={__name:"Base",props:{icon:{},iconTitle:{},modelValue:{},type:{default:"text"},placeholder:{default:""}},emits:["update:modelValue"],setup(e){return(t,s)=>(p(),f("div",at,[e.icon?(p(),f("img",{key:0,class:"absolute w-8 max-h-5 inset-y-0 m-auto z-10",src:e.icon,title:e.iconTitle},null,8,ot)):F("",!0),l("input",{class:Q(["w-full h-7 border-primary border-2 drop-shadow-sm focus:outline-0",{"pl-4":!e.icon,"pl-9":e.icon}]),placeholder:e.placeholder,type:e.type,value:e.modelValue,onInput:s[0]||(s[0]=o=>t.$emit("update:modelValue",o.target.value))},null,42,nt)]))}},w=X(rt,[["__scopeId","data-v-6eb494d7"]]),se={__name:"Base",props:{primary:Boolean,onClick:Function},setup(e){const t=e,s={"border-2":!t.primary,"text-white":t.primary,"bg-primary":t.primary};return(o,a)=>(p(),f("button",{class:Q(["rounded w-full h-8 select-none",s]),onClick:a[0]||(a[0]=(...n)=>e.onClick&&e.onClick(...n))},[A(o.$slots,"default")]))}},ct={class:"w-full py-3 md:px-8 sm:px-6 px-4"},lt={key:0},it={class:"grid grid-cols-2 gap-4"},dt={class:"col-span-full md:col-span-1"},ut={key:1},pt={__name:"Main",setup(e){const t=$(),s=q(()=>t.state.user),o=g(""),a=()=>{const{user:n}=t.state;n.ign=o,t.dispatch("saveUser",n)};return(n,r)=>{const c=W("router-view");return p(),f("div",ct,[s.value?(p(),f(K,{key:0},[s.value.ign?s.value.active?(p(),ke(c,{key:2})):(p(),f("div",ut,"Please contact Minnerva to activate your account.")):(p(),f("div",lt,[m(te,null,{body:x(()=>[l("div",it,[l("label",dt,[D(" Input your IGN or Discord Name: "),m(w,{modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=u=>o.value=u)},null,8,["modelValue"])]),m(se,{class:"col-span-full md:col-start-1 md:col-end-2","on-click":a,primary:""},{default:x(()=>[D("Submit")]),_:1})])]),_:1})]))],64)):F("",!0)])}}},j="chart",ft={__name:"LineChart",props:{labels:{type:Array,required:!0},data:{type:Array,required:!0}},setup(e,{expose:t}){O.register(Ve,Ie,Re,Ne,Se,Pe);const s=e;let o=null;Le(s,()=>{a()});const a=()=>{o.data.labels=s.labels,s.data.forEach((r,c)=>{o.data.datasets[c].data=r}),o.update()},n=()=>{o=new O(document.querySelector(`#${j}`),{type:"line",data:{labels:[],datasets:[{data:[],borderColor:"#00D8FB",backgroundColor:"#FFFFFF"},{data:[],borderColor:"#FFE9F2",backgroundColor:"#FFFFFF"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},animation:{},scales:{x:{ticks:{autoSkip:!0,maxTicksLimit:10}},y:{beginAtZero:!0}}}})};return Z(()=>{n()}),t({updateChart:a}),(r,c)=>(p(),f("canvas",{id:j}))}},mt="data:image/svg+xml,%3c!--%20https://fontawesome.com/icons/chevron-left?f=classic&s=solid%20--%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='16'%20width='10'%20viewBox='0%200%20320%20512'%3e%3c!--!Font%20Awesome%20Free%206.5.1%20by%20@fontawesome%20-%20https://fontawesome.com%20License%20-%20https://fontawesome.com/license/free%20Copyright%202023%20Fonticons,%20Inc.--%3e%3cpath%20d='M9.4%20233.4c-12.5%2012.5-12.5%2032.8%200%2045.3l192%20192c12.5%2012.5%2032.8%2012.5%2045.3%200s12.5-32.8%200-45.3L77.3%20256%20246.6%2086.6c12.5-12.5%2012.5-32.8%200-45.3s-32.8-12.5-45.3%200l-192%20192z'/%3e%3c/svg%3e",_t="data:image/svg+xml,%3c!--%20https://fontawesome.com/icons/chevron-right?f=classic&s=solid%20--%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='16'%20width='10'%20viewBox='0%200%20320%20512'%3e%3c!--!Font%20Awesome%20Free%206.5.1%20by%20@fontawesome%20-%20https://fontawesome.com%20License%20-%20https://fontawesome.com/license/free%20Copyright%202023%20Fonticons,%20Inc.--%3e%3cpath%20d='M310.6%20233.4c12.5%2012.5%2012.5%2032.8%200%2045.3l-192%20192c-12.5%2012.5-32.8%2012.5-45.3%200s-12.5-32.8%200-45.3L242.7%20256%2073.4%2086.6c-12.5-12.5-12.5-32.8%200-45.3s32.8-12.5%2045.3%200l192%20192z'/%3e%3c/svg%3e",ht="data:image/svg+xml,%3c!--%20https://fontawesome.com/icons/calendar?f=classic&s=regular&pc=%252300d8fb%20--%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='16'%20width='14'%20viewBox='0%200%20448%20512'%3e%3c!--!Font%20Awesome%20Free%206.5.1%20by%20@fontawesome%20-%20https://fontawesome.com%20License%20-%20https://fontawesome.com/license/free%20Copyright%202023%20Fonticons,%20Inc.--%3e%3cpath%20fill='%2300d8fb'%20d='M152%2024c0-13.3-10.7-24-24-24s-24%2010.7-24%2024V64H64C28.7%2064%200%2092.7%200%20128v16%2048V448c0%2035.3%2028.7%2064%2064%2064H384c35.3%200%2064-28.7%2064-64V192%20144%20128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24%2010.7-24%2024V64H152V24zM48%20192H400V448c0%208.8-7.2%2016-16%2016H64c-8.8%200-16-7.2-16-16V192z'/%3e%3c/svg%3e",yt="/gacha-tracker-online/assets/pyroxene-gBHgCIjf.webp",gt="/gacha-tracker-online/assets/recruitment-ticket-NiO_EDI9.webp",vt="/gacha-tracker-online/assets/arona-head-5uMSPBb2.png",bt={class:"grid grid-cols-7 gap-4"},wt={class:"col-span-full md:col-span-5"},xt={class:"flex justify-center text-center"},$t=["src"],Ct={class:"mx-4 text-xl md:text-3xl font-bold"},kt=["src"],Lt={class:"flex justify-center"},Bt={class:"w-full h-72"},At={class:"grid grid-cols-4 gap-4"},Dt={class:"col-span-full"},Ft={class:"col-span-2"},Vt={class:"col-span-2"},It={class:"col-span-full md:col-start-2 md:col-end-4 mt-4"},Rt=["src"],Nt=400,St={__name:"Index",setup(e){const t=$(),s=g(y()),o=g([]),a=y().year(),n=y().month()+1,r=y().date(),c=g({date:"",pyroxene:0,free_pull:0}),u=Be({day:`${a}-${n}-${r}`,pyroxene:void 0,free_pull:void 0}),b=g({labels:[],data:[]}),ae=()=>{t.dispatch("ba-currency-own/setGetLatestRecordListen",d=>{if(d){const i=Object.keys(d);i.length>0&&(c.value={date:i[0],...d[i[0]]})}})},V=(d,i)=>{t.dispatch("ba-currency-own/setGetRecordsListen",{year:d,month:i,callback:_=>{o.value=_,R()}})},I=d=>{s.value=d,V(d.year(),d.month()+1)},oe=()=>{const d=s.value.add(-1,"month").startOf("month");I(d)},ne=()=>{const d=s.value.add(1,"month").startOf("month");I(d)},re=async()=>{const d=E(u.day),i={pyroxene:u.pyroxene,free_pull:u.free_pull};isNaN(i.pyroxene)&&(i.pyroxene=c.value?c.value.pyroxene:0),isNaN(i.free_pull)&&(i.free_pull=c.value?c.value.free_pull:0),t.dispatch("ba-currency-own/save",{key:d.format("YYYY-MM-DD"),data:i}),u.pyroxene=void 0,u.free_pull=void 0,R()},R=()=>{const d=[],i=[],_=[],N=c.value?E(c.value.date):!1,S=s.value.startOf("month"),ce=s.value.endOf("month"),le=S.diff(ce,"day")*-1+1;for(let k=0;k<le;k++){const P=S.add(k,"day"),U=P.format("YYYY-MM-DD"),L=o.value?o.value[U]:!1;let M=null,H=null;if(L&&(M=T(L.pyroxene+L.free_pull*120)),N){const Y=N.diff(P,"day");Y<=0&&(H=T(Y*-1*Nt+c.value.pyroxene+c.value.free_pull*120))}d.push(U),i.push(M),_.push(H)}b.value.labels=d,b.value.data=[i,_]};return Z(()=>{ae(),V(a,n)}),(d,i)=>(p(),f("div",bt,[l("div",wt,[l("div",xt,[l("img",{src:h(mt),class:"cursor-pointer select-none",onClick:oe},null,8,$t),l("span",Ct,z(s.value.format("YYYY-MM")),1),l("img",{src:h(_t),class:"cursor-pointer select-none",onClick:ne},null,8,kt)]),l("div",Lt,[l("div",Bt,[m(ft,{labels:b.value.labels,data:b.value.data},null,8,["labels","data"])])])]),m(te,{class:"col-span-full md:col-span-2"},{body:x(()=>[l("div",At,[l("div",Dt,[m(w,{modelValue:u.day,"onUpdate:modelValue":i[0]||(i[0]=_=>u.day=_),icon:h(ht),"icon-title":"Date",type:"date"},null,8,["modelValue","icon"])]),l("div",Ft,[m(w,{modelValue:u.pyroxene,"onUpdate:modelValue":i[1]||(i[1]=_=>u.pyroxene=_),modelModifiers:{number:!0},placeholder:c.value.pyroxene,icon:h(yt),"icon-title":"Pyroxene",type:"number"},null,8,["modelValue","placeholder","icon"])]),l("div",Vt,[m(w,{modelValue:u.free_pull,"onUpdate:modelValue":i[2]||(i[2]=_=>u.free_pull=_),modelModifiers:{number:!0},placeholder:c.value.free_pull,icon:h(gt),"icon-title":"Free Pull",type:"number"},null,8,["modelValue","placeholder","icon"])]),l("div",It,[m(se,{"on-click":re,primary:""},{default:x(()=>[D(" Save ")]),_:1})])]),l("img",{src:h(vt),class:"h-36 mt-4 md:mt-0 md:absolute bottom-0 inset-x-0 m-auto"},null,8,Rt)]),_:1})]))}},Pt=Ae({history:De(),routes:[{path:ze(""),component:pt,children:[{path:"",component:St}]}]});Fe(qe).use(Ze).use(Pt).mount("#app");
