import{u as S,c as ae,o as c,a as l,b as r,d as f,t as $,e as E,g as X,G as Re,s as Ne,f as He,h as w,i as Ie,j as Oe,k as H,r as ye,l as p,F as G,m as j,n as Te,p as Ye,q as ge,v as Fe,w as Ve,x as Ee,y as _e,z as Ge,A as je,B as qe,D as Ke,E as ze,H as We,I as ee,J as q,K as x,L as A,M as Je,N as te,O as be,P as ne,Q as ke,R as Ze,S as Qe,T as Xe,U as et}from"./vendor-UVA_EQ6D.js";import{C as me,L as tt,a as st,P as at,b as nt,c as ot,p as it}from"./chart.js-lKfCSmkr.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();const rt="/gacha-tracker-online/assets/logo-QuR3q7Cb.png",ct={class:"w-full h-12 bg-white shadow md:px-4 sm:px-6 px-4 sticky top-0"},lt={class:"flex h-full items-center"},ut={class:"flex-none w-14"},dt=["src"],_t={class:"flex-1 flex justify-end items-center"},mt=["title"],pt={class:"w-20"},ft={__name:"Nav",setup(e){const t=S(),s=ae(()=>t.state.user),a=()=>{const o=X(),i=new Re;Ne(o,i).then(d=>{}).catch(d=>{console.log(d)})},n=()=>{const o=X();He(o).then(i=>{}).catch(i=>{console.log(i)})};return(o,i)=>(c(),l("div",ct,[r("div",lt,[r("div",ut,[r("img",{src:f(rt)},null,8,dt)]),r("div",_t,[s.value?(c(),l("span",{key:0,class:"mr-3 truncate max-w-52",title:s.value.ign},$(s.value.ign),9,mt)):E("",!0),r("div",pt,[s.value?(c(),l("button",{key:1,onClick:n,class:"bg-white w-full p-1 border rounded-lg"},"Sign Out")):(c(),l("button",{key:0,onClick:a,class:"bg-white w-full p-1 border rounded-lg"},"Sign In"))])])])]))}},we=(e,t)=>{const s=e.__vccOpts||e;for(const[a,n]of t)s[a]=n;return s},ht={__name:"App",setup(e){w.extend(Ie);const t=S(),a=Oe({apiKey:"AIzaSyB8hRY_mV19i_4K-Mno7Sn8FpOJGEIvDKM",authDomain:"gacha-tracker-online.firebaseapp.com",projectId:"gacha-tracker-online",storageBucket:"gacha-tracker-online.appspot.com",messagingSenderId:"395636017581",appId:"1:395636017581:web:2f03e7f80569c9a537b924",measurementId:"G-HW1B3NSFH8",databaseURL:"https://gacha-tracker-online-default-rtdb.asia-southeast1.firebasedatabase.app/"}),n=X(a);return H(a),n.onAuthStateChanged(async o=>{if(!o&&t.state.user)window.location.reload();else if(!o)t.commit("setUser",!1);else{t.commit("setUID",o.uid);let i={};const d=w.utc().format("YYYY-MM-DD HH:mm:ss");t.dispatch("setUserListen",u=>{t.state.user||(u?(i={...u},i.last_signed_in_at=d):i={ign:"",active:!0,created_at:d,last_signed_in_at:d},t.dispatch("saveUser",i)),u&&t.commit("setUser",u)})}}),(o,i)=>{const d=ye("router-view");return c(),l(G,null,[p(ft),p(d)],64)}}},yt=e=>(e&&e[0]==="/"&&(e=e.substring(1)),`/gacha-tracker-online/${e||""}`),gt=(e,t)=>{let s=-1;const a=Object.keys(t);return e.forEach((n,o)=>{const i=[];if(a.forEach(d=>{n[d]===t[d]&&i.push(!0)}),i.length===a.length)return s=o,o}),s},bt=(e,t)=>{const s=gt(e,t);return s>-1?e[s]:!1},D=e=>w(`${e} 00:00:00`),Y=({pyroxene:e,free_pull:t})=>Math.floor(e/120)+t,kt=e=>Math.floor(e/200),pe=e=>new Intl.NumberFormat("en-US",{}).format(e),wt=async e=>{const t=H();try{const a=(await Ye(Te(j(t),e))).val();return a||!1}catch(s){console.error(s)}},vt=(e,t)=>{const s=H(),a=j(s,e);ge(a,n=>{const o=n.val();t(o)})},F=(e,t)=>{const s=H();Fe(j(s,e),t)},O=(e,t,s={})=>{s.filters||(s.filters=[]);const a=H(),n=[];let o=null;switch(s.order){case"child":n.push(Ee(s.order_key));break;case"key":n.push(Ve());break;case"value":n.push(orderByValue(s.order_key));break}s.filters.forEach(i=>{switch(i.type){case"first":n.push(Ke(i.value));break;case"last":n.push(qe(i.value));break;case"between":s.order==="key"&&(n.push(_e(i.start)),n.push(je(i.end)));break;case"endBefore":s.order==="key"&&n.push(Ge(i.value));break;case"startAt":s.order==="key"&&n.push(_e(i.value));break}}),o=ze(j(a,e),...n),ge(o,i=>t(i.val()))},xt={namespaced:!0,state:{DB_PATH_BA_BANNER_PULL:"/ba-banner-pull",banner_pull:!1,listGetUpcomingListener:!1},mutations:{setBannerPull(e,t){e.banner_pull=t?{...t}:!1}},getters:{find:e=>t=>{const s=e.banner_pull[t];return s||null}},actions:{save({state:e,rootState:t},{key:s,data:a}){F(`${e.DB_PATH_BA_BANNER_PULL}/${t.uid}/${s}`,a)},delete({state:e,rootState:t},s){F(`${e.DB_PATH_BA_BANNER_PULL}/${t.uid}/${s}`,null)},setGetUpcomingRecordsListen({state:e,rootState:t},s){const{listGetUpcomingListener:a}=e;a&&(a.off(),e.listGetUpcomingListener=!1),e.listLatestListener=O(`${e.DB_PATH_BA_BANNER_PULL}/${t.uid}`,s,{order:"key",filters:[{type:"startAt",value:"2023-12-00"}]})}}},$t={namespaced:!0,state:{DB_PATH_BA_CURRENCY_OWN:"/ba-currency-own",listGetListener:!1,listLatestListener:!1,listLatestBeforeMonthListener:!1},actions:{save({state:e,rootState:t},{key:s,data:a}){F(`${e.DB_PATH_BA_CURRENCY_OWN}/${t.uid}/${s}`,a)},setGetRecordsListen({state:e,rootState:t},{year:s,month:a,callback:n}){const{listGetListener:o}=e;o&&(o.off(),e.listGetListener=!1),e.listLatestListener=O(`${e.DB_PATH_BA_CURRENCY_OWN}/${t.uid}`,n,{order:"key",filters:[{type:"between",start:`${s}-${a}-00`,end:`${s}-${a}-99`}]})},setGetLatestRecordListen({state:e,rootState:t},s){const{listLatestListener:a}=e;a&&(a.off(),e.listLatestListener=!1),e.listLatestListener=O(`${e.DB_PATH_BA_CURRENCY_OWN}/${t.uid}`,s,{filters:[{type:"last",value:1}]})},setGetLatestBeforeMonthListener({state:e,rootState:t},{year:s,month:a,callback:n}){const{listLatestBeforeMonthListener:o}=e;o&&(o.off(),e.listLatestBeforeMonthListener=!1),e.listLatestBeforeMonthListener=O(`${e.DB_PATH_BA_CURRENCY_OWN}/${t.uid}`,n,{order:"key",filters:[{type:"endBefore",value:`${s}-${a}-00`},{type:"last",value:1}]})}}},Lt={"ba-banner-pull":xt,"ba-currency-own":$t},Bt=We({state:{DB_PATH_USER:"/users",DB_PATH_BLUE_ARCHIVE_CURRENCY:"/blue-archive-currencies",user:!1,uid:!1},mutations:{setUser(e,t){e.user=t?{...t}:!1},setUID(e,t){e.uid=t||!1}},actions:{findUser({state:e}){return wt(`${e.DB_PATH_USER}/${e.uid}`)},setUserListen({state:e},t){vt(`${e.DB_PATH_USER}/${e.uid}`,s=>t(s))},async saveUser({state:e},t){await F(`${e.DB_PATH_USER}/${e.uid}`,t)}},modules:Lt}),Ct={},At={class:"relative shadow bg-white rounded-sm"},Dt={class:"p-3"};function St(e,t){return c(),l("div",At,[ee(e.$slots,"cover"),r("div",Dt,[ee(e.$slots,"body")])])}const T=we(Ct,[["render",St]]),Pt={class:"relative"},Ut=["src","title"],Mt=["placeholder","type","value"],Rt={__name:"Base",props:{icon:{},iconTitle:{},modelValue:{},type:{default:"text"},placeholder:{default:""},onChange:{type:Function,default(){return()=>{}}}},emits:["update:modelValue"],setup(e){return(t,s)=>(c(),l("div",Pt,[e.icon?(c(),l("img",{key:0,class:"absolute w-8 max-h-5 inset-y-0 m-auto z-10",src:e.icon,title:e.iconTitle},null,8,Ut)):E("",!0),r("input",{class:q(["w-full h-7 border-primary border-2 drop-shadow-sm focus:outline-0",{"pl-4":!e.icon,"pl-9":e.icon}]),placeholder:e.placeholder,type:e.type,value:e.modelValue,onInput:s[0]||(s[0]=a=>t.$emit("update:modelValue",a.target.value)),onChange:s[1]||(s[1]=(...a)=>e.onChange&&e.onChange(...a))},null,42,Mt)]))}},N=we(Rt,[["__scopeId","data-v-df7366c4"]]),ve={__name:"Base",props:{primary:Boolean,onClick:Function},setup(e){const t=e,s={"border-2":!t.primary,"text-white":t.primary,"bg-primary":t.primary};return(a,n)=>(c(),l("button",{class:q(["rounded w-full h-8 select-none",s]),onClick:n[0]||(n[0]=(...o)=>e.onClick&&e.onClick(...o))},[ee(a.$slots,"default")]))}},Nt={class:"w-full py-3 md:px-8 sm:px-6 px-4"},Ht={key:0},It={class:"grid grid-cols-2 gap-4"},Ot={class:"col-span-full md:col-span-1"},Tt={key:1},Yt={__name:"Main",setup(e){const t=S(),s=ae(()=>t.state.user),a=x(""),n=()=>{const{user:o}=t.state;o.ign=a,t.dispatch("saveUser",o)};return(o,i)=>{const d=ye("router-view");return c(),l("div",Nt,[s.value?(c(),l(G,{key:0},[s.value.ign?s.value.active?(c(),Je(d,{key:2})):(c(),l("div",Tt,"Please contact Minnerva to activate your account.")):(c(),l("div",Ht,[p(T,null,{body:A(()=>[r("div",It,[r("label",Ot,[te(" Input your IGN or Discord Name: "),p(N,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=u=>a.value=u)},null,8,["modelValue"])]),p(ve,{class:"col-span-full md:col-start-1 md:col-end-2","on-click":n,primary:""},{default:A(()=>[te("Submit")]),_:1})])]),_:1})]))],64)):E("",!0)])}}},fe="chart",Ft={__name:"LineChart",props:{labels:{type:Array,required:!0},data:{type:Array,required:!0}},setup(e,{expose:t}){me.register(tt,st,at,nt,ot,it);const s=e;let a=null;be(s,()=>{n()});const n=()=>{a.data.labels=s.labels,s.data.forEach((i,d)=>{a.data.datasets[d].data=i}),a.update()},o=()=>{a=new me(document.querySelector(`#${fe}`),{type:"line",data:{labels:[],datasets:[{data:[],borderColor:"#00D8FB",backgroundColor:"#FFFFFF"},{data:[],borderColor:"#FFE9F2",backgroundColor:"#FFFFFF"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},animation:{},scales:{x:{ticks:{autoSkip:!0,maxTicksLimit:10}},y:{beginAtZero:!0}}}})};return ne(()=>{o()}),t({updateChart:n}),(i,d)=>(c(),l("canvas",{id:fe}))}},Vt={class:"flex items-center"},Et=["src","title"],I={__name:"HistorySub",props:{icon:{required:!0},iconTitle:{},own:{required:!0},diff:{}},setup(e){const t=a=>{if(a>0)return"text-success";if(a<0)return"text-danger"},s=a=>`(${a>0?"+":""}${pe(a)})`;return(a,n)=>(c(),l("div",Vt,[r("img",{class:"w-8 mr-2",src:e.icon,title:e.iconTitle},null,8,Et),r("span",null,$(f(pe)(e.own)),1),e.diff&&e.diff!==0?(c(),l("span",{key:0,class:q(["ml-1 text-xs",t(e.diff)])},$(s(e.diff)),3)):E("",!0)]))}},xe="/gacha-tracker-online/assets/pyroxene-gBHgCIjf.webp",$e="/gacha-tracker-online/assets/recruitment-ticket-NiO_EDI9.webp",Le="/gacha-tracker-online/assets/icon-pulls-PmRtrI9p.png",Gt="/gacha-tracker-online/assets/icon-3-stars-unit-G8a83jjO.png",jt={class:"grid grid-cols-2 gap-3"},qt={class:"col-span-1 border-r"},Kt={class:"col-span-1"},zt={__name:"History",props:{item:{required:!0}},setup(e){const t=x(w()),s=a=>a===t.value.format("YYYY-MM-DD")?["text-primary","font-bold"]:[];return(a,n)=>(c(),l("div",jt,[r("div",{class:q(["col-span-2",s(e.item.date)])},$(e.item.date),3),r("div",qt,[p(I,{icon:f(xe),"icon-title":"Pyroxene",own:e.item.pyroxene,diff:e.item.diff_pyroxene},null,8,["icon","own","diff"]),p(I,{icon:f($e),"icon-title":"Pull Ticket",own:e.item.free_pull,diff:e.item.diff_free_pull},null,8,["icon","own","diff"])]),r("div",Kt,[p(I,{icon:f(Le),"icon-title":"Total Pull",own:f(Y)(e.item)},null,8,["icon","own"]),p(I,{icon:f(Gt),"icon-title":"Spark",own:f(kt)(f(Y)(e.item))},null,8,["icon","own"])])]))}},Wt={class:"flow-root"},Jt={class:"divide-y divide-gray-200 dark:divide-gray-700"},Zt={key:0,class:"py-3 sm:py-4"},Qt={__name:"History",props:{items:{required:!0}},setup(e){return(t,s)=>(c(),l("div",Wt,[r("ul",Jt,[!e.items||e.items.length<=0?(c(),l("li",Zt,"No record found.")):(c(!0),l(G,{key:1},ke(e.items,a=>(c(),l("li",{key:a.date,class:"py-3 sm:py-4"},[p(zt,{item:a},null,8,["item"])]))),128))])]))}};let V=[{date:"2023-09-26",duration:7,student_key:"kayoko-new-year"},{date:"2024-01-09",duration:7,student_key:"hina-swimsuit"},{date:"2024-01-09",duration:7,student_key:"iori-swimsuit"},{date:"2023-12-26",duration:14,student_key:"miyako-swimsuit"},{date:"2023-12-26",duration:14,student_key:"saki-swimsuit"},{date:"2024-01-16",duration:7,student_key:"shiroko-swimsuit"},{date:"2024-01-16",duration:7,student_key:"nonomi-swimsuit"},{date:"2024-01-16",duration:7,student_key:"wakamo-swimsuit"},{date:"2024-01-23",duration:9,student_key:"ui-swimsuit"},{date:"2024-01-23",duration:9,student_key:"hinata-swimsuit"},{date:"2024-02-01",duration:7,student_key:"hanako-swimsuit"},{date:"2024-02-15",duration:7,student_key:"mimori-swimsuit"},{date:"2024-03-16",duration:12,student_key:"haruna-tracksuit"},{date:"2024-03-16",duration:12,student_key:"yuuka-tracksuit"},{date:"2024-03-16",duration:12,student_key:"mari-tracksuit"},{date:"2024-04-18",duration:14,student_key:"misaka-mikoto"},{date:"2024-04-18",duration:14,student_key:"shokuhou-misaki"},{date:"2024-05-02",duration:8,student_key:"yukari"},{date:"2024-05-16",duration:14,student_key:"renge"},{date:"2024-05-16",duration:14,student_key:"kikyou"},{date:"2024-05-30",duration:7,student_key:"himari"},{date:"2024-06-13",duration:7,student_key:"karin-bunny"},{date:"2024-06-13",duration:7,student_key:"neru-bunny"},{date:"2024-06-13",duration:7,student_key:"akane-bunny"},{date:"2024-06-13",duration:7,student_key:"asuna-bunny"},{date:"2024-06-20",duration:14,student_key:"hare-camp"},{date:"2024-06-20",duration:14,student_key:"kotama-camp"}];V=V.map(e=>(e.key=`${e.date}-${e.student_key}`,e));V.sort((e,t)=>e.date>t.date?1:e.date<t.date?-1:0);const Xt=V,es="/gacha-tracker-online/assets/akane-bunny-icon-gfOjhgOr.webp",ts="/gacha-tracker-online/assets/asuna-bunny-icon-oF1effRe.webp",ss="/gacha-tracker-online/assets/hanako-swimsuit-icon-s2k28dzI.webp",as="/gacha-tracker-online/assets/hare-camp-icon-xHKeVTgU.webp",ns="/gacha-tracker-online/assets/haruna-tracksuit-icon-C3yJc6jX.webp",os="/gacha-tracker-online/assets/himari-icon-NnOzyjRg.webp",is="/gacha-tracker-online/assets/hina-swimsuit-icon-3-IoiTOU.webp",rs="/gacha-tracker-online/assets/hinata-swimsuit-icon-Vx2yAU8s.webp",cs="/gacha-tracker-online/assets/iori-swimsuit-icon-5HfIKnaa.webp",ls="/gacha-tracker-online/assets/karin-bunny-icon-z90yfVlX.webp",us="/gacha-tracker-online/assets/kayoko-new-year-icon-lEZ08tqZ.webp",ds="/gacha-tracker-online/assets/kikyou-icon-OCtBoToh.webp",_s="/gacha-tracker-online/assets/kotama-camp-icon-j0Rln9bx.webp",ms="/gacha-tracker-online/assets/mari-tracksuit-icon-IfCWZ2Vl.webp",ps="/gacha-tracker-online/assets/mimori-swimsuit-icon-ICDRkuj4.webp",fs="/gacha-tracker-online/assets/misaka-mikoto-icon-t-m5DYfT.webp",hs="/gacha-tracker-online/assets/miyako-swimsuit-icon-9NTUwO2x.webp",ys="/gacha-tracker-online/assets/neru-bunny-icon-QPIKLGG6.webp",gs="/gacha-tracker-online/assets/nonomi-swimsuit-icon-Yyj40vp2.webp",bs="/gacha-tracker-online/assets/renge-icon-nMq9xxcQ.webp",ks="/gacha-tracker-online/assets/saki-swimsuit-icon-y07xpALf.webp",ws="/gacha-tracker-online/assets/shiroko-swimsuit-icon-gmc76iBJ.webp",vs="/gacha-tracker-online/assets/shokuhou-misaki-icon-r8ShdIbR.webp",xs="/gacha-tracker-online/assets/ui-swimsuit-icon-Y8SkXBci.webp",$s="/gacha-tracker-online/assets/wakamo-swimsuit-icon-aFL8264u.webp",Ls="/gacha-tracker-online/assets/yukari-icon-lJbTFHeZ.webp",Bs="/gacha-tracker-online/assets/yuuka-tracksuit-icon-obYhk5gg.webp";let se=[{name:"Akane",alter:"Bunny"},{name:"Asuna",alter:"Bunny"},{name:"Hanako",alter:"Swimsuit"},{name:"Hare",alter:"Camp"},{name:"Haruna",alter:"Tracksuit"},{name:"Himari",alter:""},{name:"Hina",alter:"Swimsuit"},{name:"Hinata",alter:"Swimsuit"},{name:"Iori",alter:"Swimsuit"},{name:"Karin",alter:"Bunny"},{name:"Kayoko",alter:"New Year"},{name:"Kikyou",alter:""},{name:"Kotama",alter:"Camp"},{name:"Mari",alter:"Tracksuit"},{name:"Mimori",alter:"Swimsuit"},{name:"Misaka Mikoto",alter:""},{name:"Miyako",alter:"Swimsuit"},{name:"Neru",alter:"Bunny"},{name:"Nonomi",alter:"Swimsuit"},{name:"Renge",alter:""},{name:"Saki",alter:"Swimsuit"},{name:"Shiroko",alter:"Swimsuit"},{name:"Shokuhou Misaki",alter:""},{name:"Ui",alter:"Swimsuit"},{name:"Wakamo",alter:"Swimsuit"},{name:"Yukari",alter:""},{name:"Yuuka",alter:"Tracksuit"}];se=se.map(e=>(e.full_name=e.alter?`${e.name} (${e.alter})`:e.name,e.key=e.full_name.replace(/[()]/g,"").replace(/\s/g,"-").toLocaleLowerCase(),e.icon=new URL(Object.assign({"/src/assets/students/akane-bunny-icon.webp":es,"/src/assets/students/asuna-bunny-icon.webp":ts,"/src/assets/students/hanako-swimsuit-icon.webp":ss,"/src/assets/students/hare-camp-icon.webp":as,"/src/assets/students/haruna-tracksuit-icon.webp":ns,"/src/assets/students/himari-icon.webp":os,"/src/assets/students/hina-swimsuit-icon.webp":is,"/src/assets/students/hinata-swimsuit-icon.webp":rs,"/src/assets/students/iori-swimsuit-icon.webp":cs,"/src/assets/students/karin-bunny-icon.webp":ls,"/src/assets/students/kayoko-new-year-icon.webp":us,"/src/assets/students/kikyou-icon.webp":ds,"/src/assets/students/kotama-camp-icon.webp":_s,"/src/assets/students/mari-tracksuit-icon.webp":ms,"/src/assets/students/mimori-swimsuit-icon.webp":ps,"/src/assets/students/misaka-mikoto-icon.webp":fs,"/src/assets/students/miyako-swimsuit-icon.webp":hs,"/src/assets/students/neru-bunny-icon.webp":ys,"/src/assets/students/nonomi-swimsuit-icon.webp":gs,"/src/assets/students/renge-icon.webp":bs,"/src/assets/students/saki-swimsuit-icon.webp":ks,"/src/assets/students/shiroko-swimsuit-icon.webp":ws,"/src/assets/students/shokuhou-misaki-icon.webp":vs,"/src/assets/students/ui-swimsuit-icon.webp":xs,"/src/assets/students/wakamo-swimsuit-icon.webp":$s,"/src/assets/students/yukari-icon.webp":Ls,"/src/assets/students/yuuka-tracksuit-icon.webp":Bs})[`/src/assets/students/${e.key}-icon.webp`],import.meta.url).href,e));const Cs=se,As={class:"grid grid-cols-10 gap-3 md:items-center"},Ds={class:"col-span-2 lg:col-span-2"},Ss=["src","title"],Ps={class:"col-span-8 lg:col-span-8"},Us={__name:"Banner",props:{item:{required:!0},bannerPull:{}},setup(e){const t=e,s=S(),a=x(null),n=bt(Cs,{key:t.item.student_key});be(t,()=>{o()});const o=()=>{const u=s.getters["ba-banner-pull/find"](t.item.key);a.value=u?u.pull:null},i=()=>t.item.diff<=0?" - Live":` - ${t.item.diff} days`,d=()=>{const{item:u}=t,h=u.key;!a.value||a.value<=0?(s.dispatch("ba-banner-pull/delete",h),a.value=null):s.dispatch("ba-banner-pull/save",{key:h,data:{date:u.date,student_key:u.student_key,pull:a.value}})};return ne(()=>{o()}),(u,h)=>(c(),l("div",As,[r("div",Ds,[r("img",{src:f(n).icon,title:f(n).full_name},null,8,Ss)]),r("div",Ps,[r("div",null,$(e.item.date)+$(i()),1),r("div",null,$(f(n).full_name),1),r("div",null,[p(N,{modelValue:a.value,"onUpdate:modelValue":h[0]||(h[0]=B=>a.value=B),modelModifiers:{number:!0},placeholder:"200",icon:f(Le),"icon-title":"Pull",type:"number","on-change":d},null,8,["modelValue","icon"])])])]))}},Ms={class:"flow-root"},Rs={class:"divide-y divide-gray-200 dark:divide-gray-700"},Ns={key:0,class:"py-3 sm:py-4"},Hs={__name:"Banner",setup(e){const t=S(),s=ae(()=>t.state["ba-banner-pull"].banner_pull),a=D(w().format("YYYY-MM-DD")),n=Xt.map(o=>{const i=D(o.date);return o.diff=i.diff(a,"day"),o}).filter(o=>o.diff>o.duration*-1);return(o,i)=>(c(),l("div",Ms,[r("ul",Rs,[f(n).length<=0?(c(),l("li",Ns,"No banner found.")):(c(!0),l(G,{key:1},ke(f(n),d=>(c(),l("li",{key:d.key,class:"py-3 sm:py-4"},[p(Us,{item:d,"banner-pull":s.value[d.key]},null,8,["item","banner-pull"])]))),128))])]))}},Is="data:image/svg+xml,%3c!--%20https://fontawesome.com/icons/chevron-left?f=classic&s=solid%20--%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='16'%20width='10'%20viewBox='0%200%20320%20512'%3e%3c!--!Font%20Awesome%20Free%206.5.1%20by%20@fontawesome%20-%20https://fontawesome.com%20License%20-%20https://fontawesome.com/license/free%20Copyright%202023%20Fonticons,%20Inc.--%3e%3cpath%20d='M9.4%20233.4c-12.5%2012.5-12.5%2032.8%200%2045.3l192%20192c12.5%2012.5%2032.8%2012.5%2045.3%200s12.5-32.8%200-45.3L77.3%20256%20246.6%2086.6c12.5-12.5%2012.5-32.8%200-45.3s-32.8-12.5-45.3%200l-192%20192z'/%3e%3c/svg%3e",Os="data:image/svg+xml,%3c!--%20https://fontawesome.com/icons/chevron-right?f=classic&s=solid%20--%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='16'%20width='10'%20viewBox='0%200%20320%20512'%3e%3c!--!Font%20Awesome%20Free%206.5.1%20by%20@fontawesome%20-%20https://fontawesome.com%20License%20-%20https://fontawesome.com/license/free%20Copyright%202023%20Fonticons,%20Inc.--%3e%3cpath%20d='M310.6%20233.4c12.5%2012.5%2012.5%2032.8%200%2045.3l-192%20192c-12.5%2012.5-32.8%2012.5-45.3%200s-12.5-32.8%200-45.3L242.7%20256%2073.4%2086.6c-12.5-12.5-12.5-32.8%200-45.3s32.8-12.5%2045.3%200l192%20192z'/%3e%3c/svg%3e",Ts="data:image/svg+xml,%3c!--%20https://fontawesome.com/icons/calendar?f=classic&s=regular&pc=%252300d8fb%20--%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='16'%20width='14'%20viewBox='0%200%20448%20512'%3e%3c!--!Font%20Awesome%20Free%206.5.1%20by%20@fontawesome%20-%20https://fontawesome.com%20License%20-%20https://fontawesome.com/license/free%20Copyright%202023%20Fonticons,%20Inc.--%3e%3cpath%20fill='%2300d8fb'%20d='M152%2024c0-13.3-10.7-24-24-24s-24%2010.7-24%2024V64H64C28.7%2064%200%2092.7%200%20128v16%2048V448c0%2035.3%2028.7%2064%2064%2064H384c35.3%200%2064-28.7%2064-64V192%20144%20128c0-35.3-28.7-64-64-64H344V24c0-13.3-10.7-24-24-24s-24%2010.7-24%2024V64H152V24zM48%20192H400V448c0%208.8-7.2%2016-16%2016H64c-8.8%200-16-7.2-16-16V192z'/%3e%3c/svg%3e",Ys="/gacha-tracker-online/assets/arona-head-5uMSPBb2.png",Fs="/gacha-tracker-online/assets/mika-portrait-iOc64siT.webp",Vs={class:"grid grid-cols-7 gap-4"},Es={class:"col-span-full md:col-span-5"},Gs={class:"flex justify-center text-center"},js=["src"],qs={class:"mx-4 text-xl md:text-3xl font-bold"},Ks=["src"],zs={class:"flex justify-center"},Ws={class:"w-full h-72"},Js=r("div",{class:"mb-3 text-md md:text-xl font-bold"},"Add",-1),Zs={class:"grid grid-cols-4 gap-4"},Qs={class:"col-span-full"},Xs={class:"col-span-2"},ea={class:"col-span-2"},ta={class:"col-span-full md:col-start-2 md:col-end-4 mt-4"},sa=["src"],aa=r("div",{class:"text-md0 md:text-xl font-bold"},"History",-1),na=r("div",{class:"text-md0 md:text-xl font-bold"},"Upcoming Banners",-1),oa={class:"col-span-full md:col-span-1 xl:col-span-2 grid items-center content-end"},ia={class:"text-center"},ra=["src"],he=12e3/30,ca={__name:"Index",setup(e){const t=S(),s=x(w()),a=x([]),n=x([]),o=w().year(),i=w().month()+1,d=w().date(),u=x({date:"",pyroxene:0,free_pull:0}),h=Ze({day:`${o}-${i}-${d}`,pyroxene:void 0,free_pull:void 0}),B=x({labels:[],data:[]}),Be=()=>{t.dispatch("ba-currency-own/setGetLatestRecordListen",_=>{if(_){const m=Object.keys(_);m.length>0&&(u.value={date:m[0],..._[m[0]]})}})},Ce=(_,m)=>{t.dispatch("ba-currency-own/setGetLatestBeforeMonthListener",{year:_,month:m,callback:y=>{const k=[];let b=[],P=0;a.value&&(b=Object.keys(a.value),b.reverse(),P=b.length);for(let g=0;g<P;g++){const L=a.value[b[g]];let v=a.value[b[g+1]];const U={date:b[g],pyroxene:L.pyroxene,free_pull:L.free_pull,diff_pyroxene:null,diff_free_pull:null};!v&&y&&(v=y[Object.keys(y)[0]]),v&&(U.diff_pyroxene=L.pyroxene-v.pyroxene,U.diff_free_pull=L.free_pull-v.free_pull),k.push(U)}n.value=k}})},oe=(_,m)=>{t.dispatch("ba-currency-own/setGetRecordsListen",{year:_,month:m,callback:y=>{a.value=y,re(),Ce(_,m)}})},Ae=()=>{t.dispatch("ba-banner-pull/setGetUpcomingRecordsListen",_=>{t.commit("ba-banner-pull/setBannerPull",_)})},ie=_=>{s.value=_,oe(_.year(),_.month()+1)},De=()=>{const _=s.value.add(-1,"month").startOf("month");ie(_)},Se=()=>{const _=s.value.add(1,"month").startOf("month");ie(_)},Pe=async()=>{const _=D(h.day),m={pyroxene:h.pyroxene,free_pull:h.free_pull};isNaN(m.pyroxene)&&(m.pyroxene=u.value?u.value.pyroxene:0),isNaN(m.free_pull)&&(m.free_pull=u.value?u.value.free_pull:0),t.dispatch("ba-currency-own/save",{key:_.format("YYYY-MM-DD"),data:m}),h.pyroxene=void 0,h.free_pull=void 0,re()},re=()=>{const _=[],m=[],y=[],k=u.value?D(u.value.date):!1;k&&k.startOf("month");const b=t.state["ba-banner-pull"].banner_pull,P=Object.keys(b);let g=!1,L=!1;const v=s.value.startOf("month"),U=s.value.endOf("month"),Ue=v.diff(U,"day")*-1+1;for(let K=0;K<Ue;K++){const M=v.add(K,"day"),ce=M.format("YYYY-MM-DD"),z=a.value?a.value[ce]:!1;let le=null,ue=null;if(z&&(le=Y({pyroxene:z.pyroxene,free_pull:z.free_pull})),k){const de=k.diff(M,"day");de<=0&&(g===!1?g=de*-1*he+u.value.pyroxene:g+=he,b&&(L||(P.forEach(W=>{const R=b[W],C=D(R.date),J=C.diff(k,"day"),Z=C.startOf("month"),Q=M.startOf("month"),Me=Z.diff(Q,"month");J>0&&Me<0&&(g-=R.pull*120)}),L=!0),P.forEach(W=>{const R=b[W],C=D(R.date),J=C.diff(k,"day"),Z=C.diff(M,"day"),Q=C.diff(M,"month");J>0&&Q===0&&Z===0&&(g-=R.pull*120)})),ue=Y({pyroxene:g,free_pull:u.value.free_pull}))}_.push(ce),m.push(le),y.push(ue)}B.value.labels=_,B.value.data=[m,y]};return ne(()=>{Be(),Ae(),oe(o,i)}),(_,m)=>(c(),l("div",Vs,[r("div",Es,[r("div",Gs,[r("img",{src:f(Is),class:"cursor-pointer select-none",onClick:De},null,8,js),r("span",qs,$(s.value.format("YYYY-MM")),1),r("img",{src:f(Os),class:"cursor-pointer select-none",onClick:Se},null,8,Ks)]),r("div",zs,[r("div",Ws,[p(Ft,{labels:B.value.labels,data:B.value.data},null,8,["labels","data"])])])]),p(T,{class:"col-span-full md:col-span-2"},{body:A(()=>[Js,r("div",Zs,[r("div",Qs,[p(N,{modelValue:h.day,"onUpdate:modelValue":m[0]||(m[0]=y=>h.day=y),icon:f(Ts),"icon-title":"Date",type:"date"},null,8,["modelValue","icon"])]),r("div",Xs,[p(N,{modelValue:h.pyroxene,"onUpdate:modelValue":m[1]||(m[1]=y=>h.pyroxene=y),modelModifiers:{number:!0},placeholder:u.value.pyroxene,icon:f(xe),"icon-title":"Pyroxene",type:"number"},null,8,["modelValue","placeholder","icon"])]),r("div",ea,[p(N,{modelValue:h.free_pull,"onUpdate:modelValue":m[2]||(m[2]=y=>h.free_pull=y),modelModifiers:{number:!0},placeholder:u.value.free_pull,icon:f($e),"icon-title":"Free Pull",type:"number"},null,8,["modelValue","placeholder","icon"])]),r("div",ta,[p(ve,{"on-click":Pe,primary:""},{default:A(()=>[te(" Save ")]),_:1})])]),r("img",{src:f(Ys),class:"h-32 mt-4 md:mt-0 md:absolute bottom-0 inset-x-0 m-auto"},null,8,sa)]),_:1}),p(T,{class:"h-72 col-span-full overflow-auto md:col-span-3"},{body:A(()=>[aa,p(Qt,{items:n.value},null,8,["items"])]),_:1}),p(T,{class:"max-h-72 col-span-full overflow-auto md:col-span-3 xl:col-span-2"},{body:A(()=>[na,p(Hs)]),_:1}),r("div",oa,[r("div",ia,[r("img",{class:"inline-block max-w-36",src:f(Fs),title:"My Wife!!!"},null,8,ra)])])]))}},la=Qe({history:Xe(),routes:[{path:yt(""),component:Yt,children:[{path:"",component:ca}]}]});et(ht).use(Bt).use(la).mount("#app");
