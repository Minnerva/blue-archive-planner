var zy=Object.defineProperty;var Vy=(t,e,n)=>e in t?zy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Z=(t,e,n)=>(Vy(t,typeof e!="symbol"?e+"":e,n),n);function rl(t,e){const n=Object.create(null),i=t.split(",");for(let s=0;s<i.length;s++)n[i[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const Oe={},Pi=[],jt=()=>{},Ky=()=>!1,Wo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ol=t=>t.startsWith("onUpdate:"),qe=Object.assign,al=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},qy=Object.prototype.hasOwnProperty,he=(t,e)=>qy.call(t,e),te=Array.isArray,Mi=t=>jo(t)==="[object Map]",dp=t=>jo(t)==="[object Set]",re=t=>typeof t=="function",je=t=>typeof t=="string",ts=t=>typeof t=="symbol",Me=t=>t!==null&&typeof t=="object",fp=t=>(Me(t)||re(t))&&re(t.then)&&re(t.catch),pp=Object.prototype.toString,jo=t=>pp.call(t),Gy=t=>jo(t).slice(8,-1),gp=t=>jo(t)==="[object Object]",cl=t=>je(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Gr=rl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),zo=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Yy=/-(\w)/g,qt=zo(t=>t.replace(Yy,(e,n)=>n?n.toUpperCase():"")),Xy=/\B([A-Z])/g,ns=zo(t=>t.replace(Xy,"-$1").toLowerCase()),Vo=zo(t=>t.charAt(0).toUpperCase()+t.slice(1)),ya=zo(t=>t?`on${Vo(t)}`:""),ci=(t,e)=>!Object.is(t,e),ba=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},so=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Qy=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Fu;const ac=()=>Fu||(Fu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ll(t){if(te(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],s=je(i)?tb(i):ll(i);if(s)for(const r in s)e[r]=s[r]}return e}else if(je(t)||Me(t))return t}const Jy=/;(?![^(]*\))/g,Zy=/:([^]+)/,eb=/\/\*[^]*?\*\//g;function tb(t){const e={};return t.replace(eb,"").split(Jy).forEach(n=>{if(n){const i=n.split(Zy);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function ul(t){let e="";if(je(t))e=t;else if(te(t))for(let n=0;n<t.length;n++){const i=ul(t[n]);i&&(e+=i+" ")}else if(Me(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const nb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ib=rl(nb);function mp(t){return!!t||t===""}const $M=t=>je(t)?t:t==null?"":te(t)||Me(t)&&(t.toString===pp||!re(t.toString))?JSON.stringify(t,_p,2):String(t),_p=(t,e)=>e&&e.__v_isRef?_p(t,e.value):Mi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,s],r)=>(n[va(i,r)+" =>"]=s,n),{})}:dp(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>va(n))}:ts(e)?va(e):Me(e)&&!te(e)&&!gp(e)?String(e):e,va=(t,e="")=>{var n;return ts(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let It;class sb{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=It,!e&&It&&(this.index=(It.scopes||(It.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=It;try{return It=this,e()}finally{It=n}}}on(){It=this}off(){It=this.parent}stop(e){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function rb(t,e=It){e&&e.active&&e.effects.push(t)}function ob(){return It}const hl=t=>{const e=new Set(t);return e.w=0,e.n=0,e},yp=t=>(t.w&Nn)>0,bp=t=>(t.n&Nn)>0,ab=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Nn},cb=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const s=e[i];yp(s)&&!bp(s)?s.delete(t):e[n++]=s,s.w&=~Nn,s.n&=~Nn}e.length=n}},cc=new WeakMap;let Cs=0,Nn=1;const lc=30;let Et;const ii=Symbol(""),uc=Symbol("");class dl{constructor(e,n=null,i){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,rb(this,i)}run(){if(!this.active)return this.fn();let e=Et,n=kn;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Et,Et=this,kn=!0,Nn=1<<++Cs,Cs<=lc?ab(this):$u(this),this.fn()}finally{Cs<=lc&&cb(this),Nn=1<<--Cs,Et=this.parent,kn=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Et===this?this.deferStop=!0:this.active&&($u(this),this.onStop&&this.onStop(),this.active=!1)}}function $u(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let kn=!0;const vp=[];function is(){vp.push(kn),kn=!1}function ss(){const t=vp.pop();kn=t===void 0?!0:t}function rt(t,e,n){if(kn&&Et){let i=cc.get(t);i||cc.set(t,i=new Map);let s=i.get(n);s||i.set(n,s=hl()),wp(s)}}function wp(t,e){let n=!1;Cs<=lc?bp(t)||(t.n|=Nn,n=!yp(t)):n=!t.has(Et),n&&(t.add(Et),Et.deps.push(t))}function ln(t,e,n,i,s,r){const o=cc.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&te(t)){const c=Number(i);o.forEach((l,u)=>{(u==="length"||!ts(u)&&u>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":te(t)?cl(n)&&a.push(o.get("length")):(a.push(o.get(ii)),Mi(t)&&a.push(o.get(uc)));break;case"delete":te(t)||(a.push(o.get(ii)),Mi(t)&&a.push(o.get(uc)));break;case"set":Mi(t)&&a.push(o.get(ii));break}if(a.length===1)a[0]&&hc(a[0]);else{const c=[];for(const l of a)l&&c.push(...l);hc(hl(c))}}function hc(t,e){const n=te(t)?t:[...t];for(const i of n)i.computed&&Bu(i);for(const i of n)i.computed||Bu(i)}function Bu(t,e){(t!==Et||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const lb=rl("__proto__,__v_isRef,__isVue"),Ip=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ts)),Uu=ub();function ub(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=_e(this);for(let r=0,o=this.length;r<o;r++)rt(i,"get",r+"");const s=i[e](...n);return s===-1||s===!1?i[e](...n.map(_e)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){is();const i=_e(this)[e].apply(this,n);return ss(),i}}),t}function hb(t){const e=_e(this);return rt(e,"has",t),e.hasOwnProperty(t)}class Sp{constructor(e=!1,n=!1){this._isReadonly=e,this._shallow=n}get(e,n,i){const s=this._isReadonly,r=this._shallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return i===(s?r?Eb:xp:r?Tp:Cp).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=te(e);if(!s){if(o&&he(Uu,n))return Reflect.get(Uu,n,i);if(n==="hasOwnProperty")return hb}const a=Reflect.get(e,n,i);return(ts(n)?Ip.has(n):lb(n))||(s||rt(e,"get",n),r)?a:ot(a)?o&&cl(n)?a:a.value:Me(a)?s?Ap(a):ur(a):a}}class Ep extends Sp{constructor(e=!1){super(!1,e)}set(e,n,i,s){let r=e[n];if(!this._shallow){const c=ji(r);if(!ro(i)&&!ji(i)&&(r=_e(r),i=_e(i)),!te(e)&&ot(r)&&!ot(i))return c?!1:(r.value=i,!0)}const o=te(e)&&cl(n)?Number(n)<e.length:he(e,n),a=Reflect.set(e,n,i,s);return e===_e(s)&&(o?ci(i,r)&&ln(e,"set",n,i):ln(e,"add",n,i)),a}deleteProperty(e,n){const i=he(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&i&&ln(e,"delete",n,void 0),s}has(e,n){const i=Reflect.has(e,n);return(!ts(n)||!Ip.has(n))&&rt(e,"has",n),i}ownKeys(e){return rt(e,"iterate",te(e)?"length":ii),Reflect.ownKeys(e)}}class db extends Sp{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const fb=new Ep,pb=new db,gb=new Ep(!0),fl=t=>t,Ko=t=>Reflect.getPrototypeOf(t);function wr(t,e,n=!1,i=!1){t=t.__v_raw;const s=_e(t),r=_e(e);n||(ci(e,r)&&rt(s,"get",e),rt(s,"get",r));const{has:o}=Ko(s),a=i?fl:n?ml:Vs;if(o.call(s,e))return a(t.get(e));if(o.call(s,r))return a(t.get(r));t!==s&&t.get(e)}function Ir(t,e=!1){const n=this.__v_raw,i=_e(n),s=_e(t);return e||(ci(t,s)&&rt(i,"has",t),rt(i,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Sr(t,e=!1){return t=t.__v_raw,!e&&rt(_e(t),"iterate",ii),Reflect.get(t,"size",t)}function Hu(t){t=_e(t);const e=_e(this);return Ko(e).has.call(e,t)||(e.add(t),ln(e,"add",t,t)),this}function Wu(t,e){e=_e(e);const n=_e(this),{has:i,get:s}=Ko(n);let r=i.call(n,t);r||(t=_e(t),r=i.call(n,t));const o=s.call(n,t);return n.set(t,e),r?ci(e,o)&&ln(n,"set",t,e):ln(n,"add",t,e),this}function ju(t){const e=_e(this),{has:n,get:i}=Ko(e);let s=n.call(e,t);s||(t=_e(t),s=n.call(e,t)),i&&i.call(e,t);const r=e.delete(t);return s&&ln(e,"delete",t,void 0),r}function zu(){const t=_e(this),e=t.size!==0,n=t.clear();return e&&ln(t,"clear",void 0,void 0),n}function Er(t,e){return function(i,s){const r=this,o=r.__v_raw,a=_e(o),c=e?fl:t?ml:Vs;return!t&&rt(a,"iterate",ii),o.forEach((l,u)=>i.call(s,c(l),c(u),r))}}function Cr(t,e,n){return function(...i){const s=this.__v_raw,r=_e(s),o=Mi(r),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=s[t](...i),u=n?fl:e?ml:Vs;return!e&&rt(r,"iterate",c?uc:ii),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function mn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function mb(){const t={get(r){return wr(this,r)},get size(){return Sr(this)},has:Ir,add:Hu,set:Wu,delete:ju,clear:zu,forEach:Er(!1,!1)},e={get(r){return wr(this,r,!1,!0)},get size(){return Sr(this)},has:Ir,add:Hu,set:Wu,delete:ju,clear:zu,forEach:Er(!1,!0)},n={get(r){return wr(this,r,!0)},get size(){return Sr(this,!0)},has(r){return Ir.call(this,r,!0)},add:mn("add"),set:mn("set"),delete:mn("delete"),clear:mn("clear"),forEach:Er(!0,!1)},i={get(r){return wr(this,r,!0,!0)},get size(){return Sr(this,!0)},has(r){return Ir.call(this,r,!0)},add:mn("add"),set:mn("set"),delete:mn("delete"),clear:mn("clear"),forEach:Er(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=Cr(r,!1,!1),n[r]=Cr(r,!0,!1),e[r]=Cr(r,!1,!0),i[r]=Cr(r,!0,!0)}),[t,n,e,i]}const[_b,yb,bb,vb]=mb();function pl(t,e){const n=e?t?vb:bb:t?yb:_b;return(i,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?i:Reflect.get(he(n,s)&&s in i?n:i,s,r)}const wb={get:pl(!1,!1)},Ib={get:pl(!1,!0)},Sb={get:pl(!0,!1)},Cp=new WeakMap,Tp=new WeakMap,xp=new WeakMap,Eb=new WeakMap;function Cb(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Tb(t){return t.__v_skip||!Object.isExtensible(t)?0:Cb(Gy(t))}function ur(t){return ji(t)?t:gl(t,!1,fb,wb,Cp)}function kp(t){return gl(t,!1,gb,Ib,Tp)}function Ap(t){return gl(t,!0,pb,Sb,xp)}function gl(t,e,n,i,s){if(!Me(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=s.get(t);if(r)return r;const o=Tb(t);if(o===0)return t;const a=new Proxy(t,o===2?i:n);return s.set(t,a),a}function Di(t){return ji(t)?Di(t.__v_raw):!!(t&&t.__v_isReactive)}function ji(t){return!!(t&&t.__v_isReadonly)}function ro(t){return!!(t&&t.__v_isShallow)}function Rp(t){return Di(t)||ji(t)}function _e(t){const e=t&&t.__v_raw;return e?_e(e):t}function Op(t){return so(t,"__v_skip",!0),t}const Vs=t=>Me(t)?ur(t):t,ml=t=>Me(t)?Ap(t):t;function Pp(t){kn&&Et&&(t=_e(t),wp(t.dep||(t.dep=hl())))}function Mp(t,e){t=_e(t);const n=t.dep;n&&hc(n)}function ot(t){return!!(t&&t.__v_isRef===!0)}function xb(t){return Dp(t,!1)}function kb(t){return Dp(t,!0)}function Dp(t,e){return ot(t)?t:new Ab(t,e)}class Ab{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:_e(e),this._value=n?e:Vs(e)}get value(){return Pp(this),this._value}set value(e){const n=this.__v_isShallow||ro(e)||ji(e);e=n?e:_e(e),ci(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Vs(e),Mp(this))}}function Ni(t){return ot(t)?t.value:t}const Rb={get:(t,e,n)=>Ni(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const s=t[e];return ot(s)&&!ot(n)?(s.value=n,!0):Reflect.set(t,e,n,i)}};function Np(t){return Di(t)?t:new Proxy(t,Rb)}class Ob{constructor(e,n,i,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new dl(e,()=>{this._dirty||(this._dirty=!0,Mp(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const e=_e(this);return Pp(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Pb(t,e,n=!1){let i,s;const r=re(t);return r?(i=t,s=jt):(i=t.get,s=t.set),new Ob(i,s,r||!s,n)}function An(t,e,n,i){let s;try{s=i?t(...i):t()}catch(r){qo(r,e,n)}return s}function Ot(t,e,n,i){if(re(t)){const r=An(t,e,n,i);return r&&fp(r)&&r.catch(o=>{qo(o,e,n)}),r}const s=[];for(let r=0;r<t.length;r++)s.push(Ot(t[r],e,n,i));return s}function qo(t,e,n,i=!0){const s=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,a=n;for(;r;){const l=r.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](t,o,a)===!1)return}r=r.parent}const c=e.appContext.config.errorHandler;if(c){An(c,null,10,[t,o,a]);return}}Mb(t,n,s,i)}function Mb(t,e,n,i=!0){console.error(t)}let Ks=!1,dc=!1;const Ye=[];let Ht=0;const Li=[];let tn=null,Xn=0;const Lp=Promise.resolve();let _l=null;function Fp(t){const e=_l||Lp;return t?e.then(this?t.bind(this):t):e}function Db(t){let e=Ht+1,n=Ye.length;for(;e<n;){const i=e+n>>>1,s=Ye[i],r=qs(s);r<t||r===t&&s.pre?e=i+1:n=i}return e}function yl(t){(!Ye.length||!Ye.includes(t,Ks&&t.allowRecurse?Ht+1:Ht))&&(t.id==null?Ye.push(t):Ye.splice(Db(t.id),0,t),$p())}function $p(){!Ks&&!dc&&(dc=!0,_l=Lp.then(Up))}function Nb(t){const e=Ye.indexOf(t);e>Ht&&Ye.splice(e,1)}function Lb(t){te(t)?Li.push(...t):(!tn||!tn.includes(t,t.allowRecurse?Xn+1:Xn))&&Li.push(t),$p()}function Vu(t,e,n=Ks?Ht+1:0){for(;n<Ye.length;n++){const i=Ye[n];if(i&&i.pre){if(t&&i.id!==t.uid)continue;Ye.splice(n,1),n--,i()}}}function Bp(t){if(Li.length){const e=[...new Set(Li)];if(Li.length=0,tn){tn.push(...e);return}for(tn=e,tn.sort((n,i)=>qs(n)-qs(i)),Xn=0;Xn<tn.length;Xn++)tn[Xn]();tn=null,Xn=0}}const qs=t=>t.id==null?1/0:t.id,Fb=(t,e)=>{const n=qs(t)-qs(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Up(t){dc=!1,Ks=!0,Ye.sort(Fb);try{for(Ht=0;Ht<Ye.length;Ht++){const e=Ye[Ht];e&&e.active!==!1&&An(e,null,14)}}finally{Ht=0,Ye.length=0,Bp(),Ks=!1,_l=null,(Ye.length||Li.length)&&Up()}}function $b(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||Oe;let s=n;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=i[u]||Oe;d&&(s=n.map(f=>je(f)?f.trim():f)),h&&(s=n.map(Qy))}let a,c=i[a=ya(e)]||i[a=ya(qt(e))];!c&&r&&(c=i[a=ya(ns(e))]),c&&Ot(c,t,6,s);const l=i[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ot(l,t,6,s)}}function Hp(t,e,n=!1){const i=e.emitsCache,s=i.get(t);if(s!==void 0)return s;const r=t.emits;let o={},a=!1;if(!re(t)){const c=l=>{const u=Hp(l,e,!0);u&&(a=!0,qe(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!r&&!a?(Me(t)&&i.set(t,null),null):(te(r)?r.forEach(c=>o[c]=null):qe(o,r),Me(t)&&i.set(t,o),o)}function Go(t,e){return!t||!Wo(e)?!1:(e=e.slice(2).replace(/Once$/,""),he(t,e[0].toLowerCase()+e.slice(1))||he(t,ns(e))||he(t,e))}let xt=null,Wp=null;function oo(t){const e=xt;return xt=t,Wp=t&&t.type.__scopeId||null,e}function Bb(t,e=xt,n){if(!e||t._n)return t;const i=(...s)=>{i._d&&nh(-1);const r=oo(e);let o;try{o=t(...s)}finally{oo(r),i._d&&nh(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function wa(t){const{type:e,vnode:n,proxy:i,withProxy:s,props:r,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:d,setupState:f,ctx:p,inheritAttrs:_}=t;let y,v;const w=oo(t);try{if(n.shapeFlag&4){const E=s||i,x=E;y=Ut(u.call(x,E,h,r,f,d,p)),v=c}else{const E=e;y=Ut(E.length>1?E(r,{attrs:c,slots:a,emit:l}):E(r,null)),v=e.props?c:Ub(c)}}catch(E){Os.length=0,qo(E,t,1),y=At(Gs)}let R=y;if(v&&_!==!1){const E=Object.keys(v),{shapeFlag:x}=R;E.length&&x&7&&(o&&E.some(ol)&&(v=Hb(v,o)),R=zi(R,v))}return n.dirs&&(R=zi(R),R.dirs=R.dirs?R.dirs.concat(n.dirs):n.dirs),n.transition&&(R.transition=n.transition),y=R,oo(w),y}const Ub=t=>{let e;for(const n in t)(n==="class"||n==="style"||Wo(n))&&((e||(e={}))[n]=t[n]);return e},Hb=(t,e)=>{const n={};for(const i in t)(!ol(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function Wb(t,e,n){const{props:i,children:s,component:r}=t,{props:o,children:a,patchFlag:c}=e,l=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return i?Ku(i,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==i[d]&&!Go(l,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Ku(i,o,l):!0:!!o;return!1}function Ku(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==t[r]&&!Go(n,r))return!0}return!1}function jb({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const jp="components";function BM(t,e){return Vb(jp,t,!0,e)||t}const zb=Symbol.for("v-ndc");function Vb(t,e,n=!0,i=!1){const s=xt||Ve;if(s){const r=s.type;if(t===jp){const a=$v(r,!1);if(a&&(a===e||a===qt(e)||a===Vo(qt(e))))return r}const o=qu(s[t]||r[t],e)||qu(s.appContext[t],e);return!o&&i?r:o}}function qu(t,e){return t&&(t[e]||t[qt(e)]||t[Vo(qt(e))])}const Kb=t=>t.__isSuspense;function qb(t,e){e&&e.pendingBranch?te(t)?e.effects.push(...t):e.effects.push(t):Lb(t)}const Tr={};function Fi(t,e,n){return zp(t,e,n)}function zp(t,e,{immediate:n,deep:i,flush:s,onTrack:r,onTrigger:o}=Oe){var a;const c=ob()===((a=Ve)==null?void 0:a.scope)?Ve:null;let l,u=!1,h=!1;if(ot(t)?(l=()=>t.value,u=ro(t)):Di(t)?(l=()=>t,i=!0):te(t)?(h=!0,u=t.some(E=>Di(E)||ro(E)),l=()=>t.map(E=>{if(ot(E))return E.value;if(Di(E))return Ri(E);if(re(E))return An(E,c,2)})):re(t)?e?l=()=>An(t,c,2):l=()=>{if(!(c&&c.isUnmounted))return d&&d(),Ot(t,c,3,[f])}:l=jt,e&&i){const E=l;l=()=>Ri(E())}let d,f=E=>{d=w.onStop=()=>{An(E,c,4),d=w.onStop=void 0}},p;if(Xs)if(f=jt,e?n&&Ot(e,c,3,[l(),h?[]:void 0,f]):l(),s==="sync"){const E=Hv();p=E.__watcherHandles||(E.__watcherHandles=[])}else return jt;let _=h?new Array(t.length).fill(Tr):Tr;const y=()=>{if(w.active)if(e){const E=w.run();(i||u||(h?E.some((x,H)=>ci(x,_[H])):ci(E,_)))&&(d&&d(),Ot(e,c,3,[E,_===Tr?void 0:h&&_[0]===Tr?[]:_,f]),_=E)}else w.run()};y.allowRecurse=!!e;let v;s==="sync"?v=y:s==="post"?v=()=>et(y,c&&c.suspense):(y.pre=!0,c&&(y.id=c.uid),v=()=>yl(y));const w=new dl(l,v);e?n?y():_=w.run():s==="post"?et(w.run.bind(w),c&&c.suspense):w.run();const R=()=>{w.stop(),c&&c.scope&&al(c.scope.effects,w)};return p&&p.push(R),R}function Gb(t,e,n){const i=this.proxy,s=je(t)?t.includes(".")?Vp(i,t):()=>i[t]:t.bind(i,i);let r;re(e)?r=e:(r=e.handler,n=e);const o=Ve;Vi(this);const a=zp(s,r.bind(i),n);return o?Vi(o):si(),a}function Vp(t,e){const n=e.split(".");return()=>{let i=t;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}function Ri(t,e){if(!Me(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ot(t))Ri(t.value,e);else if(te(t))for(let n=0;n<t.length;n++)Ri(t[n],e);else if(dp(t)||Mi(t))t.forEach(n=>{Ri(n,e)});else if(gp(t))for(const n in t)Ri(t[n],e);return t}function Bn(t,e,n,i){const s=t.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let c=a.dir[i];c&&(is(),Ot(c,n,8,[t.el,a,t,e]),ss())}}/*! #__NO_SIDE_EFFECTS__ */function Kp(t,e){return re(t)?qe({name:t.name},e,{setup:t}):t}const Yr=t=>!!t.type.__asyncLoader,qp=t=>t.type.__isKeepAlive;function Yb(t,e){Gp(t,"a",e)}function Xb(t,e){Gp(t,"da",e)}function Gp(t,e,n=Ve){const i=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Yo(e,i,n),n){let s=n.parent;for(;s&&s.parent;)qp(s.parent.vnode)&&Qb(i,e,n,s),s=s.parent}}function Qb(t,e,n,i){const s=Yo(e,t,i,!0);Yp(()=>{al(i[e],s)},n)}function Yo(t,e,n=Ve,i=!1){if(n){const s=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;is(),Vi(n);const a=Ot(e,n,t,o);return si(),ss(),a});return i?s.unshift(r):s.push(r),r}}const pn=t=>(e,n=Ve)=>(!Xs||t==="sp")&&Yo(t,(...i)=>e(...i),n),Jb=pn("bm"),Zb=pn("m"),ev=pn("bu"),tv=pn("u"),nv=pn("bum"),Yp=pn("um"),iv=pn("sp"),sv=pn("rtg"),rv=pn("rtc");function ov(t,e=Ve){Yo("ec",t,e)}const fc=t=>t?og(t)?Sl(t)||t.proxy:fc(t.parent):null,Rs=qe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>fc(t.parent),$root:t=>fc(t.root),$emit:t=>t.emit,$options:t=>bl(t),$forceUpdate:t=>t.f||(t.f=()=>yl(t.update)),$nextTick:t=>t.n||(t.n=Fp.bind(t.proxy)),$watch:t=>Gb.bind(t)}),Ia=(t,e)=>t!==Oe&&!t.__isScriptSetup&&he(t,e),av={get({_:t},e){const{ctx:n,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return i[e];case 2:return s[e];case 4:return n[e];case 3:return r[e]}else{if(Ia(i,e))return o[e]=1,i[e];if(s!==Oe&&he(s,e))return o[e]=2,s[e];if((l=t.propsOptions[0])&&he(l,e))return o[e]=3,r[e];if(n!==Oe&&he(n,e))return o[e]=4,n[e];pc&&(o[e]=0)}}const u=Rs[e];let h,d;if(u)return e==="$attrs"&&rt(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Oe&&he(n,e))return o[e]=4,n[e];if(d=c.config.globalProperties,he(d,e))return d[e]},set({_:t},e,n){const{data:i,setupState:s,ctx:r}=t;return Ia(s,e)?(s[e]=n,!0):i!==Oe&&he(i,e)?(i[e]=n,!0):he(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!n[o]||t!==Oe&&he(t,o)||Ia(e,o)||(a=r[0])&&he(a,o)||he(i,o)||he(Rs,o)||he(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:he(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Gu(t){return te(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let pc=!0;function cv(t){const e=bl(t),n=t.proxy,i=t.ctx;pc=!1,e.beforeCreate&&Yu(e.beforeCreate,t,"bc");const{data:s,computed:r,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:_,deactivated:y,beforeDestroy:v,beforeUnmount:w,destroyed:R,unmounted:E,render:x,renderTracked:H,renderTriggered:W,errorCaptured:j,serverPrefetch:J,expose:Y,inheritAttrs:V,components:de,directives:Re,filters:K}=e;if(l&&lv(l,i,null),o)for(const O in o){const k=o[O];re(k)&&(i[O]=k.bind(n))}if(s){const O=s.call(n,n);Me(O)&&(t.data=ur(O))}if(pc=!0,r)for(const O in r){const k=r[O],G=re(k)?k.bind(n,n):re(k.get)?k.get.bind(n,n):jt,q=!re(k)&&re(k.set)?k.set.bind(n):jt,se=Ct({get:G,set:q});Object.defineProperty(i,O,{enumerable:!0,configurable:!0,get:()=>se.value,set:ne=>se.value=ne})}if(a)for(const O in a)Xp(a[O],i,n,O);if(c){const O=re(c)?c.call(n):c;Reflect.ownKeys(O).forEach(k=>{Xr(k,O[k])})}u&&Yu(u,t,"c");function C(O,k){te(k)?k.forEach(G=>O(G.bind(n))):k&&O(k.bind(n))}if(C(Jb,h),C(Zb,d),C(ev,f),C(tv,p),C(Yb,_),C(Xb,y),C(ov,j),C(rv,H),C(sv,W),C(nv,w),C(Yp,E),C(iv,J),te(Y))if(Y.length){const O=t.exposed||(t.exposed={});Y.forEach(k=>{Object.defineProperty(O,k,{get:()=>n[k],set:G=>n[k]=G})})}else t.exposed||(t.exposed={});x&&t.render===jt&&(t.render=x),V!=null&&(t.inheritAttrs=V),de&&(t.components=de),Re&&(t.directives=Re)}function lv(t,e,n=jt){te(t)&&(t=gc(t));for(const i in t){const s=t[i];let r;Me(s)?"default"in s?r=zt(s.from||i,s.default,!0):r=zt(s.from||i):r=zt(s),ot(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function Yu(t,e,n){Ot(te(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function Xp(t,e,n,i){const s=i.includes(".")?Vp(n,i):()=>n[i];if(je(t)){const r=e[t];re(r)&&Fi(s,r)}else if(re(t))Fi(s,t.bind(n));else if(Me(t))if(te(t))t.forEach(r=>Xp(r,e,n,i));else{const r=re(t.handler)?t.handler.bind(n):e[t.handler];re(r)&&Fi(s,r,t)}}function bl(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let c;return a?c=a:!s.length&&!n&&!i?c=e:(c={},s.length&&s.forEach(l=>ao(c,l,o,!0)),ao(c,e,o)),Me(e)&&r.set(e,c),c}function ao(t,e,n,i=!1){const{mixins:s,extends:r}=e;r&&ao(t,r,n,!0),s&&s.forEach(o=>ao(t,o,n,!0));for(const o in e)if(!(i&&o==="expose")){const a=uv[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const uv={data:Xu,props:Qu,emits:Qu,methods:Ts,computed:Ts,beforeCreate:Je,created:Je,beforeMount:Je,mounted:Je,beforeUpdate:Je,updated:Je,beforeDestroy:Je,beforeUnmount:Je,destroyed:Je,unmounted:Je,activated:Je,deactivated:Je,errorCaptured:Je,serverPrefetch:Je,components:Ts,directives:Ts,watch:dv,provide:Xu,inject:hv};function Xu(t,e){return e?t?function(){return qe(re(t)?t.call(this,this):t,re(e)?e.call(this,this):e)}:e:t}function hv(t,e){return Ts(gc(t),gc(e))}function gc(t){if(te(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Je(t,e){return t?[...new Set([].concat(t,e))]:e}function Ts(t,e){return t?qe(Object.create(null),t,e):e}function Qu(t,e){return t?te(t)&&te(e)?[...new Set([...t,...e])]:qe(Object.create(null),Gu(t),Gu(e??{})):e}function dv(t,e){if(!t)return e;if(!e)return t;const n=qe(Object.create(null),t);for(const i in e)n[i]=Je(t[i],e[i]);return n}function Qp(){return{app:null,config:{isNativeTag:Ky,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fv=0;function pv(t,e){return function(i,s=null){re(i)||(i=qe({},i)),s!=null&&!Me(s)&&(s=null);const r=Qp(),o=new WeakSet;let a=!1;const c=r.app={_uid:fv++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:Wv,get config(){return r.config},set config(l){},use(l,...u){return o.has(l)||(l&&re(l.install)?(o.add(l),l.install(c,...u)):re(l)&&(o.add(l),l(c,...u))),c},mixin(l){return r.mixins.includes(l)||r.mixins.push(l),c},component(l,u){return u?(r.components[l]=u,c):r.components[l]},directive(l,u){return u?(r.directives[l]=u,c):r.directives[l]},mount(l,u,h){if(!a){const d=At(i,s);return d.appContext=r,u&&e?e(d,l):t(d,l,h),a=!0,c._container=l,l.__vue_app__=c,Sl(d.component)||d.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(l,u){return r.provides[l]=u,c},runWithContext(l){co=c;try{return l()}finally{co=null}}};return c}}let co=null;function Xr(t,e){if(Ve){let n=Ve.provides;const i=Ve.parent&&Ve.parent.provides;i===n&&(n=Ve.provides=Object.create(i)),n[t]=e}}function zt(t,e,n=!1){const i=Ve||xt;if(i||co){const s=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:co._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&re(e)?e.call(i&&i.proxy):e}}function gv(t,e,n,i=!1){const s={},r={};so(r,Qo,1),t.propsDefaults=Object.create(null),Jp(t,e,s,r);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=i?s:kp(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function mv(t,e,n,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=t,a=_e(s),[c]=t.propsOptions;let l=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Go(t.emitsOptions,d))continue;const f=e[d];if(c)if(he(r,d))f!==r[d]&&(r[d]=f,l=!0);else{const p=qt(d);s[p]=mc(c,a,p,f,t,!1)}else f!==r[d]&&(r[d]=f,l=!0)}}}else{Jp(t,e,s,r)&&(l=!0);let u;for(const h in a)(!e||!he(e,h)&&((u=ns(h))===h||!he(e,u)))&&(c?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=mc(c,a,h,void 0,t,!0)):delete s[h]);if(r!==a)for(const h in r)(!e||!he(e,h))&&(delete r[h],l=!0)}l&&ln(t,"set","$attrs")}function Jp(t,e,n,i){const[s,r]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Gr(c))continue;const l=e[c];let u;s&&he(s,u=qt(c))?!r||!r.includes(u)?n[u]=l:(a||(a={}))[u]=l:Go(t.emitsOptions,c)||(!(c in i)||l!==i[c])&&(i[c]=l,o=!0)}if(r){const c=_e(n),l=a||Oe;for(let u=0;u<r.length;u++){const h=r[u];n[h]=mc(s,c,h,l[h],t,!he(l,h))}}return o}function mc(t,e,n,i,s,r){const o=t[n];if(o!=null){const a=he(o,"default");if(a&&i===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&re(c)){const{propsDefaults:l}=s;n in l?i=l[n]:(Vi(s),i=l[n]=c.call(null,e),si())}else i=c}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===ns(n))&&(i=!0))}return i}function Zp(t,e,n=!1){const i=e.propsCache,s=i.get(t);if(s)return s;const r=t.props,o={},a=[];let c=!1;if(!re(t)){const u=h=>{c=!0;const[d,f]=Zp(h,e,!0);qe(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!c)return Me(t)&&i.set(t,Pi),Pi;if(te(r))for(let u=0;u<r.length;u++){const h=qt(r[u]);Ju(h)&&(o[h]=Oe)}else if(r)for(const u in r){const h=qt(u);if(Ju(h)){const d=r[u],f=o[h]=te(d)||re(d)?{type:d}:qe({},d);if(f){const p=th(Boolean,f.type),_=th(String,f.type);f[0]=p>-1,f[1]=_<0||p<_,(p>-1||he(f,"default"))&&a.push(h)}}}const l=[o,a];return Me(t)&&i.set(t,l),l}function Ju(t){return t[0]!=="$"}function Zu(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function eh(t,e){return Zu(t)===Zu(e)}function th(t,e){return te(e)?e.findIndex(n=>eh(n,t)):re(e)&&eh(e,t)?0:-1}const eg=t=>t[0]==="_"||t==="$stable",vl=t=>te(t)?t.map(Ut):[Ut(t)],_v=(t,e,n)=>{if(e._n)return e;const i=Bb((...s)=>vl(e(...s)),n);return i._c=!1,i},tg=(t,e,n)=>{const i=t._ctx;for(const s in t){if(eg(s))continue;const r=t[s];if(re(r))e[s]=_v(s,r,i);else if(r!=null){const o=vl(r);e[s]=()=>o}}},ng=(t,e)=>{const n=vl(e);t.slots.default=()=>n},yv=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=_e(e),so(e,"_",n)):tg(e,t.slots={})}else t.slots={},e&&ng(t,e);so(t.slots,Qo,1)},bv=(t,e,n)=>{const{vnode:i,slots:s}=t;let r=!0,o=Oe;if(i.shapeFlag&32){const a=e._;a?n&&a===1?r=!1:(qe(s,e),!n&&a===1&&delete s._):(r=!e.$stable,tg(e,s)),o=e}else e&&(ng(t,e),o={default:1});if(r)for(const a in s)!eg(a)&&o[a]==null&&delete s[a]};function _c(t,e,n,i,s=!1){if(te(t)){t.forEach((d,f)=>_c(d,e&&(te(e)?e[f]:e),n,i,s));return}if(Yr(i)&&!s)return;const r=i.shapeFlag&4?Sl(i.component)||i.component.proxy:i.el,o=s?null:r,{i:a,r:c}=t,l=e&&e.r,u=a.refs===Oe?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(je(l)?(u[l]=null,he(h,l)&&(h[l]=null)):ot(l)&&(l.value=null)),re(c))An(c,a,12,[o,u]);else{const d=je(c),f=ot(c);if(d||f){const p=()=>{if(t.f){const _=d?he(h,c)?h[c]:u[c]:c.value;s?te(_)&&al(_,r):te(_)?_.includes(r)||_.push(r):d?(u[c]=[r],he(h,c)&&(h[c]=u[c])):(c.value=[r],t.k&&(u[t.k]=c.value))}else d?(u[c]=o,he(h,c)&&(h[c]=o)):f&&(c.value=o,t.k&&(u[t.k]=o))};o?(p.id=-1,et(p,n)):p()}}}const et=qb;function vv(t){return wv(t)}function wv(t,e){const n=ac();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=jt,insertStaticContent:p}=t,_=(g,m,b,I=null,T=null,A=null,U=!1,N=null,L=!!m.dynamicChildren)=>{if(g===m)return;g&&!ps(g,m)&&(I=S(g),ne(g,T,A,!0),g=null),m.patchFlag===-2&&(L=!1,m.dynamicChildren=null);const{type:P,ref:X,shapeFlag:z}=m;switch(P){case Xo:y(g,m,b,I);break;case Gs:v(g,m,b,I);break;case Sa:g==null&&w(m,b,I,U);break;case nn:de(g,m,b,I,T,A,U,N,L);break;default:z&1?x(g,m,b,I,T,A,U,N,L):z&6?Re(g,m,b,I,T,A,U,N,L):(z&64||z&128)&&P.process(g,m,b,I,T,A,U,N,L,D)}X!=null&&T&&_c(X,g&&g.ref,A,m||g,!m)},y=(g,m,b,I)=>{if(g==null)i(m.el=a(m.children),b,I);else{const T=m.el=g.el;m.children!==g.children&&l(T,m.children)}},v=(g,m,b,I)=>{g==null?i(m.el=c(m.children||""),b,I):m.el=g.el},w=(g,m,b,I)=>{[g.el,g.anchor]=p(g.children,m,b,I,g.el,g.anchor)},R=({el:g,anchor:m},b,I)=>{let T;for(;g&&g!==m;)T=d(g),i(g,b,I),g=T;i(m,b,I)},E=({el:g,anchor:m})=>{let b;for(;g&&g!==m;)b=d(g),s(g),g=b;s(m)},x=(g,m,b,I,T,A,U,N,L)=>{U=U||m.type==="svg",g==null?H(m,b,I,T,A,U,N,L):J(g,m,T,A,U,N,L)},H=(g,m,b,I,T,A,U,N)=>{let L,P;const{type:X,props:z,shapeFlag:Q,transition:ie,dirs:ae}=g;if(L=g.el=o(g.type,A,z&&z.is,z),Q&8?u(L,g.children):Q&16&&j(g.children,L,null,I,T,A&&X!=="foreignObject",U,N),ae&&Bn(g,null,I,"created"),W(L,g,g.scopeId,U,I),z){for(const we in z)we!=="value"&&!Gr(we)&&r(L,we,null,z[we],A,g.children,I,T,ge);"value"in z&&r(L,"value",null,z.value),(P=z.onVnodeBeforeMount)&&Ft(P,I,g)}ae&&Bn(g,null,I,"beforeMount");const Ce=Iv(T,ie);Ce&&ie.beforeEnter(L),i(L,m,b),((P=z&&z.onVnodeMounted)||Ce||ae)&&et(()=>{P&&Ft(P,I,g),Ce&&ie.enter(L),ae&&Bn(g,null,I,"mounted")},T)},W=(g,m,b,I,T)=>{if(b&&f(g,b),I)for(let A=0;A<I.length;A++)f(g,I[A]);if(T){let A=T.subTree;if(m===A){const U=T.vnode;W(g,U,U.scopeId,U.slotScopeIds,T.parent)}}},j=(g,m,b,I,T,A,U,N,L=0)=>{for(let P=L;P<g.length;P++){const X=g[P]=N?bn(g[P]):Ut(g[P]);_(null,X,m,b,I,T,A,U,N)}},J=(g,m,b,I,T,A,U)=>{const N=m.el=g.el;let{patchFlag:L,dynamicChildren:P,dirs:X}=m;L|=g.patchFlag&16;const z=g.props||Oe,Q=m.props||Oe;let ie;b&&Un(b,!1),(ie=Q.onVnodeBeforeUpdate)&&Ft(ie,b,m,g),X&&Bn(m,g,b,"beforeUpdate"),b&&Un(b,!0);const ae=T&&m.type!=="foreignObject";if(P?Y(g.dynamicChildren,P,N,b,I,ae,A):U||k(g,m,N,null,b,I,ae,A,!1),L>0){if(L&16)V(N,m,z,Q,b,I,T);else if(L&2&&z.class!==Q.class&&r(N,"class",null,Q.class,T),L&4&&r(N,"style",z.style,Q.style,T),L&8){const Ce=m.dynamicProps;for(let we=0;we<Ce.length;we++){const Fe=Ce[we],wt=z[Fe],Si=Q[Fe];(Si!==wt||Fe==="value")&&r(N,Fe,wt,Si,T,g.children,b,I,ge)}}L&1&&g.children!==m.children&&u(N,m.children)}else!U&&P==null&&V(N,m,z,Q,b,I,T);((ie=Q.onVnodeUpdated)||X)&&et(()=>{ie&&Ft(ie,b,m,g),X&&Bn(m,g,b,"updated")},I)},Y=(g,m,b,I,T,A,U)=>{for(let N=0;N<m.length;N++){const L=g[N],P=m[N],X=L.el&&(L.type===nn||!ps(L,P)||L.shapeFlag&70)?h(L.el):b;_(L,P,X,null,I,T,A,U,!0)}},V=(g,m,b,I,T,A,U)=>{if(b!==I){if(b!==Oe)for(const N in b)!Gr(N)&&!(N in I)&&r(g,N,b[N],null,U,m.children,T,A,ge);for(const N in I){if(Gr(N))continue;const L=I[N],P=b[N];L!==P&&N!=="value"&&r(g,N,P,L,U,m.children,T,A,ge)}"value"in I&&r(g,"value",b.value,I.value)}},de=(g,m,b,I,T,A,U,N,L)=>{const P=m.el=g?g.el:a(""),X=m.anchor=g?g.anchor:a("");let{patchFlag:z,dynamicChildren:Q,slotScopeIds:ie}=m;ie&&(N=N?N.concat(ie):ie),g==null?(i(P,b,I),i(X,b,I),j(m.children,b,X,T,A,U,N,L)):z>0&&z&64&&Q&&g.dynamicChildren?(Y(g.dynamicChildren,Q,b,T,A,U,N),(m.key!=null||T&&m===T.subTree)&&ig(g,m,!0)):k(g,m,b,X,T,A,U,N,L)},Re=(g,m,b,I,T,A,U,N,L)=>{m.slotScopeIds=N,g==null?m.shapeFlag&512?T.ctx.activate(m,b,I,U,L):K(m,b,I,T,A,U,L):M(g,m,L)},K=(g,m,b,I,T,A,U)=>{const N=g.component=Mv(g,I,T);if(qp(g)&&(N.ctx.renderer=D),Dv(N),N.asyncDep){if(T&&T.registerDep(N,C),!g.el){const L=N.subTree=At(Gs);v(null,L,m,b)}return}C(N,g,m,b,T,A,U)},M=(g,m,b)=>{const I=m.component=g.component;if(Wb(g,m,b))if(I.asyncDep&&!I.asyncResolved){O(I,m,b);return}else I.next=m,Nb(I.update),I.update();else m.el=g.el,I.vnode=m},C=(g,m,b,I,T,A,U)=>{const N=()=>{if(g.isMounted){let{next:X,bu:z,u:Q,parent:ie,vnode:ae}=g,Ce=X,we;Un(g,!1),X?(X.el=ae.el,O(g,X,U)):X=ae,z&&ba(z),(we=X.props&&X.props.onVnodeBeforeUpdate)&&Ft(we,ie,X,ae),Un(g,!0);const Fe=wa(g),wt=g.subTree;g.subTree=Fe,_(wt,Fe,h(wt.el),S(wt),g,T,A),X.el=Fe.el,Ce===null&&jb(g,Fe.el),Q&&et(Q,T),(we=X.props&&X.props.onVnodeUpdated)&&et(()=>Ft(we,ie,X,ae),T)}else{let X;const{el:z,props:Q}=m,{bm:ie,m:ae,parent:Ce}=g,we=Yr(m);if(Un(g,!1),ie&&ba(ie),!we&&(X=Q&&Q.onVnodeBeforeMount)&&Ft(X,Ce,m),Un(g,!0),z&&oe){const Fe=()=>{g.subTree=wa(g),oe(z,g.subTree,g,T,null)};we?m.type.__asyncLoader().then(()=>!g.isUnmounted&&Fe()):Fe()}else{const Fe=g.subTree=wa(g);_(null,Fe,b,I,g,T,A),m.el=Fe.el}if(ae&&et(ae,T),!we&&(X=Q&&Q.onVnodeMounted)){const Fe=m;et(()=>Ft(X,Ce,Fe),T)}(m.shapeFlag&256||Ce&&Yr(Ce.vnode)&&Ce.vnode.shapeFlag&256)&&g.a&&et(g.a,T),g.isMounted=!0,m=b=I=null}},L=g.effect=new dl(N,()=>yl(P),g.scope),P=g.update=()=>L.run();P.id=g.uid,Un(g,!0),P()},O=(g,m,b)=>{m.component=g;const I=g.vnode.props;g.vnode=m,g.next=null,mv(g,m.props,I,b),bv(g,m.children,b),is(),Vu(g),ss()},k=(g,m,b,I,T,A,U,N,L=!1)=>{const P=g&&g.children,X=g?g.shapeFlag:0,z=m.children,{patchFlag:Q,shapeFlag:ie}=m;if(Q>0){if(Q&128){q(P,z,b,I,T,A,U,N,L);return}else if(Q&256){G(P,z,b,I,T,A,U,N,L);return}}ie&8?(X&16&&ge(P,T,A),z!==P&&u(b,z)):X&16?ie&16?q(P,z,b,I,T,A,U,N,L):ge(P,T,A,!0):(X&8&&u(b,""),ie&16&&j(z,b,I,T,A,U,N,L))},G=(g,m,b,I,T,A,U,N,L)=>{g=g||Pi,m=m||Pi;const P=g.length,X=m.length,z=Math.min(P,X);let Q;for(Q=0;Q<z;Q++){const ie=m[Q]=L?bn(m[Q]):Ut(m[Q]);_(g[Q],ie,b,null,T,A,U,N,L)}P>X?ge(g,T,A,!0,!1,z):j(m,b,I,T,A,U,N,L,z)},q=(g,m,b,I,T,A,U,N,L)=>{let P=0;const X=m.length;let z=g.length-1,Q=X-1;for(;P<=z&&P<=Q;){const ie=g[P],ae=m[P]=L?bn(m[P]):Ut(m[P]);if(ps(ie,ae))_(ie,ae,b,null,T,A,U,N,L);else break;P++}for(;P<=z&&P<=Q;){const ie=g[z],ae=m[Q]=L?bn(m[Q]):Ut(m[Q]);if(ps(ie,ae))_(ie,ae,b,null,T,A,U,N,L);else break;z--,Q--}if(P>z){if(P<=Q){const ie=Q+1,ae=ie<X?m[ie].el:I;for(;P<=Q;)_(null,m[P]=L?bn(m[P]):Ut(m[P]),b,ae,T,A,U,N,L),P++}}else if(P>Q)for(;P<=z;)ne(g[P],T,A,!0),P++;else{const ie=P,ae=P,Ce=new Map;for(P=ae;P<=Q;P++){const lt=m[P]=L?bn(m[P]):Ut(m[P]);lt.key!=null&&Ce.set(lt.key,P)}let we,Fe=0;const wt=Q-ae+1;let Si=!1,Du=0;const fs=new Array(wt);for(P=0;P<wt;P++)fs[P]=0;for(P=ie;P<=z;P++){const lt=g[P];if(Fe>=wt){ne(lt,T,A,!0);continue}let Lt;if(lt.key!=null)Lt=Ce.get(lt.key);else for(we=ae;we<=Q;we++)if(fs[we-ae]===0&&ps(lt,m[we])){Lt=we;break}Lt===void 0?ne(lt,T,A,!0):(fs[Lt-ae]=P+1,Lt>=Du?Du=Lt:Si=!0,_(lt,m[Lt],b,null,T,A,U,N,L),Fe++)}const Nu=Si?Sv(fs):Pi;for(we=Nu.length-1,P=wt-1;P>=0;P--){const lt=ae+P,Lt=m[lt],Lu=lt+1<X?m[lt+1].el:I;fs[P]===0?_(null,Lt,b,Lu,T,A,U,N,L):Si&&(we<0||P!==Nu[we]?se(Lt,b,Lu,2):we--)}}},se=(g,m,b,I,T=null)=>{const{el:A,type:U,transition:N,children:L,shapeFlag:P}=g;if(P&6){se(g.component.subTree,m,b,I);return}if(P&128){g.suspense.move(m,b,I);return}if(P&64){U.move(g,m,b,D);return}if(U===nn){i(A,m,b);for(let z=0;z<L.length;z++)se(L[z],m,b,I);i(g.anchor,m,b);return}if(U===Sa){R(g,m,b);return}if(I!==2&&P&1&&N)if(I===0)N.beforeEnter(A),i(A,m,b),et(()=>N.enter(A),T);else{const{leave:z,delayLeave:Q,afterLeave:ie}=N,ae=()=>i(A,m,b),Ce=()=>{z(A,()=>{ae(),ie&&ie()})};Q?Q(A,ae,Ce):Ce()}else i(A,m,b)},ne=(g,m,b,I=!1,T=!1)=>{const{type:A,props:U,ref:N,children:L,dynamicChildren:P,shapeFlag:X,patchFlag:z,dirs:Q}=g;if(N!=null&&_c(N,null,b,g,!0),X&256){m.ctx.deactivate(g);return}const ie=X&1&&Q,ae=!Yr(g);let Ce;if(ae&&(Ce=U&&U.onVnodeBeforeUnmount)&&Ft(Ce,m,g),X&6)Pe(g.component,b,I);else{if(X&128){g.suspense.unmount(b,I);return}ie&&Bn(g,null,m,"beforeUnmount"),X&64?g.type.remove(g,m,b,T,D,I):P&&(A!==nn||z>0&&z&64)?ge(P,m,b,!1,!0):(A===nn&&z&384||!T&&X&16)&&ge(L,m,b),I&&fe(g)}(ae&&(Ce=U&&U.onVnodeUnmounted)||ie)&&et(()=>{Ce&&Ft(Ce,m,g),ie&&Bn(g,null,m,"unmounted")},b)},fe=g=>{const{type:m,el:b,anchor:I,transition:T}=g;if(m===nn){pe(b,I);return}if(m===Sa){E(g);return}const A=()=>{s(b),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(g.shapeFlag&1&&T&&!T.persisted){const{leave:U,delayLeave:N}=T,L=()=>U(b,A);N?N(g.el,A,L):L()}else A()},pe=(g,m)=>{let b;for(;g!==m;)b=d(g),s(g),g=b;s(m)},Pe=(g,m,b)=>{const{bum:I,scope:T,update:A,subTree:U,um:N}=g;I&&ba(I),T.stop(),A&&(A.active=!1,ne(U,g,m,b)),N&&et(N,m),et(()=>{g.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},ge=(g,m,b,I=!1,T=!1,A=0)=>{for(let U=A;U<g.length;U++)ne(g[U],m,b,I,T)},S=g=>g.shapeFlag&6?S(g.component.subTree):g.shapeFlag&128?g.suspense.next():d(g.anchor||g.el),$=(g,m,b)=>{g==null?m._vnode&&ne(m._vnode,null,null,!0):_(m._vnode||null,g,m,null,null,null,b),Vu(),Bp(),m._vnode=g},D={p:_,um:ne,m:se,r:fe,mt:K,mc:j,pc:k,pbc:Y,n:S,o:t};let B,oe;return e&&([B,oe]=e(D)),{render:$,hydrate:B,createApp:pv($,B)}}function Un({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Iv(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ig(t,e,n=!1){const i=t.children,s=e.children;if(te(i)&&te(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=bn(s[r]),a.el=o.el),n||ig(o,a)),a.type===Xo&&(a.el=o.el)}}function Sv(t){const e=t.slice(),n=[0];let i,s,r,o,a;const c=t.length;for(i=0;i<c;i++){const l=t[i];if(l!==0){if(s=n[n.length-1],t[s]<l){e[i]=s,n.push(i);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,t[n[a]]<l?r=a+1:o=a;l<t[n[r]]&&(r>0&&(e[i]=n[r-1]),n[r]=i)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}const Ev=t=>t.__isTeleport,nn=Symbol.for("v-fgt"),Xo=Symbol.for("v-txt"),Gs=Symbol.for("v-cmt"),Sa=Symbol.for("v-stc"),Os=[];let kt=null;function UM(t=!1){Os.push(kt=t?null:[])}function Cv(){Os.pop(),kt=Os[Os.length-1]||null}let Ys=1;function nh(t){Ys+=t}function Tv(t){return t.dynamicChildren=Ys>0?kt||Pi:null,Cv(),Ys>0&&kt&&kt.push(t),t}function HM(t,e,n,i,s,r){return Tv(rg(t,e,n,i,s,r,!0))}function yc(t){return t?t.__v_isVNode===!0:!1}function ps(t,e){return t.type===e.type&&t.key===e.key}const Qo="__vInternal",sg=({key:t})=>t??null,Qr=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?je(t)||ot(t)||re(t)?{i:xt,r:t,k:e,f:!!n}:t:null);function rg(t,e=null,n=null,i=0,s=null,r=t===nn?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&sg(e),ref:e&&Qr(e),scopeId:Wp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:xt};return a?(wl(c,n),r&128&&t.normalize(c)):n&&(c.shapeFlag|=je(n)?8:16),Ys>0&&!o&&kt&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&kt.push(c),c}const At=xv;function xv(t,e=null,n=null,i=0,s=null,r=!1){if((!t||t===zb)&&(t=Gs),yc(t)){const a=zi(t,e,!0);return n&&wl(a,n),Ys>0&&!r&&kt&&(a.shapeFlag&6?kt[kt.indexOf(t)]=a:kt.push(a)),a.patchFlag|=-2,a}if(Bv(t)&&(t=t.__vccOpts),e){e=kv(e);let{class:a,style:c}=e;a&&!je(a)&&(e.class=ul(a)),Me(c)&&(Rp(c)&&!te(c)&&(c=qe({},c)),e.style=ll(c))}const o=je(t)?1:Kb(t)?128:Ev(t)?64:Me(t)?4:re(t)?2:0;return rg(t,e,n,i,s,o,r,!0)}function kv(t){return t?Rp(t)||Qo in t?qe({},t):t:null}function zi(t,e,n=!1){const{props:i,ref:s,patchFlag:r,children:o}=t,a=e?Rv(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&sg(a),ref:e&&e.ref?n&&s?te(s)?s.concat(Qr(e)):[s,Qr(e)]:Qr(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==nn?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&zi(t.ssContent),ssFallback:t.ssFallback&&zi(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Av(t=" ",e=0){return At(Xo,null,t,e)}function Ut(t){return t==null||typeof t=="boolean"?At(Gs):te(t)?At(nn,null,t.slice()):typeof t=="object"?bn(t):At(Xo,null,String(t))}function bn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:zi(t)}function wl(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(te(e))n=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),wl(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(Qo in e)?e._ctx=xt:s===3&&xt&&(xt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else re(e)?(e={default:e,_ctx:xt},n=32):(e=String(e),i&64?(n=16,e=[Av(e)]):n=8);t.children=e,t.shapeFlag|=n}function Rv(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=ul([e.class,i.class]));else if(s==="style")e.style=ll([e.style,i.style]);else if(Wo(s)){const r=e[s],o=i[s];o&&r!==o&&!(te(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=i[s])}return e}function Ft(t,e,n,i=null){Ot(t,e,7,[n,i])}const Ov=Qp();let Pv=0;function Mv(t,e,n){const i=t.type,s=(e?e.appContext:t.appContext)||Ov,r={uid:Pv++,vnode:t,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new sb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Zp(i,s),emitsOptions:Hp(i,s),emit:null,emitted:null,propsDefaults:Oe,inheritAttrs:i.inheritAttrs,ctx:Oe,data:Oe,props:Oe,attrs:Oe,slots:Oe,refs:Oe,setupState:Oe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=$b.bind(null,r),t.ce&&t.ce(r),r}let Ve=null,Il,Ei,ih="__VUE_INSTANCE_SETTERS__";(Ei=ac()[ih])||(Ei=ac()[ih]=[]),Ei.push(t=>Ve=t),Il=t=>{Ei.length>1?Ei.forEach(e=>e(t)):Ei[0](t)};const Vi=t=>{Il(t),t.scope.on()},si=()=>{Ve&&Ve.scope.off(),Il(null)};function og(t){return t.vnode.shapeFlag&4}let Xs=!1;function Dv(t,e=!1){Xs=e;const{props:n,children:i}=t.vnode,s=og(t);gv(t,n,s,e),yv(t,i);const r=s?Nv(t,e):void 0;return Xs=!1,r}function Nv(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Op(new Proxy(t.ctx,av));const{setup:i}=n;if(i){const s=t.setupContext=i.length>1?Fv(t):null;Vi(t),is();const r=An(i,t,0,[t.props,s]);if(ss(),si(),fp(r)){if(r.then(si,si),e)return r.then(o=>{sh(t,o,e)}).catch(o=>{qo(o,t,0)});t.asyncDep=r}else sh(t,r,e)}else ag(t,e)}function sh(t,e,n){re(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Me(e)&&(t.setupState=Np(e)),ag(t,n)}let rh;function ag(t,e,n){const i=t.type;if(!t.render){if(!e&&rh&&!i.render){const s=i.template||bl(t).template;if(s){const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=i,l=qe(qe({isCustomElement:r,delimiters:a},o),c);i.render=rh(s,l)}}t.render=i.render||jt}{Vi(t),is();try{cv(t)}finally{ss(),si()}}}function Lv(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return rt(t,"get","$attrs"),e[n]}}))}function Fv(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return Lv(t)},slots:t.slots,emit:t.emit,expose:e}}function Sl(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Np(Op(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Rs)return Rs[n](t)},has(e,n){return n in e||n in Rs}}))}function $v(t,e=!0){return re(t)?t.displayName||t.name:t.name||e&&t.__name}function Bv(t){return re(t)&&"__vccOpts"in t}const Ct=(t,e)=>Pb(t,e,Xs);function cg(t,e,n){const i=arguments.length;return i===2?Me(e)&&!te(e)?yc(e)?At(t,null,[e]):At(t,e):At(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&yc(n)&&(n=[n]),At(t,e,n))}const Uv=Symbol.for("v-scx"),Hv=()=>zt(Uv),Wv="3.3.13",jv="http://www.w3.org/2000/svg",Qn=typeof document<"u"?document:null,oh=Qn&&Qn.createElement("template"),zv={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const s=e?Qn.createElementNS(jv,t):Qn.createElement(t,n?{is:n}:void 0);return t==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:t=>Qn.createTextNode(t),createComment:t=>Qn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Qn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,s,r){const o=n?n.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{oh.innerHTML=i?`<svg>${t}</svg>`:t;const a=oh.content;if(i){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Vv=Symbol("_vtc");function Kv(t,e,n){const i=t[Vv];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const qv=Symbol("_vod"),Gv=Symbol("");function Yv(t,e,n){const i=t.style,s=je(n);if(n&&!s){if(e&&!je(e))for(const r in e)n[r]==null&&bc(i,r,"");for(const r in n)bc(i,r,n[r])}else{const r=i.display;if(s){if(e!==n){const o=i[Gv];o&&(n+=";"+o),i.cssText=n}}else e&&t.removeAttribute("style");qv in t&&(i.display=r)}}const ah=/\s*!important$/;function bc(t,e,n){if(te(n))n.forEach(i=>bc(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=Xv(t,e);ah.test(n)?t.setProperty(ns(i),n.replace(ah,""),"important"):t[i]=n}}const ch=["Webkit","Moz","ms"],Ea={};function Xv(t,e){const n=Ea[e];if(n)return n;let i=qt(e);if(i!=="filter"&&i in t)return Ea[e]=i;i=Vo(i);for(let s=0;s<ch.length;s++){const r=ch[s]+i;if(r in t)return Ea[e]=r}return e}const lh="http://www.w3.org/1999/xlink";function Qv(t,e,n,i,s){if(i&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(lh,e.slice(6,e.length)):t.setAttributeNS(lh,e,n);else{const r=ib(e);n==null||r&&!mp(n)?t.removeAttribute(e):t.setAttribute(e,r?"":n)}}function Jv(t,e,n,i,s,r,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,s,r),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=n;const l=a==="OPTION"?t.getAttribute("value"):t.value,u=n??"";l!==u&&(t.value=u),n==null&&t.removeAttribute(e);return}let c=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=mp(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{t[e]=n}catch{}c&&t.removeAttribute(e)}function Zv(t,e,n,i){t.addEventListener(e,n,i)}function ew(t,e,n,i){t.removeEventListener(e,n,i)}const uh=Symbol("_vei");function tw(t,e,n,i,s=null){const r=t[uh]||(t[uh]={}),o=r[e];if(i&&o)o.value=i;else{const[a,c]=nw(e);if(i){const l=r[e]=rw(i,s);Zv(t,a,l,c)}else o&&(ew(t,a,o,c),r[e]=void 0)}}const hh=/(?:Once|Passive|Capture)$/;function nw(t){let e;if(hh.test(t)){e={};let i;for(;i=t.match(hh);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ns(t.slice(2)),e]}let Ca=0;const iw=Promise.resolve(),sw=()=>Ca||(iw.then(()=>Ca=0),Ca=Date.now());function rw(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Ot(ow(i,n.value),e,5,[i])};return n.value=t,n.attached=sw(),n}function ow(t,e){if(te(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const dh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,aw=(t,e,n,i,s=!1,r,o,a,c)=>{e==="class"?Kv(t,i,s):e==="style"?Yv(t,n,i):Wo(e)?ol(e)||tw(t,e,n,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):cw(t,e,i,s))?Jv(t,e,i,r,o,a,c):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),Qv(t,e,i,s))};function cw(t,e,n,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&dh(e)&&re(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return dh(e)&&je(n)?!1:e in t}const lw=qe({patchProp:aw},zv);let fh;function uw(){return fh||(fh=vv(lw))}const WM=(...t)=>{const e=uw().createApp(...t),{mount:n}=e;return e.mount=i=>{const s=hw(i);if(!s)return;const r=e._component;!re(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function hw(t){return je(t)?document.querySelector(t):t}function dw(){return lg().__VUE_DEVTOOLS_GLOBAL_HOOK__}function lg(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const fw=typeof Proxy=="function",pw="devtools-plugin:setup",gw="plugin:settings:set";let Ci,vc;function mw(){var t;return Ci!==void 0||(typeof window<"u"&&window.performance?(Ci=!0,vc=window.performance):typeof global<"u"&&(!((t=global.perf_hooks)===null||t===void 0)&&t.performance)?(Ci=!0,vc=global.perf_hooks.performance):Ci=!1),Ci}function _w(){return mw()?vc.now():Date.now()}class yw{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const i={};if(e.settings)for(const o in e.settings){const a=e.settings[o];i[o]=a.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let r=Object.assign({},i);try{const o=localStorage.getItem(s),a=JSON.parse(o);Object.assign(r,a)}catch{}this.fallbacks={getSettings(){return r},setSettings(o){try{localStorage.setItem(s,JSON.stringify(o))}catch{}r=o},now(){return _w()}},n&&n.on(gw,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...c)=>{this.onQueue.push({method:a,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...c)=>(this.targetQueue.push({method:a,args:c,resolve:()=>{}}),this.fallbacks[a](...c)):(...c)=>new Promise(l=>{this.targetQueue.push({method:a,args:c,resolve:l})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function bw(t,e){const n=t,i=lg(),s=dw(),r=fw&&n.enableEarlyProxy;if(s&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!r))s.emit(pw,t,e);else{const o=r?new yw(n,s):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var ug="store";function jM(t){return t===void 0&&(t=null),zt(t!==null?t:ug)}function rs(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function vw(t){return t!==null&&typeof t=="object"}function ww(t){return t&&typeof t.then=="function"}function Iw(t,e){return function(){return t(e)}}function hg(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var i=e.indexOf(t);i>-1&&e.splice(i,1)}}function dg(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;Jo(t,n,[],t._modules.root,!0),El(t,n,e)}function El(t,e,n){var i=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var s=t._wrappedGetters,r={};rs(s,function(o,a){r[a]=Iw(o,t),Object.defineProperty(t.getters,a,{get:function(){return r[a]()},enumerable:!0})}),t._state=ur({data:e}),t.strict&&xw(t),i&&n&&t._withCommit(function(){i.data=null})}function Jo(t,e,n,i,s){var r=!n.length,o=t._modules.getNamespace(n);if(i.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=i),!r&&!s){var a=Cl(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit(function(){a[c]=i.state})}var l=i.context=Sw(t,o,n);i.forEachMutation(function(u,h){var d=o+h;Ew(t,d,u,l)}),i.forEachAction(function(u,h){var d=u.root?h:o+h,f=u.handler||u;Cw(t,d,f,l)}),i.forEachGetter(function(u,h){var d=o+h;Tw(t,d,u,l)}),i.forEachChild(function(u,h){Jo(t,e,n.concat(h),u,s)})}function Sw(t,e,n){var i=e==="",s={dispatch:i?t.dispatch:function(r,o,a){var c=lo(r,o,a),l=c.payload,u=c.options,h=c.type;return(!u||!u.root)&&(h=e+h),t.dispatch(h,l)},commit:i?t.commit:function(r,o,a){var c=lo(r,o,a),l=c.payload,u=c.options,h=c.type;(!u||!u.root)&&(h=e+h),t.commit(h,l,u)}};return Object.defineProperties(s,{getters:{get:i?function(){return t.getters}:function(){return fg(t,e)}},state:{get:function(){return Cl(t.state,n)}}}),s}function fg(t,e){if(!t._makeLocalGettersCache[e]){var n={},i=e.length;Object.keys(t.getters).forEach(function(s){if(s.slice(0,i)===e){var r=s.slice(i);Object.defineProperty(n,r,{get:function(){return t.getters[s]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function Ew(t,e,n,i){var s=t._mutations[e]||(t._mutations[e]=[]);s.push(function(o){n.call(t,i.state,o)})}function Cw(t,e,n,i){var s=t._actions[e]||(t._actions[e]=[]);s.push(function(o){var a=n.call(t,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:t.getters,rootState:t.state},o);return ww(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(c){throw t._devtoolHook.emit("vuex:error",c),c}):a})}function Tw(t,e,n,i){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(r){return n(i.state,i.getters,r.state,r.getters)})}function xw(t){Fi(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function Cl(t,e){return e.reduce(function(n,i){return n[i]},t)}function lo(t,e,n){return vw(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var kw="vuex bindings",ph="vuex:mutations",Ta="vuex:actions",Ti="vuex",Aw=0;function Rw(t,e){bw({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[kw]},function(n){n.addTimelineLayer({id:ph,label:"Vuex Mutations",color:gh}),n.addTimelineLayer({id:Ta,label:"Vuex Actions",color:gh}),n.addInspector({id:Ti,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(i){if(i.app===t&&i.inspectorId===Ti)if(i.filter){var s=[];_g(s,e._modules.root,i.filter,""),i.rootNodes=s}else i.rootNodes=[mg(e._modules.root,"")]}),n.on.getInspectorState(function(i){if(i.app===t&&i.inspectorId===Ti){var s=i.nodeId;fg(e,s),i.state=Mw(Nw(e._modules,s),s==="root"?e.getters:e._makeLocalGettersCache,s)}}),n.on.editInspectorState(function(i){if(i.app===t&&i.inspectorId===Ti){var s=i.nodeId,r=i.path;s!=="root"&&(r=s.split("/").filter(Boolean).concat(r)),e._withCommit(function(){i.set(e._state.data,r,i.state.value)})}}),e.subscribe(function(i,s){var r={};i.payload&&(r.payload=i.payload),r.state=s,n.notifyComponentUpdate(),n.sendInspectorTree(Ti),n.sendInspectorState(Ti),n.addTimelineEvent({layerId:ph,event:{time:Date.now(),title:i.type,data:r}})}),e.subscribeAction({before:function(i,s){var r={};i.payload&&(r.payload=i.payload),i._id=Aw++,i._time=Date.now(),r.state=s,n.addTimelineEvent({layerId:Ta,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:r}})},after:function(i,s){var r={},o=Date.now()-i._time;r.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},i.payload&&(r.payload=i.payload),r.state=s,n.addTimelineEvent({layerId:Ta,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:r}})}})})}var gh=8702998,Ow=6710886,Pw=16777215,pg={label:"namespaced",textColor:Pw,backgroundColor:Ow};function gg(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function mg(t,e){return{id:e||"root",label:gg(e),tags:t.namespaced?[pg]:[],children:Object.keys(t._children).map(function(n){return mg(t._children[n],e+n+"/")})}}function _g(t,e,n,i){i.includes(n)&&t.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:e.namespaced?[pg]:[]}),Object.keys(e._children).forEach(function(s){_g(t,e._children[s],n,i+s+"/")})}function Mw(t,e,n){e=n==="root"?e:e[n];var i=Object.keys(e),s={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(i.length){var r=Dw(e);s.getters=Object.keys(r).map(function(o){return{key:o.endsWith("/")?gg(o):o,editable:!1,value:wc(function(){return r[o]})}})}return s}function Dw(t){var e={};return Object.keys(t).forEach(function(n){var i=n.split("/");if(i.length>1){var s=e,r=i.pop();i.forEach(function(o){s[o]||(s[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),s=s[o]._custom.value}),s[r]=wc(function(){return t[n]})}else e[n]=wc(function(){return t[n]})}),e}function Nw(t,e){var n=e.split("/").filter(function(i){return i});return n.reduce(function(i,s,r){var o=i[s];if(!o)throw new Error('Missing module "'+s+'" for path "'+e+'".');return r===n.length-1?o:o._children},e==="root"?t:t.root._children)}function wc(t){try{return t()}catch(e){return e}}var Nt=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var i=e.state;this.state=(typeof i=="function"?i():i)||{}},yg={namespaced:{configurable:!0}};yg.namespaced.get=function(){return!!this._rawModule.namespaced};Nt.prototype.addChild=function(e,n){this._children[e]=n};Nt.prototype.removeChild=function(e){delete this._children[e]};Nt.prototype.getChild=function(e){return this._children[e]};Nt.prototype.hasChild=function(e){return e in this._children};Nt.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Nt.prototype.forEachChild=function(e){rs(this._children,e)};Nt.prototype.forEachGetter=function(e){this._rawModule.getters&&rs(this._rawModule.getters,e)};Nt.prototype.forEachAction=function(e){this._rawModule.actions&&rs(this._rawModule.actions,e)};Nt.prototype.forEachMutation=function(e){this._rawModule.mutations&&rs(this._rawModule.mutations,e)};Object.defineProperties(Nt.prototype,yg);var _i=function(e){this.register([],e,!1)};_i.prototype.get=function(e){return e.reduce(function(n,i){return n.getChild(i)},this.root)};_i.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(i,s){return n=n.getChild(s),i+(n.namespaced?s+"/":"")},"")};_i.prototype.update=function(e){bg([],this.root,e)};_i.prototype.register=function(e,n,i){var s=this;i===void 0&&(i=!0);var r=new Nt(n,i);if(e.length===0)this.root=r;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],r)}n.modules&&rs(n.modules,function(a,c){s.register(e.concat(c),a,i)})};_i.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),i=e[e.length-1],s=n.getChild(i);s&&s.runtime&&n.removeChild(i)};_i.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),i=e[e.length-1];return n?n.hasChild(i):!1};function bg(t,e,n){if(e.update(n),n.modules)for(var i in n.modules){if(!e.getChild(i))return;bg(t.concat(i),e.getChild(i),n.modules[i])}}function zM(t){return new at(t)}var at=function(e){var n=this;e===void 0&&(e={});var i=e.plugins;i===void 0&&(i=[]);var s=e.strict;s===void 0&&(s=!1);var r=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new _i(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=r;var o=this,a=this,c=a.dispatch,l=a.commit;this.dispatch=function(d,f){return c.call(o,d,f)},this.commit=function(d,f,p){return l.call(o,d,f,p)},this.strict=s;var u=this._modules.root.state;Jo(this,u,[],this._modules.root),El(this,u),i.forEach(function(h){return h(n)})},Tl={state:{configurable:!0}};at.prototype.install=function(e,n){e.provide(n||ug,this),e.config.globalProperties.$store=this;var i=this._devtools!==void 0?this._devtools:!1;i&&Rw(e,this)};Tl.state.get=function(){return this._state.data};Tl.state.set=function(t){};at.prototype.commit=function(e,n,i){var s=this,r=lo(e,n,i),o=r.type,a=r.payload,c={type:o,payload:a},l=this._mutations[o];l&&(this._withCommit(function(){l.forEach(function(h){h(a)})}),this._subscribers.slice().forEach(function(u){return u(c,s.state)}))};at.prototype.dispatch=function(e,n){var i=this,s=lo(e,n),r=s.type,o=s.payload,a={type:r,payload:o},c=this._actions[r];if(c){try{this._actionSubscribers.slice().filter(function(u){return u.before}).forEach(function(u){return u.before(a,i.state)})}catch{}var l=c.length>1?Promise.all(c.map(function(u){return u(o)})):c[0](o);return new Promise(function(u,h){l.then(function(d){try{i._actionSubscribers.filter(function(f){return f.after}).forEach(function(f){return f.after(a,i.state)})}catch{}u(d)},function(d){try{i._actionSubscribers.filter(function(f){return f.error}).forEach(function(f){return f.error(a,i.state,d)})}catch{}h(d)})})}};at.prototype.subscribe=function(e,n){return hg(e,this._subscribers,n)};at.prototype.subscribeAction=function(e,n){var i=typeof e=="function"?{before:e}:e;return hg(i,this._actionSubscribers,n)};at.prototype.watch=function(e,n,i){var s=this;return Fi(function(){return e(s.state,s.getters)},n,Object.assign({},i))};at.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};at.prototype.registerModule=function(e,n,i){i===void 0&&(i={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),Jo(this,this.state,e,this._modules.get(e),i.preserveState),El(this,this.state)};at.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var i=Cl(n.state,e.slice(0,-1));delete i[e[e.length-1]]}),dg(this)};at.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};at.prototype.hotUpdate=function(e){this._modules.update(e),dg(this,!0)};at.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(at.prototype,Tl);var mh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F=function(t,e){if(!t)throw os(e)},os=function(t){return new Error("Firebase Database ("+vg.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Lw=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const r=t[n++],o=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},xl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=r>>2,h=(r&3)<<4|a>>4;let d=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(d=64)),i.push(n[u],n[h],n[d],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Lw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||a==null||l==null||h==null)throw new Fw;const d=r<<2|a>>4;if(i.push(d),l!==64){const f=a<<4&240|l>>2;if(i.push(f),h!==64){const p=l<<6&192|h;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Fw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ig=function(t){const e=wg(t);return xl.encodeByteArray(e,!0)},uo=function(t){return Ig(t).replace(/\./g,"")},ho=function(t){try{return xl.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t){return Sg(void 0,t)}function Sg(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Bw(n)||(t[n]=Sg(t[n],e[n]));return t}function Bw(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=()=>Uw().__FIREBASE_DEFAULTS__,Ww=()=>{if(typeof process>"u"||typeof mh>"u")return;const t=mh.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ho(t[1]);return e&&JSON.parse(e)},kl=()=>{try{return Hw()||Ww()||jw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Eg=t=>{var e,n;return(n=(e=kl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},zw=t=>{const e=Eg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Cg=()=>{var t;return(t=kl())===null||t===void 0?void 0:t.config},Tg=t=>{var e;return(e=kl())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[uo(JSON.stringify(n)),uo(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Al(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function xg(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Kw(){const t=Qe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ag(){return vg.NODE_ADMIN===!0}function Rg(){try{return typeof indexedDB=="object"}catch{return!1}}function Og(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}function qw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="FirebaseError";class Xt extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Gw,Object.setPrototypeOf(this,Xt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yi.prototype.create)}}class yi{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?Yw(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Xt(s,a,i)}}function Yw(t,e){return t.replace(Xw,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const Xw=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t){return JSON.parse(t)}function Ke(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg=function(t){let e={},n={},i={},s="";try{const r=t.split(".");e=Qs(ho(r[0])||""),n=Qs(ho(r[1])||""),s=r[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:s}},Qw=function(t){const e=Pg(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Jw=function(t){const e=Pg(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ki(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ic(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fo(t,e,n){const i={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=e.call(n,t[s],s,t));return i}function Js(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],o=e[s];if(_h(r)&&_h(o)){if(!Js(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function _h(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)i[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)i[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=(d<<1|d>>>31)&4294967295}let s=this.chain_[0],r=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let h=0;h<80;h++){h<40?h<20?(l=a^r&(o^a),u=1518500249):(l=r^o^a,u=1859775393):h<60?(l=r&o|a&(r|o),u=2400959708):(l=r^o^a,u=3395469782);const d=(s<<5|s>>>27)+l+c+u+i[h]&4294967295;c=a,a=o,o=(r<<30|r>>>2)&4294967295,r=s,s=d}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let s=0;const r=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(r[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(r),o=0;break}}else for(;s<n;)if(r[o]=e[s],++o,++s,o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let r=24;r>=0;r-=8)e[i]=this.chain_[s]>>r&255,++i;return e}}function e0(t,e){const n=new t0(t,e);return n.subscribe.bind(n)}class t0{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");n0(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=xa),s.error===void 0&&(s.error=xa),s.complete===void 0&&(s.complete=xa);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function n0(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xa(){}function Rl(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);if(s>=55296&&s<=56319){const r=s-55296;i++,F(i<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(i)-56320;s=65536+(r<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ea=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=1e3,r0=2,o0=4*60*60*1e3,a0=.5;function yh(t,e=s0,n=r0){const i=e*Math.pow(n,t),s=Math.round(a0*i*(Math.random()-.5)*2);return Math.min(o0,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class Mt{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Zo;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(u0(e))try{this.getOrInitializeService({instanceIdentifier:Vn})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=Vn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vn){return this.instances.has(e)}getOptions(e=Vn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:l0(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Vn){return this.component?this.component.multipleInstances?e:Vn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function l0(t){return t===Vn?void 0:t}function u0(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new c0(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const d0={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},f0=Ie.INFO,p0={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},g0=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=p0[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ta{constructor(e){this.name=e,this._logLevel=f0,this._logHandler=g0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?d0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const m0=(t,e)=>e.some(n=>t instanceof n);let bh,vh;function _0(){return bh||(bh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function y0(){return vh||(vh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Mg=new WeakMap,Sc=new WeakMap,Dg=new WeakMap,ka=new WeakMap,Ol=new WeakMap;function b0(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Rn(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Mg.set(n,t)}).catch(()=>{}),Ol.set(e,t),e}function v0(t){if(Sc.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});Sc.set(t,e)}let Ec={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Dg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function w0(t){Ec=t(Ec)}function I0(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Aa(this),e,...n);return Dg.set(i,e.sort?e.sort():[e]),Rn(i)}:y0().includes(t)?function(...e){return t.apply(Aa(this),e),Rn(Mg.get(this))}:function(...e){return Rn(t.apply(Aa(this),e))}}function S0(t){return typeof t=="function"?I0(t):(t instanceof IDBTransaction&&v0(t),m0(t,_0())?new Proxy(t,Ec):t)}function Rn(t){if(t instanceof IDBRequest)return b0(t);if(ka.has(t))return ka.get(t);const e=S0(t);return e!==t&&(ka.set(t,e),Ol.set(e,t)),e}const Aa=t=>Ol.get(t);function E0(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(t,e),a=Rn(o);return i&&o.addEventListener("upgradeneeded",c=>{i(Rn(o.result),c.oldVersion,c.newVersion,Rn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{r&&c.addEventListener("close",()=>r()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const C0=["get","getKey","getAll","getAllKeys","count"],T0=["put","add","delete","clear"],Ra=new Map;function wh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ra.get(e))return Ra.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=T0.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||C0.includes(n)))return;const r=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return i&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return Ra.set(e,r),r}w0(t=>({...t,get:(e,n,i)=>wh(e,n)||t.get(e,n,i),has:(e,n)=>!!wh(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(k0(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function k0(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cc="@firebase/app",Ih="0.9.25";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new ta("@firebase/app"),A0="@firebase/app-compat",R0="@firebase/analytics-compat",O0="@firebase/analytics",P0="@firebase/app-check-compat",M0="@firebase/app-check",D0="@firebase/auth",N0="@firebase/auth-compat",L0="@firebase/database",F0="@firebase/database-compat",$0="@firebase/functions",B0="@firebase/functions-compat",U0="@firebase/installations",H0="@firebase/installations-compat",W0="@firebase/messaging",j0="@firebase/messaging-compat",z0="@firebase/performance",V0="@firebase/performance-compat",K0="@firebase/remote-config",q0="@firebase/remote-config-compat",G0="@firebase/storage",Y0="@firebase/storage-compat",X0="@firebase/firestore",Q0="@firebase/firestore-compat",J0="firebase",Z0="10.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc="[DEFAULT]",eI={[Cc]:"fire-core",[A0]:"fire-core-compat",[O0]:"fire-analytics",[R0]:"fire-analytics-compat",[M0]:"fire-app-check",[P0]:"fire-app-check-compat",[D0]:"fire-auth",[N0]:"fire-auth-compat",[L0]:"fire-rtdb",[F0]:"fire-rtdb-compat",[$0]:"fire-fn",[B0]:"fire-fn-compat",[U0]:"fire-iid",[H0]:"fire-iid-compat",[W0]:"fire-fcm",[j0]:"fire-fcm-compat",[z0]:"fire-perf",[V0]:"fire-perf-compat",[K0]:"fire-rc",[q0]:"fire-rc-compat",[G0]:"fire-gcs",[Y0]:"fire-gcs-compat",[X0]:"fire-fst",[Q0]:"fire-fst-compat","fire-js":"fire-js",[J0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new Map,xc=new Map;function tI(t,e){try{t.container.addComponent(e)}catch(n){li.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gt(t){const e=t.name;if(xc.has(e))return li.debug(`There were multiple attempts to register component ${e}.`),!1;xc.set(e,t);for(const n of po.values())tI(n,t);return!0}function bi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},On=new yi("app","Firebase",nI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=Z0;function sI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Tc,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw On.create("bad-app-name",{appName:String(s)});if(n||(n=Cg()),!n)throw On.create("no-options");const r=po.get(s);if(r){if(Js(n,r.options)&&Js(i,r.config))return r;throw On.create("duplicate-app",{appName:s})}const o=new h0(s);for(const c of xc.values())o.addComponent(c);const a=new iI(n,i,o);return po.set(s,a),a}function Pl(t=Tc){const e=po.get(t);if(!e&&t===Tc&&Cg())return sI();if(!e)throw On.create("no-app",{appName:t});return e}function _t(t,e,n){var i;let s=(i=eI[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),li.warn(a.join(" "));return}Gt(new Mt(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="firebase-heartbeat-database",oI=1,Zs="firebase-heartbeat-store";let Oa=null;function Ng(){return Oa||(Oa=E0(rI,oI,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Zs)}}}).catch(t=>{throw On.create("idb-open",{originalErrorMessage:t.message})})),Oa}async function aI(t){try{return await(await Ng()).transaction(Zs).objectStore(Zs).get(Lg(t))}catch(e){if(e instanceof Xt)li.warn(e.message);else{const n=On.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});li.warn(n.message)}}}async function Sh(t,e){try{const i=(await Ng()).transaction(Zs,"readwrite");await i.objectStore(Zs).put(e,Lg(t)),await i.done}catch(n){if(n instanceof Xt)li.warn(n.message);else{const i=On.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});li.warn(i.message)}}}function Lg(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=1024,lI=30*24*60*60*1e3;class uI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Eh();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=lI}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Eh(),{heartbeatsToSend:i,unsentEntries:s}=hI(this._heartbeatsCache.heartbeats),r=uo(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Eh(){return new Date().toISOString().substring(0,10)}function hI(t,e=cI){const n=[];let i=t.slice();for(const s of t){const r=n.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),Ch(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ch(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class dI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rg()?Og().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await aI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ch(t){return uo(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(t){Gt(new Mt("platform-logger",e=>new x0(e),"PRIVATE")),Gt(new Mt("heartbeat",e=>new uI(e),"PRIVATE")),_t(Cc,Ih,t),_t(Cc,Ih,"esm2017"),_t("fire-js","")}fI("");var pI="firebase",gI="10.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_t(pI,gI,"app");const mI=(t,e)=>e.some(n=>t instanceof n);let Th,xh;function _I(){return Th||(Th=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yI(){return xh||(xh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fg=new WeakMap,kc=new WeakMap,$g=new WeakMap,Pa=new WeakMap,Ml=new WeakMap;function bI(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Pn(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Fg.set(n,t)}).catch(()=>{}),Ml.set(e,t),e}function vI(t){if(kc.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});kc.set(t,e)}let Ac={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$g.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wI(t){Ac=t(Ac)}function II(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Ma(this),e,...n);return $g.set(i,e.sort?e.sort():[e]),Pn(i)}:yI().includes(t)?function(...e){return t.apply(Ma(this),e),Pn(Fg.get(this))}:function(...e){return Pn(t.apply(Ma(this),e))}}function SI(t){return typeof t=="function"?II(t):(t instanceof IDBTransaction&&vI(t),mI(t,_I())?new Proxy(t,Ac):t)}function Pn(t){if(t instanceof IDBRequest)return bI(t);if(Pa.has(t))return Pa.get(t);const e=SI(t);return e!==t&&(Pa.set(t,e),Ml.set(e,t)),e}const Ma=t=>Ml.get(t);function EI(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(t,e),a=Pn(o);return i&&o.addEventListener("upgradeneeded",c=>{i(Pn(o.result),c.oldVersion,c.newVersion,Pn(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(c=>{r&&c.addEventListener("close",()=>r()),s&&c.addEventListener("versionchange",()=>s())}).catch(()=>{}),a}const CI=["get","getKey","getAll","getAllKeys","count"],TI=["put","add","delete","clear"],Da=new Map;function kh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Da.get(e))return Da.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=TI.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||CI.includes(n)))return;const r=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return i&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return Da.set(e,r),r}wI(t=>({...t,get:(e,n,i)=>kh(e,n)||t.get(e,n,i),has:(e,n)=>!!kh(e,n)||t.has(e,n)}));const Bg="@firebase/installations",Dl="0.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=1e4,Hg=`w:${Dl}`,Wg="FIS_v2",xI="https://firebaseinstallations.googleapis.com/v1",kI=60*60*1e3,AI="installations",RI="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ui=new yi(AI,RI,OI);function jg(t){return t instanceof Xt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg({projectId:t}){return`${xI}/projects/${t}/installations`}function Vg(t){return{token:t.token,requestStatus:2,expiresIn:MI(t.expiresIn),creationTime:Date.now()}}async function Kg(t,e){const i=(await e.json()).error;return ui.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function qg({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function PI(t,{refreshToken:e}){const n=qg(t);return n.append("Authorization",DI(e)),n}async function Gg(t){const e=await t();return e.status>=500&&e.status<600?t():e}function MI(t){return Number(t.replace("s","000"))}function DI(t){return`${Wg} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NI({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=zg(t),s=qg(t),r=e.getImmediate({optional:!0});if(r){const l=await r.getHeartbeatsHeader();l&&s.append("x-firebase-client",l)}const o={fid:n,authVersion:Wg,appId:t.appId,sdkVersion:Hg},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await Gg(()=>fetch(i,a));if(c.ok){const l=await c.json();return{fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:Vg(l.authToken)}}else throw await Kg("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=/^[cdef][\w-]{21}$/,Rc="";function $I(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=BI(t);return FI.test(n)?n:Rc}catch{return Rc}}function BI(t){return LI(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=new Map;function Qg(t,e){const n=na(t);Jg(n,e),UI(n,e)}function Jg(t,e){const n=Xg.get(t);if(n)for(const i of n)i(e)}function UI(t,e){const n=HI();n&&n.postMessage({key:t,fid:e}),WI()}let Jn=null;function HI(){return!Jn&&"BroadcastChannel"in self&&(Jn=new BroadcastChannel("[Firebase] FID Change"),Jn.onmessage=t=>{Jg(t.data.key,t.data.fid)}),Jn}function WI(){Xg.size===0&&Jn&&(Jn.close(),Jn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="firebase-installations-database",zI=1,hi="firebase-installations-store";let Na=null;function Nl(){return Na||(Na=EI(jI,zI,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(hi)}}})),Na}async function go(t,e){const n=na(t),s=(await Nl()).transaction(hi,"readwrite"),r=s.objectStore(hi),o=await r.get(n);return await r.put(e,n),await s.done,(!o||o.fid!==e.fid)&&Qg(t,e.fid),e}async function Zg(t){const e=na(t),i=(await Nl()).transaction(hi,"readwrite");await i.objectStore(hi).delete(e),await i.done}async function ia(t,e){const n=na(t),s=(await Nl()).transaction(hi,"readwrite"),r=s.objectStore(hi),o=await r.get(n),a=e(o);return a===void 0?await r.delete(n):await r.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&Qg(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(t){let e;const n=await ia(t.appConfig,i=>{const s=VI(i),r=KI(t,s);return e=r.registrationPromise,r.installationEntry});return n.fid===Rc?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function VI(t){const e=t||{fid:$I(),registrationStatus:0};return em(e)}function KI(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ui.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=qI(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:GI(t)}:{installationEntry:e}}async function qI(t,e){try{const n=await NI(t,e);return go(t.appConfig,n)}catch(n){throw jg(n)&&n.customData.serverCode===409?await Zg(t.appConfig):await go(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function GI(t){let e=await Ah(t.appConfig);for(;e.registrationStatus===1;)await Yg(100),e=await Ah(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Ll(t);return i||n}return e}function Ah(t){return ia(t,e=>{if(!e)throw ui.create("installation-not-found");return em(e)})}function em(t){return YI(t)?{fid:t.fid,registrationStatus:0}:t}function YI(t){return t.registrationStatus===1&&t.registrationTime+Ug<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI({appConfig:t,heartbeatServiceProvider:e},n){const i=QI(t,n),s=PI(t,n),r=e.getImmediate({optional:!0});if(r){const l=await r.getHeartbeatsHeader();l&&s.append("x-firebase-client",l)}const o={installation:{sdkVersion:Hg,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await Gg(()=>fetch(i,a));if(c.ok){const l=await c.json();return Vg(l)}else throw await Kg("Generate Auth Token",c)}function QI(t,{fid:e}){return`${zg(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(t,e=!1){let n;const i=await ia(t.appConfig,r=>{if(!tm(r))throw ui.create("not-registered");const o=r.authToken;if(!e&&eS(o))return r;if(o.requestStatus===1)return n=JI(t,e),r;{if(!navigator.onLine)throw ui.create("app-offline");const a=nS(r);return n=ZI(t,a),a}});return n?await n:i.authToken}async function JI(t,e){let n=await Rh(t.appConfig);for(;n.authToken.requestStatus===1;)await Yg(100),n=await Rh(t.appConfig);const i=n.authToken;return i.requestStatus===0?Fl(t,e):i}function Rh(t){return ia(t,e=>{if(!tm(e))throw ui.create("not-registered");const n=e.authToken;return iS(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function ZI(t,e){try{const n=await XI(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await go(t.appConfig,i),n}catch(n){if(jg(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Zg(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await go(t.appConfig,i)}throw n}}function tm(t){return t!==void 0&&t.registrationStatus===2}function eS(t){return t.requestStatus===2&&!tS(t)}function tS(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+kI}function nS(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function iS(t){return t.requestStatus===1&&t.requestTime+Ug<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sS(t){const e=t,{installationEntry:n,registrationPromise:i}=await Ll(e);return i?i.catch(console.error):Fl(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(t,e=!1){const n=t;return await oS(n),(await Fl(n,e)).token}async function oS(t){const{registrationPromise:e}=await Ll(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(t){if(!t||!t.options)throw La("App Configuration");if(!t.name)throw La("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw La(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function La(t){return ui.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="installations",cS="installations-internal",lS=t=>{const e=t.getProvider("app").getImmediate(),n=aS(e),i=bi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},uS=t=>{const e=t.getProvider("app").getImmediate(),n=bi(e,nm).getImmediate();return{getId:()=>sS(n),getToken:s=>rS(n,s)}};function hS(){Gt(new Mt(nm,lS,"PUBLIC")),Gt(new Mt(cS,uS,"PRIVATE"))}hS();_t(Bg,Dl);_t(Bg,Dl,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="analytics",dS="firebase_id",fS="origin",pS=60*1e3,gS="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$l="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const it=new ta("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ft=new yi("analytics","Analytics",mS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(t){if(!t.startsWith($l)){const e=ft.create("invalid-gtag-resource",{gtagURL:t});return it.warn(e.message),""}return t}function im(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function yS(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function bS(t,e){const n=yS("firebase-js-sdk-policy",{createScriptURL:_S}),i=document.createElement("script"),s=`${$l}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function vS(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function wS(t,e,n,i,s,r){const o=i[s];try{if(o)await e[o];else{const c=(await im(n)).find(l=>l.measurementId===s);c&&await e[c.appId]}}catch(a){it.error(a)}t("config",s,r)}async function IS(t,e,n,i,s){try{let r=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await im(n);for(const c of o){const l=a.find(h=>h.measurementId===c),u=l&&e[l.appId];if(u)r.push(u);else{r=[];break}}}r.length===0&&(r=Object.values(e)),await Promise.all(r),t("event",i,s||{})}catch(r){it.error(r)}}function SS(t,e,n,i){async function s(r,...o){try{if(r==="event"){const[a,c]=o;await IS(t,e,n,a,c)}else if(r==="config"){const[a,c]=o;await wS(t,e,n,i,a,c)}else if(r==="consent"){const[a]=o;t("consent","update",a)}else if(r==="get"){const[a,c,l]=o;t("get",a,c,l)}else if(r==="set"){const[a]=o;t("set",a)}else t(r,...o)}catch(a){it.error(a)}}return s}function ES(t,e,n,i,s){let r=function(...o){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=SS(r,t,e,n),{gtagCore:r,wrappedGtag:window[s]}}function CS(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes($l)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=30,xS=1e3;class kS{constructor(e={},n=xS){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const sm=new kS;function AS(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function RS(t){var e;const{appId:n,apiKey:i}=t,s={method:"GET",headers:AS(i)},r=gS.replace("{app-id}",n),o=await fetch(r,s);if(o.status!==200&&o.status!==304){let a="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw ft.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function OS(t,e=sm,n){const{appId:i,apiKey:s,measurementId:r}=t.options;if(!i)throw ft.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:i};throw ft.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new DS;return setTimeout(async()=>{a.abort()},n!==void 0?n:pS),rm({appId:i,apiKey:s,measurementId:r},o,a,e)}async function rm(t,{throttleEndTimeMillis:e,backoffCount:n},i,s=sm){var r;const{appId:o,measurementId:a}=t;try{await PS(i,e)}catch(c){if(a)return it.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const c=await RS(t);return s.deleteThrottleMetadata(o),c}catch(c){const l=c;if(!MS(l)){if(s.deleteThrottleMetadata(o),a)return it.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw c}const u=Number((r=l==null?void 0:l.customData)===null||r===void 0?void 0:r.httpStatus)===503?yh(n,s.intervalMillis,TS):yh(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return s.setThrottleMetadata(o,h),it.debug(`Calling attemptFetch again in ${u} millis`),rm(t,h,i,s)}}function PS(t,e){return new Promise((n,i)=>{const s=Math.max(e-Date.now(),0),r=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(r),i(ft.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function MS(t){if(!(t instanceof Xt)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class DS{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function NS(t,e,n,i,s){if(s&&s.global){t("event",n,i);return}else{const r=await e,o=Object.assign(Object.assign({},i),{send_to:r});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LS(){if(Rg())try{await Og()}catch(t){return it.warn(ft.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return it.warn(ft.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function FS(t,e,n,i,s,r,o){var a;const c=OS(t);c.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&it.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>it.error(f)),e.push(c);const l=LS().then(f=>{if(f)return i.getId()}),[u,h]=await Promise.all([c,l]);CS(r)||bS(r,u.measurementId),s("js",new Date);const d=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return d[fS]="firebase",d.update=!0,h!=null&&(d[dS]=h),s("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.app=e}_delete(){return delete Ps[this.app.options.appId],Promise.resolve()}}let Ps={},Oh=[];const Ph={};let Fa="dataLayer",BS="gtag",Mh,om,Dh=!1;function US(){const t=[];if(xg()&&t.push("This is a browser extension environment."),qw()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=ft.create("invalid-analytics-context",{errorInfo:e});it.warn(n.message)}}function HS(t,e,n){US();const i=t.options.appId;if(!i)throw ft.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)it.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ft.create("no-api-key");if(Ps[i]!=null)throw ft.create("already-exists",{id:i});if(!Dh){vS(Fa);const{wrappedGtag:r,gtagCore:o}=ES(Ps,Oh,Ph,Fa,BS);om=r,Mh=o,Dh=!0}return Ps[i]=FS(t,Oh,Ph,e,Mh,Fa,n),new $S(t)}function VM(t=Pl()){t=ct(t);const e=bi(t,mo);return e.isInitialized()?e.getImmediate():WS(t)}function WS(t,e={}){const n=bi(t,mo);if(n.isInitialized()){const s=n.getImmediate();if(Js(e,n.getOptions()))return s;throw ft.create("already-initialized")}return n.initialize({options:e})}function jS(t,e,n,i){t=ct(t),NS(om,Ps[t.app.options.appId],e,n,i).catch(s=>it.error(s))}const Nh="@firebase/analytics",Lh="0.10.0";function zS(){Gt(new Mt(mo,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return HS(i,s,n)},"PUBLIC")),Gt(new Mt("analytics-internal",t,"PRIVATE")),_t(Nh,Lh),_t(Nh,Lh,"esm2017");function t(e){try{const n=e.getProvider(mo).getImmediate();return{logEvent:(i,s,r)=>jS(n,i,s,r)}}catch(n){throw ft.create("interop-component-reg-failed",{reason:n})}}}zS();function Bl(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function am(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VS=am,cm=new yi("auth","Firebase",am());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=new ta("@firebase/auth");function KS(t,...e){_o.logLevel<=Ie.WARN&&_o.warn(`Auth (${cs}): ${t}`,...e)}function Jr(t,...e){_o.logLevel<=Ie.ERROR&&_o.error(`Auth (${cs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t,...e){throw Ul(t,...e)}function Vt(t,...e){return Ul(t,...e)}function lm(t,e,n){const i=Object.assign(Object.assign({},VS()),{[e]:n});return new yi("auth","Firebase",i).create(e,{appName:t.name})}function qS(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Yt(t,"argument-error"),lm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ul(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return cm.create(t,...e)}function ee(t,e,...n){if(!t)throw Ul(e,...n)}function rn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Jr(e),new Error(e)}function hn(t,e){t||rn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function GS(){return Fh()==="http:"||Fh()==="https:"}function Fh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GS()||xg()||"connection"in navigator)?navigator.onLine:!0}function XS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n){this.shortDelay=e,this.longDelay=n,hn(n>e,"Short delay should be less than long delay!"),this.isMobile=Al()||kg()}get(){return YS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t,e){hn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=new hr(3e4,6e4);function Wl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ls(t,e,n,i,s={}){return hm(t,s,async()=>{let r={},o={};i&&(e==="GET"?o=i:r={body:JSON.stringify(i)});const a=as(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),um.fetch()(dm(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},r))})}async function hm(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},QS),e);try{const s=new eE(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw xr(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw xr(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw xr(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw xr(t,"user-disabled",o);const u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw lm(t,u,l);Yt(t,u)}}catch(s){if(s instanceof Xt)throw s;Yt(t,"network-request-failed",{message:String(s)})}}async function ZS(t,e,n,i,s={}){const r=await ls(t,e,n,i,s);return"mfaPendingCredential"in r&&Yt(t,"multi-factor-auth-required",{_serverResponse:r}),r}function dm(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?Hl(t.config,s):`${t.config.apiScheme}://${s}`}class eE{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Vt(this.auth,"network-request-failed")),JS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xr(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Vt(t,e,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tE(t,e){return ls(t,"POST","/v1/accounts:delete",e)}async function nE(t,e){return ls(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iE(t,e=!1){const n=ct(t),i=await n.getIdToken(e),s=jl(i);ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Ms($a(s.auth_time)),issuedAtTime:Ms($a(s.iat)),expirationTime:Ms($a(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function $a(t){return Number(t)*1e3}function jl(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Jr("JWT malformed, contained fewer than 3 sections"),null;try{const s=ho(n);return s?JSON.parse(s):(Jr("Failed to decode base64 JWT payload"),null)}catch(s){return Jr("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function sE(t){const e=jl(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function er(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Xt&&rE(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function rE({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ms(this.lastLoginAt),this.creationTime=Ms(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(t){var e;const n=t.auth,i=await t.getIdToken(),s=await er(t,nE(n,{idToken:i}));ee(s==null?void 0:s.users.length,n,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?lE(r.providerUserInfo):[],a=cE(t.providerData,o),c=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),u=c?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new fm(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function aE(t){const e=ct(t);await yo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cE(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function lE(t){return t.map(e=>{var{providerId:n}=e,i=Bl(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uE(t,e){const n=await hm(t,{},async()=>{const i=as({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,o=dm(t,s,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",um.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hE(t,e){return ls(t,"POST","/v2/accounts:revokeToken",Wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ee(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await uE(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,o=new tr;return i&&(ee(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),r&&(ee(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tr,this.toJSON())}_performRefresh(){return rn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ri{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,r=Bl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new fm(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await er(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return iE(this,e)}reload(){return aE(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ri(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await yo(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await er(this,tE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,r,o,a,c,l,u;const h=(i=n.displayName)!==null&&i!==void 0?i:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,f=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,v=(l=n.createdAt)!==null&&l!==void 0?l:void 0,w=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:R,emailVerified:E,isAnonymous:x,providerData:H,stsTokenManager:W}=n;ee(R&&W,e,"internal-error");const j=tr.fromJSON(this.name,W);ee(typeof R=="string",e,"internal-error"),_n(h,e.name),_n(d,e.name),ee(typeof E=="boolean",e,"internal-error"),ee(typeof x=="boolean",e,"internal-error"),_n(f,e.name),_n(p,e.name),_n(_,e.name),_n(y,e.name),_n(v,e.name),_n(w,e.name);const J=new ri({uid:R,auth:e,email:d,emailVerified:E,displayName:h,isAnonymous:x,photoURL:p,phoneNumber:f,tenantId:_,stsTokenManager:j,createdAt:v,lastLoginAt:w});return H&&Array.isArray(H)&&(J.providerData=H.map(Y=>Object.assign({},Y))),y&&(J._redirectEventId=y),J}static async _fromIdTokenResponse(e,n,i=!1){const s=new tr;s.updateFromServerResponse(n);const r=new ri({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await yo(r),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=new Map;function on(t){hn(t instanceof Function,"Expected a class definition");let e=$h.get(t);return e?(hn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$h.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pm.type="NONE";const Bh=pm;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(t,e,n){return`firebase:${t}:${e}:${n}`}class $i{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=Zr(this.userKey,s.apiKey,r),this.fullPersistenceKey=Zr("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ri._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new $i(on(Bh),e,i);const s=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let r=s[0]||on(Bh);const o=Zr(i,e.config.apiKey,e.name);let a=null;for(const l of n)try{const u=await l._get(o);if(u){const h=ri._fromJSON(e,u);l!==r&&(a=h),r=l;break}}catch{}const c=s.filter(l=>l._shouldAllowMigration);return!r._shouldAllowMigration||!c.length?new $i(r,e,i):(r=c[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==r)try{await l._remove(o)}catch{}})),new $i(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_m(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gm(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bm(e))return"Blackberry";if(vm(e))return"Webos";if(zl(e))return"Safari";if((e.includes("chrome/")||mm(e))&&!e.includes("edge/"))return"Chrome";if(ym(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function gm(t=Qe()){return/firefox\//i.test(t)}function zl(t=Qe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mm(t=Qe()){return/crios\//i.test(t)}function _m(t=Qe()){return/iemobile/i.test(t)}function ym(t=Qe()){return/android/i.test(t)}function bm(t=Qe()){return/blackberry/i.test(t)}function vm(t=Qe()){return/webos/i.test(t)}function sa(t=Qe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dE(t=Qe()){var e;return sa(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fE(){return Kw()&&document.documentMode===10}function wm(t=Qe()){return sa(t)||ym(t)||vm(t)||bm(t)||/windows phone/i.test(t)||_m(t)}function pE(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t,e=[]){let n;switch(t){case"Browser":n=Uh(Qe());break;case"Worker":n=`${Uh(Qe())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cs}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((o,a)=>{try{const c=e(r);o(c)}catch(c){a(c)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mE(t,e={}){return ls(t,"GET","/v2/passwordPolicy",Wl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=6;class yE{constructor(e){var n,i,s,r;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_E,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,r,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(r=c.containsUppercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hh(this),this.idTokenSubscription=new Hh(this),this.beforeStateQueue=new gE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cm,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=on(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await $i.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(s=c.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await yo(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ct(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(on(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mE(this),n=new yE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yi("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await hE(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&on(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await $i.create(this,[on(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Im(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&KS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ra(t){return ct(t)}class Hh{constructor(e){this.auth=e,this.observer=null,this.addObserver=e0(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function wE(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=Vt("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",vE().appendChild(i)})}function IE(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(t,e){const n=bi(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Js(r,e??{}))return s;Yt(s,"already-initialized")}return n.initialize({options:e})}function EE(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(on);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function CE(t,e,n){const i=ra(t);ee(i._canInitEmulator,i,"emulator-config-failed"),ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),r=Sm(e),{host:o,port:a}=TE(e),c=a===null?"":`:${a}`;i.config.emulator={url:`${r}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||xE()}function Sm(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TE(t){const e=Sm(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:Wh(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:Wh(o)}}}function Wh(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xE(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rn("not implemented")}_getIdTokenResponse(e){return rn("not implemented")}_linkToIdToken(e,n){return rn("not implemented")}_getReauthenticationResolver(e){return rn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bi(t,e){return ZS(t,"POST","/v1/accounts:signInWithIdp",Wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="http://localhost";class di extends Em{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new di(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Yt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,r=Bl(n,["providerId","signInMethod"]);if(!i||!s)return null;const o=new di(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Bi(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Bi(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bi(e,n)}buildRequest(){const e={requestUri:kE,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=as(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends Vl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn extends dr{constructor(){super("facebook.com")}static credential(e){return di._fromParams({providerId:wn.PROVIDER_ID,signInMethod:wn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wn.credentialFromTaggedObject(e)}static credentialFromError(e){return wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wn.credential(e.oauthAccessToken)}catch{return null}}}wn.FACEBOOK_SIGN_IN_METHOD="facebook.com";wn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In extends dr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return di._fromParams({providerId:In.PROVIDER_ID,signInMethod:In.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return In.credentialFromTaggedObject(e)}static credentialFromError(e){return In.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return In.credential(n,i)}catch{return null}}}In.GOOGLE_SIGN_IN_METHOD="google.com";In.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn extends dr{constructor(){super("github.com")}static credential(e){return di._fromParams({providerId:Sn.PROVIDER_ID,signInMethod:Sn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sn.credentialFromTaggedObject(e)}static credentialFromError(e){return Sn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sn.credential(e.oauthAccessToken)}catch{return null}}}Sn.GITHUB_SIGN_IN_METHOD="github.com";Sn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En extends dr{constructor(){super("twitter.com")}static credential(e,n){return di._fromParams({providerId:En.PROVIDER_ID,signInMethod:En.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return En.credentialFromTaggedObject(e)}static credentialFromError(e){return En.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return En.credential(n,i)}catch{return null}}}En.TWITTER_SIGN_IN_METHOD="twitter.com";En.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await ri._fromIdTokenResponse(e,i,s),o=jh(i);return new qi({user:r,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=jh(i);return new qi({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function jh(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends Xt{constructor(e,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,bo.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new bo(e,n,i,s)}}function Cm(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?bo._fromErrorAndOperation(t,r,e,i):r})}async function AE(t,e,n=!1){const i=await er(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return qi._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RE(t,e,n=!1){const{auth:i}=t,s="reauthenticate";try{const r=await er(t,Cm(i,s,e,t),n);ee(r.idToken,i,"internal-error");const o=jl(r.idToken);ee(o,i,"internal-error");const{sub:a}=o;return ee(t.uid===a,i,"user-mismatch"),qi._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Yt(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OE(t,e,n=!1){const i="signIn",s=await Cm(t,i,e),r=await qi._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}function PE(t,e,n,i){return ct(t).onIdTokenChanged(e,n,i)}function ME(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}function KM(t){return ct(t).signOut()}const vo="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vo,"1"),this.storage.removeItem(vo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(){const t=Qe();return zl(t)||sa(t)}const NE=1e3,LE=10;class xm extends Tm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=DE()&&pE(),this.fallbackToPolling=wm(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(i);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);fE()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,LE):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},NE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xm.type="LOCAL";const FE=xm;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends Tm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}km.type="SESSION";const Am=km;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new oa(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async l=>l(n.origin,r)),c=await $E(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}oa.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,c)=>{const l=Kl("",20);s.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(h){const d=h;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(d.data.response);break;default:clearTimeout(u),clearTimeout(r),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return window}function UE(t){Kt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(){return typeof Kt().WorkerGlobalScope<"u"&&typeof Kt().importScripts=="function"}async function HE(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WE(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function jE(){return Rm()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="firebaseLocalStorageDb",zE=1,wo="firebaseLocalStorage",Pm="fbase_key";class fr{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function aa(t,e){return t.transaction([wo],e?"readwrite":"readonly").objectStore(wo)}function VE(){const t=indexedDB.deleteDatabase(Om);return new fr(t).toPromise()}function Pc(){const t=indexedDB.open(Om,zE);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(wo,{keyPath:Pm})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(wo)?e(i):(i.close(),await VE(),e(await Pc()))})})}async function zh(t,e,n){const i=aa(t,!0).put({[Pm]:e,value:n});return new fr(i).toPromise()}async function KE(t,e){const n=aa(t,!1).get(e),i=await new fr(n).toPromise();return i===void 0?null:i.value}function Vh(t,e){const n=aa(t,!0).delete(e);return new fr(n).toPromise()}const qE=800,GE=3;class Mm{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>GE)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=oa._getInstance(jE()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await HE(),!this.activeServiceWorker)return;this.sender=new BE(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WE()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pc();return await zh(e,vo,"1"),await Vh(e,vo),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>zh(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>KE(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Vh(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=aa(s,!1).getAll();return new fr(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Mm.type="LOCAL";const YE=Mm;new hr(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t,e){return e?on(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends Em{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function XE(t){return OE(t.auth,new ql(t),t.bypassAuthState)}function QE(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),RE(n,new ql(t),t.bypassAuthState)}async function JE(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),AE(n,new ql(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XE;case"linkViaPopup":case"linkViaRedirect":return JE;case"reauthViaPopup":case"reauthViaRedirect":return QE;default:Yt(this.auth,"internal-error")}}resolve(e){hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=new hr(2e3,1e4);async function qM(t,e,n){const i=ra(t);qS(t,e,Vl);const s=Dm(i,n);return new Zn(i,"signInViaPopup",e,s).executeNotNull()}class Zn extends Nm{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Zn.currentPopupAction&&Zn.currentPopupAction.cancel(),Zn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){hn(this.filter.length===1,"Popup operations only handle one event");const e=Kl();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZE.get())};e()}}Zn.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="pendingRedirect",eo=new Map;class tC extends Nm{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=eo.get(this.auth._key());if(!e){try{const i=await nC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}eo.set(this.auth._key(),e)}return this.bypassAuthState||eo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nC(t,e){const n=rC(e),i=sC(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function iC(t,e){eo.set(t._key(),e)}function sC(t){return on(t._redirectPersistence)}function rC(t){return Zr(eC,t.config.apiKey,t.name)}async function oC(t,e,n=!1){const i=ra(t),s=Dm(i,e),o=await new tC(i,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=10*60*1e3;class cC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Lm(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Vt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kh(e))}saveEventToCache(e){this.cachedEventUids.add(Kh(e)),this.lastProcessedEventTime=Date.now()}}function Kh(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Lm({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lm(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uC(t,e={}){return ls(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dC=/^https?/;async function fC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await uC(t);for(const n of e)try{if(pC(n))return}catch{}Yt(t,"unauthorized-domain")}function pC(t){const e=Oc(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!dC.test(n))return!1;if(hC.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=new hr(3e4,6e4);function qh(){const t=Kt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function mC(t){return new Promise((e,n)=>{var i,s,r;function o(){qh(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qh(),n(Vt(t,"network-request-failed"))},timeout:gC.get()})}if(!((s=(i=Kt().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=Kt().gapi)===null||r===void 0)&&r.load)o();else{const a=IE("iframefcb");return Kt()[a]=()=>{gapi.load?o():n(Vt(t,"network-request-failed"))},wE(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw to=null,e})}let to=null;function _C(t){return to=to||mC(t),to}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=new hr(5e3,15e3),bC="__/auth/iframe",vC="emulator/auth/iframe",wC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SC(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Hl(e,vC):`https://${t.config.authDomain}/${bC}`,i={apiKey:e.apiKey,appName:t.name,v:cs},s=IC.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${as(i).slice(1)}`}async function EC(t){const e=await _C(t),n=Kt().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:SC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wC,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=Vt(t,"network-request-failed"),a=Kt().setTimeout(()=>{r(o)},yC.get());function c(){Kt().clearTimeout(a),s(i)}i.ping(c).then(c,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TC=500,xC=600,kC="_blank",AC="http://localhost";class Gh{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RC(t,e,n,i=TC,s=xC){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},CC),{width:i.toString(),height:s.toString(),top:r,left:o}),l=Qe().toLowerCase();n&&(a=mm(l)?kC:n),gm(l)&&(e=e||AC,c.scrollbars="yes");const u=Object.entries(c).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(dE(l)&&a!=="_self")return OC(e||"",a),new Gh(null);const h=window.open(e||"",a,u);ee(h,t,"popup-blocked");try{h.focus()}catch{}return new Gh(h)}function OC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="__/auth/handler",MC="emulator/auth/handler",DC=encodeURIComponent("fac");async function Yh(t,e,n,i,s,r){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:cs,eventId:s};if(e instanceof Vl){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Ic(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(r||{}))o[u]=h}if(e instanceof dr){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const c=await t._getAppCheckToken(),l=c?`#${DC}=${encodeURIComponent(c)}`:"";return`${NC(t)}?${as(a).slice(1)}${l}`}function NC({config:t}){return t.emulator?Hl(t,MC):`https://${t.authDomain}/${PC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba="webStorageSupport";class LC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Am,this._completeRedirectFn=oC,this._overrideRedirectResult=iC}async _openPopup(e,n,i,s){var r;hn((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await Yh(e,n,i,Oc(),s);return RC(e,o,Kl())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await Yh(e,n,i,Oc(),s);return UE(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(hn(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await EC(e),i=new cC(e);return n.register("authEvent",s=>(ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ba,{type:Ba},s=>{var r;const o=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[Ba];o!==void 0&&n(!!o),Yt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return wm()||zl()||sa()}}const FC=LC;var Xh="@firebase/auth",Qh="1.5.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function UC(t){Gt(new Mt("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Im(t)},l=new bE(i,s,r,c);return EE(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Gt(new Mt("auth-internal",e=>{const n=ra(e.getProvider("auth").getImmediate());return(i=>new $C(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_t(Xh,Qh,BC(t)),_t(Xh,Qh,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=5*60,WC=Tg("authIdTokenMaxAge")||HC;let Jh=null;const jC=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>WC)return;const s=n==null?void 0:n.token;Jh!==s&&(Jh=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function GM(t=Pl()){const e=bi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=SE(t,{popupRedirectResolver:FC,persistence:[YE,FE,Am]}),i=Tg("authTokenSyncURL");if(i){const r=jC(i);ME(n,r,()=>r(n.currentUser)),PE(n,o=>r(o))}const s=Eg("auth");return s&&CE(n,`http://${s}`),n}UC("Browser");var Zh={};const ed="@firebase/database",td="1.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fm="";function zC(t){Fm=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ke(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Qs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return gn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new VC(e)}}catch{}return new KC},ei=$m("localStorage"),Mc=$m("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new ta("@firebase/database"),qC=function(){let t=1;return function(){return t++}}(),Bm=function(t){const e=i0(t),n=new Zw;n.update(e);const i=n.digest();return xl.encodeByteArray(i)},pr=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=pr.apply(null,i):typeof i=="object"?e+=Ke(i):e+=i,e+=" "}return e};let oi=null,nd=!0;const GC=function(t,e){F(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ui.logLevel=Ie.VERBOSE,oi=Ui.log.bind(Ui),e&&Mc.set("logging_enabled",!0)):typeof t=="function"?oi=t:(oi=null,Mc.remove("logging_enabled"))},Ge=function(...t){if(nd===!0&&(nd=!1,oi===null&&Mc.get("logging_enabled")===!0&&GC(!0)),oi){const e=pr.apply(null,t);oi(e)}},gr=function(t){return function(...e){Ge(t,...e)}},Dc=function(...t){const e="FIREBASE INTERNAL ERROR: "+pr(...t);Ui.error(e)},dn=function(...t){const e=`FIREBASE FATAL ERROR: ${pr(...t)}`;throw Ui.error(e),new Error(e)},st=function(...t){const e="FIREBASE WARNING: "+pr(...t);Ui.warn(e)},YC=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&st("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Um=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},XC=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Gi="[MIN_NAME]",fi="[MAX_NAME]",us=function(t,e){if(t===e)return 0;if(t===Gi||e===fi)return-1;if(e===Gi||t===fi)return 1;{const n=id(t),i=id(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},QC=function(t,e){return t===e?0:t<e?-1:1},gs=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ke(e))},Gl=function(t){if(typeof t!="object"||t===null)return Ke(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Ke(e[i]),n+=":",n+=Gl(t[e[i]]);return n+="}",n},Hm=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let s=0;s<n;s+=e)s+e>n?i.push(t.substring(s,n)):i.push(t.substring(s,s+e));return i};function bt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Wm=function(t){F(!Um(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let s,r,o,a,c;t===0?(r=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),r=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(r=0,o=Math.round(t/Math.pow(2,1-i-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(r%2?1:0),r=Math.floor(r/2);l.push(s?1:0),l.reverse();const u=l.join("");let h="";for(c=0;c<64;c+=8){let d=parseInt(u.substr(c,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},JC=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ZC=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},eT=new RegExp("^-?(0*)\\d{1,10}$"),tT=-2147483648,nT=2147483647,id=function(t){if(eT.test(t)){const e=Number(t);if(e>=tT&&e<=nT)return e}return null},hs=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw st("Exception was thrown by user callback.",n),e},Math.floor(0))}},iT=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ds=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){st(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ge("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',st(e)}}class Hi{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Hi.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl="5",jm="v",zm="s",Vm="r",Km="f",qm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Gm="ls",Ym="p",Nc="ac",Xm="websocket",Qm="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n,i,s,r=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ei.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ei.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function oT(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Zm(t,e,n){F(typeof e=="string","typeof type must == string"),F(typeof n=="object","typeof params must == object");let i;if(e===Xm)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Qm)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);oT(t)&&(n.ns=t.namespace);const s=[];return bt(n,(r,o)=>{s.push(r+"="+o)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(){this.counters_={}}incrementCounter(e,n=1){gn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return $w(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua={},Ha={};function Xl(t){const e=t.toString();return Ua[e]||(Ua[e]=new aT),Ua[e]}function cT(t,e){const n=t.toString();return Ha[n]||(Ha[n]=e()),Ha[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&hs(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd="start",uT="close",hT="pLPCommand",dT="pRTLPCB",e_="id",t_="pw",n_="ser",fT="cb",pT="seg",gT="ts",mT="d",_T="dframe",i_=1870,s_=30,yT=i_-s_,bT=25e3,vT=3e4;class Oi{constructor(e,n,i,s,r,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=gr(e),this.stats_=Xl(n),this.urlFn=c=>(this.appCheckToken&&(c[Nc]=this.appCheckToken),Zm(n,Qm,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new lT(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(vT)),XC(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ql((...r)=>{const[o,a,c,l,u]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===sd)this.id=a,this.password=c;else if(o===uT)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{const[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[sd]="t",i[n_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[fT]=this.scriptTagHolder.uniqueCallbackIdentifier),i[jm]=Yl,this.transportSessionId&&(i[zm]=this.transportSessionId),this.lastSessionId&&(i[Gm]=this.lastSessionId),this.applicationId&&(i[Ym]=this.applicationId),this.appCheckToken&&(i[Nc]=this.appCheckToken),typeof location<"u"&&location.hostname&&qm.test(location.hostname)&&(i[Vm]=Km);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Oi.forceAllow_=!0}static forceDisallow(){Oi.forceDisallow_=!0}static isAvailable(){return Oi.forceAllow_?!0:!Oi.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!JC()&&!ZC()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ke(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Ig(n),s=Hm(i,yT);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[_T]="t",i[e_]=e,i[t_]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ke(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Ql{constructor(e,n,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=qC(),window[hT+this.uniqueCallbackIdentifier]=e,window[dT+this.uniqueCallbackIdentifier]=n,this.myIFrame=Ql.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ge("frame writing exception"),a.stack&&Ge(a.stack),Ge(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ge("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[e_]=this.myID,e[t_]=this.myPW,e[n_]=this.currentSerial;let n=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+s_+i.length<=i_;){const o=this.pendingSegs.shift();i=i+"&"+pT+s+"="+o.seg+"&"+gT+s+"="+o.ts+"&"+mT+s+"="+o.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(bT)),r=()=>{clearTimeout(s),i()};this.addTag(e,r)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Ge("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=16384,IT=45e3;let Io=null;typeof MozWebSocket<"u"?Io=MozWebSocket:typeof WebSocket<"u"&&(Io=WebSocket);class Tt{constructor(e,n,i,s,r,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=gr(this.connId),this.stats_=Xl(n),this.connURL=Tt.connectionURL_(n,o,a,s,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,s,r){const o={};return o[jm]=Yl,typeof location<"u"&&location.hostname&&qm.test(location.hostname)&&(o[Vm]=Km),n&&(o[zm]=n),i&&(o[Gm]=i),s&&(o[Nc]=s),r&&(o[Ym]=r),Zm(e,Xm,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ei.set("previous_websocket_failure",!0);try{let i;Ag(),this.mySock=new Io(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Tt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Io!==null&&!Tt.forceDisallow_}static previouslyFailed(){return ei.isInMemoryStorage||ei.get("previous_websocket_failure")===!0}markConnectionHealthy(){ei.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Qs(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(F(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Ke(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Hm(n,wT);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(IT))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Tt.responsesRequiredToBeHealthy=2;Tt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Oi,Tt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Tt&&Tt.isAvailable();let i=n&&!Tt.previouslyFailed();if(e.webSocketOnly&&(n||st("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Tt];else{const s=this.transports_=[];for(const r of nr.ALL_TRANSPORTS)r&&r.isAvailable()&&s.push(r);nr.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}nr.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=6e4,ET=5e3,CT=10*1024,TT=100*1024,Wa="t",rd="d",xT="s",od="r",kT="e",ad="o",cd="a",ld="n",ud="p",AT="h";class RT{constructor(e,n,i,s,r,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=gr("c:"+this.id+":"),this.transportManager_=new nr(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Ds(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>TT?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>CT?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Wa in e){const n=e[Wa];n===cd?this.upgradeIfSecondaryHealthy_():n===od?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===ad&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=gs("t",e),i=gs("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ud,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:cd,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ld,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=gs("t",e),i=gs("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=gs(Wa,e);if(rd in e){const i=e[rd];if(n===AT){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===ld){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===xT?this.onConnectionShutdown_(i):n===od?this.onReset_(i):n===kT?Dc("Server Error: "+i):n===ad?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Dc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Yl!==i&&st("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Ds(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(ST))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ds(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(ET))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ud,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ei.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{put(e,n,i,s){}merge(e,n,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e){this.allowedEvents_=e,this.listeners_={},F(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const s=this.getInitialEvent(e);s&&n.apply(i,s)}off(e,n,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(e){F(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends o_{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Al()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new So}getInitialEvent(e){return F(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd=32,dd=768;class Ae{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ee(){return new Ae("")}function ce(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ln(t){return t.pieces_.length-t.pieceNum_}function xe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ae(t.pieces_,e)}function a_(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function OT(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function c_(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function l_(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ae(e,0)}function $e(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof Ae)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new Ae(n,0)}function le(t){return t.pieceNum_>=t.pieces_.length}function gt(t,e){const n=ce(t),i=ce(e);if(n===null)return e;if(n===i)return gt(xe(t),xe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function u_(t,e){if(Ln(t)!==Ln(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Rt(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Ln(t)>Ln(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class PT{constructor(e,n){this.errorPrefix_=n,this.parts_=c_(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=ea(this.parts_[i]);h_(this)}}function MT(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ea(e),h_(t)}function DT(t){const e=t.parts_.pop();t.byteLength_-=ea(e),t.parts_.length>0&&(t.byteLength_-=1)}function h_(t){if(t.byteLength_>dd)throw new Error(t.errorPrefix_+"has a key path longer than "+dd+" bytes ("+t.byteLength_+").");if(t.parts_.length>hd)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+hd+") or object contains a cycle "+Kn(t))}function Kn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends o_{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Jl}getInitialEvent(e){return F(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=1e3,NT=60*5*1e3,fd=30*1e3,LT=1.3,FT=3e4,$T="server_kill",pd=3;class un extends r_{constructor(e,n,i,s,r,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=un.nextPersistentConnectionId_++,this.log_=gr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ms,this.maxReconnectDelay_=NT,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Ag())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Jl.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&So.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const s=++this.requestNumber_,r={r:s,a:e,b:n};this.log_(Ke(r)),F(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();const n=new Zo,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,i,s){this.initConnection_();const r=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),F(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),F(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:i};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+i+" for "+s);const r={p:i},o="q";e.tag&&(r.q=n._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(o,r,a=>{const c=a.d,l=a.s;un.warnOnListenWarnings_(c,n),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&gn(e,"w")){const i=Ki(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();st(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Jw(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=fd)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Qw(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,s=>{const r=s.s,o=s.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),F(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,n)}sendUnlisten_(e,n,i,s){this.log_("Unlisten on "+e+" for "+n);const r={p:e},o="n";s&&(r.q=i,r.t=s),this.sendRequest(o,r)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,s){const r={p:n,d:i};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,i,s){this.putInternal("p",e,n,i,s)}merge(e,n,i,s){this.putInternal("m",e,n,i,s)}putInternal(e,n,i,s,r){this.initConnection_();const o={p:n,d:i};r!==void 0&&(o.h=r),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(r.s,r.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const r=i.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ke(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Dc("Unrecognized action received from server: "+Ke(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){F(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ms,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ms,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>FT&&(this.reconnectDelay_=ms),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*LT)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+un.nextConnectionId_++,r=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,i())},l=function(h){F(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Ge("getToken() completed but was canceled"):(Ge("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new RT(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,f=>{st(f+" ("+this.repoInfo_.toString()+")"),this.interrupt($T)},r))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&st(h),c())}}}interrupt(e){Ge("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ge("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ic(this.interruptReasons_)&&(this.reconnectDelay_=ms,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(r=>Gl(r)).join("$"):i="default";const s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const i=new Ae(e).toString();let s;if(this.listens.has(i)){const r=this.listens.get(i);s=r.get(n),r.delete(n),r.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,n){Ge("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=pd&&(this.reconnectDelay_=fd,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ge("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=pd&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Fm.replace(/\./g,"-")]=1,Al()?e["framework.cordova"]=1:kg()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=So.getInstance().currentlyOnline();return Ic(this.interruptReasons_)&&e}}un.nextPersistentConnectionId_=0;un.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ue(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new ue(Gi,e),s=new ue(Gi,n);return this.compare(i,s)!==0}minPost(){return ue.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kr;class d_ extends ca{static get __EMPTY_NODE(){return kr}static set __EMPTY_NODE(e){kr=e}compare(e,n){return us(e.name,n.name)}isDefinedOn(e){throw os("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ue.MIN}maxPost(){return new ue(fi,kr)}makePost(e,n){return F(typeof e=="string","KeyIndex indexValue must always be a string."),new ue(e,kr)}toString(){return".key"}}const Wi=new d_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ue{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??Ue.RED,this.left=s??nt.EMPTY_NODE,this.right=r??nt.EMPTY_NODE}copy(e,n,i,s,r){return new Ue(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return r<0?s=s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return nt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,s;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return nt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ue.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ue.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ue.RED=!0;Ue.BLACK=!1;class BT{copy(e,n,i,s,r){return this}insert(e,n,i){return new Ue(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class nt{constructor(e,n=nt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new nt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ue.BLACK,null,null))}remove(e){return new nt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ue.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ar(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ar(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ar(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ar(this.root_,null,this.comparator_,!0,e)}}nt.EMPTY_NODE=new BT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t,e){return us(t.name,e.name)}function Zl(t,e){return us(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc;function HT(t){Lc=t}const f_=function(t){return typeof t=="number"?"number:"+Wm(t):"string:"+t},p_=function(t){if(t.isLeafNode()){const e=t.val();F(typeof e=="string"||typeof e=="number"||typeof e=="object"&&gn(e,".sv"),"Priority must be a string or number.")}else F(t===Lc||t.isEmpty(),"priority of unexpected type.");F(t===Lc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gd;class Be{constructor(e,n=Be.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,F(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),p_(this.priorityNode_)}static set __childrenNodeConstructor(e){gd=e}static get __childrenNodeConstructor(){return gd}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Be(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Be.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return le(e)?this:ce(e)===".priority"?this.priorityNode_:Be.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Be.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=ce(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(F(i!==".priority"||Ln(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Be.__childrenNodeConstructor.EMPTY_NODE.updateChild(xe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+f_(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Wm(this.value_):e+=this.value_,this.lazyHash_=Bm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Be.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Be.__childrenNodeConstructor?-1:(F(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,s=Be.VALUE_TYPE_ORDER.indexOf(n),r=Be.VALUE_TYPE_ORDER.indexOf(i);return F(s>=0,"Unknown leaf type: "+n),F(r>=0,"Unknown leaf type: "+i),s===r?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Be.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g_,m_;function WT(t){g_=t}function jT(t){m_=t}class zT extends ca{compare(e,n){const i=e.node.getPriority(),s=n.node.getPriority(),r=i.compareTo(s);return r===0?us(e.name,n.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ue.MIN}maxPost(){return new ue(fi,new Be("[PRIORITY-POST]",m_))}makePost(e,n){const i=g_(e);return new ue(n,new Be("[PRIORITY-POST]",i))}toString(){return".priority"}}const Xe=new zT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=Math.log(2);class KT{constructor(e){const n=r=>parseInt(Math.log(r)/VT,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Eo=function(t,e,n,i){t.sort(e);const s=function(c,l){const u=l-c;let h,d;if(u===0)return null;if(u===1)return h=t[c],d=n?n(h):h,new Ue(d,h.node,Ue.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),_=s(f+1,l);return h=t[f],d=n?n(h):h,new Ue(d,h.node,Ue.BLACK,p,_)}},r=function(c){let l=null,u=null,h=t.length;const d=function(p,_){const y=h-p,v=h;h-=p;const w=s(y+1,v),R=t[y],E=n?n(R):R;f(new Ue(E,R.node,_,null,w))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const _=c.nextBitIsOne(),y=Math.pow(2,c.count-(p+1));_?d(y,Ue.BLACK):(d(y,Ue.BLACK),d(y,Ue.RED))}return u},o=new KT(t.length),a=r(o);return new nt(i||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ja;const xi={};class an{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return F(xi&&Xe,"ChildrenNode.ts has not been loaded"),ja=ja||new an({".priority":xi},{".priority":Xe}),ja}get(e){const n=Ki(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof nt?n:null}hasIndex(e){return gn(this.indexSet_,e.toString())}addIndex(e,n){F(e!==Wi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const r=n.getIterator(ue.Wrap);let o=r.getNext();for(;o;)s=s||e.isDefinedOn(o.node),i.push(o),o=r.getNext();let a;s?a=Eo(i,e.getCompare()):a=xi;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new an(u,l)}addToIndexes(e,n){const i=fo(this.indexes_,(s,r)=>{const o=Ki(this.indexSet_,r);if(F(o,"Missing index implementation for "+r),s===xi)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(ue.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Eo(a,o.getCompare())}else return xi;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new ue(e.name,a))),c.insert(e,e.node)}});return new an(i,this.indexSet_)}removeFromIndexes(e,n){const i=fo(this.indexes_,s=>{if(s===xi)return s;{const r=n.get(e.name);return r?s.remove(new ue(e.name,r)):s}});return new an(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _s;class ye{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&p_(this.priorityNode_),this.children_.isEmpty()&&F(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return _s||(_s=new ye(new nt(Zl),null,an.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_s}updatePriority(e){return this.children_.isEmpty()?this:new ye(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?_s:n}}getChild(e){const n=ce(e);return n===null?this:this.getImmediateChild(n).getChild(xe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(F(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new ue(e,n);let s,r;n.isEmpty()?(s=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,n),r=this.indexMap_.addToIndexes(i,this.children_));const o=s.isEmpty()?_s:this.priorityNode_;return new ye(s,o,r)}}updateChild(e,n){const i=ce(e);if(i===null)return n;{F(ce(e)!==".priority"||Ln(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(xe(e),n);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,s=0,r=!0;if(this.forEachChild(Xe,(o,a)=>{n[o]=a.val(e),i++,r&&ye.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):r=!1}),!e&&r&&s<2*i){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+f_(this.getPriority().val())+":"),this.forEachChild(Xe,(n,i)=>{const s=i.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Bm(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const s=this.resolveIndex_(i);if(s){const r=s.getPredecessorKey(new ue(e,n));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ue(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ue(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,ue.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)<0;)s.getNext(),r=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,ue.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)>0;)s.getNext(),r=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===mr?-1:0}withIndex(e){if(e===Wi||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ye(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Wi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Xe),s=n.getIterator(Xe);let r=i.getNext(),o=s.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=i.getNext(),o=s.getNext()}return r===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Wi?null:this.indexMap_.get(e.toString())}}ye.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class qT extends ye{constructor(){super(new nt(Zl),ye.EMPTY_NODE,an.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ye.EMPTY_NODE}isEmpty(){return!1}}const mr=new qT;Object.defineProperties(ue,{MIN:{value:new ue(Gi,ye.EMPTY_NODE)},MAX:{value:new ue(fi,mr)}});d_.__EMPTY_NODE=ye.EMPTY_NODE;Be.__childrenNodeConstructor=ye;HT(mr);jT(mr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=!0;function ze(t,e=null){if(t===null)return ye.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),F(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Be(n,ze(e))}if(!(t instanceof Array)&&GT){const n=[];let i=!1;if(bt(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=ze(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),n.push(new ue(o,c)))}}),n.length===0)return ye.EMPTY_NODE;const r=Eo(n,UT,o=>o.name,Zl);if(i){const o=Eo(n,Xe.getCompare());return new ye(r,ze(e),new an({".priority":o},{".priority":Xe}))}else return new ye(r,ze(e),an.Default)}else{let n=ye.EMPTY_NODE;return bt(t,(i,s)=>{if(gn(t,i)&&i.substring(0,1)!=="."){const r=ze(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(i,r))}}),n.updatePriority(ze(e))}}WT(ze);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT extends ca{constructor(e){super(),this.indexPath_=e,F(!le(e)&&ce(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),s=this.extractChild(n.node),r=i.compareTo(s);return r===0?us(e.name,n.name):r}makePost(e,n){const i=ze(e),s=ye.EMPTY_NODE.updateChild(this.indexPath_,i);return new ue(n,s)}maxPost(){const e=ye.EMPTY_NODE.updateChild(this.indexPath_,mr);return new ue(fi,e)}toString(){return c_(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT extends ca{compare(e,n){const i=e.node.compareTo(n.node);return i===0?us(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ue.MIN}maxPost(){return ue.MAX}makePost(e,n){const i=ze(e);return new ue(n,i)}toString(){return".value"}}const QT=new XT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t){return{type:"value",snapshotNode:t}}function ZT(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ex(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function md(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function tx(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return F(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return F(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Gi}hasEnd(){return this.endSet_}getIndexEndValue(){return F(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return F(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return F(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xe}copy(){const e=new eu;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function _d(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Xe?n="$priority":t.index_===QT?n="$value":t.index_===Wi?n="$key":(F(t.index_ instanceof YT,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ke(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Ke(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Ke(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Ke(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Ke(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function yd(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Xe&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends r_{constructor(e,n,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=gr("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(F(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,s){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const o=Co.getListenId_(e,i),a={};this.listens_[o]=a;const c=_d(e._queryParams);this.restRequest_(r+".json",c,(l,u)=>{let h=u;if(l===404&&(h=null,l=null),l===null&&this.onDataUpdate_(r,h,!1,i),Ki(this.listens_,o)===a){let d;l?l===401?d="permission_denied":d="rest_error:"+l:d="ok",s(d,null)}})}unlisten(e,n){const i=Co.getListenId_(e,n);delete this.listens_[i]}get(e){const n=_d(e._queryParams),i=e._path.toString(),s=new Zo;return this.restRequest_(i+".json",n,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(i,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+as(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Qs(a.responseText)}catch{st("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,c)}else a.status!==401&&a.status!==404&&st("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.rootNode_=ye.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(){return{value:null,children:new Map}}function __(t,e,n){if(le(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=ce(e);t.children.has(i)||t.children.set(i,To());const s=t.children.get(i);e=xe(e),__(s,e,n)}}function Fc(t,e,n){t.value!==null?n(e,t.value):ix(t,(i,s)=>{const r=new Ae(e.toString()+"/"+i);Fc(s,r,n)})}function ix(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&bt(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=10*1e3,rx=30*1e3,ox=5*60*1e3;class ax{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new sx(e);const i=bd+(rx-bd)*Math.random();Ds(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;bt(e,(s,r)=>{r>0&&gn(this.statsToReport_,s)&&(n[s]=r,i=!0)}),i&&this.server_.reportStats(n),Ds(this.reportStats_.bind(this),Math.floor(Math.random()*2*ox))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Wt||(Wt={}));function y_(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function b_(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function v_(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Wt.ACK_USER_WRITE,this.source=y_()}operationForChild(e){if(le(this.path)){if(this.affectedTree.value!=null)return F(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ae(e));return new xo(Ee(),n,this.revert)}}else return F(ce(this.path)===e,"operationForChild called for unrelated child."),new xo(xe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Wt.OVERWRITE}operationForChild(e){return le(this.path)?new pi(this.source,Ee(),this.snap.getImmediateChild(e)):new pi(this.source,xe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Wt.MERGE}operationForChild(e){if(le(this.path)){const n=this.children.subtree(new Ae(e));return n.isEmpty()?null:n.value?new pi(this.source,Ee(),n.value):new ir(this.source,Ee(),n)}else return F(ce(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ir(this.source,xe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(le(e))return this.isFullyInitialized()&&!this.filtered_;const n=ce(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function cx(t,e,n,i){const s=[],r=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(tx(o.childName,o.snapshotNode))}),ys(t,s,"child_removed",e,i,n),ys(t,s,"child_added",e,i,n),ys(t,s,"child_moved",r,i,n),ys(t,s,"child_changed",e,i,n),ys(t,s,"value",e,i,n),s}function ys(t,e,n,i,s,r){const o=i.filter(a=>a.type===n);o.sort((a,c)=>ux(t,a,c)),o.forEach(a=>{const c=lx(t,a,r);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function lx(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function ux(t,e,n){if(e.childName==null||n.childName==null)throw os("Should only compare child_ events.");const i=new ue(e.childName,e.snapshotNode),s=new ue(n.childName,n.snapshotNode);return t.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t,e){return{eventCache:t,serverCache:e}}function Ns(t,e,n,i){return w_(new tu(e,n,i),t.serverCache)}function I_(t,e,n,i){return w_(t.eventCache,new tu(e,n,i))}function $c(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function gi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let za;const hx=()=>(za||(za=new nt(QC)),za);class Te{constructor(e,n=hx()){this.value=e,this.children=n}static fromObject(e){let n=new Te(null);return bt(e,(i,s)=>{n=n.set(new Ae(i),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ee(),value:this.value};if(le(e))return null;{const i=ce(e),s=this.children.get(i);if(s!==null){const r=s.findRootMostMatchingPathAndValue(xe(e),n);return r!=null?{path:$e(new Ae(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(le(e))return this;{const n=ce(e),i=this.children.get(n);return i!==null?i.subtree(xe(e)):new Te(null)}}set(e,n){if(le(e))return new Te(n,this.children);{const i=ce(e),r=(this.children.get(i)||new Te(null)).set(xe(e),n),o=this.children.insert(i,r);return new Te(this.value,o)}}remove(e){if(le(e))return this.children.isEmpty()?new Te(null):new Te(null,this.children);{const n=ce(e),i=this.children.get(n);if(i){const s=i.remove(xe(e));let r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new Te(null):new Te(this.value,r)}else return this}}get(e){if(le(e))return this.value;{const n=ce(e),i=this.children.get(n);return i?i.get(xe(e)):null}}setTree(e,n){if(le(e))return n;{const i=ce(e),r=(this.children.get(i)||new Te(null)).setTree(xe(e),n);let o;return r.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,r),new Te(this.value,o)}}fold(e){return this.fold_(Ee(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_($e(e,s),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Ee(),n)}findOnPath_(e,n,i){const s=this.value?i(n,this.value):!1;if(s)return s;if(le(e))return null;{const r=ce(e),o=this.children.get(r);return o?o.findOnPath_(xe(e),$e(n,r),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ee(),n)}foreachOnPath_(e,n,i){if(le(e))return this;{this.value&&i(n,this.value);const s=ce(e),r=this.children.get(s);return r?r.foreachOnPath_(xe(e),$e(n,s),i):new Te(null)}}foreach(e){this.foreach_(Ee(),e)}foreach_(e,n){this.children.inorderTraversal((i,s)=>{s.foreach_($e(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.writeTree_=e}static empty(){return new Pt(new Te(null))}}function Ls(t,e,n){if(le(e))return new Pt(new Te(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const s=i.path;let r=i.value;const o=gt(s,e);return r=r.updateChild(o,n),new Pt(t.writeTree_.set(s,r))}else{const s=new Te(n),r=t.writeTree_.setTree(e,s);return new Pt(r)}}}function vd(t,e,n){let i=t;return bt(n,(s,r)=>{i=Ls(i,$e(e,s),r)}),i}function wd(t,e){if(le(e))return Pt.empty();{const n=t.writeTree_.setTree(e,new Te(null));return new Pt(n)}}function Bc(t,e){return vi(t,e)!=null}function vi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(gt(n.path,e)):null}function Id(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Xe,(i,s)=>{e.push(new ue(i,s))}):t.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new ue(i,s.value))}),e}function Mn(t,e){if(le(e))return t;{const n=vi(t,e);return n!=null?new Pt(new Te(n)):new Pt(t.writeTree_.subtree(e))}}function Uc(t){return t.writeTree_.isEmpty()}function Yi(t,e){return S_(Ee(),t.writeTree_,e)}function S_(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((s,r)=>{s===".priority"?(F(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):n=S_($e(t,s),r,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild($e(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t,e){return A_(e,t)}function dx(t,e,n,i,s){F(i>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:s}),s&&(t.visibleWrites=Ls(t.visibleWrites,e,n)),t.lastWriteId=i}function fx(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function px(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);F(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let s=i.visible,r=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&gx(a,i.path)?s=!1:Rt(i.path,a.path)&&(r=!0)),o--}if(s){if(r)return mx(t),!0;if(i.snap)t.visibleWrites=wd(t.visibleWrites,i.path);else{const a=i.children;bt(a,c=>{t.visibleWrites=wd(t.visibleWrites,$e(i.path,c))})}return!0}else return!1}function gx(t,e){if(t.snap)return Rt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Rt($e(t.path,n),e))return!0;return!1}function mx(t){t.visibleWrites=C_(t.allWrites,_x,Ee()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function _x(t){return t.visible}function C_(t,e,n){let i=Pt.empty();for(let s=0;s<t.length;++s){const r=t[s];if(e(r)){const o=r.path;let a;if(r.snap)Rt(n,o)?(a=gt(n,o),i=Ls(i,a,r.snap)):Rt(o,n)&&(a=gt(o,n),i=Ls(i,Ee(),r.snap.getChild(a)));else if(r.children){if(Rt(n,o))a=gt(n,o),i=vd(i,a,r.children);else if(Rt(o,n))if(a=gt(o,n),le(a))i=vd(i,Ee(),r.children);else{const c=Ki(r.children,ce(a));if(c){const l=c.getChild(xe(a));i=Ls(i,Ee(),l)}}}else throw os("WriteRecord should have .snap or .children")}}return i}function T_(t,e,n,i,s){if(!i&&!s){const r=vi(t.visibleWrites,e);if(r!=null)return r;{const o=Mn(t.visibleWrites,e);if(Uc(o))return n;if(n==null&&!Bc(o,Ee()))return null;{const a=n||ye.EMPTY_NODE;return Yi(o,a)}}}else{const r=Mn(t.visibleWrites,e);if(!s&&Uc(r))return n;if(!s&&n==null&&!Bc(r,Ee()))return null;{const o=function(l){return(l.visible||s)&&(!i||!~i.indexOf(l.writeId))&&(Rt(l.path,e)||Rt(e,l.path))},a=C_(t.allWrites,o,e),c=n||ye.EMPTY_NODE;return Yi(a,c)}}}function yx(t,e,n){let i=ye.EMPTY_NODE;const s=vi(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Xe,(r,o)=>{i=i.updateImmediateChild(r,o)}),i;if(n){const r=Mn(t.visibleWrites,e);return n.forEachChild(Xe,(o,a)=>{const c=Yi(Mn(r,new Ae(o)),a);i=i.updateImmediateChild(o,c)}),Id(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const r=Mn(t.visibleWrites,e);return Id(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function bx(t,e,n,i,s){F(i||s,"Either existingEventSnap or existingServerSnap must exist");const r=$e(e,n);if(Bc(t.visibleWrites,r))return null;{const o=Mn(t.visibleWrites,r);return Uc(o)?s.getChild(n):Yi(o,s.getChild(n))}}function vx(t,e,n,i){const s=$e(e,n),r=vi(t.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(n)){const o=Mn(t.visibleWrites,s);return Yi(o,i.getNode().getImmediateChild(n))}else return null}function wx(t,e){return vi(t.visibleWrites,e)}function Ix(t,e,n,i,s,r,o){let a;const c=Mn(t.visibleWrites,e),l=vi(c,Ee());if(l!=null)a=l;else if(n!=null)a=Yi(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=r?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let f=d.getNext();for(;f&&u.length<s;)h(f,i)!==0&&u.push(f),f=d.getNext();return u}else return[]}function Sx(){return{visibleWrites:Pt.empty(),allWrites:[],lastWriteId:-1}}function Hc(t,e,n,i){return T_(t.writeTree,t.treePath,e,n,i)}function x_(t,e){return yx(t.writeTree,t.treePath,e)}function Sd(t,e,n,i){return bx(t.writeTree,t.treePath,e,n,i)}function ko(t,e){return wx(t.writeTree,$e(t.treePath,e))}function Ex(t,e,n,i,s,r){return Ix(t.writeTree,t.treePath,e,n,i,s,r)}function nu(t,e,n){return vx(t.writeTree,t.treePath,e,n)}function k_(t,e){return A_($e(t.treePath,e),t.writeTree)}function A_(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;F(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),F(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(i,md(i,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(i,ex(i,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(i,ZT(i,e.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(i,md(i,e.snapshotNode,s.oldSnap));else throw os("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const R_=new Tx;class iu{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new tu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nu(this.writes_,e,i)}}getChildAfterChild(e,n,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:gi(this.viewCache_),r=Ex(this.writes_,s,n,1,i,e);return r.length===0?null:r[0]}}function xx(t,e){F(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),F(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function kx(t,e,n,i,s){const r=new Cx;let o,a;if(n.type===Wt.OVERWRITE){const l=n;l.source.fromUser?o=Wc(t,e,l.path,l.snap,i,s,r):(F(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!le(l.path),o=Ao(t,e,l.path,l.snap,i,s,a,r))}else if(n.type===Wt.MERGE){const l=n;l.source.fromUser?o=Rx(t,e,l.path,l.children,i,s,r):(F(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=jc(t,e,l.path,l.children,i,s,a,r))}else if(n.type===Wt.ACK_USER_WRITE){const l=n;l.revert?o=Mx(t,e,l.path,i,s,r):o=Ox(t,e,l.path,l.affectedTree,i,s,r)}else if(n.type===Wt.LISTEN_COMPLETE)o=Px(t,e,n.path,i,r);else throw os("Unknown operation type: "+n.type);const c=r.getChanges();return Ax(e,o,c),{viewCache:o,changes:c}}function Ax(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=$c(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(JT($c(e)))}}function O_(t,e,n,i,s,r){const o=e.eventCache;if(ko(i,n)!=null)return e;{let a,c;if(le(n))if(F(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=gi(e),u=l instanceof ye?l:ye.EMPTY_NODE,h=x_(i,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,r)}else{const l=Hc(i,gi(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,r)}else{const l=ce(n);if(l===".priority"){F(Ln(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const h=Sd(i,n,u,c);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=xe(n);let h;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const d=Sd(i,n,o.getNode(),c);d!=null?h=o.getNode().getImmediateChild(l).updateChild(u,d):h=o.getNode().getImmediateChild(l)}else h=nu(i,l,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),l,h,u,s,r):a=o.getNode()}}return Ns(e,a,o.isFullyInitialized()||le(n),t.filter.filtersNodes())}}function Ao(t,e,n,i,s,r,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(le(n))l=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,i);l=u.updateFullNode(c.getNode(),f,null)}else{const f=ce(n);if(!c.isCompleteForPath(n)&&Ln(n)>1)return e;const p=xe(n),y=c.getNode().getImmediateChild(f).updateChild(p,i);f===".priority"?l=u.updatePriority(c.getNode(),y):l=u.updateChild(c.getNode(),f,y,p,R_,null)}const h=I_(e,l,c.isFullyInitialized()||le(n),u.filtersNodes()),d=new iu(s,h,r);return O_(t,h,n,s,d,a)}function Wc(t,e,n,i,s,r,o){const a=e.eventCache;let c,l;const u=new iu(s,e,r);if(le(n))l=t.filter.updateFullNode(e.eventCache.getNode(),i,o),c=Ns(e,l,!0,t.filter.filtersNodes());else{const h=ce(n);if(h===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),i),c=Ns(e,l,a.isFullyInitialized(),a.isFiltered());else{const d=xe(n),f=a.getNode().getImmediateChild(h);let p;if(le(d))p=i;else{const _=u.getCompleteChild(h);_!=null?a_(d)===".priority"&&_.getChild(l_(d)).isEmpty()?p=_:p=_.updateChild(d,i):p=ye.EMPTY_NODE}if(f.equals(p))c=e;else{const _=t.filter.updateChild(a.getNode(),h,p,d,u,o);c=Ns(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Ed(t,e){return t.eventCache.isCompleteForChild(e)}function Rx(t,e,n,i,s,r,o){let a=e;return i.foreach((c,l)=>{const u=$e(n,c);Ed(e,ce(u))&&(a=Wc(t,a,u,l,s,r,o))}),i.foreach((c,l)=>{const u=$e(n,c);Ed(e,ce(u))||(a=Wc(t,a,u,l,s,r,o))}),a}function Cd(t,e,n){return n.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function jc(t,e,n,i,s,r,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;le(n)?l=i:l=new Te(null).setTree(n,i);const u=e.serverCache.getNode();return l.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),p=Cd(t,f,d);c=Ao(t,c,new Ae(h),p,s,r,o,a)}}),l.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!f){const p=e.serverCache.getNode().getImmediateChild(h),_=Cd(t,p,d);c=Ao(t,c,new Ae(h),_,s,r,o,a)}}),c}function Ox(t,e,n,i,s,r,o){if(ko(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(i.value!=null){if(le(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Ao(t,e,n,c.getNode().getChild(n),s,r,a,o);if(le(n)){let l=new Te(null);return c.getNode().forEachChild(Wi,(u,h)=>{l=l.set(new Ae(u),h)}),jc(t,e,n,l,s,r,a,o)}else return e}else{let l=new Te(null);return i.foreach((u,h)=>{const d=$e(n,u);c.isCompleteForPath(d)&&(l=l.set(u,c.getNode().getChild(d)))}),jc(t,e,n,l,s,r,a,o)}}function Px(t,e,n,i,s){const r=e.serverCache,o=I_(e,r.getNode(),r.isFullyInitialized()||le(n),r.isFiltered());return O_(t,o,n,i,R_,s)}function Mx(t,e,n,i,s,r){let o;if(ko(i,n)!=null)return e;{const a=new iu(i,e,s),c=e.eventCache.getNode();let l;if(le(n)||ce(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Hc(i,gi(e));else{const h=e.serverCache.getNode();F(h instanceof ye,"serverChildren would be complete if leaf node"),u=x_(i,h)}u=u,l=t.filter.updateFullNode(c,u,r)}else{const u=ce(n);let h=nu(i,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=c.getImmediateChild(u)),h!=null?l=t.filter.updateChild(c,u,h,xe(n),a,r):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,ye.EMPTY_NODE,xe(n),a,r):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Hc(i,gi(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,r)))}return o=e.serverCache.isFullyInitialized()||ko(i,Ee())!=null,Ns(e,l,o,t.filter.filtersNodes())}}function Dx(t,e){const n=gi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!le(e)&&!n.getImmediateChild(ce(e)).isEmpty())?n.getChild(e):null}function Td(t,e,n,i){e.type===Wt.MERGE&&e.source.queryId!==null&&(F(gi(t.viewCache_),"We should always have a full cache before handling merges"),F($c(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,r=kx(t.processor_,s,e,n,i);return xx(t.processor_,r.viewCache),F(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,Nx(t,r.changes,r.viewCache.eventCache.getNode(),null)}function Nx(t,e,n,i){const s=i?[i]:t.eventRegistrations_;return cx(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd;function Lx(t){F(!xd,"__referenceConstructor has already been defined"),xd=t}function su(t,e,n,i){const s=e.source.queryId;if(s!==null){const r=t.views.get(s);return F(r!=null,"SyncTree gave us an op for an invalid query."),Td(r,e,n,i)}else{let r=[];for(const o of t.views.values())r=r.concat(Td(o,e,n,i));return r}}function ru(t,e){let n=null;for(const i of t.views.values())n=n||Dx(i,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd;function Fx(t){F(!kd,"__referenceConstructor has already been defined"),kd=t}class Ad{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Te(null),this.pendingWriteTree_=Sx(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function P_(t,e,n,i,s){return dx(t.pendingWriteTree_,e,n,i,s),s?ua(t,new pi(y_(),e,n)):[]}function ti(t,e,n=!1){const i=fx(t.pendingWriteTree_,e);if(px(t.pendingWriteTree_,e)){let r=new Te(null);return i.snap!=null?r=r.set(Ee(),!0):bt(i.children,o=>{r=r.set(new Ae(o),!0)}),ua(t,new xo(i.path,r,n))}else return[]}function la(t,e,n){return ua(t,new pi(b_(),e,n))}function $x(t,e,n){const i=Te.fromObject(n);return ua(t,new ir(b_(),e,i))}function Bx(t,e,n,i){const s=N_(t,i);if(s!=null){const r=L_(s),o=r.path,a=r.queryId,c=gt(o,e),l=new pi(v_(a),c,n);return F_(t,o,l)}else return[]}function Ux(t,e,n,i){const s=N_(t,i);if(s){const r=L_(s),o=r.path,a=r.queryId,c=gt(o,e),l=Te.fromObject(n),u=new ir(v_(a),c,l);return F_(t,o,u)}else return[]}function ou(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=gt(o,e),l=ru(a,c);if(l)return l});return T_(s,e,r,n,!0)}function ua(t,e){return M_(e,t.syncPointTree_,null,E_(t.pendingWriteTree_,Ee()))}function M_(t,e,n,i){if(le(t.path))return D_(t,e,n,i);{const s=e.get(Ee());n==null&&s!=null&&(n=ru(s,Ee()));let r=[];const o=ce(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=k_(i,o);r=r.concat(M_(a,c,l,u))}return s&&(r=r.concat(su(s,t,i,n))),r}}function D_(t,e,n,i){const s=e.get(Ee());n==null&&s!=null&&(n=ru(s,Ee()));let r=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=k_(i,o),u=t.operationForChild(o);u&&(r=r.concat(D_(u,a,c,l)))}),s&&(r=r.concat(su(s,t,i,n))),r}function N_(t,e){return t.tagToQueryMap.get(e)}function L_(t){const e=t.indexOf("$");return F(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ae(t.substr(0,e))}}function F_(t,e,n){const i=t.syncPointTree_.get(e);F(i,"Missing sync point for query tag that we're tracking");const s=E_(t.pendingWriteTree_,e);return su(i,n,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new au(n)}node(){return this.node_}}class cu{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=$e(this.path_,e);return new cu(this.syncTree_,n)}node(){return ou(this.syncTree_,this.path_)}}const Hx=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Rd=function(t,e,n){if(!t||typeof t!="object")return t;if(F(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Wx(t[".sv"],e,n);if(typeof t[".sv"]=="object")return jx(t[".sv"],e);F(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Wx=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:F(!1,"Unexpected server value: "+t)}},jx=function(t,e,n){t.hasOwnProperty("increment")||F(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&F(!1,"Unexpected increment value: "+i);const s=e.node();if(F(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const o=s.getValue();return typeof o!="number"?i:o+i},zx=function(t,e,n,i){return lu(e,new cu(n,t),i)},$_=function(t,e,n){return lu(t,new au(e),n)};function lu(t,e,n){const i=t.getPriority().val(),s=Rd(i,e.getImmediateChild(".priority"),n);let r;if(t.isLeafNode()){const o=t,a=Rd(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Be(a,ze(s)):t}else{const o=t;return r=o,s!==o.getPriority().val()&&(r=r.updatePriority(new Be(s))),o.forEachChild(Xe,(a,c)=>{const l=lu(c,e.getImmediateChild(a),n);l!==c&&(r=r.updateImmediateChild(a,l))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function hu(t,e){let n=e instanceof Ae?e:new Ae(e),i=t,s=ce(n);for(;s!==null;){const r=Ki(i.node.children,s)||{children:{},childCount:0};i=new uu(s,i,r),n=xe(n),s=ce(n)}return i}function ds(t){return t.node.value}function B_(t,e){t.node.value=e,zc(t)}function U_(t){return t.node.childCount>0}function Vx(t){return ds(t)===void 0&&!U_(t)}function ha(t,e){bt(t.node.children,(n,i)=>{e(new uu(n,t,i))})}function H_(t,e,n,i){n&&!i&&e(t),ha(t,s=>{H_(s,e,!0,i)}),n&&i&&e(t)}function Kx(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function _r(t){return new Ae(t.parent===null?t.name:_r(t.parent)+"/"+t.name)}function zc(t){t.parent!==null&&qx(t.parent,t.name,t)}function qx(t,e,n){const i=Vx(n),s=gn(t.node.children,e);i&&s?(delete t.node.children[e],t.node.childCount--,zc(t)):!i&&!s&&(t.node.children[e]=n.node,t.node.childCount++,zc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=/[\[\].#$\/\u0000-\u001F\u007F]/,Yx=/[\[\].#$\u0000-\u001F\u007F]/,Va=10*1024*1024,W_=function(t){return typeof t=="string"&&t.length!==0&&!Gx.test(t)},j_=function(t){return typeof t=="string"&&t.length!==0&&!Yx.test(t)},Xx=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),j_(t)},Qx=function(t,e,n,i){i&&e===void 0||du(Rl(t,"value"),e,n)},du=function(t,e,n){const i=n instanceof Ae?new PT(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Kn(i));if(typeof e=="function")throw new Error(t+"contains a function "+Kn(i)+" with contents = "+e.toString());if(Um(e))throw new Error(t+"contains "+e.toString()+" "+Kn(i));if(typeof e=="string"&&e.length>Va/3&&ea(e)>Va)throw new Error(t+"contains a string greater than "+Va+" utf8 bytes "+Kn(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,r=!1;if(bt(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!W_(o)))throw new Error(t+" contains an invalid key ("+o+") "+Kn(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);MT(i,o),du(t,a,i),DT(i)}),s&&r)throw new Error(t+' contains ".value" child '+Kn(i)+" in addition to actual children.")}},z_=function(t,e,n,i){if(!(i&&n===void 0)&&!j_(n))throw new Error(Rl(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Jx=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),z_(t,e,n,i)},Zx=function(t,e){if(ce(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},ek=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!W_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Xx(n))throw new Error(Rl(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function V_(t,e){let n=null;for(let i=0;i<e.length;i++){const s=e[i],r=s.getPath();n!==null&&!u_(r,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&t.eventLists_.push(n)}function fn(t,e,n){V_(t,n),nk(t,i=>Rt(i,e)||Rt(e,i))}function nk(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const s=t.eventLists_[i];if(s){const r=s.path;e(r)?(ik(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function ik(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();oi&&Ge("event: "+n.toString()),hs(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="repo_interrupt",rk=25;class ok{constructor(e,n,i,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tk,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=To(),this.transactionQueueTree_=new uu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ak(t,e,n){if(t.stats_=Xl(t.repoInfo_),t.forceRestClient_||iT())t.server_=new Co(t.repoInfo_,(i,s,r,o)=>{Od(t,i,s,r,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Pd(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ke(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new un(t.repoInfo_,e,(i,s,r,o)=>{Od(t,i,s,r,o)},i=>{Pd(t,i)},i=>{lk(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=cT(t.repoInfo_,()=>new ax(t.stats_,t.server_)),t.infoData_=new nx,t.infoSyncTree_=new Ad({startListening:(i,s,r,o)=>{let a=[];const c=t.infoData_.getNode(i._path);return c.isEmpty()||(a=la(t.infoSyncTree_,i._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),pu(t,"connected",!1),t.serverSyncTree_=new Ad({startListening:(i,s,r,o)=>(t.server_.listen(i,r,s,(a,c)=>{const l=o(a,c);fn(t.eventQueue_,i._path,l)}),[]),stopListening:(i,s)=>{t.server_.unlisten(i,s)}})}function ck(t){const n=t.infoData_.getNode(new Ae(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function fu(t){return Hx({timestamp:ck(t)})}function Od(t,e,n,i,s){t.dataUpdateCount++;const r=new Ae(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(i){const c=fo(n,l=>ze(l));o=Ux(t.serverSyncTree_,r,c,s)}else{const c=ze(n);o=Bx(t.serverSyncTree_,r,c,s)}else if(i){const c=fo(n,l=>ze(l));o=$x(t.serverSyncTree_,r,c)}else{const c=ze(n);o=la(t.serverSyncTree_,r,c)}let a=r;o.length>0&&(a=da(t,r)),fn(t.eventQueue_,a,o)}function Pd(t,e){pu(t,"connected",e),e===!1&&hk(t)}function lk(t,e){bt(e,(n,i)=>{pu(t,n,i)})}function pu(t,e,n){const i=new Ae("/.info/"+e),s=ze(n);t.infoData_.updateSnapshot(i,s);const r=la(t.infoSyncTree_,i,s);fn(t.eventQueue_,i,r)}function K_(t){return t.nextWriteId_++}function uk(t,e,n,i,s){gu(t,"set",{path:e.toString(),value:n,priority:i});const r=fu(t),o=ze(n,i),a=ou(t.serverSyncTree_,e),c=$_(o,a,r),l=K_(t),u=P_(t.serverSyncTree_,e,c,l,!0);V_(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(d,f)=>{const p=d==="ok";p||st("set at "+e+" failed: "+d);const _=ti(t.serverSyncTree_,l,!p);fn(t.eventQueue_,e,_),fk(t,s,d,f)});const h=Q_(t,e);da(t,h),fn(t.eventQueue_,h,[])}function hk(t){gu(t,"onDisconnectEvents");const e=fu(t),n=To();Fc(t.onDisconnect_,Ee(),(s,r)=>{const o=zx(s,r,t.serverSyncTree_,e);__(n,s,o)});let i=[];Fc(n,Ee(),(s,r)=>{i=i.concat(la(t.serverSyncTree_,s,r));const o=Q_(t,s);da(t,o)}),t.onDisconnect_=To(),fn(t.eventQueue_,Ee(),i)}function dk(t){t.persistentConnection_&&t.persistentConnection_.interrupt(sk)}function gu(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ge(n,...e)}function fk(t,e,n,i){e&&hs(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let r=s;i&&(r+=": "+i);const o=new Error(r);o.code=s,e(o)}})}function q_(t,e,n){return ou(t.serverSyncTree_,e,n)||ye.EMPTY_NODE}function mu(t,e=t.transactionQueueTree_){if(e||fa(t,e),ds(e)){const n=Y_(t,e);F(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&pk(t,_r(e),n)}else U_(e)&&ha(e,n=>{mu(t,n)})}function pk(t,e,n){const i=n.map(l=>l.currentWriteId),s=q_(t,e,i);let r=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];F(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=gt(e,u.path);r=r.updateChild(h,u.currentOutputSnapshotRaw)}const a=r.val(!0),c=e;t.server_.put(c.toString(),a,l=>{gu(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(ti(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();fa(t,hu(t.transactionQueueTree_,e)),mu(t,t.transactionQueueTree_),fn(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)hs(h[d])}else{if(l==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{st("transaction at "+c.toString()+" failed: "+l);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=l}da(t,e)}},o)}function da(t,e){const n=G_(t,e),i=_r(n),s=Y_(t,n);return gk(t,s,i),i}function gk(t,e,n){if(e.length===0)return;const i=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=gt(n,c.path);let u=!1,h;if(F(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,h=c.abortReason,s=s.concat(ti(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=rk)u=!0,h="maxretry",s=s.concat(ti(t.serverSyncTree_,c.currentWriteId,!0));else{const d=q_(t,c.path,o);c.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){du("transaction failed: Data returned ",f,c.path);let p=ze(f);typeof f=="object"&&f!=null&&gn(f,".priority")||(p=p.updatePriority(d.getPriority()));const y=c.currentWriteId,v=fu(t),w=$_(p,d,v);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=w,c.currentWriteId=K_(t),o.splice(o.indexOf(y),1),s=s.concat(P_(t.serverSyncTree_,c.path,w,c.currentWriteId,c.applyLocally)),s=s.concat(ti(t.serverSyncTree_,y,!0))}else u=!0,h="nodata",s=s.concat(ti(t.serverSyncTree_,c.currentWriteId,!0))}fn(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(h),!1,null))))}fa(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)hs(i[a]);mu(t,t.transactionQueueTree_)}function G_(t,e){let n,i=t.transactionQueueTree_;for(n=ce(e);n!==null&&ds(i)===void 0;)i=hu(i,n),e=xe(e),n=ce(e);return i}function Y_(t,e){const n=[];return X_(t,e,n),n.sort((i,s)=>i.order-s.order),n}function X_(t,e,n){const i=ds(e);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);ha(e,s=>{X_(t,s,n)})}function fa(t,e){const n=ds(e);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,B_(e,n.length>0?n:void 0)}ha(e,i=>{fa(t,i)})}function Q_(t,e){const n=_r(G_(t,e)),i=hu(t.transactionQueueTree_,e);return Kx(i,s=>{Ka(t,s)}),Ka(t,i),H_(i,s=>{Ka(t,s)}),n}function Ka(t,e){const n=ds(e);if(n){const i=[];let s=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(F(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):(F(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(ti(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?B_(e,void 0):n.length=r+1,fn(t.eventQueue_,_r(e),s);for(let o=0;o<i.length;o++)hs(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function _k(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):st(`Invalid query segment '${n}' in query '${t}'`)}return e}const Md=function(t,e){const n=yk(t),i=n.namespace;n.domain==="firebase.com"&&dn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&dn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||YC();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Jm(n.host,n.secure,i,s,e,"",i!==n.subdomain),path:new Ae(n.pathString)}},yk=function(t){let e="",n="",i="",s="",r="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(s=mk(t.substring(u,h)));const d=_k(t.substring(Math.min(t.length,h)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");i=e.substring(0,p).toLowerCase(),n=e.substring(p+1),r=i}"ns"in d&&(r=d.ns)}return{host:e,port:c,domain:n,subdomain:i,secure:o,scheme:a,pathString:s,namespace:r}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n,i,s){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return le(this._path)?null:a_(this._path)}get ref(){return new wi(this._repo,this._path)}get _queryIdentifier(){const e=yd(this._queryParams),n=Gl(e);return n==="{}"?"default":n}get _queryObject(){return yd(this._queryParams)}isEqual(e){if(e=ct(e),!(e instanceof _u))return!1;const n=this._repo===e._repo,i=u_(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+OT(this._path)}}class wi extends _u{constructor(e,n){super(e,n,new eu,!1)}get parent(){const e=l_(this._path);return e===null?null:new wi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}function YM(t,e){return t=ct(t),t._checkNotDeleted("ref"),e!==void 0?bk(t._root,e):t._root}function bk(t,e){return t=ct(t),ce(t._path)===null?Jx("child","path",e,!1):z_("child","path",e,!1),new wi(t._repo,$e(t._path,e))}function XM(t,e){t=ct(t),Zx("set",t._path),Qx("set",e,t._path,!1);const n=new Zo;return uk(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}Lx(wi);Fx(wi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="FIREBASE_DATABASE_EMULATOR_HOST",Vc={};let wk=!1;function Ik(t,e,n,i){t.repoInfo_=new Jm(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function Sk(t,e,n,i,s){let r=i||t.options.databaseURL;r===void 0&&(t.options.projectId||dn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ge("Using default host for project ",t.options.projectId),r=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Md(r,s),a=o.repoInfo,c,l;typeof process<"u"&&Zh&&(l=Zh[vk]),l?(c=!0,r=`http://${l}?ns=${a.namespace}`,o=Md(r,s),a=o.repoInfo):c=!o.repoInfo.secure;const u=s&&c?new Hi(Hi.OWNER):new rT(t.name,t.options,e);ek("Invalid Firebase Database URL",o),le(o.path)||dn("Database URL must point to the root of a Firebase Database (not including a child path).");const h=Ck(a,t,u,new sT(t.name,n));return new Tk(h,t)}function Ek(t,e){const n=Vc[e];(!n||n[t.key]!==t)&&dn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),dk(t),delete n[t.key]}function Ck(t,e,n,i){let s=Vc[e.name];s||(s={},Vc[e.name]=s);let r=s[t.toURLString()];return r&&dn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new ok(t,wk,n,i),s[t.toURLString()]=r,r}class Tk{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ak(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wi(this._repo,Ee())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Ek(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&dn("Cannot call "+e+" on a deleted database.")}}function QM(t=Pl(),e){const n=bi(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=zw("database");i&&xk(n,...i)}return n}function xk(t,e,n,i={}){t=ct(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&dn("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let r;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&dn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new Hi(Hi.OWNER);else if(i.mockUserToken){const o=typeof i.mockUserToken=="string"?i.mockUserToken:Vw(i.mockUserToken,t.app.options.projectId);r=new Hi(o)}Ik(s,e,n,r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t){zC(cs),Gt(new Mt("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return Sk(i,s,r,n)},"PUBLIC").setMultipleInstances(!0)),_t(ed,td,t),_t(ed,td,"esm2017")}un.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};un.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};kk();/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Ai=typeof window<"u";function Ak(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const be=Object.assign;function qa(t,e){const n={};for(const i in e){const s=e[i];n[i]=Dt(s)?s.map(t):t(s)}return n}const Fs=()=>{},Dt=Array.isArray,Rk=/\/$/,Ok=t=>t.replace(Rk,"");function Ga(t,e,n="/"){let i,s={},r="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(i=e.slice(0,c),r=e.slice(c+1,a>-1?a:e.length),s=t(r)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=Nk(i??e,n),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:o}}function Pk(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Dd(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Mk(t,e,n){const i=e.matched.length-1,s=n.matched.length-1;return i>-1&&i===s&&Xi(e.matched[i],n.matched[s])&&J_(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Xi(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function J_(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Dk(t[n],e[n]))return!1;return!0}function Dk(t,e){return Dt(t)?Nd(t,e):Dt(e)?Nd(e,t):t===e}function Nd(t,e){return Dt(e)?t.length===e.length&&t.every((n,i)=>n===e[i]):t.length===1&&t[0]===e}function Nk(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=n.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var sr;(function(t){t.pop="pop",t.push="push"})(sr||(sr={}));var $s;(function(t){t.back="back",t.forward="forward",t.unknown=""})($s||($s={}));function Lk(t){if(!t)if(Ai){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Ok(t)}const Fk=/^[^#]+#/;function $k(t,e){return t.replace(Fk,"#")+e}function Bk(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const pa=()=>({left:window.pageXOffset,top:window.pageYOffset});function Uk(t){let e;if("el"in t){const n=t.el,i=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=Bk(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Ld(t,e){return(history.state?history.state.position-e:-1)+t}const Kc=new Map;function Hk(t,e){Kc.set(t,e)}function Wk(t){const e=Kc.get(t);return Kc.delete(t),e}let jk=()=>location.protocol+"//"+location.host;function Z_(t,e){const{pathname:n,search:i,hash:s}=e,r=t.indexOf("#");if(r>-1){let a=s.includes(t.slice(r))?t.slice(r).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),Dd(c,"")}return Dd(n,t)+i+s}function zk(t,e,n,i){let s=[],r=[],o=null;const a=({state:d})=>{const f=Z_(t,location),p=n.value,_=e.value;let y=0;if(d){if(n.value=f,e.value=d,o&&o===p){o=null;return}y=_?d.position-_.position:0}else i(f);s.forEach(v=>{v(n.value,p,{delta:y,type:sr.pop,direction:y?y>0?$s.forward:$s.back:$s.unknown})})};function c(){o=n.value}function l(d){s.push(d);const f=()=>{const p=s.indexOf(d);p>-1&&s.splice(p,1)};return r.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(be({},d.state,{scroll:pa()}),"")}function h(){for(const d of r)d();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:h}}function Fd(t,e,n,i=!1,s=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:s?pa():null}}function Vk(t){const{history:e,location:n}=window,i={value:Z_(t,n)},s={value:e.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(c,l,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+c:jk()+t+c;try{e[u?"replaceState":"pushState"](l,"",d),s.value=l}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(c,l){const u=be({},e.state,Fd(s.value.back,c,s.value.forward,!0),l,{position:s.value.position});r(c,u,!0),i.value=c}function a(c,l){const u=be({},s.value,e.state,{forward:c,scroll:pa()});r(u.current,u,!0);const h=be({},Fd(i.value,c,null),{position:u.position+1},l);r(c,h,!1),i.value=c}return{location:i,state:s,push:a,replace:o}}function JM(t){t=Lk(t);const e=Vk(t),n=zk(t,e.state,e.location,e.replace);function i(r,o=!0){o||n.pauseListeners(),history.go(r)}const s=be({location:"",base:t,go:i,createHref:$k.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function Kk(t){return typeof t=="string"||t&&typeof t=="object"}function ey(t){return typeof t=="string"||typeof t=="symbol"}const yn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},ty=Symbol("");var $d;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})($d||($d={}));function Qi(t,e){return be(new Error,{type:t,[ty]:!0},e)}function Qt(t,e){return t instanceof Error&&ty in t&&(e==null||!!(t.type&e))}const Bd="[^/]+?",qk={sensitive:!1,strict:!1,start:!0,end:!0},Gk=/[.+*?^${}()[\]/\\]/g;function Yk(t,e){const n=be({},qk,e),i=[];let s=n.start?"^":"";const r=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(s+="/");for(let h=0;h<l.length;h++){const d=l[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(Gk,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:_,optional:y,regexp:v}=d;r.push({name:p,repeatable:_,optional:y});const w=v||Bd;if(w!==Bd){f+=10;try{new RegExp(`(${w})`)}catch(E){throw new Error(`Invalid custom RegExp for param "${p}" (${w}): `+E.message)}}let R=_?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;h||(R=y&&l.length<2?`(?:/${R})`:"/"+R),y&&(R+="?"),s+=R,f+=20,y&&(f+=-8),_&&(f+=-20),w===".*"&&(f+=-50)}u.push(f)}i.push(u)}if(n.strict&&n.end){const l=i.length-1;i[l][i[l].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(l){const u=l.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",p=r[d-1];h[p.name]=f&&p.repeatable?f.split("/"):f}return h}function c(l){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:_,optional:y}=f,v=p in l?l[p]:"";if(Dt(v)&&!_)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const w=Dt(v)?v.join("/"):v;if(!w)if(y)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=w}}return u||"/"}return{re:o,score:i,keys:r,parse:a,stringify:c}}function Xk(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Qk(t,e){let n=0;const i=t.score,s=e.score;for(;n<i.length&&n<s.length;){const r=Xk(i[n],s[n]);if(r)return r;n++}if(Math.abs(s.length-i.length)===1){if(Ud(i))return 1;if(Ud(s))return-1}return s.length-i.length}function Ud(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Jk={type:0,value:""},Zk=/[a-zA-Z0-9_]/;function eA(t){if(!t)return[[]];if(t==="/")return[[Jk]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${l}": ${f}`)}let n=0,i=n;const s=[];let r;function o(){r&&s.push(r),r=[]}let a=0,c,l="",u="";function h(){l&&(n===0?r.push({type:0,value:l}):n===1||n===2||n===3?(r.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function d(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:c==="/"?(l&&h(),o()):c===":"?(h(),n=1):d();break;case 4:d(),n=i;break;case 1:c==="("?n=2:Zk.test(c)?d():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),h(),o(),s}function tA(t,e,n){const i=Yk(eA(t.path),n),s=be(i,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function nA(t,e){const n=[],i=new Map;e=jd({strict:!1,end:!0,sensitive:!1},e);function s(u){return i.get(u)}function r(u,h,d){const f=!d,p=iA(u);p.aliasOf=d&&d.record;const _=jd(e,u),y=[p];if("alias"in u){const R=typeof u.alias=="string"?[u.alias]:u.alias;for(const E of R)y.push(be({},p,{components:d?d.record.components:p.components,path:E,aliasOf:d?d.record:p}))}let v,w;for(const R of y){const{path:E}=R;if(h&&E[0]!=="/"){const x=h.record.path,H=x[x.length-1]==="/"?"":"/";R.path=h.record.path+(E&&H+E)}if(v=tA(R,h,_),d?d.alias.push(v):(w=w||v,w!==v&&w.alias.push(v),f&&u.name&&!Wd(v)&&o(u.name)),p.children){const x=p.children;for(let H=0;H<x.length;H++)r(x[H],v,d&&d.children[H])}d=d||v,(v.record.components&&Object.keys(v.record.components).length||v.record.name||v.record.redirect)&&c(v)}return w?()=>{o(w)}:Fs}function o(u){if(ey(u)){const h=i.get(u);h&&(i.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function c(u){let h=0;for(;h<n.length&&Qk(u,n[h])>=0&&(u.record.path!==n[h].record.path||!ny(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Wd(u)&&i.set(u.record.name,u)}function l(u,h){let d,f={},p,_;if("name"in u&&u.name){if(d=i.get(u.name),!d)throw Qi(1,{location:u});_=d.record.name,f=be(Hd(h.params,d.keys.filter(w=>!w.optional).map(w=>w.name)),u.params&&Hd(u.params,d.keys.map(w=>w.name))),p=d.stringify(f)}else if("path"in u)p=u.path,d=n.find(w=>w.re.test(p)),d&&(f=d.parse(p),_=d.record.name);else{if(d=h.name?i.get(h.name):n.find(w=>w.re.test(h.path)),!d)throw Qi(1,{location:u,currentLocation:h});_=d.record.name,f=be({},h.params,u.params),p=d.stringify(f)}const y=[];let v=d;for(;v;)y.unshift(v.record),v=v.parent;return{name:_,path:p,params:f,matched:y,meta:rA(y)}}return t.forEach(u=>r(u)),{addRoute:r,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Hd(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function iA(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:sA(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function sA(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]=typeof n=="object"?n[i]:n;return e}function Wd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function rA(t){return t.reduce((e,n)=>be(e,n.meta),{})}function jd(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}function ny(t,e){return e.children.some(n=>n===t||ny(t,n))}const iy=/#/g,oA=/&/g,aA=/\//g,cA=/=/g,lA=/\?/g,sy=/\+/g,uA=/%5B/g,hA=/%5D/g,ry=/%5E/g,dA=/%60/g,oy=/%7B/g,fA=/%7C/g,ay=/%7D/g,pA=/%20/g;function yu(t){return encodeURI(""+t).replace(fA,"|").replace(uA,"[").replace(hA,"]")}function gA(t){return yu(t).replace(oy,"{").replace(ay,"}").replace(ry,"^")}function qc(t){return yu(t).replace(sy,"%2B").replace(pA,"+").replace(iy,"%23").replace(oA,"%26").replace(dA,"`").replace(oy,"{").replace(ay,"}").replace(ry,"^")}function mA(t){return qc(t).replace(cA,"%3D")}function _A(t){return yu(t).replace(iy,"%23").replace(lA,"%3F")}function yA(t){return t==null?"":_A(t).replace(aA,"%2F")}function Ro(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function bA(t){const e={};if(t===""||t==="?")return e;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(sy," "),o=r.indexOf("="),a=Ro(o<0?r:r.slice(0,o)),c=o<0?null:Ro(r.slice(o+1));if(a in e){let l=e[a];Dt(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function zd(t){let e="";for(let n in t){const i=t[n];if(n=mA(n),i==null){i!==void 0&&(e+=(e.length?"&":"")+n);continue}(Dt(i)?i.map(r=>r&&qc(r)):[i&&qc(i)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function vA(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=Dt(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const wA=Symbol(""),Vd=Symbol(""),bu=Symbol(""),cy=Symbol(""),Gc=Symbol("");function bs(){let t=[];function e(i){return t.push(i),()=>{const s=t.indexOf(i);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function vn(t,e,n,i,s){const r=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const c=h=>{h===!1?a(Qi(4,{from:n,to:e})):h instanceof Error?a(h):Kk(h)?a(Qi(2,{from:e,to:h})):(r&&i.enterCallbacks[s]===r&&typeof h=="function"&&r.push(h),o())},l=t.call(i&&i.instances[s],e,n,c);let u=Promise.resolve(l);t.length<3&&(u=u.then(c)),u.catch(h=>a(h))})}function Ya(t,e,n,i){const s=[];for(const r of t)for(const o in r.components){let a=r.components[o];if(!(e!=="beforeRouteEnter"&&!r.instances[o]))if(IA(a)){const l=(a.__vccOpts||a)[e];l&&s.push(vn(l,n,i,r,o))}else{let c=a();s.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${r.path}"`));const u=Ak(l)?l.default:l;r.components[o]=u;const d=(u.__vccOpts||u)[e];return d&&vn(d,n,i,r,o)()}))}}return s}function IA(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Kd(t){const e=zt(bu),n=zt(cy),i=Ct(()=>e.resolve(Ni(t.to))),s=Ct(()=>{const{matched:c}=i.value,{length:l}=c,u=c[l-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(Xi.bind(null,u));if(d>-1)return d;const f=qd(c[l-2]);return l>1&&qd(u)===f&&h[h.length-1].path!==f?h.findIndex(Xi.bind(null,c[l-2])):d}),r=Ct(()=>s.value>-1&&TA(n.params,i.value.params)),o=Ct(()=>s.value>-1&&s.value===n.matched.length-1&&J_(n.params,i.value.params));function a(c={}){return CA(c)?e[Ni(t.replace)?"replace":"push"](Ni(t.to)).catch(Fs):Promise.resolve()}return{route:i,href:Ct(()=>i.value.href),isActive:r,isExactActive:o,navigate:a}}const SA=Kp({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Kd,setup(t,{slots:e}){const n=ur(Kd(t)),{options:i}=zt(bu),s=Ct(()=>({[Gd(t.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[Gd(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=e.default&&e.default(n);return t.custom?r:cg("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},r)}}}),EA=SA;function CA(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function TA(t,e){for(const n in e){const i=e[n],s=t[n];if(typeof i=="string"){if(i!==s)return!1}else if(!Dt(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function qd(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Gd=(t,e,n)=>t??e??n,xA=Kp({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const i=zt(Gc),s=Ct(()=>t.route||i.value),r=zt(Vd,0),o=Ct(()=>{let l=Ni(r);const{matched:u}=s.value;let h;for(;(h=u[l])&&!h.components;)l++;return l}),a=Ct(()=>s.value.matched[o.value]);Xr(Vd,Ct(()=>o.value+1)),Xr(wA,a),Xr(Gc,s);const c=xb();return Fi(()=>[c.value,a.value,t.name],([l,u,h],[d,f,p])=>{u&&(u.instances[h]=l,f&&f!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),l&&u&&(!f||!Xi(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(_=>_(l))},{flush:"post"}),()=>{const l=s.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return Yd(n.default,{Component:d,route:l});const f=h.props[u],p=f?f===!0?l.params:typeof f=="function"?f(l):f:null,y=cg(d,be({},p,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(h.instances[u]=null)},ref:c}));return Yd(n.default,{Component:y,route:l})||y}}});function Yd(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const kA=xA;function ZM(t){const e=nA(t.routes,t),n=t.parseQuery||bA,i=t.stringifyQuery||zd,s=t.history,r=bs(),o=bs(),a=bs(),c=kb(yn);let l=yn;Ai&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=qa.bind(null,S=>""+S),h=qa.bind(null,yA),d=qa.bind(null,Ro);function f(S,$){let D,B;return ey(S)?(D=e.getRecordMatcher(S),B=$):B=S,e.addRoute(B,D)}function p(S){const $=e.getRecordMatcher(S);$&&e.removeRoute($)}function _(){return e.getRoutes().map(S=>S.record)}function y(S){return!!e.getRecordMatcher(S)}function v(S,$){if($=be({},$||c.value),typeof S=="string"){const b=Ga(n,S,$.path),I=e.resolve({path:b.path},$),T=s.createHref(b.fullPath);return be(b,I,{params:d(I.params),hash:Ro(b.hash),redirectedFrom:void 0,href:T})}let D;if("path"in S)D=be({},S,{path:Ga(n,S.path,$.path).path});else{const b=be({},S.params);for(const I in b)b[I]==null&&delete b[I];D=be({},S,{params:h(b)}),$.params=h($.params)}const B=e.resolve(D,$),oe=S.hash||"";B.params=u(d(B.params));const g=Pk(i,be({},S,{hash:gA(oe),path:B.path})),m=s.createHref(g);return be({fullPath:g,hash:oe,query:i===zd?vA(S.query):S.query||{}},B,{redirectedFrom:void 0,href:m})}function w(S){return typeof S=="string"?Ga(n,S,c.value.path):be({},S)}function R(S,$){if(l!==S)return Qi(8,{from:$,to:S})}function E(S){return W(S)}function x(S){return E(be(w(S),{replace:!0}))}function H(S){const $=S.matched[S.matched.length-1];if($&&$.redirect){const{redirect:D}=$;let B=typeof D=="function"?D(S):D;return typeof B=="string"&&(B=B.includes("?")||B.includes("#")?B=w(B):{path:B},B.params={}),be({query:S.query,hash:S.hash,params:"path"in B?{}:S.params},B)}}function W(S,$){const D=l=v(S),B=c.value,oe=S.state,g=S.force,m=S.replace===!0,b=H(D);if(b)return W(be(w(b),{state:typeof b=="object"?be({},oe,b.state):oe,force:g,replace:m}),$||D);const I=D;I.redirectedFrom=$;let T;return!g&&Mk(i,B,D)&&(T=Qi(16,{to:I,from:B}),se(B,B,!0,!1)),(T?Promise.resolve(T):Y(I,B)).catch(A=>Qt(A)?Qt(A,2)?A:q(A):k(A,I,B)).then(A=>{if(A){if(Qt(A,2))return W(be({replace:m},w(A.to),{state:typeof A.to=="object"?be({},oe,A.to.state):oe,force:g}),$||I)}else A=de(I,B,!0,m,oe);return V(I,B,A),A})}function j(S,$){const D=R(S,$);return D?Promise.reject(D):Promise.resolve()}function J(S){const $=pe.values().next().value;return $&&typeof $.runWithContext=="function"?$.runWithContext(S):S()}function Y(S,$){let D;const[B,oe,g]=AA(S,$);D=Ya(B.reverse(),"beforeRouteLeave",S,$);for(const b of B)b.leaveGuards.forEach(I=>{D.push(vn(I,S,$))});const m=j.bind(null,S,$);return D.push(m),ge(D).then(()=>{D=[];for(const b of r.list())D.push(vn(b,S,$));return D.push(m),ge(D)}).then(()=>{D=Ya(oe,"beforeRouteUpdate",S,$);for(const b of oe)b.updateGuards.forEach(I=>{D.push(vn(I,S,$))});return D.push(m),ge(D)}).then(()=>{D=[];for(const b of g)if(b.beforeEnter)if(Dt(b.beforeEnter))for(const I of b.beforeEnter)D.push(vn(I,S,$));else D.push(vn(b.beforeEnter,S,$));return D.push(m),ge(D)}).then(()=>(S.matched.forEach(b=>b.enterCallbacks={}),D=Ya(g,"beforeRouteEnter",S,$),D.push(m),ge(D))).then(()=>{D=[];for(const b of o.list())D.push(vn(b,S,$));return D.push(m),ge(D)}).catch(b=>Qt(b,8)?b:Promise.reject(b))}function V(S,$,D){a.list().forEach(B=>J(()=>B(S,$,D)))}function de(S,$,D,B,oe){const g=R(S,$);if(g)return g;const m=$===yn,b=Ai?history.state:{};D&&(B||m?s.replace(S.fullPath,be({scroll:m&&b&&b.scroll},oe)):s.push(S.fullPath,oe)),c.value=S,se(S,$,D,m),q()}let Re;function K(){Re||(Re=s.listen((S,$,D)=>{if(!Pe.listening)return;const B=v(S),oe=H(B);if(oe){W(be(oe,{replace:!0}),B).catch(Fs);return}l=B;const g=c.value;Ai&&Hk(Ld(g.fullPath,D.delta),pa()),Y(B,g).catch(m=>Qt(m,12)?m:Qt(m,2)?(W(m.to,B).then(b=>{Qt(b,20)&&!D.delta&&D.type===sr.pop&&s.go(-1,!1)}).catch(Fs),Promise.reject()):(D.delta&&s.go(-D.delta,!1),k(m,B,g))).then(m=>{m=m||de(B,g,!1),m&&(D.delta&&!Qt(m,8)?s.go(-D.delta,!1):D.type===sr.pop&&Qt(m,20)&&s.go(-1,!1)),V(B,g,m)}).catch(Fs)}))}let M=bs(),C=bs(),O;function k(S,$,D){q(S);const B=C.list();return B.length?B.forEach(oe=>oe(S,$,D)):console.error(S),Promise.reject(S)}function G(){return O&&c.value!==yn?Promise.resolve():new Promise((S,$)=>{M.add([S,$])})}function q(S){return O||(O=!S,K(),M.list().forEach(([$,D])=>S?D(S):$()),M.reset()),S}function se(S,$,D,B){const{scrollBehavior:oe}=t;if(!Ai||!oe)return Promise.resolve();const g=!D&&Wk(Ld(S.fullPath,0))||(B||!D)&&history.state&&history.state.scroll||null;return Fp().then(()=>oe(S,$,g)).then(m=>m&&Uk(m)).catch(m=>k(m,S,$))}const ne=S=>s.go(S);let fe;const pe=new Set,Pe={currentRoute:c,listening:!0,addRoute:f,removeRoute:p,hasRoute:y,getRoutes:_,resolve:v,options:t,push:E,replace:x,go:ne,back:()=>ne(-1),forward:()=>ne(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:C.add,isReady:G,install(S){const $=this;S.component("RouterLink",EA),S.component("RouterView",kA),S.config.globalProperties.$router=$,Object.defineProperty(S.config.globalProperties,"$route",{enumerable:!0,get:()=>Ni(c)}),Ai&&!fe&&c.value===yn&&(fe=!0,E(s.location).catch(oe=>{}));const D={};for(const oe in yn)Object.defineProperty(D,oe,{get:()=>c.value[oe],enumerable:!0});S.provide(bu,$),S.provide(cy,kp(D)),S.provide(Gc,c);const B=S.unmount;pe.add(S),S.unmount=function(){pe.delete(S),pe.size<1&&(l=yn,Re&&Re(),Re=null,c.value=yn,fe=!1,O=!1),B()}}};function ge(S){return S.reduce(($,D)=>$.then(()=>J(D)),Promise.resolve())}return Pe}function AA(t,e){const n=[],i=[],s=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(t.matched.find(l=>Xi(l,a))?i.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>Xi(l,c))||s.push(c))}return[n,i,s]}var RA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function OA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ly={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(RA,function(){var n=1e3,i=6e4,s=36e5,r="millisecond",o="second",a="minute",c="hour",l="day",u="week",h="month",d="quarter",f="year",p="date",_="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(K){var M=["th","st","nd","rd"],C=K%100;return"["+K+(M[(C-20)%10]||M[C]||M[0])+"]"}},R=function(K,M,C){var O=String(K);return!O||O.length>=M?K:""+Array(M+1-O.length).join(C)+K},E={s:R,z:function(K){var M=-K.utcOffset(),C=Math.abs(M),O=Math.floor(C/60),k=C%60;return(M<=0?"+":"-")+R(O,2,"0")+":"+R(k,2,"0")},m:function K(M,C){if(M.date()<C.date())return-K(C,M);var O=12*(C.year()-M.year())+(C.month()-M.month()),k=M.clone().add(O,h),G=C-k<0,q=M.clone().add(O+(G?-1:1),h);return+(-(O+(C-k)/(G?k-q:q-k))||0)},a:function(K){return K<0?Math.ceil(K)||0:Math.floor(K)},p:function(K){return{M:h,y:f,w:u,d:l,D:p,h:c,m:a,s:o,ms:r,Q:d}[K]||String(K||"").toLowerCase().replace(/s$/,"")},u:function(K){return K===void 0}},x="en",H={};H[x]=w;var W="$isDayjsObject",j=function(K){return K instanceof de||!(!K||!K[W])},J=function K(M,C,O){var k;if(!M)return x;if(typeof M=="string"){var G=M.toLowerCase();H[G]&&(k=G),C&&(H[G]=C,k=G);var q=M.split("-");if(!k&&q.length>1)return K(q[0])}else{var se=M.name;H[se]=M,k=se}return!O&&k&&(x=k),k||!O&&x},Y=function(K,M){if(j(K))return K.clone();var C=typeof M=="object"?M:{};return C.date=K,C.args=arguments,new de(C)},V=E;V.l=J,V.i=j,V.w=function(K,M){return Y(K,{locale:M.$L,utc:M.$u,x:M.$x,$offset:M.$offset})};var de=function(){function K(C){this.$L=J(C.locale,null,!0),this.parse(C),this.$x=this.$x||C.x||{},this[W]=!0}var M=K.prototype;return M.parse=function(C){this.$d=function(O){var k=O.date,G=O.utc;if(k===null)return new Date(NaN);if(V.u(k))return new Date;if(k instanceof Date)return new Date(k);if(typeof k=="string"&&!/Z$/i.test(k)){var q=k.match(y);if(q){var se=q[2]-1||0,ne=(q[7]||"0").substring(0,3);return G?new Date(Date.UTC(q[1],se,q[3]||1,q[4]||0,q[5]||0,q[6]||0,ne)):new Date(q[1],se,q[3]||1,q[4]||0,q[5]||0,q[6]||0,ne)}}return new Date(k)}(C),this.init()},M.init=function(){var C=this.$d;this.$y=C.getFullYear(),this.$M=C.getMonth(),this.$D=C.getDate(),this.$W=C.getDay(),this.$H=C.getHours(),this.$m=C.getMinutes(),this.$s=C.getSeconds(),this.$ms=C.getMilliseconds()},M.$utils=function(){return V},M.isValid=function(){return this.$d.toString()!==_},M.isSame=function(C,O){var k=Y(C);return this.startOf(O)<=k&&k<=this.endOf(O)},M.isAfter=function(C,O){return Y(C)<this.startOf(O)},M.isBefore=function(C,O){return this.endOf(O)<Y(C)},M.$g=function(C,O,k){return V.u(C)?this[O]:this.set(k,C)},M.unix=function(){return Math.floor(this.valueOf()/1e3)},M.valueOf=function(){return this.$d.getTime()},M.startOf=function(C,O){var k=this,G=!!V.u(O)||O,q=V.p(C),se=function(D,B){var oe=V.w(k.$u?Date.UTC(k.$y,B,D):new Date(k.$y,B,D),k);return G?oe:oe.endOf(l)},ne=function(D,B){return V.w(k.toDate()[D].apply(k.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(B)),k)},fe=this.$W,pe=this.$M,Pe=this.$D,ge="set"+(this.$u?"UTC":"");switch(q){case f:return G?se(1,0):se(31,11);case h:return G?se(1,pe):se(0,pe+1);case u:var S=this.$locale().weekStart||0,$=(fe<S?fe+7:fe)-S;return se(G?Pe-$:Pe+(6-$),pe);case l:case p:return ne(ge+"Hours",0);case c:return ne(ge+"Minutes",1);case a:return ne(ge+"Seconds",2);case o:return ne(ge+"Milliseconds",3);default:return this.clone()}},M.endOf=function(C){return this.startOf(C,!1)},M.$set=function(C,O){var k,G=V.p(C),q="set"+(this.$u?"UTC":""),se=(k={},k[l]=q+"Date",k[p]=q+"Date",k[h]=q+"Month",k[f]=q+"FullYear",k[c]=q+"Hours",k[a]=q+"Minutes",k[o]=q+"Seconds",k[r]=q+"Milliseconds",k)[G],ne=G===l?this.$D+(O-this.$W):O;if(G===h||G===f){var fe=this.clone().set(p,1);fe.$d[se](ne),fe.init(),this.$d=fe.set(p,Math.min(this.$D,fe.daysInMonth())).$d}else se&&this.$d[se](ne);return this.init(),this},M.set=function(C,O){return this.clone().$set(C,O)},M.get=function(C){return this[V.p(C)]()},M.add=function(C,O){var k,G=this;C=Number(C);var q=V.p(O),se=function(pe){var Pe=Y(G);return V.w(Pe.date(Pe.date()+Math.round(pe*C)),G)};if(q===h)return this.set(h,this.$M+C);if(q===f)return this.set(f,this.$y+C);if(q===l)return se(1);if(q===u)return se(7);var ne=(k={},k[a]=i,k[c]=s,k[o]=n,k)[q]||1,fe=this.$d.getTime()+C*ne;return V.w(fe,this)},M.subtract=function(C,O){return this.add(-1*C,O)},M.format=function(C){var O=this,k=this.$locale();if(!this.isValid())return k.invalidDate||_;var G=C||"YYYY-MM-DDTHH:mm:ssZ",q=V.z(this),se=this.$H,ne=this.$m,fe=this.$M,pe=k.weekdays,Pe=k.months,ge=k.meridiem,S=function(B,oe,g,m){return B&&(B[oe]||B(O,G))||g[oe].slice(0,m)},$=function(B){return V.s(se%12||12,B,"0")},D=ge||function(B,oe,g){var m=B<12?"AM":"PM";return g?m.toLowerCase():m};return G.replace(v,function(B,oe){return oe||function(g){switch(g){case"YY":return String(O.$y).slice(-2);case"YYYY":return V.s(O.$y,4,"0");case"M":return fe+1;case"MM":return V.s(fe+1,2,"0");case"MMM":return S(k.monthsShort,fe,Pe,3);case"MMMM":return S(Pe,fe);case"D":return O.$D;case"DD":return V.s(O.$D,2,"0");case"d":return String(O.$W);case"dd":return S(k.weekdaysMin,O.$W,pe,2);case"ddd":return S(k.weekdaysShort,O.$W,pe,3);case"dddd":return pe[O.$W];case"H":return String(se);case"HH":return V.s(se,2,"0");case"h":return $(1);case"hh":return $(2);case"a":return D(se,ne,!0);case"A":return D(se,ne,!1);case"m":return String(ne);case"mm":return V.s(ne,2,"0");case"s":return String(O.$s);case"ss":return V.s(O.$s,2,"0");case"SSS":return V.s(O.$ms,3,"0");case"Z":return q}return null}(B)||q.replace(":","")})},M.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},M.diff=function(C,O,k){var G,q=this,se=V.p(O),ne=Y(C),fe=(ne.utcOffset()-this.utcOffset())*i,pe=this-ne,Pe=function(){return V.m(q,ne)};switch(se){case f:G=Pe()/12;break;case h:G=Pe();break;case d:G=Pe()/3;break;case u:G=(pe-fe)/6048e5;break;case l:G=(pe-fe)/864e5;break;case c:G=pe/s;break;case a:G=pe/i;break;case o:G=pe/n;break;default:G=pe}return k?G:V.a(G)},M.daysInMonth=function(){return this.endOf(h).$D},M.$locale=function(){return H[this.$L]},M.locale=function(C,O){if(!C)return this.$L;var k=this.clone(),G=J(C,O,!0);return G&&(k.$L=G),k},M.clone=function(){return V.w(this.$d,this)},M.toDate=function(){return new Date(this.valueOf())},M.toJSON=function(){return this.isValid()?this.toISOString():null},M.toISOString=function(){return this.$d.toISOString()},M.toString=function(){return this.$d.toUTCString()},K}(),Re=de.prototype;return Y.prototype=Re,[["$ms",r],["$s",o],["$m",a],["$H",c],["$W",l],["$M",h],["$y",f],["$D",p]].forEach(function(K){Re[K[1]]=function(M){return this.$g(M,K[0],K[1])}}),Y.extend=function(K,M){return K.$i||(K(M,de,Y),K.$i=!0),Y},Y.locale=J,Y.isDayjs=j,Y.unix=function(K){return Y(1e3*K)},Y.en=H[x],Y.Ls=H,Y.p={},Y})})(ly);var PA=ly.exports;const eD=OA(PA);/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function yr(t){return t+.5|0}const Cn=(t,e,n)=>Math.max(Math.min(t,n),e);function xs(t){return Cn(yr(t*2.55),0,255)}function Dn(t){return Cn(yr(t*255),0,255)}function sn(t){return Cn(yr(t/2.55)/100,0,1)}function Xd(t){return Cn(yr(t*100),0,100)}const pt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Yc=[..."0123456789ABCDEF"],MA=t=>Yc[t&15],DA=t=>Yc[(t&240)>>4]+Yc[t&15],Rr=t=>(t&240)>>4===(t&15),NA=t=>Rr(t.r)&&Rr(t.g)&&Rr(t.b)&&Rr(t.a);function LA(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&pt[t[1]]*17,g:255&pt[t[2]]*17,b:255&pt[t[3]]*17,a:e===5?pt[t[4]]*17:255}:(e===7||e===9)&&(n={r:pt[t[1]]<<4|pt[t[2]],g:pt[t[3]]<<4|pt[t[4]],b:pt[t[5]]<<4|pt[t[6]],a:e===9?pt[t[7]]<<4|pt[t[8]]:255})),n}const FA=(t,e)=>t<255?e(t):"";function $A(t){var e=NA(t)?MA:DA;return t?"#"+e(t.r)+e(t.g)+e(t.b)+FA(t.a,e):void 0}const BA=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function uy(t,e,n){const i=e*Math.min(n,1-n),s=(r,o=(r+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function UA(t,e,n){const i=(s,r=(s+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function HA(t,e,n){const i=uy(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)i[s]*=1-e-n,i[s]+=e;return i}function WA(t,e,n,i,s){return t===s?(e-n)/i+(e<n?6:0):e===s?(n-t)/i+2:(t-e)/i+4}function vu(t){const n=t.r/255,i=t.g/255,s=t.b/255,r=Math.max(n,i,s),o=Math.min(n,i,s),a=(r+o)/2;let c,l,u;return r!==o&&(u=r-o,l=a>.5?u/(2-r-o):u/(r+o),c=WA(n,i,s,u,r),c=c*60+.5),[c|0,l||0,a]}function wu(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Dn)}function Iu(t,e,n){return wu(uy,t,e,n)}function jA(t,e,n){return wu(HA,t,e,n)}function zA(t,e,n){return wu(UA,t,e,n)}function hy(t){return(t%360+360)%360}function VA(t){const e=BA.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?xs(+e[5]):Dn(+e[5]));const s=hy(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=jA(s,r,o):e[1]==="hsv"?i=zA(s,r,o):i=Iu(s,r,o),{r:i[0],g:i[1],b:i[2],a:n}}function KA(t,e){var n=vu(t);n[0]=hy(n[0]+e),n=Iu(n),t.r=n[0],t.g=n[1],t.b=n[2]}function qA(t){if(!t)return;const e=vu(t),n=e[0],i=Xd(e[1]),s=Xd(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${s}%, ${sn(t.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const Qd={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Jd={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function GA(){const t={},e=Object.keys(Jd),n=Object.keys(Qd);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<n.length;s++)r=n[s],a=a.replace(r,Qd[r]);r=parseInt(Jd[o],16),t[a]=[r>>16&255,r>>8&255,r&255]}return t}let Or;function YA(t){Or||(Or=GA(),Or.transparent=[0,0,0,0]);const e=Or[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const XA=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function QA(t){const e=XA.exec(t);let n=255,i,s,r;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?xs(o):Cn(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?xs(i):Cn(i,0,255)),s=255&(e[4]?xs(s):Cn(s,0,255)),r=255&(e[6]?xs(r):Cn(r,0,255)),{r:i,g:s,b:r,a:n}}}function JA(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${sn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Xa=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ki=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function ZA(t,e,n){const i=ki(sn(t.r)),s=ki(sn(t.g)),r=ki(sn(t.b));return{r:Dn(Xa(i+n*(ki(sn(e.r))-i))),g:Dn(Xa(s+n*(ki(sn(e.g))-s))),b:Dn(Xa(r+n*(ki(sn(e.b))-r))),a:t.a+n*(e.a-t.a)}}function Pr(t,e,n){if(t){let i=vu(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Iu(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function dy(t,e){return t&&Object.assign(e||{},t)}function Zd(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Dn(t[3]))):(e=dy(t,{r:0,g:0,b:0,a:1}),e.a=Dn(e.a)),e}function eR(t){return t.charAt(0)==="r"?QA(t):VA(t)}class rr{constructor(e){if(e instanceof rr)return e;const n=typeof e;let i;n==="object"?i=Zd(e):n==="string"&&(i=LA(e)||YA(e)||eR(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=dy(this._rgb);return e&&(e.a=sn(e.a)),e}set rgb(e){this._rgb=Zd(e)}rgbString(){return this._valid?JA(this._rgb):void 0}hexString(){return this._valid?$A(this._rgb):void 0}hslString(){return this._valid?qA(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,s=e.rgb;let r;const o=n===r?.5:n,a=2*o-1,c=i.a-s.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;r=1-l,i.r=255&l*i.r+r*s.r+.5,i.g=255&l*i.g+r*s.g+.5,i.b=255&l*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=ZA(this._rgb,e._rgb,n)),this}clone(){return new rr(this.rgb)}alpha(e){return this._rgb.a=Dn(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=yr(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Pr(this._rgb,2,e),this}darken(e){return Pr(this._rgb,2,-e),this}saturate(e){return Pr(this._rgb,1,e),this}desaturate(e){return Pr(this._rgb,1,-e),this}rotate(e){return KA(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function Jt(){}const tR=(()=>{let t=0;return()=>t++})();function ke(t){return t===null||typeof t>"u"}function Ne(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function me(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function He(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ut(t,e){return He(t)?t:e}function Se(t,e){return typeof t>"u"?e:t}const nR=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function De(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ve(t,e,n,i){let s,r,o;if(Ne(t))if(r=t.length,i)for(s=r-1;s>=0;s--)e.call(n,t[s],s);else for(s=0;s<r;s++)e.call(n,t[s],s);else if(me(t))for(o=Object.keys(t),r=o.length,s=0;s<r;s++)e.call(n,t[o[s]],o[s])}function Oo(t,e){let n,i,s,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(s=t[n],r=e[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Po(t){if(Ne(t))return t.map(Po);if(me(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let s=0;for(;s<i;++s)e[n[s]]=Po(t[n[s]]);return e}return t}function fy(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function iR(t,e,n,i){if(!fy(t))return;const s=e[t],r=n[t];me(s)&&me(r)?or(s,r,i):e[t]=Po(r)}function or(t,e,n){const i=Ne(e)?e:[e],s=i.length;if(!me(t))return t;n=n||{};const r=n.merger||iR;let o;for(let a=0;a<s;++a){if(o=i[a],!me(o))continue;const c=Object.keys(o);for(let l=0,u=c.length;l<u;++l)r(c[l],t,o,n)}return t}function Bs(t,e){return or(t,e,{merger:sR})}function sR(t,e,n){if(!fy(t))return;const i=e[t],s=n[t];me(i)&&me(s)?Bs(i,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Po(s))}const ef={"":t=>t,x:t=>t.x,y:t=>t.y};function rR(t){const e=t.split("."),n=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function oR(t){const e=rR(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Mo(t,e){return(ef[e]||(ef[e]=oR(e)))(t)}function Su(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Do=t=>typeof t<"u",Fn=t=>typeof t=="function",tf=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function aR(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const We=Math.PI,yt=2*We,cR=yt+We,No=Number.POSITIVE_INFINITY,lR=We/180,ht=We/2,Hn=We/4,nf=We*2/3,Tn=Math.log10,Ji=Math.sign;function Us(t,e,n){return Math.abs(t-e)<n}function sf(t){const e=Math.round(t);t=Us(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Tn(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function uR(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((s,r)=>s-r).pop(),e}function ar(t){return!isNaN(parseFloat(t))&&isFinite(t)}function hR(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function py(t,e,n){let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function xn(t){return t*(We/180)}function Eu(t){return t*(180/We)}function rf(t){if(!He(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function dR(t,e){const n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*We&&(r+=yt),{angle:r,distance:s}}function Xc(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function fR(t,e){return(t-e+cR)%yt-We}function St(t){return(t%yt+yt)%yt}function gy(t,e,n,i){const s=St(t),r=St(e),o=St(n),a=St(r-s),c=St(o-s),l=St(s-r),u=St(s-o);return s===r||s===o||i&&r===o||a>c&&l<u}function mt(t,e,n){return Math.max(e,Math.min(n,t))}function pR(t){return mt(t,-32768,32767)}function gR(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Cu(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const ni=(t,e,n,i)=>Cu(t,n,i?s=>{const r=t[s][e];return r<n||r===n&&t[s+1][e]===n}:s=>t[s][e]<n),mR=(t,e,n)=>Cu(t,n,i=>t[i][e]>=n);function _R(t,e,n){let i=0,s=t.length;for(;i<s&&t[i]<e;)i++;for(;s>i&&t[s-1]>n;)s--;return i>0||s<t.length?t.slice(i,s):t}const my=["push","pop","shift","splice","unshift"];function yR(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),my.forEach(n=>{const i="_onData"+Su(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function of(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(my.forEach(r=>{delete t[r]}),delete t._chartjs)}function bR(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const _y=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function yy(t,e){let n=[],i=!1;return function(...s){n=s,i||(i=!0,_y.call(window,()=>{i=!1,t.apply(e,n)}))}}function vR(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const wR=t=>t==="start"?"left":t==="end"?"right":"center",af=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2;function IR(t,e,n){const i=e.length;let s=0,r=i;if(t._sorted){const{iScale:o,_parsed:a}=t,c=o.axis,{min:l,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(s=mt(Math.min(ni(a,c,l).lo,n?i:ni(e,c,o.getPixelForValue(l)).lo),0,i-1)),d?r=mt(Math.max(ni(a,o.axis,u,!0).hi+1,n?0:ni(e,c,o.getPixelForValue(u),!0).hi+1),s,i)-s:r=i-s}return{start:s,count:r}}function SR(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const Mr=t=>t===0||t===1,cf=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*yt/n)),lf=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*yt/n)+1,Hs={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ht)+1,easeOutSine:t=>Math.sin(t*ht),easeInOutSine:t=>-.5*(Math.cos(We*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Mr(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Mr(t)?t:cf(t,.075,.3),easeOutElastic:t=>Mr(t)?t:lf(t,.075,.3),easeInOutElastic(t){return Mr(t)?t:t<.5?.5*cf(t*2,.1125,.45):.5+.5*lf(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Hs.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Hs.easeInBounce(t*2)*.5:Hs.easeOutBounce(t*2-1)*.5+.5};function Tu(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function uf(t){return Tu(t)?t:new rr(t)}function Qa(t){return Tu(t)?t:new rr(t).saturate(.5).darken(.1).hexString()}const ER=["x","y","borderWidth","radius","tension"],CR=["color","borderColor","backgroundColor"];function TR(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:CR},numbers:{type:"number",properties:ER}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function xR(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const hf=new Map;function kR(t,e){e=e||{};const n=t+JSON.stringify(e);let i=hf.get(n);return i||(i=new Intl.NumberFormat(t,e),hf.set(n,i)),i}function xu(t,e,n){return kR(e,n).format(t)}const by={values(t){return Ne(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let s,r=t;if(n.length>1){const l=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(l<1e-4||l>1e15)&&(s="scientific"),r=AR(t,n)}const o=Tn(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),xu(t,i,c)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Tn(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?by.numeric.call(this,t,e,n):""}};function AR(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var ga={formatters:by};function RR(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ga.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const mi=Object.create(null),Qc=Object.create(null);function Ws(t,e){if(!e)return t;const n=e.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];t=t[r]||(t[r]=Object.create(null))}return t}function Ja(t,e,n){return typeof e=="string"?or(Ws(t,e),n):or(Ws(t,""),e)}class OR{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Qa(s.backgroundColor),this.hoverBorderColor=(i,s)=>Qa(s.borderColor),this.hoverColor=(i,s)=>Qa(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Ja(this,e,n)}get(e){return Ws(this,e)}describe(e,n){return Ja(Qc,e,n)}override(e,n){return Ja(mi,e,n)}route(e,n,i,s){const r=Ws(this,e),o=Ws(this,i),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[a],l=o[s];return me(c)?Object.assign({},l,c):Se(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(n=>n(this))}}var Le=new OR({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[TR,xR,RR]);function PR(t){return!t||ke(t.size)||ke(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Lo(t,e,n,i,s){let r=e[s];return r||(r=e[s]=t.measureText(s).width,n.push(s)),r>i&&(i=r),i}function MR(t,e,n,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let c,l,u,h,d;for(c=0;c<a;c++)if(h=n[c],h!=null&&!Ne(h))o=Lo(t,s,r,o,h);else if(Ne(h))for(l=0,u=h.length;l<u;l++)d=h[l],d!=null&&!Ne(d)&&(o=Lo(t,s,r,o,d));t.restore();const f=r.length/2;if(f>n.length){for(c=0;c<f;c++)delete s[r[c]];r.splice(0,f)}return o}function Wn(t,e,n){const i=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*i)/i+s}function df(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Jc(t,e,n,i){DR(t,e,n,i,null)}function DR(t,e,n,i,s){let r,o,a,c,l,u,h,d;const f=e.pointStyle,p=e.rotation,_=e.radius;let y=(p||0)*lR;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(y),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(_)||_<=0)){switch(t.beginPath(),f){default:s?t.ellipse(n,i,s/2,_,0,0,yt):t.arc(n,i,_,0,yt),t.closePath();break;case"triangle":u=s?s/2:_,t.moveTo(n+Math.sin(y)*u,i-Math.cos(y)*_),y+=nf,t.lineTo(n+Math.sin(y)*u,i-Math.cos(y)*_),y+=nf,t.lineTo(n+Math.sin(y)*u,i-Math.cos(y)*_),t.closePath();break;case"rectRounded":l=_*.516,c=_-l,o=Math.cos(y+Hn)*c,h=Math.cos(y+Hn)*(s?s/2-l:c),a=Math.sin(y+Hn)*c,d=Math.sin(y+Hn)*(s?s/2-l:c),t.arc(n-h,i-a,l,y-We,y-ht),t.arc(n+d,i-o,l,y-ht,y),t.arc(n+h,i+a,l,y,y+ht),t.arc(n-d,i+o,l,y+ht,y+We),t.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*_,u=s?s/2:c,t.rect(n-u,i-c,2*u,2*c);break}y+=Hn;case"rectRot":h=Math.cos(y)*(s?s/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,d=Math.sin(y)*(s?s/2:_),t.moveTo(n-h,i-a),t.lineTo(n+d,i-o),t.lineTo(n+h,i+a),t.lineTo(n-d,i+o),t.closePath();break;case"crossRot":y+=Hn;case"cross":h=Math.cos(y)*(s?s/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,d=Math.sin(y)*(s?s/2:_),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"star":h=Math.cos(y)*(s?s/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,d=Math.sin(y)*(s?s/2:_),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o),y+=Hn,h=Math.cos(y)*(s?s/2:_),o=Math.cos(y)*_,a=Math.sin(y)*_,d=Math.sin(y)*(s?s/2:_),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"line":o=s?s/2:Math.cos(y)*_,a=Math.sin(y)*_,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(y)*(s?s/2:_),i+Math.sin(y)*_);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function cn(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function vy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function wy(t){t.restore()}function NR(t,e,n,i,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else s==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function LR(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function FR(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ke(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function $R(t,e,n,i,s){if(s.strikethrough||s.underline){const r=t.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,c=n-r.actualBoundingBoxAscent,l=n+r.actualBoundingBoxDescent,u=s.strikethrough?(c+l)/2:l;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function BR(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Fo(t,e,n,i,s,r={}){const o=Ne(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let c,l;for(t.save(),t.font=s.string,FR(t,r),c=0;c<o.length;++c)l=o[c],r.backdrop&&BR(t,r.backdrop),a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),ke(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(l,n,i,r.maxWidth)),t.fillText(l,n,i,r.maxWidth),$R(t,n,i,l,r),i+=Number(s.lineHeight);t.restore()}function Zc(t,e){const{x:n,y:i,w:s,h:r,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*We,We,!0),t.lineTo(n,i+r-o.bottomLeft),t.arc(n+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,We,ht,!0),t.lineTo(n+s-o.bottomRight,i+r),t.arc(n+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,ht,0,!0),t.lineTo(n+s,i+o.topRight),t.arc(n+s-o.topRight,i+o.topRight,o.topRight,0,-ht,!0),t.lineTo(n+o.topLeft,i)}const UR=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,HR=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function WR(t,e){const n=(""+t).match(UR);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const jR=t=>+t||0;function Iy(t,e){const n={},i=me(e),s=i?Object.keys(e):e,r=me(t)?i?o=>Se(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=jR(r(o));return n}function zR(t){return Iy(t,{top:"y",right:"x",bottom:"y",left:"x"})}function js(t){return Iy(t,["topLeft","topRight","bottomLeft","bottomRight"])}function vt(t){const e=zR(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function dt(t,e){t=t||{},e=e||Le.font;let n=Se(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=Se(t.style,e.style);i&&!(""+i).match(HR)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Se(t.family,e.family),lineHeight:WR(Se(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Se(t.weight,e.weight),string:""};return s.string=PR(s),s}function Dr(t,e,n,i){let s=!0,r,o,a;for(r=0,o=t.length;r<o;++r)if(a=t[r],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),s=!1),n!==void 0&&Ne(a)&&(a=a[n%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function VR(t,e,n){const{min:i,max:s}=t,r=nR(e,(s-i)/2),o=(a,c)=>n&&a===0?0:a+c;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function $n(t,e){return Object.assign(Object.create(t),e)}function ku(t,e=[""],n,i,s=()=>t[0]){const r=n||t;typeof i>"u"&&(i=Ty("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>ku([a,...t],e,r,i)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete t[0][c],!0},get(a,c){return Ey(a,c,()=>ZR(c,e,t,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,c){return pf(a).includes(c)},ownKeys(a){return pf(a)},set(a,c,l){const u=a._storage||(a._storage=s());return a[c]=u[c]=l,delete a._keys,!0}})}function Zi(t,e,n,i){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Sy(t,i),setContext:r=>Zi(t,r,n,i),override:r=>Zi(t.override(r),e,n,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,a){return Ey(r,o,()=>qR(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,a){return t[o]=a,delete r[o],!0}})}function Sy(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:i,isScriptable:Fn(n)?n:()=>n,isIndexable:Fn(i)?i:()=>i}}const KR=(t,e)=>t?t+Su(e):e,Au=(t,e)=>me(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Ey(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function qR(t,e,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=t;let a=i[e];return Fn(a)&&o.isScriptable(e)&&(a=GR(e,a,t,n)),Ne(a)&&a.length&&(a=YR(e,a,t,o.isIndexable)),Au(e,a)&&(a=Zi(a,s,r&&r[e],o)),a}function GR(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let c=e(r,o||i);return a.delete(t),Au(t,c)&&(c=Ru(s._scopes,s,t,c)),c}function YR(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&i(t))return e[r.index%e.length];if(me(e[0])){const c=e,l=s._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=Ru(l,s,t,u);e.push(Zi(h,r,o&&o[t],a))}}return e}function Cy(t,e,n){return Fn(t)?t(e,n):t}const XR=(t,e)=>t===!0?e:typeof t=="string"?Mo(e,t):void 0;function QR(t,e,n,i,s){for(const r of e){const o=XR(n,r);if(o){t.add(o);const a=Cy(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function Ru(t,e,n,i){const s=e._rootScopes,r=Cy(e._fallback,n,i),o=[...t,...s],a=new Set;a.add(i);let c=ff(a,o,n,r||n,i);return c===null||typeof r<"u"&&r!==n&&(c=ff(a,o,r,c,i),c===null)?!1:ku(Array.from(a),[""],s,r,()=>JR(e,n,i))}function ff(t,e,n,i,s){for(;n;)n=QR(t,e,n,i,s);return n}function JR(t,e,n){const i=t._getTarget();e in i||(i[e]={});const s=i[e];return Ne(s)&&me(n)?n:s||{}}function ZR(t,e,n,i){let s;for(const r of e)if(s=Ty(KR(r,t),n),typeof s<"u")return Au(t,s)?Ru(n,i,t,s):s}function Ty(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function pf(t){let e=t._keys;return e||(e=t._keys=eO(t._scopes)),e}function eO(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}const tO=Number.EPSILON||1e-14,es=(t,e)=>e<t.length&&!t[e].skip&&t[e],xy=t=>t==="x"?"y":"x";function nO(t,e,n,i){const s=t.skip?e:t,r=e,o=n.skip?e:n,a=Xc(r,s),c=Xc(o,r);let l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;const h=i*l,d=i*u;return{previous:{x:r.x-h*(o.x-s.x),y:r.y-h*(o.y-s.y)},next:{x:r.x+d*(o.x-s.x),y:r.y+d*(o.y-s.y)}}}function iO(t,e,n){const i=t.length;let s,r,o,a,c,l=es(t,0);for(let u=0;u<i-1;++u)if(c=l,l=es(t,u+1),!(!c||!l)){if(Us(e[u],0,tO)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],r=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=r*o*e[u])}}function sO(t,e,n="x"){const i=xy(n),s=t.length;let r,o,a,c=es(t,0);for(let l=0;l<s;++l){if(o=a,a=c,c=es(t,l+1),!a)continue;const u=a[n],h=a[i];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${i}`]=h-r*e[l]),c&&(r=(c[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${i}`]=h+r*e[l])}}function rO(t,e="x"){const n=xy(e),i=t.length,s=Array(i).fill(0),r=Array(i);let o,a,c,l=es(t,0);for(o=0;o<i;++o)if(a=c,c=l,l=es(t,o+1),!!c){if(l){const u=l[e]-c[e];s[o]=u!==0?(l[n]-c[n])/u:0}r[o]=a?l?Ji(s[o-1])!==Ji(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}iO(t,s,r),sO(t,r,e)}function Nr(t,e,n){return Math.max(Math.min(t,n),e)}function oO(t,e){let n,i,s,r,o,a=cn(t[0],e);for(n=0,i=t.length;n<i;++n)o=r,r=a,a=n<i-1&&cn(t[n+1],e),r&&(s=t[n],o&&(s.cp1x=Nr(s.cp1x,e.left,e.right),s.cp1y=Nr(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Nr(s.cp2x,e.left,e.right),s.cp2y=Nr(s.cp2y,e.top,e.bottom)))}function aO(t,e,n,i,s){let r,o,a,c;if(e.spanGaps&&(t=t.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")rO(t,s);else{let l=i?t[t.length-1]:t[0];for(r=0,o=t.length;r<o;++r)a=t[r],c=nO(l,a,t[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&oO(t,n)}function Ou(){return typeof window<"u"&&typeof document<"u"}function Pu(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function $o(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const ma=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function cO(t,e){return ma(t).getPropertyValue(e)}const lO=["top","right","bottom","left"];function ai(t,e,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=lO[s];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const uO=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function hO(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:s,offsetY:r}=i;let o=!1,a,c;if(uO(s,r,t.target))a=s,c=r;else{const l=e.getBoundingClientRect();a=i.clientX-l.left,c=i.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function qn(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,s=ma(n),r=s.boxSizing==="border-box",o=ai(s,"padding"),a=ai(s,"border","width"),{x:c,y:l,box:u}=hO(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((c-h)/f*n.width/i),y:Math.round((l-d)/p*n.height/i)}}function dO(t,e,n){let i,s;if(e===void 0||n===void 0){const r=Pu(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const o=r.getBoundingClientRect(),a=ma(r),c=ai(a,"border","width"),l=ai(a,"padding");e=o.width-l.width-c.width,n=o.height-l.height-c.height,i=$o(a.maxWidth,r,"clientWidth"),s=$o(a.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:i||No,maxHeight:s||No}}const Lr=t=>Math.round(t*10)/10;function fO(t,e,n,i){const s=ma(t),r=ai(s,"margin"),o=$o(s.maxWidth,t,"clientWidth")||No,a=$o(s.maxHeight,t,"clientHeight")||No,c=dO(t,e,n);let{width:l,height:u}=c;if(s.boxSizing==="content-box"){const d=ai(s,"border","width"),f=ai(s,"padding");l-=f.width+d.width,u-=f.height+d.height}return l=Math.max(0,l-r.width),u=Math.max(0,i?l/i:u-r.height),l=Lr(Math.min(l,o,c.maxWidth)),u=Lr(Math.min(u,a,c.maxHeight)),l&&!u&&(u=Lr(l/2)),(e!==void 0||n!==void 0)&&i&&c.height&&u>c.height&&(u=c.height,l=Lr(Math.floor(u*i))),{width:l,height:u}}function gf(t,e,n){const i=e||1,s=Math.floor(t.height*i),r=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(t.currentDevicePixelRatio=i,o.height=s,o.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const pO=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Ou()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function mf(t,e){const n=cO(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Gn(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function gO(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function mO(t,e,n,i){const s={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},o=Gn(t,s,n),a=Gn(s,r,n),c=Gn(r,e,n),l=Gn(o,a,n),u=Gn(a,c,n);return Gn(l,u,n)}const _O=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},yO=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Za(t,e,n){return t?_O(e,n):yO()}function bO(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function vO(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function ky(t){return t==="angle"?{between:gy,compare:fR,normalize:St}:{between:gR,compare:(e,n)=>e-n,normalize:e=>e}}function _f({start:t,end:e,count:n,loop:i,style:s}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:s}}function wO(t,e,n){const{property:i,start:s,end:r}=n,{between:o,normalize:a}=ky(i),c=e.length;let{start:l,end:u,loop:h}=t,d,f;if(h){for(l+=c,u+=c,d=0,f=c;d<f&&o(a(e[l%c][i]),s,r);++d)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:h,style:t.style}}function IO(t,e,n){if(!n)return[t];const{property:i,start:s,end:r}=n,o=e.length,{compare:a,between:c,normalize:l}=ky(i),{start:u,end:h,loop:d,style:f}=wO(t,e,n),p=[];let _=!1,y=null,v,w,R;const E=()=>c(s,R,v)&&a(s,R)!==0,x=()=>a(r,v)===0||c(r,R,v),H=()=>_||E(),W=()=>!_||x();for(let j=u,J=u;j<=h;++j)w=e[j%o],!w.skip&&(v=l(w[i]),v!==R&&(_=c(v,s,r),y===null&&H()&&(y=a(v,s)===0?j:J),y!==null&&W()&&(p.push(_f({start:y,end:j,loop:d,count:o,style:f})),y=null),J=j,R=v));return y!==null&&p.push(_f({start:y,end:h,loop:d,count:o,style:f})),p}function SO(t,e){const n=[],i=t.segments;for(let s=0;s<i.length;s++){const r=IO(i[s],t.points,e);r.length&&n.push(...r)}return n}function EO(t,e,n,i){let s=0,r=e-1;if(n&&!i)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(r+=s);r>s&&t[r%e].skip;)r--;return r%=e,{start:s,end:r}}function CO(t,e,n,i){const s=t.length,r=[];let o=e,a=t[e],c;for(c=e+1;c<=n;++c){const l=t[c%s];l.skip||l.stop?a.skip||(i=!1,r.push({start:e%s,end:(c-1)%s,loop:i}),e=o=l.stop?c:null):(o=c,a.skip&&(e=c)),a=l}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function TO(t,e){const n=t.points,i=t.options.spanGaps,s=n.length;if(!s)return[];const r=!!t._loop,{start:o,end:a}=EO(n,s,r,i);if(i===!0)return yf(t,[{start:o,end:a,loop:r}],n,e);const c=a<o?a+s:a,l=!!t._fullLoop&&o===0&&a===s-1;return yf(t,CO(n,o,c,l),n,e)}function yf(t,e,n,i){return!i||!i.setContext||!n?e:xO(t,e,n,i)}function xO(t,e,n,i){const s=t._chart.getContext(),r=bf(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,c=n.length,l=[];let u=r,h=e[0].start,d=h;function f(p,_,y,v){const w=a?-1:1;if(p!==_){for(p+=c;n[p%c].skip;)p-=w;for(;n[_%c].skip;)_+=w;p%c!==_%c&&(l.push({start:p%c,end:_%c,loop:y,style:v}),u=v,h=_%c)}}for(const p of e){h=a?h:p.start;let _=n[h%c],y;for(d=h+1;d<=p.end;d++){const v=n[d%c];y=bf(i.setContext($n(s,{type:"segment",p0:_,p1:v,p0DataIndex:(d-1)%c,p1DataIndex:d%c,datasetIndex:o}))),kO(y,u)&&f(h,d-1,p.loop,u),_=v,u=y}h<d-1&&f(h,d-1,p.loop,u)}return l}function bf(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function kO(t,e){if(!e)return!1;const n=[],i=function(s,r){return Tu(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(t,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class AO{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,s){const r=n.listeners[s],o=n.duration;r.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=_y.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,c;for(;o>=0;--o)c=r[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Zt=new AO;const vf="transparent",RO={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=uf(t||vf),s=i.valid&&uf(e||vf);return s&&s.valid?s.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class OO{constructor(e,n,i,s){const r=n[i];s=Dr([e.to,s,r,e.from]);const o=Dr([e.from,r,s]);this._active=!0,this._fn=e.fn||RO[e.type||typeof o],this._easing=Hs[e.easing]||Hs.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Dr([e.to,n,s,e.from]),this._from=Dr([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let c;if(this._active=r!==a&&(o||n<i),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=r;return}c=n/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(r,a,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class Ay{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!me(e))return;const n=Object.keys(Le.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!me(r))return;const o={};for(const a of n)o[a]=r[a];(Ne(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,s=MO(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&PO(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,n){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let c;for(c=o.length-1;c>=0;--c){const l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[l];let h=r[l];const d=i.get(l);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[l]=u;continue}r[l]=h=new OO(d,e,l,u),s.push(h)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Zt.add(this._chart,i),!0}}function PO(t,e){const n=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=t[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function MO(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function wf(t,e){const n=t&&t.options||{},i=n.reverse,s=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function DO(t,e,n){if(n===!1)return!1;const i=wf(t,n),s=wf(e,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function NO(t){let e,n,i,s;return me(t)?(e=t.top,n=t.right,i=t.bottom,s=t.left):e=n=i=s=t,{top:e,right:n,bottom:i,left:s,disabled:t===!1}}function Ry(t,e){const n=[],i=t._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function If(t,e,n,i={}){const s=t.keys,r=i.mode==="single";let o,a,c,l;if(e!==null){for(o=0,a=s.length;o<a;++o){if(c=+s[o],c===n){if(i.all)continue;break}l=t.values[c],He(l)&&(r||e===0||Ji(e)===Ji(l))&&(e+=l)}return e}}function LO(t){const e=Object.keys(t),n=new Array(e.length);let i,s,r;for(i=0,s=e.length;i<s;++i)r=e[i],n[i]={x:r,y:t[r]};return n}function Sf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function FO(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function $O(t){const{min:e,max:n,minDefined:i,maxDefined:s}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function BO(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Ef(t,e,n,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=t[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function Cf(t,e){const{chart:n,_cachedMeta:i}=t,s=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=i,c=r.axis,l=o.axis,u=FO(r,o,i),h=e.length;let d;for(let f=0;f<h;++f){const p=e[f],{[c]:_,[l]:y}=p,v=p._stacks||(p._stacks={});d=v[l]=BO(s,u,_),d[a]=y,d._top=Ef(d,o,!0,i.type),d._bottom=Ef(d,o,!1,i.type);const w=d._visualValues||(d._visualValues={});w[a]=y}}function ec(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function UO(t,e){return $n(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function HO(t,e,n){return $n(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function vs(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n],r[i]._visualValues!==void 0&&r[i]._visualValues[n]!==void 0&&delete r[i]._visualValues[n]}}}const tc=t=>t==="reset"||t==="none",Tf=(t,e)=>e?t:Object.assign({},t),WO=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Ry(n,!0),values:null};class zs{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Sf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&vs(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(h,d,f,p)=>h==="x"?d:h==="r"?p:f,r=n.xAxisID=Se(i.xAxisID,ec(e,"x")),o=n.yAxisID=Se(i.yAxisID,ec(e,"y")),a=n.rAxisID=Se(i.rAxisID,ec(e,"r")),c=n.indexAxis,l=n.iAxisID=s(c,r,o,a),u=n.vAxisID=s(c,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(l),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&of(this._data,this),e._stacked&&vs(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(me(n))this._data=LO(n);else if(i!==n){if(i){of(i,this);const s=this._cachedMeta;vs(s),s._parsed=[]}n&&Object.isExtensible(n)&&yR(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=Sf(n.vScale,n),n.stack!==i.stack&&(s=!0,vs(n),n.stack=i.stack),this._resyncElements(e),(s||r!==n._stacked)&&Cf(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let c=e===0&&n===s.length?!0:i._sorted,l=e>0&&i._parsed[e-1],u,h,d;if(this._parsing===!1)i._parsed=s,i._sorted=!0,d=s;else{Ne(s[e])?d=this.parseArrayData(i,s,e,n):me(s[e])?d=this.parseObjectData(i,s,e,n):d=this.parsePrimitiveData(i,s,e,n);const f=()=>h[a]===null||l&&h[a]<l[a];for(u=0;u<n;++u)i._parsed[u+e]=h=d[u],c&&(f()&&(c=!1),l=h);i._sorted=c}o&&Cf(this,d)}parsePrimitiveData(e,n,i,s){const{iScale:r,vScale:o}=e,a=r.axis,c=o.axis,l=r.getLabels(),u=r===o,h=new Array(s);let d,f,p;for(d=0,f=s;d<f;++d)p=d+i,h[d]={[a]:u||r.parse(l[p],p),[c]:o.parse(n[p],p)};return h}parseArrayData(e,n,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let c,l,u,h;for(c=0,l=s;c<l;++c)u=c+i,h=n[u],a[c]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,l=new Array(s);let u,h,d,f;for(u=0,h=s;u<h;++u)d=u+i,f=n[d],l[u]={x:r.parse(Mo(f,a),d),y:o.parse(Mo(f,c),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const s=this.chart,r=this._cachedMeta,o=n[e.axis],a={keys:Ry(s,!0),values:n._stacks[e.axis]._visualValues};return If(a,o,r.index,{mode:i})}updateRangeFromParsed(e,n,i,s){const r=i[n.axis];let o=r===null?NaN:r;const a=s&&i._stacks[n.axis];s&&a&&(s.values=a,o=If(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),c=WO(n,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=$O(a);let d,f;function p(){f=s[d];const _=f[a.axis];return!He(f[e.axis])||u>_||h<_}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(l,e,f,c),r));++d);if(r){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(l,e,f,c);break}}return l}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=n.length;s<r;++s)o=n[s][e.axis],He(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=NO(Se(this.options.clip,DO(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,o=[],a=this._drawStart||0,c=this._drawCount||s.length-a,l=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,r,a,c),u=a;u<a+c;++u){const h=s[u];h.hidden||(h.active&&l?o.push(h):h.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=HO(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=UO(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const s=n==="active",r=this._cachedDataOpts,o=e+"-"+n,a=r[o],c=this.enableOptionSharing&&Do(i);if(a)return Tf(a,c);const l=this.chart.config,u=l.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),u),f=Object.keys(Le.elements[e]),p=()=>this.getContext(i,s,n),_=l.resolveNamedOptions(d,f,p,h);return _.$shared&&(_.$shared=c,r[o]=Object.freeze(Tf(_,c))),_}_resolveAnimations(e,n,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let c;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(d,this.getContext(e,i,n))}const l=new Ay(s,c&&c.animations);return c&&c._cacheable&&(r[o]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||tc(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(n,r)||r!==s;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:o}}updateElement(e,n,i,s){tc(s)?Object.assign(e,i):this._resolveAnimations(n,s).update(e,i)}updateSharedOptions(e,n,i){e&&!tc(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,s){e.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,c,l]of this._syncList)this[a](c,l);this._syncList=[];const s=i.length,r=n.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,n,i=!0){const s=this._cachedMeta,r=s.data,o=e+n;let a;const c=l=>{for(l.length+=n,a=l.length-1;a>=o;a--)l[a]=l[a-n]};for(c(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,n),i&&this.updateElements(r,e,n,"reset")}updateElements(e,n,i,s){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,n);i._stacked&&vs(i,s)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,s]=e;this[n](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Z(zs,"defaults",{}),Z(zs,"datasetElementType",null),Z(zs,"dataElementType",null);class nc extends zs{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:c}=IR(n,s,o);this._drawStart=a,this._drawCount=c,SR(n)&&(a=0,c=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:l},e),this.updateElements(s,a,c,e)}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:c,_dataset:l}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,s),d=o.axis,f=a.axis,{spanGaps:p,segment:_}=this.options,y=ar(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||s==="none",w=n+i,R=e.length;let E=n>0&&this.getParsed(n-1);for(let x=0;x<R;++x){const H=e[x],W=v?H:{};if(x<n||x>=w){W.skip=!0;continue}const j=this.getParsed(x),J=ke(j[f]),Y=W[d]=o.getPixelForValue(j[d],x),V=W[f]=r||J?a.getBasePixel():a.getPixelForValue(c?this.applyStack(a,j,c):j[f],x);W.skip=isNaN(Y)||isNaN(V)||J,W.stop=x>0&&Math.abs(j[d]-E[d])>y,_&&(W.parsed=j,W.raw=l.data[x]),h&&(W.options=u||this.resolveDataElementOptions(x,H.active?"active":s)),v||this.updateElement(H,x,W,s),E=j}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Z(nc,"id","line"),Z(nc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Z(nc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function jn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Mu{constructor(e){Z(this,"options");this.options=e||{}}static override(e){Object.assign(Mu.prototype,e)}init(){}formats(){return jn()}parse(){return jn()}format(){return jn()}add(){return jn()}diff(){return jn()}startOf(){return jn()}endOf(){return jn()}}var jO={_date:Mu};function zO(t,e,n,i){const{controller:s,data:r,_sorted:o}=t,a=s._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const c=a._reversePixels?mR:ni;if(i){if(s._sharedOptions){const l=r[0],u=typeof l.getRange=="function"&&l.getRange(e);if(u){const h=c(r,e,n-u),d=c(r,e,n+u);return{lo:h.lo,hi:d.hi}}}}else return c(r,e,n)}return{lo:0,hi:r.length-1}}function br(t,e,n,i,s){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,c=r.length;a<c;++a){const{index:l,data:u}=r[a],{lo:h,hi:d}=zO(r[a],e,o,s);for(let f=h;f<=d;++f){const p=u[f];p.skip||i(p,l,f)}}}function VO(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function ic(t,e,n,i,s){const r=[];return!s&&!t.isPointInArea(e)||br(t,n,e,function(a,c,l){!s&&!cn(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:c,index:l})},!0),r}function KO(t,e,n,i){let s=[];function r(o,a,c){const{startAngle:l,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=dR(o,{x:e.x,y:e.y});gy(h,l,u)&&s.push({element:o,datasetIndex:a,index:c})}return br(t,n,e,r),s}function qO(t,e,n,i,s,r){let o=[];const a=VO(n);let c=Number.POSITIVE_INFINITY;function l(u,h,d){const f=u.inRange(e.x,e.y,s);if(i&&!f)return;const p=u.getCenterPoint(s);if(!(!!r||t.isPointInArea(p))&&!f)return;const y=a(e,p);y<c?(o=[{element:u,datasetIndex:h,index:d}],c=y):y===c&&o.push({element:u,datasetIndex:h,index:d})}return br(t,n,e,l),o}function sc(t,e,n,i,s,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!i?KO(t,e,n,s):qO(t,e,n,i,s,r)}function xf(t,e,n,i,s){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return br(t,n,e,(c,l,u)=>{c[o](e[n],s)&&(r.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(e.x,e.y,s))}),i&&!a?[]:r}var GO={evaluateInteractionItems:br,modes:{index(t,e,n,i){const s=qn(e,t),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?ic(t,s,r,i,o):sc(t,s,r,!1,i,o),c=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(l=>{const u=a[0].index,h=l.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:l.index,index:u})}),c):[]},dataset(t,e,n,i){const s=qn(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?ic(t,s,r,i,o):sc(t,s,r,!1,i,o);if(a.length>0){const c=a[0].datasetIndex,l=t.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(t,e,n,i){const s=qn(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return ic(t,s,r,i,o)},nearest(t,e,n,i){const s=qn(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return sc(t,s,r,n.intersect,i,o)},x(t,e,n,i){const s=qn(e,t);return xf(t,s,"x",n.intersect,i)},y(t,e,n,i){const s=qn(e,t);return xf(t,s,"y",n.intersect,i)}}};const Oy=["left","top","right","bottom"];function ws(t,e){return t.filter(n=>n.pos===e)}function kf(t,e){return t.filter(n=>Oy.indexOf(n.pos)===-1&&n.box.axis===e)}function Is(t,e){return t.sort((n,i)=>{const s=e?i:n,r=e?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function YO(t){const e=[];let n,i,s,r,o,a;for(n=0,i=(t||[]).length;n<i;++n)s=t[n],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function XO(t){const e={};for(const n of t){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!Oy.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function QO(t,e){const n=XO(t),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:c}=a.box,l=n[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*i:c&&e.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:c&&e.availableHeight)}return n}function JO(t){const e=YO(t),n=Is(e.filter(l=>l.box.fullSize),!0),i=Is(ws(e,"left"),!0),s=Is(ws(e,"right")),r=Is(ws(e,"top"),!0),o=Is(ws(e,"bottom")),a=kf(e,"x"),c=kf(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(c).concat(o).concat(a),chartArea:ws(e,"chartArea"),vertical:i.concat(s).concat(c),horizontal:r.concat(o).concat(a)}}function Af(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Py(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function ZO(t,e,n,i){const{pos:s,box:r}=n,o=t.maxPadding;if(!me(s)){n.size&&(t[s]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?r.height:r.width),n.size=h.size/h.count,t[s]+=n.size}r.getPadding&&Py(o,r.getPadding());const a=Math.max(0,e.outerWidth-Af(o,t,"left","right")),c=Math.max(0,e.outerHeight-Af(o,t,"top","bottom")),l=a!==t.w,u=c!==t.h;return t.w=a,t.h=c,n.horizontal?{same:l,other:u}:{same:u,other:l}}function eP(t){const e=t.maxPadding;function n(i){const s=Math.max(e[i]-t[i],0);return t[i]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function tP(t,e){const n=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],n[o])}),r}return i(t?["left","right"]:["top","bottom"])}function ks(t,e,n,i){const s=[];let r,o,a,c,l,u;for(r=0,o=t.length,l=0;r<o;++r){a=t[r],c=a.box,c.update(a.width||e.w,a.height||e.h,tP(a.horizontal,e));const{same:h,other:d}=ZO(e,n,a,i);l|=h&&s.length,u=u||d,c.fullSize||s.push(a)}return l&&ks(s,e,n,i)||u}function Fr(t,e,n,i,s){t.top=n,t.left=e,t.right=e+i,t.bottom=n+s,t.width=i,t.height=s}function Rf(t,e,n,i){const s=n.padding;let{x:r,y:o}=e;for(const a of t){const c=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){const h=e.w*u,d=l.size||c.height;Do(l.start)&&(o=l.start),c.fullSize?Fr(c,s.left,o,n.outerWidth-s.right-s.left,d):Fr(c,e.left+l.placed,o,h,d),l.start=o,l.placed+=h,o=c.bottom}else{const h=e.h*u,d=l.size||c.width;Do(l.start)&&(r=l.start),c.fullSize?Fr(c,r,s.top,d,n.outerHeight-s.bottom-s.top):Fr(c,r,e.top+l.placed,d,h),l.start=r,l.placed+=h,r=c.right}}e.x=r,e.y=o}var $r={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const s=vt(t.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=JO(t.boxes),c=a.vertical,l=a.horizontal;ve(t.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const u=c.reduce((_,y)=>y.box.options&&y.box.options.display===!1?_:_+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},s);Py(d,vt(i));const f=Object.assign({maxPadding:d,w:r,h:o,x:s.left,y:s.top},s),p=QO(c.concat(l),h);ks(a.fullSize,f,h,p),ks(c,f,h,p),ks(l,f,h,p)&&ks(c,f,h,p),eP(f),Rf(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,Rf(a.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},ve(a.chartArea,_=>{const y=_.box;Object.assign(y,t.chartArea),y.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class My{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,s){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(e){return!0}updateConfig(e){}}class nP extends My{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const no="$chartjs",iP={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Of=t=>t===null||t==="";function sP(t,e){const n=t.style,i=t.getAttribute("height"),s=t.getAttribute("width");if(t[no]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Of(s)){const r=mf(t,"width");r!==void 0&&(t.width=r)}if(Of(i))if(t.style.height==="")t.height=t.width/(e||2);else{const r=mf(t,"height");r!==void 0&&(t.height=r)}return t}const Dy=pO?{passive:!0}:!1;function rP(t,e,n){t.addEventListener(e,n,Dy)}function oP(t,e,n){t.canvas.removeEventListener(e,n,Dy)}function aP(t,e){const n=iP[t.type]||t.type,{x:i,y:s}=qn(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Bo(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function cP(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Bo(a.addedNodes,i),o=o&&!Bo(a.removedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function lP(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Bo(a.removedNodes,i),o=o&&!Bo(a.addedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const cr=new Map;let Pf=0;function Ny(){const t=window.devicePixelRatio;t!==Pf&&(Pf=t,cr.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function uP(t,e){cr.size||window.addEventListener("resize",Ny),cr.set(t,e)}function hP(t){cr.delete(t),cr.size||window.removeEventListener("resize",Ny)}function dP(t,e,n){const i=t.canvas,s=i&&Pu(i);if(!s)return;const r=yy((a,c)=>{const l=s.clientWidth;n(a,c),l<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||r(l,u)});return o.observe(s),uP(t,r),o}function rc(t,e,n){n&&n.disconnect(),e==="resize"&&hP(t)}function fP(t,e,n){const i=t.canvas,s=yy(r=>{t.ctx!==null&&n(aP(r,t))},t);return rP(i,e,s),s}class pP extends My{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(sP(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[no])return!1;const i=n[no].initial;["height","width"].forEach(r=>{const o=i[r];ke(o)?n.removeAttribute(r):n.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[no],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:cP,detach:lP,resize:dP}[n]||fP;s[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),s=i[n];if(!s)return;({attach:rc,detach:rc,resize:rc}[n]||oP)(e,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,s){return fO(e,n,i,s)}isAttached(e){const n=Pu(e);return!!(n&&n.isConnected)}}function gP(t){return!Ou()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?nP:pP}var qr;let vr=(qr=class{constructor(){Z(this,"x");Z(this,"y");Z(this,"active",!1);Z(this,"options");Z(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return ar(this.x)&&ar(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}},Z(qr,"defaults",{}),Z(qr,"defaultRoutes"),qr);function mP(t,e){const n=t.options.ticks,i=_P(t),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?bP(e):[],o=r.length,a=r[0],c=r[o-1],l=[];if(o>s)return vP(e,l,r,o/s),l;const u=yP(r,e,s);if(o>0){let h,d;const f=o>1?Math.round((c-a)/(o-1)):null;for(Br(e,l,u,ke(f)?0:a-f,a),h=0,d=o-1;h<d;h++)Br(e,l,u,r[h],r[h+1]);return Br(e,l,u,c,ke(f)?e.length:c+f),l}return Br(e,l,u),l}function _P(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(i,s))}function yP(t,e,n){const i=wP(t),s=e.length/n;if(!i)return Math.max(s,1);const r=uR(i);for(let o=0,a=r.length-1;o<a;o++){const c=r[o];if(c>s)return c}return Math.max(s,1)}function bP(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function vP(t,e,n,i){let s=0,r=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===r&&(e.push(t[o]),s++,r=n[s*i])}function Br(t,e,n,i,s){const r=Se(i,0),o=Math.min(Se(s,t.length),t.length);let a=0,c,l,u;for(n=Math.ceil(n),s&&(c=s-i,n=c/Math.floor(c/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(l=Math.max(r,0);l<o;l++)l===u&&(e.push(t[l]),a++,u=Math.round(r+a*n))}function wP(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const IP=t=>t==="left"?"right":t==="right"?"left":t,Mf=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Df=(t,e)=>Math.min(e||t,t);function Nf(t,e){const n=[],i=t.length/e,s=t.length;let r=0;for(;r<s;r+=i)n.push(t[Math.floor(r)]);return n}function SP(t,e,n){const i=t.ticks.length,s=Math.min(e,i-1),r=t._startPixel,o=t._endPixel,a=1e-6;let c=t.getPixelForTick(s),l;if(!(n&&(i===1?l=Math.max(c-r,o-c):e===0?l=(t.getPixelForTick(1)-c)/2:l=(c-t.getPixelForTick(s-1))/2,c+=s<e?l:-l,c<r-a||c>o+a)))return c}function EP(t,e){ve(t,n=>{const i=n.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function Ss(t){return t.drawTicks?t.tickLength:0}function Lf(t,e){if(!t.display)return 0;const n=dt(t.font,e),i=vt(t.padding);return(Ne(t.text)?t.text.length:1)*n.lineHeight+i.height}function CP(t,e){return $n(t,{scale:e,type:"scale"})}function TP(t,e,n){return $n(t,{tick:n,index:e,type:"tick"})}function xP(t,e,n){let i=wR(t);return(n&&e!=="right"||!n&&e==="right")&&(i=IP(i)),i}function kP(t,e,n,i){const{top:s,left:r,bottom:o,right:a,chart:c}=t,{chartArea:l,scales:u}=c;let h=0,d,f,p;const _=o-s,y=a-r;if(t.isHorizontal()){if(f=af(i,r,a),me(n)){const v=Object.keys(n)[0],w=n[v];p=u[v].getPixelForValue(w)+_-e}else n==="center"?p=(l.bottom+l.top)/2+_-e:p=Mf(t,n,e);d=a-r}else{if(me(n)){const v=Object.keys(n)[0],w=n[v];f=u[v].getPixelForValue(w)-y+e}else n==="center"?f=(l.left+l.right)/2-y+e:f=Mf(t,n,e);p=af(i,o,s),h=n==="left"?-ht:ht}return{titleX:f,titleY:p,maxWidth:d,rotation:h}}class Ii extends vr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return e=ut(e,Number.POSITIVE_INFINITY),n=ut(n,Number.NEGATIVE_INFINITY),i=ut(i,Number.POSITIVE_INFINITY),s=ut(s,Number.NEGATIVE_INFINITY),{min:ut(e,i),max:ut(n,s),minDefined:He(e),maxDefined:He(n)}}getMinMax(e){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),r||(i=Math.max(i,o.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:ut(n,ut(i,n)),max:ut(i,ut(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){De(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=VR(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=a<this.ticks.length;this._convertTicksToLabels(c?Nf(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=mP(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){De(this.options.afterUpdate,[this])}beforeSetDimensions(){De(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){De(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),De(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){De(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=De(n.callback,[r.value,i,e],this)}afterTickToLabelConversion(){De(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){De(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=Df(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,r=n.maxRotation;let o=s,a,c,l;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=mt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),h+6>a&&(a=f/(i-(e.offset?.5:1)),c=this.maxHeight-Ss(e.grid)-n.padding-Lf(e.title,this.chart.options.font),l=Math.sqrt(h*h+d*d),o=Eu(Math.min(Math.asin(mt((u.highest.height+6)/a,-1,1)),Math.asin(mt(c/l,-1,1))-Math.asin(mt(d/l,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){De(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){De(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const c=Lf(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ss(r)+c):(e.height=this.maxHeight,e.width=Ss(r)+c),i.display&&this.ticks.length){const{first:l,last:u,widest:h,highest:d}=this._getLabelSizes(),f=i.padding*2,p=xn(this.labelRotation),_=Math.cos(p),y=Math.sin(p);if(a){const v=i.mirror?0:y*h.width+_*d.height;e.height=Math.min(this.maxHeight,e.height+v+f)}else{const v=i.mirror?0:_*h.width+y*d.height;e.width=Math.min(this.maxWidth,e.width+v+f)}this._calculatePadding(l,u,y,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;c?l?(d=s*e.width,f=i*n.height):(d=i*e.height,f=s*n.width):r==="start"?f=n.width:r==="end"?d=e.width:r!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;r==="start"?(u=0,h=e.height):r==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){De(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)ke(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Nf(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],c=Math.floor(n/Df(n,i));let l=0,u=0,h,d,f,p,_,y,v,w,R,E,x;for(h=0;h<n;h+=c){if(p=e[h].label,_=this._resolveTickFontOptions(h),s.font=y=_.string,v=r[y]=r[y]||{data:{},gc:[]},w=_.lineHeight,R=E=0,!ke(p)&&!Ne(p))R=Lo(s,v.data,v.gc,R,p),E=w;else if(Ne(p))for(d=0,f=p.length;d<f;++d)x=p[d],!ke(x)&&!Ne(x)&&(R=Lo(s,v.data,v.gc,R,x),E+=w);o.push(R),a.push(E),l=Math.max(R,l),u=Math.max(E,u)}EP(r,n);const H=o.indexOf(l),W=a.indexOf(u),j=J=>({width:o[J]||0,height:a[J]||0});return{first:j(0),last:j(n-1),widest:j(H),highest:j(W),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return pR(this._alignToPixels?Wn(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=TP(this.getContext(),e,i))}return this.$context||(this.$context=CP(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=xn(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,c=r?r.highest.height+o:0;return this.isHorizontal()?c*i>a*s?a/i:c/s:c*s<a*i?c/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,c=r.offset,l=this.isHorizontal(),h=this.ticks.length+(c?1:0),d=Ss(r),f=[],p=a.setContext(this.getContext()),_=p.display?p.width:0,y=_/2,v=function(C){return Wn(i,C,_)};let w,R,E,x,H,W,j,J,Y,V,de,Re;if(o==="top")w=v(this.bottom),W=this.bottom-d,J=w-y,V=v(e.top)+y,Re=e.bottom;else if(o==="bottom")w=v(this.top),V=e.top,Re=v(e.bottom)-y,W=w+y,J=this.top+d;else if(o==="left")w=v(this.right),H=this.right-d,j=w-y,Y=v(e.left)+y,de=e.right;else if(o==="right")w=v(this.left),Y=e.left,de=v(e.right)-y,H=w+y,j=this.left+d;else if(n==="x"){if(o==="center")w=v((e.top+e.bottom)/2+.5);else if(me(o)){const C=Object.keys(o)[0],O=o[C];w=v(this.chart.scales[C].getPixelForValue(O))}V=e.top,Re=e.bottom,W=w+y,J=W+d}else if(n==="y"){if(o==="center")w=v((e.left+e.right)/2);else if(me(o)){const C=Object.keys(o)[0],O=o[C];w=v(this.chart.scales[C].getPixelForValue(O))}H=w-y,j=H-d,Y=e.left,de=e.right}const K=Se(s.ticks.maxTicksLimit,h),M=Math.max(1,Math.ceil(h/K));for(R=0;R<h;R+=M){const C=this.getContext(R),O=r.setContext(C),k=a.setContext(C),G=O.lineWidth,q=O.color,se=k.dash||[],ne=k.dashOffset,fe=O.tickWidth,pe=O.tickColor,Pe=O.tickBorderDash||[],ge=O.tickBorderDashOffset;E=SP(this,R,c),E!==void 0&&(x=Wn(i,E,G),l?H=j=Y=de=x:W=J=V=Re=x,f.push({tx1:H,ty1:W,tx2:j,ty2:J,x1:Y,y1:V,x2:de,y2:Re,width:G,color:q,borderDash:se,borderDashOffset:ne,tickWidth:fe,tickColor:pe,tickBorderDash:Pe,tickBorderDashOffset:ge}))}return this._ticksLength=h,this._borderValue=w,f}_computeLabelItems(e){const n=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:h}=r,d=Ss(i.grid),f=d+u,p=h?-u:f,_=-xn(this.labelRotation),y=[];let v,w,R,E,x,H,W,j,J,Y,V,de,Re="middle";if(s==="top")H=this.bottom-p,W=this._getXAxisLabelAlignment();else if(s==="bottom")H=this.top+p,W=this._getXAxisLabelAlignment();else if(s==="left"){const M=this._getYAxisLabelAlignment(d);W=M.textAlign,x=M.x}else if(s==="right"){const M=this._getYAxisLabelAlignment(d);W=M.textAlign,x=M.x}else if(n==="x"){if(s==="center")H=(e.top+e.bottom)/2+f;else if(me(s)){const M=Object.keys(s)[0],C=s[M];H=this.chart.scales[M].getPixelForValue(C)+f}W=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")x=(e.left+e.right)/2-f;else if(me(s)){const M=Object.keys(s)[0],C=s[M];x=this.chart.scales[M].getPixelForValue(C)}W=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(c==="start"?Re="top":c==="end"&&(Re="bottom"));const K=this._getLabelSizes();for(v=0,w=a.length;v<w;++v){R=a[v],E=R.label;const M=r.setContext(this.getContext(v));j=this.getPixelForTick(v)+r.labelOffset,J=this._resolveTickFontOptions(v),Y=J.lineHeight,V=Ne(E)?E.length:1;const C=V/2,O=M.color,k=M.textStrokeColor,G=M.textStrokeWidth;let q=W;o?(x=j,W==="inner"&&(v===w-1?q=this.options.reverse?"left":"right":v===0?q=this.options.reverse?"right":"left":q="center"),s==="top"?l==="near"||_!==0?de=-V*Y+Y/2:l==="center"?de=-K.highest.height/2-C*Y+Y:de=-K.highest.height+Y/2:l==="near"||_!==0?de=Y/2:l==="center"?de=K.highest.height/2-C*Y:de=K.highest.height-V*Y,h&&(de*=-1),_!==0&&!M.showLabelBackdrop&&(x+=Y/2*Math.sin(_))):(H=j,de=(1-V)*Y/2);let se;if(M.showLabelBackdrop){const ne=vt(M.backdropPadding),fe=K.heights[v],pe=K.widths[v];let Pe=de-ne.top,ge=0-ne.left;switch(Re){case"middle":Pe-=fe/2;break;case"bottom":Pe-=fe;break}switch(W){case"center":ge-=pe/2;break;case"right":ge-=pe;break;case"inner":v===w-1?ge-=pe:v>0&&(ge-=pe/2);break}se={left:ge,top:Pe,width:pe+ne.width,height:fe+ne.height,color:M.backdropColor}}y.push({label:E,font:J,textOffset:de,options:{rotation:_,color:O,strokeColor:k,strokeWidth:G,textAlign:q,textBaseline:Re,translation:[x,H],backdrop:se}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-xn(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,c=o.widest.width;let l,u;return n==="left"?s?(u=this.right+r,i==="near"?l="left":i==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,i==="near"?l="right":i==="center"?(l="center",u-=c/2):(l="left",u=this.left)):n==="right"?s?(u=this.left+r,i==="near"?l="right":i==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,i==="near"?l="left":i==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:s,width:r,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(c,l,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(l.x,l.y),i.stroke(),i.restore())};if(n.display)for(r=0,o=s.length;r<o;++r){const c=s[r];n.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let l,u,h,d;this.isHorizontal()?(l=Wn(e,this.left,o)-o/2,u=Wn(e,this.right,a)+a/2,h=d=c):(h=Wn(e,this.top,o)-o/2,d=Wn(e,this.bottom,a)+a/2,l=u=c),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(l,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&vy(i,s);const r=this.getLabelItems(e);for(const o of r){const a=o.options,c=o.font,l=o.label,u=o.textOffset;Fo(i,l,0,u,c,a)}s&&wy(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=dt(i.font),o=vt(i.padding),a=i.align;let c=r.lineHeight/2;n==="bottom"||n==="center"||me(n)?(c+=o.bottom,Ne(i.text)&&(c+=r.lineHeight*(i.text.length-1))):c+=o.top;const{titleX:l,titleY:u,maxWidth:h,rotation:d}=kP(this,c,n,a);Fo(e,i.text,0,0,r,{color:i.color,maxWidth:h,rotation:d,textAlign:xP(a,n,s),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=Se(e.grid&&e.grid.z,-1),s=Se(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ii.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return dt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ur{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;OP(n)&&(i=this.register(n));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,AP(e,o,i),this.override&&Le.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,s=this.scope;i in n&&delete n[i],s&&i in Le[s]&&(delete Le[s][i],this.override&&delete mi[i])}}function AP(t,e,n){const i=or(Object.create(null),[n?Le.get(n):{},Le.get(e),t.defaults]);Le.set(e,i),t.defaultRoutes&&RP(e,t.defaultRoutes),t.descriptors&&Le.describe(e,t.descriptors)}function RP(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),s=i.pop(),r=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),c=o.join(".");Le.route(r,s,c,a)})}function OP(t){return"id"in t&&"defaults"in t}class PP{constructor(){this.controllers=new Ur(zs,"datasets",!0),this.elements=new Ur(vr,"elements"),this.plugins=new Ur(Object,"plugins"),this.scales=new Ur(Ii,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):ve(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const s=Su(e);De(i["before"+s],[],i),n[e](i),De(i["after"+s],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var Bt=new PP;class MP{constructor(){this._init=[]}notify(e,n,i,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,n,i);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],c=[n,s,r.options];if(De(a,c,o)===!1&&s.cancelable)return!1}return!0}invalidate(){ke(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,s=Se(i.options&&i.options.plugins,{}),r=DP(i);return s===!1&&!n?[]:LP(e,r,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(s(n,i),e,"stop"),this._notify(s(i,n),e,"start")}}function DP(t){const e={},n=[],i=Object.keys(Bt.plugins.items);for(let r=0;r<i.length;r++)n.push(Bt.getPlugin(i[r]));const s=t.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function NP(t,e){return!e&&t===!1?null:t===!0?{}:t}function LP(t,{plugins:e,localIds:n},i,s){const r=[],o=t.getContext();for(const a of e){const c=a.id,l=NP(i[c],s);l!==null&&r.push({plugin:a,options:FP(t.config,{plugin:a,local:n[c]},l,o)})}return r}function FP(t,{plugin:e,local:n},i,s){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(i,r);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function el(t,e){const n=Le.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function $P(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function BP(t,e){return t===e?"_index_":"_value_"}function Ff(t){if(t==="x"||t==="y"||t==="r")return t}function UP(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function tl(t,...e){if(Ff(t))return t;for(const n of e){const i=n.axis||UP(n.position)||t.length>1&&Ff(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function $f(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function HP(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return $f(t,"x",n[0])||$f(t,"y",n[0])}return{}}function WP(t,e){const n=mi[t.type]||{scales:{}},i=e.scales||{},s=el(t.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!me(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=tl(o,a,HP(o,t),Le.scales[a.type]),l=BP(c,s),u=n.scales||{};r[o]=Bs(Object.create(null),[{axis:c},a,u[c],u[l]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,c=o.indexAxis||el(a,e),u=(mi[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=$P(h,c),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),Bs(r[f],[{axis:d},i[f],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];Bs(a,[Le.scales[a.type],Le.scale])}),r}function Ly(t){const e=t.options||(t.options={});e.plugins=Se(e.plugins,{}),e.scales=WP(t,e)}function Fy(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function jP(t){return t=t||{},t.data=Fy(t.data),Ly(t),t}const Bf=new Map,$y=new Set;function Hr(t,e){let n=Bf.get(t);return n||(n=e(),Bf.set(t,n),$y.add(n)),n}const Es=(t,e,n)=>{const i=Mo(e,n);i!==void 0&&t.add(i)};class zP{constructor(e){this._config=jP(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Fy(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Ly(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Hr(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Hr(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Hr(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Hr(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let s=i.get(e);return(!s||n)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,n,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const c=new Set;n.forEach(u=>{e&&(c.add(e),u.forEach(h=>Es(c,e,h))),u.forEach(h=>Es(c,s,h)),u.forEach(h=>Es(c,mi[r]||{},h)),u.forEach(h=>Es(c,Le,h)),u.forEach(h=>Es(c,Qc,h))});const l=Array.from(c);return l.length===0&&l.push(Object.create(null)),$y.has(n)&&o.set(n,l),l}chartOptionScopes(){const{options:e,type:n}=this;return[e,mi[n]||{},Le.datasets[n]||{},{type:n},Le,Qc]}resolveNamedOptions(e,n,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Uf(this._resolverCache,e,s);let c=o;if(KP(o,n)){r.$shared=!1,i=Fn(i)?i():i;const l=this.createResolver(e,i,a);c=Zi(o,i,l)}for(const l of n)r[l]=c[l];return r}createResolver(e,n,i=[""],s){const{resolver:r}=Uf(this._resolverCache,e,i);return me(n)?Zi(r,n,void 0,s):r}}function Uf(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const s=n.join();let r=i.get(s);return r||(r={resolver:ku(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const VP=t=>me(t)&&Object.getOwnPropertyNames(t).some(e=>Fn(t[e]));function KP(t,e){const{isScriptable:n,isIndexable:i}=Sy(t);for(const s of e){const r=n(s),o=i(s),a=(o||r)&&t[s];if(r&&(Fn(a)||VP(a))||o&&Ne(a))return!0}return!1}var qP="4.4.1";const GP=["top","bottom","left","right","chartArea"];function Hf(t,e){return t==="top"||t==="bottom"||GP.indexOf(t)===-1&&e==="x"}function Wf(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function jf(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),De(n&&n.onComplete,[t],e)}function YP(t){const e=t.chart,n=e.options.animation;De(n&&n.onProgress,[t],e)}function By(t){return Ou()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const io={},zf=t=>{const e=By(t);return Object.values(io).filter(n=>n.canvas===e).pop()};function XP(t,e,n){const i=Object.keys(t);for(const s of i){const r=+s;if(r>=e){const o=t[s];delete t[s],(n>0||r>e)&&(t[r+n]=o)}}}function QP(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function Wr(t,e,n){return t.options.clip?t[n]:e[n]}function JP(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Wr(n,e,"left"),right:Wr(n,e,"right"),top:Wr(i,e,"top"),bottom:Wr(i,e,"bottom")}:e}class Yn{static register(...e){Bt.add(...e),Vf()}static unregister(...e){Bt.remove(...e),Vf()}constructor(e,n){const i=this.config=new zP(n),s=By(e),r=zf(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||gP(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),c=a&&a.canvas,l=c&&c.height,u=c&&c.width;if(this.id=tR(),this.ctx=a,this.canvas=c,this.width=u,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new MP,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=vR(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],io[this.id]=this,!a||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Zt.listen(this,"complete",jf),Zt.listen(this,"progress",YP),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return ke(e)?n&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Bt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():gf(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return df(this.canvas,this.ctx),this}stop(){return Zt.stop(this),this}resize(e,n){Zt.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,gf(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),De(i.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ve(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],c=tl(o,a),l=c==="r",u=c==="x";return{options:a,dposition:l?"chartArea":u?"bottom":"left",dtype:l?"radialLinear":u?"category":"linear"}}))),ve(r,o=>{const a=o.options,c=a.id,l=tl(c,a),u=Se(a.type,o.dtype);(a.position===void 0||Hf(a.position,l)!==Hf(o.dposition))&&(a.position=o.dposition),s[c]=!0;let h=null;if(c in i&&i[c].type===u)h=i[c];else{const d=Bt.getScale(u);h=new d({id:c,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),ve(s,(o,a)=>{o||delete i[a]}),ve(i,o=>{$r.configure(this,o,o.options),$r.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(Wf("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||el(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const c=Bt.getController(a),{datasetElementType:l,dataElementType:u}=Le.datasets[a];Object.assign(c,{dataElementType:Bt.getElement(u),datasetElementType:l&&Bt.getElement(l)}),o.controller=new c(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ve(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let l=0,u=this.data.datasets.length;l<u;l++){const{controller:h}=this.getDatasetMeta(l),d=!s&&r.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||ve(r,l=>{l.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Wf("z","_idx"));const{_active:a,_lastEvent:c}=this;c?this._eventHandler(c,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ve(this.scales,e=>{$r.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!tf(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const o=i==="_removeElements"?-r:r;XP(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!tf(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;$r.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],ve(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Fn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Zt.has(this)?this.attached&&!Zt.running(this)&&Zt.start(this):(this.draw(),jf({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const o=n[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,s=!i.disabled,r=JP(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&vy(n,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),e.controller.draw(),s&&wy(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return cn(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,s){const r=GO.modes[n];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=$n(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);Do(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Zt.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),df(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete io[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(r,o)=>{n.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};ve(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(c,l)=>{n.addEventListener(this,c,l),e[c]=l},s=(c,l)=>{e[c]&&(n.removeEventListener(this,c,l),delete e[c])},r=(c,l)=>{this.canvas&&this.resize(c,l)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ve(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ve(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const s=i?"set":"remove";let r,o,a,c;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,c=e.length;a<c;++a){o=e[a];const l=o&&this.getDatasetMeta(o.datasetIndex).controller;l&&l[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Oo(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const s=this.options.hover,r=(c,l)=>c.filter(u=>!l.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(n,e),a=i?e:r(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:s=[],options:r}=this,o=n,a=this._getActiveElements(e,s,i,o),c=aR(e),l=QP(e,this._lastEvent,i,c);i&&(this._lastEvent=null,De(r.onHover,[e,a,this],this),c&&De(r.onClick,[e,a,this],this));const u=!Oo(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=l,u}_getActiveElements(e,n,i,s){if(e.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}}Z(Yn,"defaults",Le),Z(Yn,"instances",io),Z(Yn,"overrides",mi),Z(Yn,"registry",Bt),Z(Yn,"version",qP),Z(Yn,"getChart",zf);function Vf(){return ve(Yn.instances,t=>t._plugins.invalidate())}function Uy(t,e,n=e){t.lineCap=Se(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Se(n.borderDash,e.borderDash)),t.lineDashOffset=Se(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Se(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Se(n.borderWidth,e.borderWidth),t.strokeStyle=Se(n.borderColor,e.borderColor)}function ZP(t,e,n){t.lineTo(n.x,n.y)}function eM(t){return t.stepped?NR:t.tension||t.cubicInterpolationMode==="monotone"?LR:ZP}function Hy(t,e,n={}){const i=t.length,{start:s=0,end:r=i-1}=n,{start:o,end:a}=e,c=Math.max(s,o),l=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:c,loop:e.loop,ilen:l<c&&!u?i+l-c:l-c}}function tM(t,e,n,i){const{points:s,options:r}=e,{count:o,start:a,loop:c,ilen:l}=Hy(s,n,i),u=eM(r);let{move:h=!0,reverse:d}=i||{},f,p,_;for(f=0;f<=l;++f)p=s[(a+(d?l-f:f))%o],!p.skip&&(h?(t.moveTo(p.x,p.y),h=!1):u(t,_,p,d,r.stepped),_=p);return c&&(p=s[(a+(d?l:0))%o],u(t,_,p,d,r.stepped)),!!c}function nM(t,e,n,i){const s=e.points,{count:r,start:o,ilen:a}=Hy(s,n,i),{move:c=!0,reverse:l}=i||{};let u=0,h=0,d,f,p,_,y,v;const w=E=>(o+(l?a-E:E))%r,R=()=>{_!==y&&(t.lineTo(u,y),t.lineTo(u,_),t.lineTo(u,v))};for(c&&(f=s[w(0)],t.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=s[w(d)],f.skip)continue;const E=f.x,x=f.y,H=E|0;H===p?(x<_?_=x:x>y&&(y=x),u=(h*u+E)/++h):(R(),t.lineTo(E,x),p=H,h=0,_=y=x),v=x}R()}function nl(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?nM:tM}function iM(t){return t.stepped?gO:t.tension||t.cubicInterpolationMode==="monotone"?mO:Gn}function sM(t,e,n,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,i)&&s.closePath()),Uy(t,e.options),t.stroke(s)}function rM(t,e,n,i){const{segments:s,options:r}=e,o=nl(e);for(const a of s)Uy(t,r,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const oM=typeof Path2D=="function";function aM(t,e,n,i){oM&&!e.options.segment?sM(t,e,n,i):rM(t,e,n,i)}class jr extends vr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;aO(this._points,i,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=TO(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,s=e[n],r=this.points,o=SO(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],c=iM(i);let l,u;for(l=0,u=o.length;l<u;++l){const{start:h,end:d}=o[l],f=r[h],p=r[d];if(f===p){a.push(f);continue}const _=Math.abs((s-f[n])/(p[n]-f[n])),y=c(f,p,_,i.stepped);y[n]=e[n],a.push(y)}return a.length===1?a[0]:a}pathSegment(e,n,i){return nl(this)(e,this,n,i)}path(e,n,i){const s=this.segments,r=nl(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of s)o&=r(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),aM(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Z(jr,"id","line"),Z(jr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Z(jr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Z(jr,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Kf(t,e,n,i){const s=t.options,{[n]:r}=t.getProps([n],i);return Math.abs(e-r)<s.radius+s.hitRadius}class oc extends vr{constructor(n){super();Z(this,"parsed");Z(this,"skip");Z(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,i){return Kf(this,n,"x",i)}inYRange(n,i){return Kf(this,n,"y",i)}getCenterPoint(n){const{x:i,y:s}=this.getProps(["x","y"],n);return{x:i,y:s}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const s=i&&n.borderWidth||0;return(i+s)*2}draw(n,i){const s=this.options;this.skip||s.radius<.1||!cn(this,i,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Jc(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Z(oc,"id","point"),Z(oc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Z(oc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const As={average(t){if(!t.length)return!1;let e,n,i=0,s=0,r=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();i+=a.x,s+=a.y,++r}}return{x:i/r,y:s/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=t.length;r<o;++r){const c=t[r].element;if(c&&c.hasValue()){const l=c.getCenterPoint(),u=Xc(e,l);u<s&&(s=u,a=c)}}if(a){const c=a.tooltipPosition();n=c.x,i=c.y}return{x:n,y:i}}};function $t(t,e){return e&&(Ne(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function en(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function cM(t,e){const{element:n,datasetIndex:i,index:s}=e,r=t.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:t,label:o,parsed:r.getParsed(s),raw:t.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function qf(t,e){const n=t.chart.ctx,{body:i,footer:s,title:r}=t,{boxWidth:o,boxHeight:a}=e,c=dt(e.bodyFont),l=dt(e.titleFont),u=dt(e.footerFont),h=r.length,d=s.length,f=i.length,p=vt(e.padding);let _=p.height,y=0,v=i.reduce((E,x)=>E+x.before.length+x.lines.length+x.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,h&&(_+=h*l.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v){const E=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;_+=f*E+(v-f)*c.lineHeight+(v-1)*e.bodySpacing}d&&(_+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let w=0;const R=function(E){y=Math.max(y,n.measureText(E).width+w)};return n.save(),n.font=l.string,ve(t.title,R),n.font=c.string,ve(t.beforeBody.concat(t.afterBody),R),w=e.displayColors?o+2+e.boxPadding:0,ve(i,E=>{ve(E.before,R),ve(E.lines,R),ve(E.after,R)}),w=0,n.font=u.string,ve(t.footer,R),n.restore(),y+=p.width,{width:y,height:_}}function lM(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function uM(t,e,n,i){const{x:s,width:r}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&s+r+o>e.width||t==="right"&&s-r-o<0)return!0}function hM(t,e,n,i){const{x:s,width:r}=n,{width:o,chartArea:{left:a,right:c}}=t;let l="center";return i==="center"?l=s<=(a+c)/2?"left":"right":s<=r/2?l="left":s>=o-r/2&&(l="right"),uM(l,t,e,n)&&(l="center"),l}function Gf(t,e,n){const i=n.yAlign||e.yAlign||lM(t,n);return{xAlign:n.xAlign||e.xAlign||hM(t,e,n,i),yAlign:i}}function dM(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function fM(t,e,n){let{y:i,height:s}=t;return e==="top"?i+=n:e==="bottom"?i-=s+n:i-=s/2,i}function Yf(t,e,n,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:c}=n,l=s+r,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=js(o);let p=dM(e,a);const _=fM(e,c,l);return c==="center"?a==="left"?p+=l:a==="right"&&(p-=l):a==="left"?p-=Math.max(u,d)+s:a==="right"&&(p+=Math.max(h,f)+s),{x:mt(p,0,i.width-e.width),y:mt(_,0,i.height-e.height)}}function zr(t,e,n){const i=vt(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function Xf(t){return $t([],en(t))}function pM(t,e,n){return $n(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Qf(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Wy={beforeTitle:Jt,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Jt,beforeBody:Jt,beforeLabel:Jt,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return ke(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Jt,afterBody:Jt,beforeFooter:Jt,footer:Jt,afterFooter:Jt};function Ze(t,e,n,i){const s=t[e].call(n,i);return typeof s>"u"?Wy[e].call(n,i):s}class il extends vr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new Ay(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=pM(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,s=Ze(i,"beforeTitle",this,e),r=Ze(i,"title",this,e),o=Ze(i,"afterTitle",this,e);let a=[];return a=$t(a,en(s)),a=$t(a,en(r)),a=$t(a,en(o)),a}getBeforeBody(e,n){return Xf(Ze(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,s=[];return ve(e,r=>{const o={before:[],lines:[],after:[]},a=Qf(i,r);$t(o.before,en(Ze(a,"beforeLabel",this,r))),$t(o.lines,Ze(a,"label",this,r)),$t(o.after,en(Ze(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,n){return Xf(Ze(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,s=Ze(i,"beforeFooter",this,e),r=Ze(i,"footer",this,e),o=Ze(i,"afterFooter",this,e);let a=[];return a=$t(a,en(s)),a=$t(a,en(r)),a=$t(a,en(o)),a}_createItems(e){const n=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],c,l;for(c=0,l=n.length;c<l;++c)a.push(cM(this.chart,n[c]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),ve(a,u=>{const h=Qf(e.callbacks,u);s.push(Ze(h,"labelColor",this,u)),r.push(Ze(h,"labelPointStyle",this,u)),o.push(Ze(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=As[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const c=this._size=qf(this,i),l=Object.assign({},a,c),u=Gf(this.chart,i,l),h=Yf(i,l,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,s){const r=this.getCaretPosition(e,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:c,topRight:l,bottomLeft:u,bottomRight:h}=js(a),{x:d,y:f}=e,{width:p,height:_}=n;let y,v,w,R,E,x;return r==="center"?(E=f+_/2,s==="left"?(y=d,v=y-o,R=E+o,x=E-o):(y=d+p,v=y+o,R=E-o,x=E+o),w=y):(s==="left"?v=d+Math.max(c,u)+o:s==="right"?v=d+p-Math.max(l,h)-o:v=this.caretX,r==="top"?(R=f,E=R-o,y=v-o,w=v+o):(R=f+_,E=R+o,y=v+o,w=v-o),x=R),{x1:y,x2:v,x3:w,y1:R,y2:E,y3:x}}drawTitle(e,n,i){const s=this.title,r=s.length;let o,a,c;if(r){const l=Za(i.rtl,this.x,this.width);for(e.x=zr(this,i.titleAlign,i),n.textAlign=l.textAlign(i.titleAlign),n.textBaseline="middle",o=dt(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,c=0;c<r;++c)n.fillText(s[c],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,c+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:c,boxWidth:l}=r,u=dt(r.bodyFont),h=zr(this,"left",r),d=s.x(h),f=c<u.lineHeight?(u.lineHeight-c)/2:0,p=n.y+f;if(r.usePointStyle){const _={radius:Math.min(l,c)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=s.leftForLtr(d,l)+l/2,v=p+c/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Jc(e,_,y,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Jc(e,_,y,v)}else{e.lineWidth=me(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const _=s.leftForLtr(d,l),y=s.leftForLtr(s.xPlus(d,1),l-2),v=js(o.borderRadius);Object.values(v).some(w=>w!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Zc(e,{x:_,y:p,w:l,h:c,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Zc(e,{x:y,y:p+1,w:l-2,h:c-2,radius:v}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(_,p,l,c),e.strokeRect(_,p,l,c),e.fillStyle=o.backgroundColor,e.fillRect(y,p+1,l-2,c-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:c,boxWidth:l,boxPadding:u}=i,h=dt(i.bodyFont);let d=h.lineHeight,f=0;const p=Za(i.rtl,this.x,this.width),_=function(j){n.fillText(j,p.x(e.x+f),e.y+d/2),e.y+=d+r},y=p.textAlign(o);let v,w,R,E,x,H,W;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=zr(this,y,i),n.fillStyle=i.bodyColor,ve(this.beforeBody,_),f=a&&y!=="right"?o==="center"?l/2+u:l+2+u:0,E=0,H=s.length;E<H;++E){for(v=s[E],w=this.labelTextColors[E],n.fillStyle=w,ve(v.before,_),R=v.lines,a&&R.length&&(this._drawColorBox(n,e,E,p,i),d=Math.max(h.lineHeight,c)),x=0,W=R.length;x<W;++x)_(R[x]),d=h.lineHeight;ve(v.after,_)}f=0,d=h.lineHeight,ve(this.afterBody,_),e.y-=r}drawFooter(e,n,i){const s=this.footer,r=s.length;let o,a;if(r){const c=Za(i.rtl,this.x,this.width);for(e.x=zr(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=c.textAlign(i.footerAlign),n.textBaseline="middle",o=dt(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(s[a],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:c}=e,{width:l,height:u}=i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=js(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+h,c),o==="top"&&this.drawCaret(e,n,i,s),n.lineTo(a+l-d,c),n.quadraticCurveTo(a+l,c,a+l,c+d),o==="center"&&r==="right"&&this.drawCaret(e,n,i,s),n.lineTo(a+l,c+u-p),n.quadraticCurveTo(a+l,c+u,a+l-p,c+u),o==="bottom"&&this.drawCaret(e,n,i,s),n.lineTo(a+f,c+u),n.quadraticCurveTo(a,c+u,a,c+u-f),o==="center"&&r==="left"&&this.drawCaret(e,n,i,s),n.lineTo(a,c+h),n.quadraticCurveTo(a,c,a+h,c),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=As[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=qf(this,e),c=Object.assign({},o,this._size),l=Gf(n,e,c),u=Yf(e,c,l,n);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=vt(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,n),bO(e,n.textDirection),r.y+=o.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),vO(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,s=e.map(({datasetIndex:a,index:c})=>{const l=this.chart.getDatasetMeta(a);if(!l)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:l.data[c],index:c}}),r=!Oo(i,s),o=this._positionChanged(s,n);(r||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,n,i),a=this._positionChanged(o,e),c=n||!Oo(o,r)||a;return c&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),c}_getActiveElements(e,n,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:s,options:r}=this,o=As[r.position].call(this,e,n);return o!==!1&&(i!==o.x||s!==o.y)}}Z(il,"positioners",As);var nD={id:"tooltip",_element:il,positioners:As,afterInit(t,e,n){n&&(t.tooltip=new il({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Wy},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const gM=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function mM(t,e,n,i){const s=t.indexOf(e);if(s===-1)return gM(t,e,n,i);const r=t.lastIndexOf(e);return s!==r?n:s}const _M=(t,e)=>t===null?null:mt(Math.round(t),0,e);function Jf(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Zf extends Ii{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(ke(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:mM(i,e,Se(n,e),this._addedLabels),_M(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return Jf.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Z(Zf,"id","category"),Z(Zf,"defaults",{ticks:{callback:Jf}});function yM(t,e){const n=[],{bounds:s,step:r,min:o,max:a,precision:c,count:l,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=r||1,p=u-1,{min:_,max:y}=e,v=!ke(o),w=!ke(a),R=!ke(l),E=(y-_)/(h+1);let x=sf((y-_)/p/f)*f,H,W,j,J;if(x<1e-14&&!v&&!w)return[{value:_},{value:y}];J=Math.ceil(y/x)-Math.floor(_/x),J>p&&(x=sf(J*x/p/f)*f),ke(c)||(H=Math.pow(10,c),x=Math.ceil(x*H)/H),s==="ticks"?(W=Math.floor(_/x)*x,j=Math.ceil(y/x)*x):(W=_,j=y),v&&w&&r&&hR((a-o)/r,x/1e3)?(J=Math.round(Math.min((a-o)/x,u)),x=(a-o)/J,W=o,j=a):R?(W=v?o:W,j=w?a:j,J=l-1,x=(j-W)/J):(J=(j-W)/x,Us(J,Math.round(J),x/1e3)?J=Math.round(J):J=Math.ceil(J));const Y=Math.max(rf(x),rf(W));H=Math.pow(10,ke(c)?Y:c),W=Math.round(W*H)/H,j=Math.round(j*H)/H;let V=0;for(v&&(d&&W!==o?(n.push({value:o}),W<o&&V++,Us(Math.round((W+V*x)*H)/H,o,ep(o,E,t))&&V++):W<o&&V++);V<J;++V){const de=Math.round((W+V*x)*H)/H;if(w&&de>a)break;n.push({value:de})}return w&&d&&j!==a?n.length&&Us(n[n.length-1].value,a,ep(a,E,t))?n[n.length-1].value=a:n.push({value:a}):(!w||j===a)&&n.push({value:j}),n}function ep(t,e,{horizontal:n,minRotation:i}){const s=xn(i),r=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class Uo extends Ii{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return ke(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=c=>s=n?s:c,a=c=>r=i?r:c;if(e){const c=Ji(s),l=Ji(r);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(s===r){let c=r===0?1:Math.abs(r*.05);a(r+c),e||o(s-c)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=yM(s,r);return e.bounds==="ticks"&&py(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-n)/Math.max(e.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return xu(e,this.chart.options.locale,this.options.ticks.format)}}class tp extends Uo{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=He(e)?e:0,this.max=He(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=xn(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Z(tp,"id","linear"),Z(tp,"defaults",{ticks:{callback:ga.formatters.numeric}});const lr=t=>Math.floor(Tn(t)),zn=(t,e)=>Math.pow(10,lr(t)+e);function np(t){return t/Math.pow(10,lr(t))===1}function ip(t,e,n){const i=Math.pow(10,n),s=Math.floor(t/i);return Math.ceil(e/i)-s}function bM(t,e){const n=e-t;let i=lr(n);for(;ip(t,e,i)>10;)i++;for(;ip(t,e,i)<10;)i--;return Math.min(i,lr(t))}function vM(t,{min:e,max:n}){e=ut(t.min,e);const i=[],s=lr(e);let r=bM(e,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),c=s>r?Math.pow(10,s):0,l=Math.round((e-c)*o)/o,u=Math.floor((e-c)/a/10)*a*10;let h=Math.floor((l-u)/Math.pow(10,r)),d=ut(t.min,Math.round((c+u+h*Math.pow(10,r))*o)/o);for(;d<n;)i.push({value:d,major:np(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,o=r>=0?1:o),d=Math.round((c+u+h*Math.pow(10,r))*o)/o;const f=ut(t.max,d);return i.push({value:f,major:np(f),significand:h}),i}class sp extends Ii{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=Uo.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return He(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=He(e)?Math.max(0,e):null,this.max=He(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!He(this._userMin)&&(this.min=e===zn(this.min,0)?zn(this.min,-1):zn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=e?i:a,o=a=>s=n?s:a;i===s&&(i<=0?(r(1),o(10)):(r(zn(i,-1)),o(zn(s,1)))),i<=0&&r(zn(s,-1)),s<=0&&o(zn(i,1)),this.min=i,this.max=s}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=vM(n,this);return e.bounds==="ticks"&&py(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":xu(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Tn(e),this._valueRange=Tn(this.max)-Tn(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Tn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Z(sp,"id","logarithmic"),Z(sp,"defaults",{ticks:{callback:ga.formatters.logarithmic,major:{enabled:!0}}});function sl(t){const e=t.ticks;if(e.display&&t.display){const n=vt(e.backdropPadding);return Se(e.font&&e.font.size,Le.font.size)+n.height}return 0}function wM(t,e,n){return n=Ne(n)?n:[n],{w:MR(t,e.string,n),h:n.length*e.lineHeight}}function rp(t,e,n,i,s){return t===i||t===s?{start:e-n/2,end:e+n/2}:t<i||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function IM(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],s=[],r=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?We/r:0;for(let c=0;c<r;c++){const l=o.setContext(t.getPointLabelContext(c));s[c]=l.padding;const u=t.getPointPosition(c,t.drawingArea+s[c],a),h=dt(l.font),d=wM(t.ctx,h,t._pointLabels[c]);i[c]=d;const f=St(t.getIndexAngle(c)+a),p=Math.round(Eu(f)),_=rp(p,u.x,d.w,0,180),y=rp(p,u.y,d.h,90,270);SM(n,e,f,_,y)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=TM(t,i,s)}function SM(t,e,n,i,s){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,c=0;i.start<e.l?(a=(e.l-i.start)/r,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(c=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-c)):s.end>e.b&&(c=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function EM(t,e,n){const i=t.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=n,c=t.getPointPosition(e,i+s+o,r),l=Math.round(Eu(St(c.angle+ht))),u=AM(c.y,a.h,l),h=xM(l),d=kM(c.x,a.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function CM(t,e){if(!e)return!0;const{left:n,top:i,right:s,bottom:r}=t;return!(cn({x:n,y:i},e)||cn({x:n,y:r},e)||cn({x:s,y:i},e)||cn({x:s,y:r},e))}function TM(t,e,n){const i=[],s=t._pointLabels.length,r=t.options,{centerPointLabels:o,display:a}=r.pointLabels,c={extra:sl(r)/2,additionalAngle:o?We/s:0};let l;for(let u=0;u<s;u++){c.padding=n[u],c.size=e[u];const h=EM(t,u,c);i.push(h),a==="auto"&&(h.visible=CM(h,l),h.visible&&(l=h))}return i}function xM(t){return t===0||t===180?"center":t<180?"left":"right"}function kM(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function AM(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function RM(t,e,n){const{left:i,top:s,right:r,bottom:o}=n,{backdropColor:a}=e;if(!ke(a)){const c=js(e.borderRadius),l=vt(e.backdropPadding);t.fillStyle=a;const u=i-l.left,h=s-l.top,d=r-i+l.width,f=o-s+l.height;Object.values(c).some(p=>p!==0)?(t.beginPath(),Zc(t,{x:u,y:h,w:d,h:f,radius:c}),t.fill()):t.fillRect(u,h,d,f)}}function OM(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let s=e-1;s>=0;s--){const r=t._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(t.getPointLabelContext(s));RM(n,o,r);const a=dt(o.font),{x:c,y:l,textAlign:u}=r;Fo(n,t._pointLabels[s],c,l+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function jy(t,e,n,i){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,yt);else{let r=t.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=t.getPointPosition(o,e),s.lineTo(r.x,r.y)}}function PM(t,e,n,i,s){const r=t.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!i||!a||!c||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=c,r.setLineDash(s.dash),r.lineDashOffset=s.dashOffset,r.beginPath(),jy(t,n,o,i),r.closePath(),r.stroke(),r.restore())}function MM(t,e,n){return $n(t,{label:n,index:e,type:"pointLabel"})}class Vr extends Uo{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=vt(sl(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=He(e)&&!isNaN(e)?e:0,this.max=He(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/sl(this.options))}generateTickLabels(e){Uo.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const s=De(this.options.pointLabels.callback,[n,i],this);return s||s===0?s:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?IM(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,s){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,s))}getIndexAngle(e){const n=yt/(this._pointLabels.length||1),i=this.options.startAngle||0;return St(e*n+xn(i))}getDistanceFromCenterForValue(e){if(ke(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(ke(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return MM(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const s=this.getIndexAngle(e)-ht+i;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:n,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),jy(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:s,border:r}=n,o=this._pointLabels.length;let a,c,l;if(n.pointLabels.display&&OM(this,o),s.display&&this.ticks.forEach((u,h)=>{if(h!==0){c=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=s.setContext(d),p=r.setContext(d);PM(this,f,c,o,p)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&!n.reverse)return;const l=i.setContext(this.getContext(c)),u=dt(l.font);if(r=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;const h=vt(l.backdropPadding);e.fillRect(-o/2-h.left,-r-u.size/2-h.top,o+h.width,u.size+h.height)}Fo(e,a.label,0,-r,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}}Z(Vr,"id","radialLinear"),Z(Vr,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ga.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Z(Vr,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Z(Vr,"descriptors",{angleLines:{_fallback:"grid"}});const _a={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},tt=Object.keys(_a);function op(t,e){return t-e}function ap(t,e){if(ke(e))return null;const n=t._adapter,{parser:i,round:s,isoWeekday:r}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),He(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(ar(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,s)),+o)}function cp(t,e,n,i){const s=tt.length;for(let r=tt.indexOf(t);r<s-1;++r){const o=_a[tt[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return tt[r]}return tt[s-1]}function DM(t,e,n,i,s){for(let r=tt.length-1;r>=tt.indexOf(n);r--){const o=tt[r];if(_a[o].common&&t._adapter.diff(s,i,o)>=e-1)return o}return tt[n?tt.indexOf(n):0]}function NM(t){for(let e=tt.indexOf(t)+1,n=tt.length;e<n;++e)if(_a[tt[e]].common)return tt[e]}function lp(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:s}=Cu(n,e),r=n[i]>=e?n[i]:n[s];t[r]=!0}}function LM(t,e,n,i){const s=t._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,c;for(a=r;a<=o;a=+s.add(a,1,i))c=n[a],c>=0&&(e[c].major=!0);return e}function up(t,e,n){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!n?i:LM(t,i,s,n)}class Ho extends Ii{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),s=this._adapter=new jO._date(e.adapters.date);s.init(n),Bs(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:ap(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function c(l){!o&&!isNaN(l.min)&&(s=Math.min(s,l.min)),!a&&!isNaN(l.max)&&(r=Math.max(r,l.max))}(!o||!a)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=He(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=He(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=_R(s,r,o);return this._unit=n.unit||(i.autoSkip?cp(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):DM(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:NM(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),up(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=mt(n,0,o),i=mt(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||cp(r.minUnit,n,i,this._getLabelCapacity(n)),a=Se(s.ticks.stepSize,1),c=o==="week"?r.isoWeekday:!1,l=ar(c)||c===!0,u={};let h=n,d,f;if(l&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,l?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=s.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<i;d=+e.add(d,a,o),f++)lp(u,d,p);return(d===i||s.bounds==="ticks"||f===1)&&lp(u,d,p),Object.keys(u).sort(op).map(_=>+_)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,r=this._unit,o=n||s[r];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,s){const r=this.options,o=r.ticks.callback;if(o)return De(o,[e,n,i],this);const a=r.time.displayFormats,c=this._unit,l=this._majorUnit,u=c&&a[c],h=l&&a[l],d=i[n],f=l&&h&&d&&d.major;return this._adapter.format(e,s||(f?h:u))}generateTickLabels(e){let n,i,s;for(n=0,i=e.length;n<i;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,s=xn(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(e,0,up(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)e.push(ap(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return bR(e.sort(op))}}Z(Ho,"id","time"),Z(Ho,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Kr(t,e,n){let i=0,s=t.length-1,r,o,a,c;n?(e>=t[i].pos&&e<=t[s].pos&&({lo:i,hi:s}=ni(t,"pos",e)),{pos:r,time:a}=t[i],{pos:o,time:c}=t[s]):(e>=t[i].time&&e<=t[s].time&&({lo:i,hi:s}=ni(t,"time",e)),{time:r,pos:a}=t[i],{time:o,pos:c}=t[s]);const l=o-r;return l?a+(c-a)*(e-r)/l:a}class hp extends Ho{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Kr(n,this.min),this._tableRange=Kr(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,s=[],r=[];let o,a,c,l,u;for(o=0,a=e.length;o<a;++o)l=e[o],l>=n&&l<=i&&s.push(l);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],c=s[o-1],l=s[o],Math.round((u+c)/2)!==l&&r.push({time:l,pos:o/(a-1)});return r}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Kr(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Kr(this._table,i*this._tableRange+this._minPos,!0)}}Z(hp,"id","timeseries"),Z(hp,"defaults",Ho.defaults);export{JM as A,WM as B,Yn as C,nn as F,In as G,nc as L,oc as P,HM as a,rg as b,Ct as c,KM as d,GM as e,QM as f,VM as g,XM as h,sI as i,BM as j,At as k,zM as l,jr as m,Zf as n,UM as o,tp as p,nD as q,YM as r,qM as s,xb as t,jM as u,ur as v,eD as w,Zb as x,$M as y,ZM as z};
