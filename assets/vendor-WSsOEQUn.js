var Pb=Object.defineProperty;var Ab=(t,e,n)=>e in t?Pb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var te=(t,e,n)=>(Ab(t,typeof e!="symbol"?e+"":e,n),n);function Rc(t,e){const n=Object.create(null),i=t.split(",");for(let s=0;s<i.length;s++)n[i[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const Ae={},Fi=[],jt=()=>{},Rb=()=>!1,ha=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Oc=t=>t.startsWith("onUpdate:"),Ge=Object.assign,Mc=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Ob=Object.prototype.hasOwnProperty,de=(t,e)=>Ob.call(t,e),Z=Array.isArray,$i=t=>Ir(t)==="[object Map]",da=t=>Ir(t)==="[object Set]",yh=t=>Ir(t)==="[object Date]",oe=t=>typeof t=="function",Ue=t=>typeof t=="string",Ln=t=>typeof t=="symbol",ke=t=>t!==null&&typeof t=="object",Qp=t=>(ke(t)||oe(t))&&oe(t.then)&&oe(t.catch),Jp=Object.prototype.toString,Ir=t=>Jp.call(t),Mb=t=>Ir(t).slice(8,-1),Zp=t=>Ir(t)==="[object Object]",Dc=t=>Ue(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,lo=Rc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fa=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Db=/-(\w)/g,Kt=fa(t=>t.replace(Db,(e,n)=>n?n.toUpperCase():"")),Nb=/\B([A-Z])/g,cs=fa(t=>t.replace(Nb,"-$1").toLowerCase()),pa=fa(t=>t.charAt(0).toUpperCase()+t.slice(1)),za=fa(t=>t?`on${pa(t)}`:""),fi=(t,e)=>!Object.is(t,e),co=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},vo=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},wo=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let bh;const Ml=()=>bh||(bh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Nc(t){if(Z(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],s=Ue(i)?Bb(i):Nc(i);if(s)for(const r in s)e[r]=s[r]}return e}else if(Ue(t)||ke(t))return t}const Lb=/;(?![^(]*\))/g,Fb=/:([^]+)/,$b=/\/\*[^]*?\*\//g;function Bb(t){const e={};return t.replace($b,"").split(Lb).forEach(n=>{if(n){const i=n.split(Fb);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Lc(t){let e="";if(Ue(t))e=t;else if(Z(t))for(let n=0;n<t.length;n++){const i=Lc(t[n]);i&&(e+=i+" ")}else if(ke(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Ub="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hb=Rc(Ub);function eg(t){return!!t||t===""}function Wb(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=ga(t[i],e[i]);return n}function ga(t,e){if(t===e)return!0;let n=yh(t),i=yh(e);if(n||i)return n&&i?t.getTime()===e.getTime():!1;if(n=Ln(t),i=Ln(e),n||i)return t===e;if(n=Z(t),i=Z(e),n||i)return n&&i?Wb(t,e):!1;if(n=ke(t),i=ke(e),n||i){if(!n||!i)return!1;const s=Object.keys(t).length,r=Object.keys(e).length;if(s!==r)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!ga(t[o],e[o]))return!1}}return String(t)===String(e)}function jb(t,e){return t.findIndex(n=>ga(n,e))}const zD=t=>Ue(t)?t:t==null?"":Z(t)||ke(t)&&(t.toString===Jp||!oe(t.toString))?JSON.stringify(t,tg,2):String(t),tg=(t,e)=>e&&e.__v_isRef?tg(t,e.value):$i(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,s],r)=>(n[qa(i,r)+" =>"]=s,n),{})}:da(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>qa(n))}:Ln(e)?qa(e):ke(e)&&!Z(e)&&!Zp(e)?String(e):e,qa=(t,e="")=>{var n;return Ln(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Ct;class Vb{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ct,!e&&Ct&&(this.index=(Ct.scopes||(Ct.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Ct;try{return Ct=this,e()}finally{Ct=n}}}on(){Ct=this}off(){Ct=this.parent}stop(e){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function zb(t,e=Ct){e&&e.active&&e.effects.push(t)}function qb(){return Ct}const Fc=t=>{const e=new Set(t);return e.w=0,e.n=0,e},ng=t=>(t.w&Fn)>0,ig=t=>(t.n&Fn)>0,Kb=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Fn},Gb=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const s=e[i];ng(s)&&!ig(s)?s.delete(t):e[n++]=s,s.w&=~Fn,s.n&=~Fn}e.length=n}},Dl=new WeakMap;let Os=0,Fn=1;const Nl=30;let xt;const li=Symbol(""),Ll=Symbol("");class $c{constructor(e,n=null,i){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,zb(this,i)}run(){if(!this.active)return this.fn();let e=xt,n=Pn;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=xt,xt=this,Pn=!0,Fn=1<<++Os,Os<=Nl?Kb(this):vh(this),this.fn()}finally{Os<=Nl&&Gb(this),Fn=1<<--Os,xt=this.parent,Pn=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){xt===this?this.deferStop=!0:this.active&&(vh(this),this.onStop&&this.onStop(),this.active=!1)}}function vh(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Pn=!0;const sg=[];function us(){sg.push(Pn),Pn=!1}function hs(){const t=sg.pop();Pn=t===void 0?!0:t}function ot(t,e,n){if(Pn&&xt){let i=Dl.get(t);i||Dl.set(t,i=new Map);let s=i.get(n);s||i.set(n,s=Fc()),rg(s)}}function rg(t,e){let n=!1;Os<=Nl?ig(t)||(t.n|=Fn,n=!ng(t)):n=!t.has(xt),n&&(t.add(xt),xt.deps.push(t))}function cn(t,e,n,i,s,r){const o=Dl.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&Z(t)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||!Ln(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":Z(t)?Dc(n)&&a.push(o.get("length")):(a.push(o.get(li)),$i(t)&&a.push(o.get(Ll)));break;case"delete":Z(t)||(a.push(o.get(li)),$i(t)&&a.push(o.get(Ll)));break;case"set":$i(t)&&a.push(o.get(li));break}if(a.length===1)a[0]&&Fl(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Fl(Fc(l))}}function Fl(t,e){const n=Z(t)?t:[...t];for(const i of n)i.computed&&wh(i);for(const i of n)i.computed||wh(i)}function wh(t,e){(t!==xt||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Yb=Rc("__proto__,__v_isRef,__isVue"),og=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ln)),Ih=Xb();function Xb(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=be(this);for(let r=0,o=this.length;r<o;r++)ot(i,"get",r+"");const s=i[e](...n);return s===-1||s===!1?i[e](...n.map(be)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){us();const i=be(this)[e].apply(this,n);return hs(),i}}),t}function Qb(t){const e=be(this);return ot(e,"has",t),e.hasOwnProperty(t)}class ag{constructor(e=!1,n=!1){this._isReadonly=e,this._shallow=n}get(e,n,i){const s=this._isReadonly,r=this._shallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return i===(s?r?uv:hg:r?ug:cg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=Z(e);if(!s){if(o&&de(Ih,n))return Reflect.get(Ih,n,i);if(n==="hasOwnProperty")return Qb}const a=Reflect.get(e,n,i);return(Ln(n)?og.has(n):Yb(n))||(s||ot(e,"get",n),r)?a:at(a)?o&&Dc(n)?a:a.value:ke(a)?s?fg(a):Er(a):a}}class lg extends ag{constructor(e=!1){super(!1,e)}set(e,n,i,s){let r=e[n];if(!this._shallow){const l=Xi(r);if(!Io(i)&&!Xi(i)&&(r=be(r),i=be(i)),!Z(e)&&at(r)&&!at(i))return l?!1:(r.value=i,!0)}const o=Z(e)&&Dc(n)?Number(n)<e.length:de(e,n),a=Reflect.set(e,n,i,s);return e===be(s)&&(o?fi(i,r)&&cn(e,"set",n,i):cn(e,"add",n,i)),a}deleteProperty(e,n){const i=de(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&i&&cn(e,"delete",n,void 0),s}has(e,n){const i=Reflect.has(e,n);return(!Ln(n)||!og.has(n))&&ot(e,"has",n),i}ownKeys(e){return ot(e,"iterate",Z(e)?"length":li),Reflect.ownKeys(e)}}class Jb extends ag{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Zb=new lg,ev=new Jb,tv=new lg(!0),Bc=t=>t,ma=t=>Reflect.getPrototypeOf(t);function Nr(t,e,n=!1,i=!1){t=t.__v_raw;const s=be(t),r=be(e);n||(fi(e,r)&&ot(s,"get",e),ot(s,"get",r));const{has:o}=ma(s),a=i?Bc:n?Wc:Zs;if(o.call(s,e))return a(t.get(e));if(o.call(s,r))return a(t.get(r));t!==s&&t.get(e)}function Lr(t,e=!1){const n=this.__v_raw,i=be(n),s=be(t);return e||(fi(t,s)&&ot(i,"has",t),ot(i,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Fr(t,e=!1){return t=t.__v_raw,!e&&ot(be(t),"iterate",li),Reflect.get(t,"size",t)}function Eh(t){t=be(t);const e=be(this);return ma(e).has.call(e,t)||(e.add(t),cn(e,"add",t,t)),this}function Ch(t,e){e=be(e);const n=be(this),{has:i,get:s}=ma(n);let r=i.call(n,t);r||(t=be(t),r=i.call(n,t));const o=s.call(n,t);return n.set(t,e),r?fi(e,o)&&cn(n,"set",t,e):cn(n,"add",t,e),this}function Sh(t){const e=be(this),{has:n,get:i}=ma(e);let s=n.call(e,t);s||(t=be(t),s=n.call(e,t)),i&&i.call(e,t);const r=e.delete(t);return s&&cn(e,"delete",t,void 0),r}function xh(){const t=be(this),e=t.size!==0,n=t.clear();return e&&cn(t,"clear",void 0,void 0),n}function $r(t,e){return function(i,s){const r=this,o=r.__v_raw,a=be(o),l=e?Bc:t?Wc:Zs;return!t&&ot(a,"iterate",li),o.forEach((c,u)=>i.call(s,l(c),l(u),r))}}function Br(t,e,n){return function(...i){const s=this.__v_raw,r=be(s),o=$i(r),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...i),u=n?Bc:e?Wc:Zs;return!e&&ot(r,"iterate",l?Ll:li),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function _n(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function nv(){const t={get(r){return Nr(this,r)},get size(){return Fr(this)},has:Lr,add:Eh,set:Ch,delete:Sh,clear:xh,forEach:$r(!1,!1)},e={get(r){return Nr(this,r,!1,!0)},get size(){return Fr(this)},has:Lr,add:Eh,set:Ch,delete:Sh,clear:xh,forEach:$r(!1,!0)},n={get(r){return Nr(this,r,!0)},get size(){return Fr(this,!0)},has(r){return Lr.call(this,r,!0)},add:_n("add"),set:_n("set"),delete:_n("delete"),clear:_n("clear"),forEach:$r(!0,!1)},i={get(r){return Nr(this,r,!0,!0)},get size(){return Fr(this,!0)},has(r){return Lr.call(this,r,!0)},add:_n("add"),set:_n("set"),delete:_n("delete"),clear:_n("clear"),forEach:$r(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=Br(r,!1,!1),n[r]=Br(r,!0,!1),e[r]=Br(r,!1,!0),i[r]=Br(r,!0,!0)}),[t,n,e,i]}const[iv,sv,rv,ov]=nv();function Uc(t,e){const n=e?t?ov:rv:t?sv:iv;return(i,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?i:Reflect.get(de(n,s)&&s in i?n:i,s,r)}const av={get:Uc(!1,!1)},lv={get:Uc(!1,!0)},cv={get:Uc(!0,!1)},cg=new WeakMap,ug=new WeakMap,hg=new WeakMap,uv=new WeakMap;function hv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function dv(t){return t.__v_skip||!Object.isExtensible(t)?0:hv(Mb(t))}function Er(t){return Xi(t)?t:Hc(t,!1,Zb,av,cg)}function dg(t){return Hc(t,!1,tv,lv,ug)}function fg(t){return Hc(t,!0,ev,cv,hg)}function Hc(t,e,n,i,s){if(!ke(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=s.get(t);if(r)return r;const o=dv(t);if(o===0)return t;const a=new Proxy(t,o===2?i:n);return s.set(t,a),a}function Bi(t){return Xi(t)?Bi(t.__v_raw):!!(t&&t.__v_isReactive)}function Xi(t){return!!(t&&t.__v_isReadonly)}function Io(t){return!!(t&&t.__v_isShallow)}function pg(t){return Bi(t)||Xi(t)}function be(t){const e=t&&t.__v_raw;return e?be(e):t}function gg(t){return vo(t,"__v_skip",!0),t}const Zs=t=>ke(t)?Er(t):t,Wc=t=>ke(t)?fg(t):t;function mg(t){Pn&&xt&&(t=be(t),rg(t.dep||(t.dep=Fc())))}function _g(t,e){t=be(t);const n=t.dep;n&&Fl(n)}function at(t){return!!(t&&t.__v_isRef===!0)}function fv(t){return yg(t,!1)}function pv(t){return yg(t,!0)}function yg(t,e){return at(t)?t:new gv(t,e)}class gv{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:be(e),this._value=n?e:Zs(e)}get value(){return mg(this),this._value}set value(e){const n=this.__v_isShallow||Io(e)||Xi(e);e=n?e:be(e),fi(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Zs(e),_g(this))}}function Ui(t){return at(t)?t.value:t}const mv={get:(t,e,n)=>Ui(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const s=t[e];return at(s)&&!at(n)?(s.value=n,!0):Reflect.set(t,e,n,i)}};function bg(t){return Bi(t)?t:new Proxy(t,mv)}class _v{constructor(e,n,i,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new $c(e,()=>{this._dirty||(this._dirty=!0,_g(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const e=be(this);return mg(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function yv(t,e,n=!1){let i,s;const r=oe(t);return r?(i=t,s=jt):(i=t.get,s=t.set),new _v(i,s,r||!s,n)}function An(t,e,n,i){let s;try{s=i?t(...i):t()}catch(r){_a(r,e,n)}return s}function Ot(t,e,n,i){if(oe(t)){const r=An(t,e,n,i);return r&&Qp(r)&&r.catch(o=>{_a(o,e,n)}),r}const s=[];for(let r=0;r<t.length;r++)s.push(Ot(t[r],e,n,i));return s}function _a(t,e,n,i=!0){const s=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,a=n;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}r=r.parent}const l=e.appContext.config.errorHandler;if(l){An(l,null,10,[t,o,a]);return}}bv(t,n,s,i)}function bv(t,e,n,i=!0){console.error(t)}let er=!1,$l=!1;const Xe=[];let Wt=0;const Hi=[];let tn=null,Zn=0;const vg=Promise.resolve();let jc=null;function wg(t){const e=jc||vg;return t?e.then(this?t.bind(this):t):e}function vv(t){let e=Wt+1,n=Xe.length;for(;e<n;){const i=e+n>>>1,s=Xe[i],r=tr(s);r<t||r===t&&s.pre?e=i+1:n=i}return e}function Vc(t){(!Xe.length||!Xe.includes(t,er&&t.allowRecurse?Wt+1:Wt))&&(t.id==null?Xe.push(t):Xe.splice(vv(t.id),0,t),Ig())}function Ig(){!er&&!$l&&($l=!0,jc=vg.then(Cg))}function wv(t){const e=Xe.indexOf(t);e>Wt&&Xe.splice(e,1)}function Iv(t){Z(t)?Hi.push(...t):(!tn||!tn.includes(t,t.allowRecurse?Zn+1:Zn))&&Hi.push(t),Ig()}function Th(t,e,n=er?Wt+1:0){for(;n<Xe.length;n++){const i=Xe[n];if(i&&i.pre){if(t&&i.id!==t.uid)continue;Xe.splice(n,1),n--,i()}}}function Eg(t){if(Hi.length){const e=[...new Set(Hi)];if(Hi.length=0,tn){tn.push(...e);return}for(tn=e,tn.sort((n,i)=>tr(n)-tr(i)),Zn=0;Zn<tn.length;Zn++)tn[Zn]();tn=null,Zn=0}}const tr=t=>t.id==null?1/0:t.id,Ev=(t,e)=>{const n=tr(t)-tr(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Cg(t){$l=!1,er=!0,Xe.sort(Ev);try{for(Wt=0;Wt<Xe.length;Wt++){const e=Xe[Wt];e&&e.active!==!1&&An(e,null,14)}}finally{Wt=0,Xe.length=0,Eg(),er=!1,jc=null,(Xe.length||Hi.length)&&Cg()}}function Cv(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||Ae;let s=n;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=i[u]||Ae;d&&(s=n.map(f=>Ue(f)?f.trim():f)),h&&(s=n.map(wo))}let a,l=i[a=za(e)]||i[a=za(Kt(e))];!l&&r&&(l=i[a=za(cs(e))]),l&&Ot(l,t,6,s);const c=i[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ot(c,t,6,s)}}function Sg(t,e,n=!1){const i=e.emitsCache,s=i.get(t);if(s!==void 0)return s;const r=t.emits;let o={},a=!1;if(!oe(t)){const l=c=>{const u=Sg(c,e,!0);u&&(a=!0,Ge(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!a?(ke(t)&&i.set(t,null),null):(Z(r)?r.forEach(l=>o[l]=null):Ge(o,r),ke(t)&&i.set(t,o),o)}function ya(t,e){return!t||!ha(e)?!1:(e=e.slice(2).replace(/Once$/,""),de(t,e[0].toLowerCase()+e.slice(1))||de(t,cs(e))||de(t,e))}let yt=null,xg=null;function Eo(t){const e=yt;return yt=t,xg=t&&t.type.__scopeId||null,e}function Sv(t,e=yt,n){if(!e||t._n)return t;const i=(...s)=>{i._d&&$h(-1);const r=Eo(e);let o;try{o=t(...s)}finally{Eo(r),i._d&&$h(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Ka(t){const{type:e,vnode:n,proxy:i,withProxy:s,props:r,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:p,inheritAttrs:m}=t;let y,b;const w=Eo(t);try{if(n.shapeFlag&4){const C=s||i,T=C;y=Ht(u.call(T,C,h,r,f,d,p)),b=l}else{const C=e;y=Ht(C.length>1?C(r,{attrs:l,slots:a,emit:c}):C(r,null)),b=e.props?l:xv(l)}}catch(C){$s.length=0,_a(C,t,1),y=ft(pi)}let A=y;if(b&&m!==!1){const C=Object.keys(b),{shapeFlag:T}=A;C.length&&T&7&&(o&&C.some(Oc)&&(b=Tv(b,o)),A=Qi(A,b))}return n.dirs&&(A=Qi(A),A.dirs=A.dirs?A.dirs.concat(n.dirs):n.dirs),n.transition&&(A.transition=n.transition),y=A,Eo(w),y}const xv=t=>{let e;for(const n in t)(n==="class"||n==="style"||ha(n))&&((e||(e={}))[n]=t[n]);return e},Tv=(t,e)=>{const n={};for(const i in t)(!Oc(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function kv(t,e,n){const{props:i,children:s,component:r}=t,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?kh(i,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==i[d]&&!ya(c,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?kh(i,o,c):!0:!!o;return!1}function kh(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==t[r]&&!ya(n,r))return!0}return!1}function Pv({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const Tg="components";function qD(t,e){return Rv(Tg,t,!0,e)||t}const Av=Symbol.for("v-ndc");function Rv(t,e,n=!0,i=!1){const s=yt||Ke;if(s){const r=s.type;if(t===Tg){const a=Sw(r,!1);if(a&&(a===e||a===Kt(e)||a===pa(Kt(e))))return r}const o=Ph(s[t]||r[t],e)||Ph(s.appContext[t],e);return!o&&i?r:o}}function Ph(t,e){return t&&(t[e]||t[Kt(e)]||t[pa(Kt(e))])}const Ov=t=>t.__isSuspense;function Mv(t,e){e&&e.pendingBranch?Z(t)?e.effects.push(...t):e.effects.push(t):Iv(t)}const Ur={};function Wi(t,e,n){return kg(t,e,n)}function kg(t,e,{immediate:n,deep:i,flush:s,onTrack:r,onTrigger:o}=Ae){var a;const l=qb()===((a=Ke)==null?void 0:a.scope)?Ke:null;let c,u=!1,h=!1;if(at(t)?(c=()=>t.value,u=Io(t)):Bi(t)?(c=()=>t,i=!0):Z(t)?(h=!0,u=t.some(C=>Bi(C)||Io(C)),c=()=>t.map(C=>{if(at(C))return C.value;if(Bi(C))return ni(C);if(oe(C))return An(C,l,2)})):oe(t)?e?c=()=>An(t,l,2):c=()=>{if(!(l&&l.isUnmounted))return d&&d(),Ot(t,l,3,[f])}:c=jt,e&&i){const C=c;c=()=>ni(C())}let d,f=C=>{d=w.onStop=()=>{An(C,l,4),d=w.onStop=void 0}},p;if(ir)if(f=jt,e?n&&Ot(e,l,3,[c(),h?[]:void 0,f]):c(),s==="sync"){const C=kw();p=C.__watcherHandles||(C.__watcherHandles=[])}else return jt;let m=h?new Array(t.length).fill(Ur):Ur;const y=()=>{if(w.active)if(e){const C=w.run();(i||u||(h?C.some((T,H)=>fi(T,m[H])):fi(C,m)))&&(d&&d(),Ot(e,l,3,[C,m===Ur?void 0:h&&m[0]===Ur?[]:m,f]),m=C)}else w.run()};y.allowRecurse=!!e;let b;s==="sync"?b=y:s==="post"?b=()=>et(y,l&&l.suspense):(y.pre=!0,l&&(y.id=l.uid),b=()=>Vc(y));const w=new $c(c,b);e?n?y():m=w.run():s==="post"?et(w.run.bind(w),l&&l.suspense):w.run();const A=()=>{w.stop(),l&&l.scope&&Mc(l.scope.effects,w)};return p&&p.push(A),A}function Dv(t,e,n){const i=this.proxy,s=Ue(t)?t.includes(".")?Pg(i,t):()=>i[t]:t.bind(i,i);let r;oe(e)?r=e:(r=e.handler,n=e);const o=Ke;Ji(this);const a=kg(s,r.bind(i),n);return o?Ji(o):ci(),a}function Pg(t,e){const n=e.split(".");return()=>{let i=t;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}function ni(t,e){if(!ke(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),at(t))ni(t.value,e);else if(Z(t))for(let n=0;n<t.length;n++)ni(t[n],e);else if(da(t)||$i(t))t.forEach(n=>{ni(n,e)});else if(Zp(t))for(const n in t)ni(t[n],e);return t}function KD(t,e){const n=yt;if(n===null)return t;const i=Ia(n)||n.proxy,s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[o,a,l,c=Ae]=e[r];o&&(oe(o)&&(o={mounted:o,updated:o}),o.deep&&ni(a),s.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c}))}return t}function Wn(t,e,n,i){const s=t.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(us(),Ot(l,n,8,[t.el,a,t,e]),hs())}}/*! #__NO_SIDE_EFFECTS__ */function Ag(t,e){return oe(t)?Ge({name:t.name},e,{setup:t}):t}const uo=t=>!!t.type.__asyncLoader,Rg=t=>t.type.__isKeepAlive;function Nv(t,e){Og(t,"a",e)}function Lv(t,e){Og(t,"da",e)}function Og(t,e,n=Ke){const i=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(ba(e,i,n),n){let s=n.parent;for(;s&&s.parent;)Rg(s.parent.vnode)&&Fv(i,e,n,s),s=s.parent}}function Fv(t,e,n,i){const s=ba(e,t,i,!0);Mg(()=>{Mc(i[e],s)},n)}function ba(t,e,n=Ke,i=!1){if(n){const s=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;us(),Ji(n);const a=Ot(e,n,t,o);return ci(),hs(),a});return i?s.unshift(r):s.push(r),r}}const pn=t=>(e,n=Ke)=>(!ir||t==="sp")&&ba(t,(...i)=>e(...i),n),$v=pn("bm"),Bv=pn("m"),Uv=pn("bu"),Hv=pn("u"),Wv=pn("bum"),Mg=pn("um"),jv=pn("sp"),Vv=pn("rtg"),zv=pn("rtc");function qv(t,e=Ke){ba("ec",t,e)}function GD(t,e,n,i){let s;const r=n&&n[i];if(Z(t)||Ue(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,r&&r[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,r&&r[o])}else if(ke(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,r&&r[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=e(t[c],c,a,r&&r[a])}}else s=[];return n&&(n[i]=s),s}const Bl=t=>t?zg(t)?Ia(t)||t.proxy:Bl(t.parent):null,Fs=Ge(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Bl(t.parent),$root:t=>Bl(t.root),$emit:t=>t.emit,$options:t=>zc(t),$forceUpdate:t=>t.f||(t.f=()=>Vc(t.update)),$nextTick:t=>t.n||(t.n=wg.bind(t.proxy)),$watch:t=>Dv.bind(t)}),Ga=(t,e)=>t!==Ae&&!t.__isScriptSetup&&de(t,e),Kv={get({_:t},e){const{ctx:n,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return i[e];case 2:return s[e];case 4:return n[e];case 3:return r[e]}else{if(Ga(i,e))return o[e]=1,i[e];if(s!==Ae&&de(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&de(c,e))return o[e]=3,r[e];if(n!==Ae&&de(n,e))return o[e]=4,n[e];Ul&&(o[e]=0)}}const u=Fs[e];let h,d;if(u)return e==="$attrs"&&ot(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Ae&&de(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,de(d,e))return d[e]},set({_:t},e,n){const{data:i,setupState:s,ctx:r}=t;return Ga(s,e)?(s[e]=n,!0):i!==Ae&&de(i,e)?(i[e]=n,!0):de(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!n[o]||t!==Ae&&de(t,o)||Ga(e,o)||(a=r[0])&&de(a,o)||de(i,o)||de(Fs,o)||de(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:de(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Ah(t){return Z(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ul=!0;function Gv(t){const e=zc(t),n=t.proxy,i=t.ctx;Ul=!1,e.beforeCreate&&Rh(e.beforeCreate,t,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:y,beforeDestroy:b,beforeUnmount:w,destroyed:A,unmounted:C,render:T,renderTracked:H,renderTriggered:W,errorCaptured:j,serverPrefetch:J,expose:Y,inheritAttrs:z,components:fe,directives:Oe,filters:q}=e;if(c&&Yv(c,i,null),o)for(const R in o){const k=o[R];oe(k)&&(i[R]=k.bind(n))}if(s){const R=s.call(n,n);ke(R)&&(t.data=Er(R))}if(Ul=!0,r)for(const R in r){const k=r[R],G=oe(k)?k.bind(n,n):oe(k.get)?k.get.bind(n,n):jt,K=!oe(k)&&oe(k.set)?k.set.bind(n):jt,re=Tt({get:G,set:K});Object.defineProperty(i,R,{enumerable:!0,configurable:!0,get:()=>re.value,set:ie=>re.value=ie})}if(a)for(const R in a)Dg(a[R],i,n,R);if(l){const R=oe(l)?l.call(n):l;Reflect.ownKeys(R).forEach(k=>{ho(k,R[k])})}u&&Rh(u,t,"c");function S(R,k){Z(k)?k.forEach(G=>R(G.bind(n))):k&&R(k.bind(n))}if(S($v,h),S(Bv,d),S(Uv,f),S(Hv,p),S(Nv,m),S(Lv,y),S(qv,j),S(zv,H),S(Vv,W),S(Wv,w),S(Mg,C),S(jv,J),Z(Y))if(Y.length){const R=t.exposed||(t.exposed={});Y.forEach(k=>{Object.defineProperty(R,k,{get:()=>n[k],set:G=>n[k]=G})})}else t.exposed||(t.exposed={});T&&t.render===jt&&(t.render=T),z!=null&&(t.inheritAttrs=z),fe&&(t.components=fe),Oe&&(t.directives=Oe)}function Yv(t,e,n=jt){Z(t)&&(t=Hl(t));for(const i in t){const s=t[i];let r;ke(s)?"default"in s?r=Vt(s.from||i,s.default,!0):r=Vt(s.from||i):r=Vt(s),at(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function Rh(t,e,n){Ot(Z(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function Dg(t,e,n,i){const s=i.includes(".")?Pg(n,i):()=>n[i];if(Ue(t)){const r=e[t];oe(r)&&Wi(s,r)}else if(oe(t))Wi(s,t.bind(n));else if(ke(t))if(Z(t))t.forEach(r=>Dg(r,e,n,i));else{const r=oe(t.handler)?t.handler.bind(n):e[t.handler];oe(r)&&Wi(s,r,t)}}function zc(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let l;return a?l=a:!s.length&&!n&&!i?l=e:(l={},s.length&&s.forEach(c=>Co(l,c,o,!0)),Co(l,e,o)),ke(e)&&r.set(e,l),l}function Co(t,e,n,i=!1){const{mixins:s,extends:r}=e;r&&Co(t,r,n,!0),s&&s.forEach(o=>Co(t,o,n,!0));for(const o in e)if(!(i&&o==="expose")){const a=Xv[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Xv={data:Oh,props:Mh,emits:Mh,methods:Ms,computed:Ms,beforeCreate:Je,created:Je,beforeMount:Je,mounted:Je,beforeUpdate:Je,updated:Je,beforeDestroy:Je,beforeUnmount:Je,destroyed:Je,unmounted:Je,activated:Je,deactivated:Je,errorCaptured:Je,serverPrefetch:Je,components:Ms,directives:Ms,watch:Jv,provide:Oh,inject:Qv};function Oh(t,e){return e?t?function(){return Ge(oe(t)?t.call(this,this):t,oe(e)?e.call(this,this):e)}:e:t}function Qv(t,e){return Ms(Hl(t),Hl(e))}function Hl(t){if(Z(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Je(t,e){return t?[...new Set([].concat(t,e))]:e}function Ms(t,e){return t?Ge(Object.create(null),t,e):e}function Mh(t,e){return t?Z(t)&&Z(e)?[...new Set([...t,...e])]:Ge(Object.create(null),Ah(t),Ah(e??{})):e}function Jv(t,e){if(!t)return e;if(!e)return t;const n=Ge(Object.create(null),t);for(const i in e)n[i]=Je(t[i],e[i]);return n}function Ng(){return{app:null,config:{isNativeTag:Rb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Zv=0;function ew(t,e){return function(i,s=null){oe(i)||(i=Ge({},i)),s!=null&&!ke(s)&&(s=null);const r=Ng(),o=new WeakSet;let a=!1;const l=r.app={_uid:Zv++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:Pw,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&oe(c.install)?(o.add(c),c.install(l,...u)):oe(c)&&(o.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,h){if(!a){const d=ft(i,s);return d.appContext=r,u&&e?e(d,c):t(d,c,h),a=!0,l._container=c,c.__vue_app__=l,Ia(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l},runWithContext(c){So=l;try{return c()}finally{So=null}}};return l}}let So=null;function ho(t,e){if(Ke){let n=Ke.provides;const i=Ke.parent&&Ke.parent.provides;i===n&&(n=Ke.provides=Object.create(i)),n[t]=e}}function Vt(t,e,n=!1){const i=Ke||yt;if(i||So){const s=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:So._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&oe(e)?e.call(i&&i.proxy):e}}function tw(t,e,n,i=!1){const s={},r={};vo(r,wa,1),t.propsDefaults=Object.create(null),Lg(t,e,s,r);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=i?s:dg(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function nw(t,e,n,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=t,a=be(s),[l]=t.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(ya(t.emitsOptions,d))continue;const f=e[d];if(l)if(de(r,d))f!==r[d]&&(r[d]=f,c=!0);else{const p=Kt(d);s[p]=Wl(l,a,p,f,t,!1)}else f!==r[d]&&(r[d]=f,c=!0)}}}else{Lg(t,e,s,r)&&(c=!0);let u;for(const h in a)(!e||!de(e,h)&&((u=cs(h))===h||!de(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=Wl(l,a,h,void 0,t,!0)):delete s[h]);if(r!==a)for(const h in r)(!e||!de(e,h))&&(delete r[h],c=!0)}c&&cn(t,"set","$attrs")}function Lg(t,e,n,i){const[s,r]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(lo(l))continue;const c=e[l];let u;s&&de(s,u=Kt(l))?!r||!r.includes(u)?n[u]=c:(a||(a={}))[u]=c:ya(t.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=be(n),c=a||Ae;for(let u=0;u<r.length;u++){const h=r[u];n[h]=Wl(s,l,h,c[h],t,!de(c,h))}}return o}function Wl(t,e,n,i,s,r){const o=t[n];if(o!=null){const a=de(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&oe(l)){const{propsDefaults:c}=s;n in c?i=c[n]:(Ji(s),i=c[n]=l.call(null,e),ci())}else i=l}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===cs(n))&&(i=!0))}return i}function Fg(t,e,n=!1){const i=e.propsCache,s=i.get(t);if(s)return s;const r=t.props,o={},a=[];let l=!1;if(!oe(t)){const u=h=>{l=!0;const[d,f]=Fg(h,e,!0);Ge(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!l)return ke(t)&&i.set(t,Fi),Fi;if(Z(r))for(let u=0;u<r.length;u++){const h=Kt(r[u]);Dh(h)&&(o[h]=Ae)}else if(r)for(const u in r){const h=Kt(u);if(Dh(h)){const d=r[u],f=o[h]=Z(d)||oe(d)?{type:d}:Ge({},d);if(f){const p=Fh(Boolean,f.type),m=Fh(String,f.type);f[0]=p>-1,f[1]=m<0||p<m,(p>-1||de(f,"default"))&&a.push(h)}}}const c=[o,a];return ke(t)&&i.set(t,c),c}function Dh(t){return t[0]!=="$"}function Nh(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function Lh(t,e){return Nh(t)===Nh(e)}function Fh(t,e){return Z(e)?e.findIndex(n=>Lh(n,t)):oe(e)&&Lh(e,t)?0:-1}const $g=t=>t[0]==="_"||t==="$stable",qc=t=>Z(t)?t.map(Ht):[Ht(t)],iw=(t,e,n)=>{if(e._n)return e;const i=Sv((...s)=>qc(e(...s)),n);return i._c=!1,i},Bg=(t,e,n)=>{const i=t._ctx;for(const s in t){if($g(s))continue;const r=t[s];if(oe(r))e[s]=iw(s,r,i);else if(r!=null){const o=qc(r);e[s]=()=>o}}},Ug=(t,e)=>{const n=qc(e);t.slots.default=()=>n},sw=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=be(e),vo(e,"_",n)):Bg(e,t.slots={})}else t.slots={},e&&Ug(t,e);vo(t.slots,wa,1)},rw=(t,e,n)=>{const{vnode:i,slots:s}=t;let r=!0,o=Ae;if(i.shapeFlag&32){const a=e._;a?n&&a===1?r=!1:(Ge(s,e),!n&&a===1&&delete s._):(r=!e.$stable,Bg(e,s)),o=e}else e&&(Ug(t,e),o={default:1});if(r)for(const a in s)!$g(a)&&o[a]==null&&delete s[a]};function jl(t,e,n,i,s=!1){if(Z(t)){t.forEach((d,f)=>jl(d,e&&(Z(e)?e[f]:e),n,i,s));return}if(uo(i)&&!s)return;const r=i.shapeFlag&4?Ia(i.component)||i.component.proxy:i.el,o=s?null:r,{i:a,r:l}=t,c=e&&e.r,u=a.refs===Ae?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(Ue(c)?(u[c]=null,de(h,c)&&(h[c]=null)):at(c)&&(c.value=null)),oe(l))An(l,a,12,[o,u]);else{const d=Ue(l),f=at(l);if(d||f){const p=()=>{if(t.f){const m=d?de(h,l)?h[l]:u[l]:l.value;s?Z(m)&&Mc(m,r):Z(m)?m.includes(r)||m.push(r):d?(u[l]=[r],de(h,l)&&(h[l]=u[l])):(l.value=[r],t.k&&(u[t.k]=l.value))}else d?(u[l]=o,de(h,l)&&(h[l]=o)):f&&(l.value=o,t.k&&(u[t.k]=o))};o?(p.id=-1,et(p,n)):p()}}}const et=Mv;function ow(t){return aw(t)}function aw(t,e){const n=Ml();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=jt,insertStaticContent:p}=t,m=(g,_,v,I=null,x=null,P=null,U=!1,L=null,F=!!_.dynamicChildren)=>{if(g===_)return;g&&!ws(g,_)&&(I=E(g),ie(g,x,P,!0),g=null),_.patchFlag===-2&&(F=!1,_.dynamicChildren=null);const{type:O,ref:X,shapeFlag:V}=_;switch(O){case va:y(g,_,v,I);break;case pi:b(g,_,v,I);break;case Ya:g==null&&w(_,v,I,U);break;case nn:fe(g,_,v,I,x,P,U,L,F);break;default:V&1?T(g,_,v,I,x,P,U,L,F):V&6?Oe(g,_,v,I,x,P,U,L,F):(V&64||V&128)&&O.process(g,_,v,I,x,P,U,L,F,N)}X!=null&&x&&jl(X,g&&g.ref,P,_||g,!_)},y=(g,_,v,I)=>{if(g==null)i(_.el=a(_.children),v,I);else{const x=_.el=g.el;_.children!==g.children&&c(x,_.children)}},b=(g,_,v,I)=>{g==null?i(_.el=l(_.children||""),v,I):_.el=g.el},w=(g,_,v,I)=>{[g.el,g.anchor]=p(g.children,_,v,I,g.el,g.anchor)},A=({el:g,anchor:_},v,I)=>{let x;for(;g&&g!==_;)x=d(g),i(g,v,I),g=x;i(_,v,I)},C=({el:g,anchor:_})=>{let v;for(;g&&g!==_;)v=d(g),s(g),g=v;s(_)},T=(g,_,v,I,x,P,U,L,F)=>{U=U||_.type==="svg",g==null?H(_,v,I,x,P,U,L,F):J(g,_,x,P,U,L,F)},H=(g,_,v,I,x,P,U,L)=>{let F,O;const{type:X,props:V,shapeFlag:Q,transition:se,dirs:he}=g;if(F=g.el=o(g.type,P,V&&V.is,V),Q&8?u(F,g.children):Q&16&&j(g.children,F,null,I,x,P&&X!=="foreignObject",U,L),he&&Wn(g,null,I,"created"),W(F,g,g.scopeId,U,I),V){for(const Ie in V)Ie!=="value"&&!lo(Ie)&&r(F,Ie,null,V[Ie],P,g.children,I,x,me);"value"in V&&r(F,"value",null,V.value),(O=V.onVnodeBeforeMount)&&$t(O,I,g)}he&&Wn(g,null,I,"beforeMount");const xe=lw(x,se);xe&&se.beforeEnter(F),i(F,_,v),((O=V&&V.onVnodeMounted)||xe||he)&&et(()=>{O&&$t(O,I,g),xe&&se.enter(F),he&&Wn(g,null,I,"mounted")},x)},W=(g,_,v,I,x)=>{if(v&&f(g,v),I)for(let P=0;P<I.length;P++)f(g,I[P]);if(x){let P=x.subTree;if(_===P){const U=x.vnode;W(g,U,U.scopeId,U.slotScopeIds,x.parent)}}},j=(g,_,v,I,x,P,U,L,F=0)=>{for(let O=F;O<g.length;O++){const X=g[O]=L?vn(g[O]):Ht(g[O]);m(null,X,_,v,I,x,P,U,L)}},J=(g,_,v,I,x,P,U)=>{const L=_.el=g.el;let{patchFlag:F,dynamicChildren:O,dirs:X}=_;F|=g.patchFlag&16;const V=g.props||Ae,Q=_.props||Ae;let se;v&&jn(v,!1),(se=Q.onVnodeBeforeUpdate)&&$t(se,v,_,g),X&&Wn(_,g,v,"beforeUpdate"),v&&jn(v,!0);const he=x&&_.type!=="foreignObject";if(O?Y(g.dynamicChildren,O,L,v,I,he,P):U||k(g,_,L,null,v,I,he,P,!1),F>0){if(F&16)z(L,_,V,Q,v,I,x);else if(F&2&&V.class!==Q.class&&r(L,"class",null,Q.class,x),F&4&&r(L,"style",V.style,Q.style,x),F&8){const xe=_.dynamicProps;for(let Ie=0;Ie<xe.length;Ie++){const $e=xe[Ie],Et=V[$e],Pi=Q[$e];(Pi!==Et||$e==="value")&&r(L,$e,Et,Pi,x,g.children,v,I,me)}}F&1&&g.children!==_.children&&u(L,_.children)}else!U&&O==null&&z(L,_,V,Q,v,I,x);((se=Q.onVnodeUpdated)||X)&&et(()=>{se&&$t(se,v,_,g),X&&Wn(_,g,v,"updated")},I)},Y=(g,_,v,I,x,P,U)=>{for(let L=0;L<_.length;L++){const F=g[L],O=_[L],X=F.el&&(F.type===nn||!ws(F,O)||F.shapeFlag&70)?h(F.el):v;m(F,O,X,null,I,x,P,U,!0)}},z=(g,_,v,I,x,P,U)=>{if(v!==I){if(v!==Ae)for(const L in v)!lo(L)&&!(L in I)&&r(g,L,v[L],null,U,_.children,x,P,me);for(const L in I){if(lo(L))continue;const F=I[L],O=v[L];F!==O&&L!=="value"&&r(g,L,O,F,U,_.children,x,P,me)}"value"in I&&r(g,"value",v.value,I.value)}},fe=(g,_,v,I,x,P,U,L,F)=>{const O=_.el=g?g.el:a(""),X=_.anchor=g?g.anchor:a("");let{patchFlag:V,dynamicChildren:Q,slotScopeIds:se}=_;se&&(L=L?L.concat(se):se),g==null?(i(O,v,I),i(X,v,I),j(_.children,v,X,x,P,U,L,F)):V>0&&V&64&&Q&&g.dynamicChildren?(Y(g.dynamicChildren,Q,v,x,P,U,L),(_.key!=null||x&&_===x.subTree)&&Hg(g,_,!0)):k(g,_,v,X,x,P,U,L,F)},Oe=(g,_,v,I,x,P,U,L,F)=>{_.slotScopeIds=L,g==null?_.shapeFlag&512?x.ctx.activate(_,v,I,U,F):q(_,v,I,x,P,U,F):M(g,_,F)},q=(g,_,v,I,x,P,U)=>{const L=g.component=vw(g,I,x);if(Rg(g)&&(L.ctx.renderer=N),ww(L),L.asyncDep){if(x&&x.registerDep(L,S),!g.el){const F=L.subTree=ft(pi);b(null,F,_,v)}return}S(L,g,_,v,x,P,U)},M=(g,_,v)=>{const I=_.component=g.component;if(kv(g,_,v))if(I.asyncDep&&!I.asyncResolved){R(I,_,v);return}else I.next=_,wv(I.update),I.update();else _.el=g.el,I.vnode=_},S=(g,_,v,I,x,P,U)=>{const L=()=>{if(g.isMounted){let{next:X,bu:V,u:Q,parent:se,vnode:he}=g,xe=X,Ie;jn(g,!1),X?(X.el=he.el,R(g,X,U)):X=he,V&&co(V),(Ie=X.props&&X.props.onVnodeBeforeUpdate)&&$t(Ie,se,X,he),jn(g,!0);const $e=Ka(g),Et=g.subTree;g.subTree=$e,m(Et,$e,h(Et.el),E(Et),g,x,P),X.el=$e.el,xe===null&&Pv(g,$e.el),Q&&et(Q,x),(Ie=X.props&&X.props.onVnodeUpdated)&&et(()=>$t(Ie,se,X,he),x)}else{let X;const{el:V,props:Q}=_,{bm:se,m:he,parent:xe}=g,Ie=uo(_);if(jn(g,!1),se&&co(se),!Ie&&(X=Q&&Q.onVnodeBeforeMount)&&$t(X,xe,_),jn(g,!0),V&&ae){const $e=()=>{g.subTree=Ka(g),ae(V,g.subTree,g,x,null)};Ie?_.type.__asyncLoader().then(()=>!g.isUnmounted&&$e()):$e()}else{const $e=g.subTree=Ka(g);m(null,$e,v,I,g,x,P),_.el=$e.el}if(he&&et(he,x),!Ie&&(X=Q&&Q.onVnodeMounted)){const $e=_;et(()=>$t(X,xe,$e),x)}(_.shapeFlag&256||xe&&uo(xe.vnode)&&xe.vnode.shapeFlag&256)&&g.a&&et(g.a,x),g.isMounted=!0,_=v=I=null}},F=g.effect=new $c(L,()=>Vc(O),g.scope),O=g.update=()=>F.run();O.id=g.uid,jn(g,!0),O()},R=(g,_,v)=>{_.component=g;const I=g.vnode.props;g.vnode=_,g.next=null,nw(g,_.props,I,v),rw(g,_.children,v),us(),Th(g),hs()},k=(g,_,v,I,x,P,U,L,F=!1)=>{const O=g&&g.children,X=g?g.shapeFlag:0,V=_.children,{patchFlag:Q,shapeFlag:se}=_;if(Q>0){if(Q&128){K(O,V,v,I,x,P,U,L,F);return}else if(Q&256){G(O,V,v,I,x,P,U,L,F);return}}se&8?(X&16&&me(O,x,P),V!==O&&u(v,V)):X&16?se&16?K(O,V,v,I,x,P,U,L,F):me(O,x,P,!0):(X&8&&u(v,""),se&16&&j(V,v,I,x,P,U,L,F))},G=(g,_,v,I,x,P,U,L,F)=>{g=g||Fi,_=_||Fi;const O=g.length,X=_.length,V=Math.min(O,X);let Q;for(Q=0;Q<V;Q++){const se=_[Q]=F?vn(_[Q]):Ht(_[Q]);m(g[Q],se,v,null,x,P,U,L,F)}O>X?me(g,x,P,!0,!1,V):j(_,v,I,x,P,U,L,F,V)},K=(g,_,v,I,x,P,U,L,F)=>{let O=0;const X=_.length;let V=g.length-1,Q=X-1;for(;O<=V&&O<=Q;){const se=g[O],he=_[O]=F?vn(_[O]):Ht(_[O]);if(ws(se,he))m(se,he,v,null,x,P,U,L,F);else break;O++}for(;O<=V&&O<=Q;){const se=g[V],he=_[Q]=F?vn(_[Q]):Ht(_[Q]);if(ws(se,he))m(se,he,v,null,x,P,U,L,F);else break;V--,Q--}if(O>V){if(O<=Q){const se=Q+1,he=se<X?_[se].el:I;for(;O<=Q;)m(null,_[O]=F?vn(_[O]):Ht(_[O]),v,he,x,P,U,L,F),O++}}else if(O>Q)for(;O<=V;)ie(g[O],x,P,!0),O++;else{const se=O,he=O,xe=new Map;for(O=he;O<=Q;O++){const ht=_[O]=F?vn(_[O]):Ht(_[O]);ht.key!=null&&xe.set(ht.key,O)}let Ie,$e=0;const Et=Q-he+1;let Pi=!1,gh=0;const vs=new Array(Et);for(O=0;O<Et;O++)vs[O]=0;for(O=se;O<=V;O++){const ht=g[O];if($e>=Et){ie(ht,x,P,!0);continue}let Ft;if(ht.key!=null)Ft=xe.get(ht.key);else for(Ie=he;Ie<=Q;Ie++)if(vs[Ie-he]===0&&ws(ht,_[Ie])){Ft=Ie;break}Ft===void 0?ie(ht,x,P,!0):(vs[Ft-he]=O+1,Ft>=gh?gh=Ft:Pi=!0,m(ht,_[Ft],v,null,x,P,U,L,F),$e++)}const mh=Pi?cw(vs):Fi;for(Ie=mh.length-1,O=Et-1;O>=0;O--){const ht=he+O,Ft=_[ht],_h=ht+1<X?_[ht+1].el:I;vs[O]===0?m(null,Ft,v,_h,x,P,U,L,F):Pi&&(Ie<0||O!==mh[Ie]?re(Ft,v,_h,2):Ie--)}}},re=(g,_,v,I,x=null)=>{const{el:P,type:U,transition:L,children:F,shapeFlag:O}=g;if(O&6){re(g.component.subTree,_,v,I);return}if(O&128){g.suspense.move(_,v,I);return}if(O&64){U.move(g,_,v,N);return}if(U===nn){i(P,_,v);for(let V=0;V<F.length;V++)re(F[V],_,v,I);i(g.anchor,_,v);return}if(U===Ya){A(g,_,v);return}if(I!==2&&O&1&&L)if(I===0)L.beforeEnter(P),i(P,_,v),et(()=>L.enter(P),x);else{const{leave:V,delayLeave:Q,afterLeave:se}=L,he=()=>i(P,_,v),xe=()=>{V(P,()=>{he(),se&&se()})};Q?Q(P,he,xe):xe()}else i(P,_,v)},ie=(g,_,v,I=!1,x=!1)=>{const{type:P,props:U,ref:L,children:F,dynamicChildren:O,shapeFlag:X,patchFlag:V,dirs:Q}=g;if(L!=null&&jl(L,null,v,g,!0),X&256){_.ctx.deactivate(g);return}const se=X&1&&Q,he=!uo(g);let xe;if(he&&(xe=U&&U.onVnodeBeforeUnmount)&&$t(xe,_,g),X&6)Me(g.component,v,I);else{if(X&128){g.suspense.unmount(v,I);return}se&&Wn(g,null,_,"beforeUnmount"),X&64?g.type.remove(g,_,v,x,N,I):O&&(P!==nn||V>0&&V&64)?me(O,_,v,!1,!0):(P===nn&&V&384||!x&&X&16)&&me(F,_,v),I&&pe(g)}(he&&(xe=U&&U.onVnodeUnmounted)||se)&&et(()=>{xe&&$t(xe,_,g),se&&Wn(g,null,_,"unmounted")},v)},pe=g=>{const{type:_,el:v,anchor:I,transition:x}=g;if(_===nn){ge(v,I);return}if(_===Ya){C(g);return}const P=()=>{s(v),x&&!x.persisted&&x.afterLeave&&x.afterLeave()};if(g.shapeFlag&1&&x&&!x.persisted){const{leave:U,delayLeave:L}=x,F=()=>U(v,P);L?L(g.el,P,F):F()}else P()},ge=(g,_)=>{let v;for(;g!==_;)v=d(g),s(g),g=v;s(_)},Me=(g,_,v)=>{const{bum:I,scope:x,update:P,subTree:U,um:L}=g;I&&co(I),x.stop(),P&&(P.active=!1,ie(U,g,_,v)),L&&et(L,_),et(()=>{g.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},me=(g,_,v,I=!1,x=!1,P=0)=>{for(let U=P;U<g.length;U++)ie(g[U],_,v,I,x)},E=g=>g.shapeFlag&6?E(g.component.subTree):g.shapeFlag&128?g.suspense.next():d(g.anchor||g.el),$=(g,_,v)=>{g==null?_._vnode&&ie(_._vnode,null,null,!0):m(_._vnode||null,g,_,null,null,null,v),Th(),Eg(),_._vnode=g},N={p:m,um:ie,m:re,r:pe,mt:q,mc:j,pc:k,pbc:Y,n:E,o:t};let B,ae;return e&&([B,ae]=e(N)),{render:$,hydrate:B,createApp:ew($,B)}}function jn({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function lw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Hg(t,e,n=!1){const i=t.children,s=e.children;if(Z(i)&&Z(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=vn(s[r]),a.el=o.el),n||Hg(o,a)),a.type===va&&(a.el=o.el)}}function cw(t){const e=t.slice(),n=[0];let i,s,r,o,a;const l=t.length;for(i=0;i<l;i++){const c=t[i];if(c!==0){if(s=n[n.length-1],t[s]<c){e[i]=s,n.push(i);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,t[n[a]]<c?r=a+1:o=a;c<t[n[r]]&&(r>0&&(e[i]=n[r-1]),n[r]=i)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}const uw=t=>t.__isTeleport,nn=Symbol.for("v-fgt"),va=Symbol.for("v-txt"),pi=Symbol.for("v-cmt"),Ya=Symbol.for("v-stc"),$s=[];let Pt=null;function hw(t=!1){$s.push(Pt=t?null:[])}function dw(){$s.pop(),Pt=$s[$s.length-1]||null}let nr=1;function $h(t){nr+=t}function Wg(t){return t.dynamicChildren=nr>0?Pt||Fi:null,dw(),nr>0&&Pt&&Pt.push(t),t}function YD(t,e,n,i,s,r){return Wg(Vg(t,e,n,i,s,r,!0))}function fw(t,e,n,i,s){return Wg(ft(t,e,n,i,s,!0))}function Vl(t){return t?t.__v_isVNode===!0:!1}function ws(t,e){return t.type===e.type&&t.key===e.key}const wa="__vInternal",jg=({key:t})=>t??null,fo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ue(t)||at(t)||oe(t)?{i:yt,r:t,k:e,f:!!n}:t:null);function Vg(t,e=null,n=null,i=0,s=null,r=t===nn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&jg(e),ref:e&&fo(e),scopeId:xg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:yt};return a?(Kc(l,n),r&128&&t.normalize(l)):n&&(l.shapeFlag|=Ue(n)?8:16),nr>0&&!o&&Pt&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Pt.push(l),l}const ft=pw;function pw(t,e=null,n=null,i=0,s=null,r=!1){if((!t||t===Av)&&(t=pi),Vl(t)){const a=Qi(t,e,!0);return n&&Kc(a,n),nr>0&&!r&&Pt&&(a.shapeFlag&6?Pt[Pt.indexOf(t)]=a:Pt.push(a)),a.patchFlag|=-2,a}if(xw(t)&&(t=t.__vccOpts),e){e=gw(e);let{class:a,style:l}=e;a&&!Ue(a)&&(e.class=Lc(a)),ke(l)&&(pg(l)&&!Z(l)&&(l=Ge({},l)),e.style=Nc(l))}const o=Ue(t)?1:Ov(t)?128:uw(t)?64:ke(t)?4:oe(t)?2:0;return Vg(t,e,n,i,s,o,r,!0)}function gw(t){return t?pg(t)||wa in t?Ge({},t):t:null}function Qi(t,e,n=!1){const{props:i,ref:s,patchFlag:r,children:o}=t,a=e?_w(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&jg(a),ref:e&&e.ref?n&&s?Z(s)?s.concat(fo(e)):[s,fo(e)]:fo(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==nn?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Qi(t.ssContent),ssFallback:t.ssFallback&&Qi(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function mw(t=" ",e=0){return ft(va,null,t,e)}function XD(t="",e=!1){return e?(hw(),fw(pi,null,t)):ft(pi,null,t)}function Ht(t){return t==null||typeof t=="boolean"?ft(pi):Z(t)?ft(nn,null,t.slice()):typeof t=="object"?vn(t):ft(va,null,String(t))}function vn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Qi(t)}function Kc(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(Z(e))n=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),Kc(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(wa in e)?e._ctx=yt:s===3&&yt&&(yt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else oe(e)?(e={default:e,_ctx:yt},n=32):(e=String(e),i&64?(n=16,e=[mw(e)]):n=8);t.children=e,t.shapeFlag|=n}function _w(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=Lc([e.class,i.class]));else if(s==="style")e.style=Nc([e.style,i.style]);else if(ha(s)){const r=e[s],o=i[s];o&&r!==o&&!(Z(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=i[s])}return e}function $t(t,e,n,i=null){Ot(t,e,7,[n,i])}const yw=Ng();let bw=0;function vw(t,e,n){const i=t.type,s=(e?e.appContext:t.appContext)||yw,r={uid:bw++,vnode:t,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Vb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fg(i,s),emitsOptions:Sg(i,s),emit:null,emitted:null,propsDefaults:Ae,inheritAttrs:i.inheritAttrs,ctx:Ae,data:Ae,props:Ae,attrs:Ae,slots:Ae,refs:Ae,setupState:Ae,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Cv.bind(null,r),t.ce&&t.ce(r),r}let Ke=null,Gc,Ai,Bh="__VUE_INSTANCE_SETTERS__";(Ai=Ml()[Bh])||(Ai=Ml()[Bh]=[]),Ai.push(t=>Ke=t),Gc=t=>{Ai.length>1?Ai.forEach(e=>e(t)):Ai[0](t)};const Ji=t=>{Gc(t),t.scope.on()},ci=()=>{Ke&&Ke.scope.off(),Gc(null)};function zg(t){return t.vnode.shapeFlag&4}let ir=!1;function ww(t,e=!1){ir=e;const{props:n,children:i}=t.vnode,s=zg(t);tw(t,n,s,e),sw(t,i);const r=s?Iw(t,e):void 0;return ir=!1,r}function Iw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=gg(new Proxy(t.ctx,Kv));const{setup:i}=n;if(i){const s=t.setupContext=i.length>1?Cw(t):null;Ji(t),us();const r=An(i,t,0,[t.props,s]);if(hs(),ci(),Qp(r)){if(r.then(ci,ci),e)return r.then(o=>{Uh(t,o,e)}).catch(o=>{_a(o,t,0)});t.asyncDep=r}else Uh(t,r,e)}else qg(t,e)}function Uh(t,e,n){oe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ke(e)&&(t.setupState=bg(e)),qg(t,n)}let Hh;function qg(t,e,n){const i=t.type;if(!t.render){if(!e&&Hh&&!i.render){const s=i.template||zc(t).template;if(s){const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=i,c=Ge(Ge({isCustomElement:r,delimiters:a},o),l);i.render=Hh(s,c)}}t.render=i.render||jt}{Ji(t),us();try{Gv(t)}finally{hs(),ci()}}}function Ew(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return ot(t,"get","$attrs"),e[n]}}))}function Cw(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return Ew(t)},slots:t.slots,emit:t.emit,expose:e}}function Ia(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(bg(gg(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Fs)return Fs[n](t)},has(e,n){return n in e||n in Fs}}))}function Sw(t,e=!0){return oe(t)?t.displayName||t.name:t.name||e&&t.__name}function xw(t){return oe(t)&&"__vccOpts"in t}const Tt=(t,e)=>yv(t,e,ir);function Kg(t,e,n){const i=arguments.length;return i===2?ke(e)&&!Z(e)?Vl(e)?ft(t,null,[e]):ft(t,e):ft(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Vl(n)&&(n=[n]),ft(t,e,n))}const Tw=Symbol.for("v-scx"),kw=()=>Vt(Tw),Pw="3.3.13",Aw="http://www.w3.org/2000/svg",ei=typeof document<"u"?document:null,Wh=ei&&ei.createElement("template"),Rw={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const s=e?ei.createElementNS(Aw,t):ei.createElement(t,n?{is:n}:void 0);return t==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:t=>ei.createTextNode(t),createComment:t=>ei.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ei.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,s,r){const o=n?n.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{Wh.innerHTML=i?`<svg>${t}</svg>`:t;const a=Wh.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Ow=Symbol("_vtc");function Mw(t,e,n){const i=t[Ow];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Dw=Symbol("_vod"),Nw=Symbol("");function Lw(t,e,n){const i=t.style,s=Ue(n);if(n&&!s){if(e&&!Ue(e))for(const r in e)n[r]==null&&zl(i,r,"");for(const r in n)zl(i,r,n[r])}else{const r=i.display;if(s){if(e!==n){const o=i[Nw];o&&(n+=";"+o),i.cssText=n}}else e&&t.removeAttribute("style");Dw in t&&(i.display=r)}}const jh=/\s*!important$/;function zl(t,e,n){if(Z(n))n.forEach(i=>zl(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=Fw(t,e);jh.test(n)?t.setProperty(cs(i),n.replace(jh,""),"important"):t[i]=n}}const Vh=["Webkit","Moz","ms"],Xa={};function Fw(t,e){const n=Xa[e];if(n)return n;let i=Kt(e);if(i!=="filter"&&i in t)return Xa[e]=i;i=pa(i);for(let s=0;s<Vh.length;s++){const r=Vh[s]+i;if(r in t)return Xa[e]=r}return e}const zh="http://www.w3.org/1999/xlink";function $w(t,e,n,i,s){if(i&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(zh,e.slice(6,e.length)):t.setAttributeNS(zh,e,n);else{const r=Hb(e);n==null||r&&!eg(n)?t.removeAttribute(e):t.setAttribute(e,r?"":n)}}function Bw(t,e,n,i,s,r,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,s,r),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=n;const c=a==="OPTION"?t.getAttribute("value"):t.value,u=n??"";c!==u&&(t.value=u),n==null&&t.removeAttribute(e);return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=eg(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function ti(t,e,n,i){t.addEventListener(e,n,i)}function Uw(t,e,n,i){t.removeEventListener(e,n,i)}const qh=Symbol("_vei");function Hw(t,e,n,i,s=null){const r=t[qh]||(t[qh]={}),o=r[e];if(i&&o)o.value=i;else{const[a,l]=Ww(e);if(i){const c=r[e]=zw(i,s);ti(t,a,c,l)}else o&&(Uw(t,a,o,l),r[e]=void 0)}}const Kh=/(?:Once|Passive|Capture)$/;function Ww(t){let e;if(Kh.test(t)){e={};let i;for(;i=t.match(Kh);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):cs(t.slice(2)),e]}let Qa=0;const jw=Promise.resolve(),Vw=()=>Qa||(jw.then(()=>Qa=0),Qa=Date.now());function zw(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Ot(qw(i,n.value),e,5,[i])};return n.value=t,n.attached=Vw(),n}function qw(t,e){if(Z(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const Gh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Kw=(t,e,n,i,s=!1,r,o,a,l)=>{e==="class"?Mw(t,i,s):e==="style"?Lw(t,n,i):ha(e)?Oc(e)||Hw(t,e,n,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Gw(t,e,i,s))?Bw(t,e,i,r,o,a,l):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),$w(t,e,i,s))};function Gw(t,e,n,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&Gh(e)&&oe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Gh(e)&&Ue(n)?!1:e in t}const xo=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Z(e)?n=>co(e,n):e};function Yw(t){t.target.composing=!0}function Yh(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ji=Symbol("_assign"),QD={created(t,{modifiers:{lazy:e,trim:n,number:i}},s){t[ji]=xo(s);const r=i||s.props&&s.props.type==="number";ti(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),r&&(a=wo(a)),t[ji](a)}),n&&ti(t,"change",()=>{t.value=t.value.trim()}),e||(ti(t,"compositionstart",Yw),ti(t,"compositionend",Yh),ti(t,"change",Yh))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:s}},r){if(t[ji]=xo(r),t.composing)return;const o=s||t.type==="number"?wo(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||i&&t.value.trim()===a)||(t.value=a))}},JD={deep:!0,created(t,{value:e,modifiers:{number:n}},i){const s=da(e);ti(t,"change",()=>{const r=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?wo(To(o)):To(o));t[ji](t.multiple?s?new Set(r):r:r[0])}),t[ji]=xo(i)},mounted(t,{value:e}){Xh(t,e)},beforeUpdate(t,e,n){t[ji]=xo(n)},updated(t,{value:e}){Xh(t,e)}};function Xh(t,e){const n=t.multiple;if(!(n&&!Z(e)&&!da(e))){for(let i=0,s=t.options.length;i<s;i++){const r=t.options[i],o=To(r);if(n)Z(e)?r.selected=jb(e,o)>-1:r.selected=e.has(o);else if(ga(To(r),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function To(t){return"_value"in t?t._value:t.value}const Xw=Ge({patchProp:Kw},Rw);let Qh;function Qw(){return Qh||(Qh=ow(Xw))}const ZD=(...t)=>{const e=Qw().createApp(...t),{mount:n}=e;return e.mount=i=>{const s=Jw(i);if(!s)return;const r=e._component;!oe(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function Jw(t){return Ue(t)?document.querySelector(t):t}function Zw(){return Gg().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Gg(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const e0=typeof Proxy=="function",t0="devtools-plugin:setup",n0="plugin:settings:set";let Ri,ql;function i0(){var t;return Ri!==void 0||(typeof window<"u"&&window.performance?(Ri=!0,ql=window.performance):typeof global<"u"&&(!((t=global.perf_hooks)===null||t===void 0)&&t.performance)?(Ri=!0,ql=global.perf_hooks.performance):Ri=!1),Ri}function s0(){return i0()?ql.now():Date.now()}class r0{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const i={};if(e.settings)for(const o in e.settings){const a=e.settings[o];i[o]=a.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let r=Object.assign({},i);try{const o=localStorage.getItem(s),a=JSON.parse(o);Object.assign(r,a)}catch{}this.fallbacks={getSettings(){return r},setSettings(o){try{localStorage.setItem(s,JSON.stringify(o))}catch{}r=o},now(){return s0()}},n&&n.on(n0,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function o0(t,e){const n=t,i=Gg(),s=Zw(),r=e0&&n.enableEarlyProxy;if(s&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!r))s.emit(t0,t,e);else{const o=r?new r0(n,s):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var Yg="store";function eN(t){return t===void 0&&(t=null),Vt(t!==null?t:Yg)}function ds(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function a0(t){return t!==null&&typeof t=="object"}function l0(t){return t&&typeof t.then=="function"}function c0(t,e){return function(){return t(e)}}function Xg(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var i=e.indexOf(t);i>-1&&e.splice(i,1)}}function Qg(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;Ea(t,n,[],t._modules.root,!0),Yc(t,n,e)}function Yc(t,e,n){var i=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var s=t._wrappedGetters,r={};ds(s,function(o,a){r[a]=c0(o,t),Object.defineProperty(t.getters,a,{get:function(){return r[a]()},enumerable:!0})}),t._state=Er({data:e}),t.strict&&p0(t),i&&n&&t._withCommit(function(){i.data=null})}function Ea(t,e,n,i,s){var r=!n.length,o=t._modules.getNamespace(n);if(i.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=i),!r&&!s){var a=Xc(e,n.slice(0,-1)),l=n[n.length-1];t._withCommit(function(){a[l]=i.state})}var c=i.context=u0(t,o,n);i.forEachMutation(function(u,h){var d=o+h;h0(t,d,u,c)}),i.forEachAction(function(u,h){var d=u.root?h:o+h,f=u.handler||u;d0(t,d,f,c)}),i.forEachGetter(function(u,h){var d=o+h;f0(t,d,u,c)}),i.forEachChild(function(u,h){Ea(t,e,n.concat(h),u,s)})}function u0(t,e,n){var i=e==="",s={dispatch:i?t.dispatch:function(r,o,a){var l=ko(r,o,a),c=l.payload,u=l.options,h=l.type;return(!u||!u.root)&&(h=e+h),t.dispatch(h,c)},commit:i?t.commit:function(r,o,a){var l=ko(r,o,a),c=l.payload,u=l.options,h=l.type;(!u||!u.root)&&(h=e+h),t.commit(h,c,u)}};return Object.defineProperties(s,{getters:{get:i?function(){return t.getters}:function(){return Jg(t,e)}},state:{get:function(){return Xc(t.state,n)}}}),s}function Jg(t,e){if(!t._makeLocalGettersCache[e]){var n={},i=e.length;Object.keys(t.getters).forEach(function(s){if(s.slice(0,i)===e){var r=s.slice(i);Object.defineProperty(n,r,{get:function(){return t.getters[s]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function h0(t,e,n,i){var s=t._mutations[e]||(t._mutations[e]=[]);s.push(function(o){n.call(t,i.state,o)})}function d0(t,e,n,i){var s=t._actions[e]||(t._actions[e]=[]);s.push(function(o){var a=n.call(t,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:t.getters,rootState:t.state},o);return l0(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(l){throw t._devtoolHook.emit("vuex:error",l),l}):a})}function f0(t,e,n,i){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(r){return n(i.state,i.getters,r.state,r.getters)})}function p0(t){Wi(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function Xc(t,e){return e.reduce(function(n,i){return n[i]},t)}function ko(t,e,n){return a0(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var g0="vuex bindings",Jh="vuex:mutations",Ja="vuex:actions",Oi="vuex",m0=0;function _0(t,e){o0({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[g0]},function(n){n.addTimelineLayer({id:Jh,label:"Vuex Mutations",color:Zh}),n.addTimelineLayer({id:Ja,label:"Vuex Actions",color:Zh}),n.addInspector({id:Oi,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(i){if(i.app===t&&i.inspectorId===Oi)if(i.filter){var s=[];nm(s,e._modules.root,i.filter,""),i.rootNodes=s}else i.rootNodes=[tm(e._modules.root,"")]}),n.on.getInspectorState(function(i){if(i.app===t&&i.inspectorId===Oi){var s=i.nodeId;Jg(e,s),i.state=v0(I0(e._modules,s),s==="root"?e.getters:e._makeLocalGettersCache,s)}}),n.on.editInspectorState(function(i){if(i.app===t&&i.inspectorId===Oi){var s=i.nodeId,r=i.path;s!=="root"&&(r=s.split("/").filter(Boolean).concat(r)),e._withCommit(function(){i.set(e._state.data,r,i.state.value)})}}),e.subscribe(function(i,s){var r={};i.payload&&(r.payload=i.payload),r.state=s,n.notifyComponentUpdate(),n.sendInspectorTree(Oi),n.sendInspectorState(Oi),n.addTimelineEvent({layerId:Jh,event:{time:Date.now(),title:i.type,data:r}})}),e.subscribeAction({before:function(i,s){var r={};i.payload&&(r.payload=i.payload),i._id=m0++,i._time=Date.now(),r.state=s,n.addTimelineEvent({layerId:Ja,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:r}})},after:function(i,s){var r={},o=Date.now()-i._time;r.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},i.payload&&(r.payload=i.payload),r.state=s,n.addTimelineEvent({layerId:Ja,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:r}})}})})}var Zh=8702998,y0=6710886,b0=16777215,Zg={label:"namespaced",textColor:b0,backgroundColor:y0};function em(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function tm(t,e){return{id:e||"root",label:em(e),tags:t.namespaced?[Zg]:[],children:Object.keys(t._children).map(function(n){return tm(t._children[n],e+n+"/")})}}function nm(t,e,n,i){i.includes(n)&&t.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:e.namespaced?[Zg]:[]}),Object.keys(e._children).forEach(function(s){nm(t,e._children[s],n,i+s+"/")})}function v0(t,e,n){e=n==="root"?e:e[n];var i=Object.keys(e),s={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(i.length){var r=w0(e);s.getters=Object.keys(r).map(function(o){return{key:o.endsWith("/")?em(o):o,editable:!1,value:Kl(function(){return r[o]})}})}return s}function w0(t){var e={};return Object.keys(t).forEach(function(n){var i=n.split("/");if(i.length>1){var s=e,r=i.pop();i.forEach(function(o){s[o]||(s[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),s=s[o]._custom.value}),s[r]=Kl(function(){return t[n]})}else e[n]=Kl(function(){return t[n]})}),e}function I0(t,e){var n=e.split("/").filter(function(i){return i});return n.reduce(function(i,s,r){var o=i[s];if(!o)throw new Error('Missing module "'+s+'" for path "'+e+'".');return r===n.length-1?o:o._children},e==="root"?t:t.root._children)}function Kl(t){try{return t()}catch(e){return e}}var Lt=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var i=e.state;this.state=(typeof i=="function"?i():i)||{}},im={namespaced:{configurable:!0}};im.namespaced.get=function(){return!!this._rawModule.namespaced};Lt.prototype.addChild=function(e,n){this._children[e]=n};Lt.prototype.removeChild=function(e){delete this._children[e]};Lt.prototype.getChild=function(e){return this._children[e]};Lt.prototype.hasChild=function(e){return e in this._children};Lt.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Lt.prototype.forEachChild=function(e){ds(this._children,e)};Lt.prototype.forEachGetter=function(e){this._rawModule.getters&&ds(this._rawModule.getters,e)};Lt.prototype.forEachAction=function(e){this._rawModule.actions&&ds(this._rawModule.actions,e)};Lt.prototype.forEachMutation=function(e){this._rawModule.mutations&&ds(this._rawModule.mutations,e)};Object.defineProperties(Lt.prototype,im);var Ci=function(e){this.register([],e,!1)};Ci.prototype.get=function(e){return e.reduce(function(n,i){return n.getChild(i)},this.root)};Ci.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(i,s){return n=n.getChild(s),i+(n.namespaced?s+"/":"")},"")};Ci.prototype.update=function(e){sm([],this.root,e)};Ci.prototype.register=function(e,n,i){var s=this;i===void 0&&(i=!0);var r=new Lt(n,i);if(e.length===0)this.root=r;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],r)}n.modules&&ds(n.modules,function(a,l){s.register(e.concat(l),a,i)})};Ci.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),i=e[e.length-1],s=n.getChild(i);s&&s.runtime&&n.removeChild(i)};Ci.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),i=e[e.length-1];return n?n.hasChild(i):!1};function sm(t,e,n){if(e.update(n),n.modules)for(var i in n.modules){if(!e.getChild(i))return;sm(t.concat(i),e.getChild(i),n.modules[i])}}function tN(t){return new ct(t)}var ct=function(e){var n=this;e===void 0&&(e={});var i=e.plugins;i===void 0&&(i=[]);var s=e.strict;s===void 0&&(s=!1);var r=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Ci(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=r;var o=this,a=this,l=a.dispatch,c=a.commit;this.dispatch=function(d,f){return l.call(o,d,f)},this.commit=function(d,f,p){return c.call(o,d,f,p)},this.strict=s;var u=this._modules.root.state;Ea(this,u,[],this._modules.root),Yc(this,u),i.forEach(function(h){return h(n)})},Qc={state:{configurable:!0}};ct.prototype.install=function(e,n){e.provide(n||Yg,this),e.config.globalProperties.$store=this;var i=this._devtools!==void 0?this._devtools:!1;i&&_0(e,this)};Qc.state.get=function(){return this._state.data};Qc.state.set=function(t){};ct.prototype.commit=function(e,n,i){var s=this,r=ko(e,n,i),o=r.type,a=r.payload,l={type:o,payload:a},c=this._mutations[o];c&&(this._withCommit(function(){c.forEach(function(h){h(a)})}),this._subscribers.slice().forEach(function(u){return u(l,s.state)}))};ct.prototype.dispatch=function(e,n){var i=this,s=ko(e,n),r=s.type,o=s.payload,a={type:r,payload:o},l=this._actions[r];if(l){try{this._actionSubscribers.slice().filter(function(u){return u.before}).forEach(function(u){return u.before(a,i.state)})}catch{}var c=l.length>1?Promise.all(l.map(function(u){return u(o)})):l[0](o);return new Promise(function(u,h){c.then(function(d){try{i._actionSubscribers.filter(function(f){return f.after}).forEach(function(f){return f.after(a,i.state)})}catch{}u(d)},function(d){try{i._actionSubscribers.filter(function(f){return f.error}).forEach(function(f){return f.error(a,i.state,d)})}catch{}h(d)})})}};ct.prototype.subscribe=function(e,n){return Xg(e,this._subscribers,n)};ct.prototype.subscribeAction=function(e,n){var i=typeof e=="function"?{before:e}:e;return Xg(i,this._actionSubscribers,n)};ct.prototype.watch=function(e,n,i){var s=this;return Wi(function(){return e(s.state,s.getters)},n,Object.assign({},i))};ct.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};ct.prototype.registerModule=function(e,n,i){i===void 0&&(i={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),Ea(this,this.state,e,this._modules.get(e),i.preserveState),Yc(this,this.state)};ct.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var i=Xc(n.state,e.slice(0,-1));delete i[e[e.length-1]]}),Qg(this)};ct.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};ct.prototype.hotUpdate=function(e){this._modules.update(e),Qg(this,!0)};ct.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(ct.prototype,Qc);var ed={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D=function(t,e){if(!t)throw fs(e)},fs=function(t){return new Error("Firebase Database ("+rm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},E0=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=t[n++],o=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},Jc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=r>>2,h=(r&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),i.push(n[u],n[h],n[d],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(om(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):E0(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||a==null||c==null||h==null)throw new C0;const d=r<<2|a>>4;if(i.push(d),c!==64){const f=a<<4&240|c>>2;if(i.push(f),h!==64){const p=c<<6&192|h;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class C0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const am=function(t){const e=om(t);return Jc.encodeByteArray(e,!0)},Po=function(t){return am(t).replace(/\./g,"")},Ao=function(t){try{return Jc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t){return lm(void 0,t)}function lm(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!x0(n)||(t[n]=lm(t[n],e[n]));return t}function x0(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=()=>T0().__FIREBASE_DEFAULTS__,P0=()=>{if(typeof process>"u"||typeof ed>"u")return;const t=ed.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},A0=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ao(t[1]);return e&&JSON.parse(e)},Zc=()=>{try{return k0()||P0()||A0()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cm=t=>{var e,n;return(n=(e=Zc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},R0=t=>{const e=cm(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},um=()=>{var t;return(t=Zc())===null||t===void 0?void 0:t.config},hm=t=>{var e;return(e=Zc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Po(JSON.stringify(n)),Po(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eu(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function dm(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fm(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M0(){const t=Qe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function pm(){return rm.NODE_ADMIN===!0}function gm(){try{return typeof indexedDB=="object"}catch{return!1}}function mm(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}function D0(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="FirebaseError";class Xt extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=N0,Object.setPrototypeOf(this,Xt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Si.prototype.create)}}class Si{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?L0(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Xt(s,a,i)}}function L0(t,e){return t.replace(F0,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const F0=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t){return JSON.parse(t)}function je(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m=function(t){let e={},n={},i={},s="";try{const r=t.split(".");e=sr(Ao(r[0])||""),n=sr(Ao(r[1])||""),s=r[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:s}},$0=function(t){const e=_m(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},B0=function(t){const e=_m(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Zi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Gl(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ro(t,e,n){const i={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=e.call(n,t[s],s,t));return i}function rr(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],o=e[s];if(td(r)&&td(o)){if(!rr(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function td(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)i[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)i[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=(d<<1|d>>>31)&4294967295}let s=this.chain_[0],r=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^r&(o^a),u=1518500249):(c=r^o^a,u=1859775393):h<60?(c=r&o|a&(r|o),u=2400959708):(c=r^o^a,u=3395469782);const d=(s<<5|s>>>27)+c+l+u+i[h]&4294967295;l=a,a=o,o=(r<<30|r>>>2)&4294967295,r=s,s=d}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let s=0;const r=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(r[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(r),o=0;break}}else for(;s<n;)if(r[o]=e[s],++o,++s,o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let r=24;r>=0;r-=8)e[i]=this.chain_[s]>>r&255,++i;return e}}function H0(t,e){const n=new W0(t,e);return n.subscribe.bind(n)}class W0{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");j0(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Za),s.error===void 0&&(s.error=Za),s.complete===void 0&&(s.complete=Za);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function j0(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Za(){}function tu(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);if(s>=55296&&s<=56319){const r=s-55296;i++,D(i<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(i)-56320;s=65536+(r<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Sa=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=1e3,q0=2,K0=4*60*60*1e3,G0=.5;function nd(t,e=z0,n=q0){const i=e*Math.pow(n,t),s=Math.round(G0*i*(Math.random()-.5)*2);return Math.min(K0,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t){return t&&t._delegate?t._delegate:t}class Dt{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Ca;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Q0(e))try{this.getOrInitializeService({instanceIdentifier:Gn})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=Gn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gn){return this.instances.has(e)}getOptions(e=Gn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:X0(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Gn){return this.component?this.component.multipleInstances?e:Gn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function X0(t){return t===Gn?void 0:t}function Q0(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Y0(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const Z0={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},eI=Ee.INFO,tI={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},nI=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=tI[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xa{constructor(e){this.name=e,this._logLevel=eI,this._logHandler=nI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Z0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const iI=(t,e)=>e.some(n=>t instanceof n);let id,sd;function sI(){return id||(id=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rI(){return sd||(sd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ym=new WeakMap,Yl=new WeakMap,bm=new WeakMap,el=new WeakMap,nu=new WeakMap;function oI(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Rn(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ym.set(n,t)}).catch(()=>{}),nu.set(e,t),e}function aI(t){if(Yl.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});Yl.set(t,e)}let Xl={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lI(t){Xl=t(Xl)}function cI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(tl(this),e,...n);return bm.set(i,e.sort?e.sort():[e]),Rn(i)}:rI().includes(t)?function(...e){return t.apply(tl(this),e),Rn(ym.get(this))}:function(...e){return Rn(t.apply(tl(this),e))}}function uI(t){return typeof t=="function"?cI(t):(t instanceof IDBTransaction&&aI(t),iI(t,sI())?new Proxy(t,Xl):t)}function Rn(t){if(t instanceof IDBRequest)return oI(t);if(el.has(t))return el.get(t);const e=uI(t);return e!==t&&(el.set(t,e),nu.set(e,t)),e}const tl=t=>nu.get(t);function hI(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(t,e),a=Rn(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Rn(o.result),l.oldVersion,l.newVersion,Rn(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const dI=["get","getKey","getAll","getAllKeys","count"],fI=["put","add","delete","clear"],nl=new Map;function rd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nl.get(e))return nl.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=fI.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||dI.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return nl.set(e,r),r}lI(t=>({...t,get:(e,n,i)=>rd(e,n)||t.get(e,n,i),has:(e,n)=>!!rd(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gI(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function gI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ql="@firebase/app",od="0.9.25";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=new xa("@firebase/app"),mI="@firebase/app-compat",_I="@firebase/analytics-compat",yI="@firebase/analytics",bI="@firebase/app-check-compat",vI="@firebase/app-check",wI="@firebase/auth",II="@firebase/auth-compat",EI="@firebase/database",CI="@firebase/database-compat",SI="@firebase/functions",xI="@firebase/functions-compat",TI="@firebase/installations",kI="@firebase/installations-compat",PI="@firebase/messaging",AI="@firebase/messaging-compat",RI="@firebase/performance",OI="@firebase/performance-compat",MI="@firebase/remote-config",DI="@firebase/remote-config-compat",NI="@firebase/storage",LI="@firebase/storage-compat",FI="@firebase/firestore",$I="@firebase/firestore-compat",BI="firebase",UI="10.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl="[DEFAULT]",HI={[Ql]:"fire-core",[mI]:"fire-core-compat",[yI]:"fire-analytics",[_I]:"fire-analytics-compat",[vI]:"fire-app-check",[bI]:"fire-app-check-compat",[wI]:"fire-auth",[II]:"fire-auth-compat",[EI]:"fire-rtdb",[CI]:"fire-rtdb-compat",[SI]:"fire-fn",[xI]:"fire-fn-compat",[TI]:"fire-iid",[kI]:"fire-iid-compat",[PI]:"fire-fcm",[AI]:"fire-fcm-compat",[RI]:"fire-perf",[OI]:"fire-perf-compat",[MI]:"fire-rc",[DI]:"fire-rc-compat",[NI]:"fire-gcs",[LI]:"fire-gcs-compat",[FI]:"fire-fst",[$I]:"fire-fst-compat","fire-js":"fire-js",[BI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new Map,Zl=new Map;function WI(t,e){try{t.container.addComponent(e)}catch(n){gi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gt(t){const e=t.name;if(Zl.has(e))return gi.debug(`There were multiple attempts to register component ${e}.`),!1;Zl.set(e,t);for(const n of Oo.values())WI(n,t);return!0}function xi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},On=new Si("app","Firebase",jI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Dt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=UI;function zI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Jl,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw On.create("bad-app-name",{appName:String(s)});if(n||(n=um()),!n)throw On.create("no-options");const r=Oo.get(s);if(r){if(rr(n,r.options)&&rr(i,r.config))return r;throw On.create("duplicate-app",{appName:s})}const o=new J0(s);for(const l of Zl.values())o.addComponent(l);const a=new VI(n,i,o);return Oo.set(s,a),a}function iu(t=Jl){const e=Oo.get(t);if(!e&&t===Jl&&um())return zI();if(!e)throw On.create("no-app",{appName:t});return e}function vt(t,e,n){var i;let s=(i=HI[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gi.warn(a.join(" "));return}Gt(new Dt(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="firebase-heartbeat-database",KI=1,or="firebase-heartbeat-store";let il=null;function vm(){return il||(il=hI(qI,KI,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(or)}}}).catch(t=>{throw On.create("idb-open",{originalErrorMessage:t.message})})),il}async function GI(t){try{return await(await vm()).transaction(or).objectStore(or).get(wm(t))}catch(e){if(e instanceof Xt)gi.warn(e.message);else{const n=On.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gi.warn(n.message)}}}async function ad(t,e){try{const i=(await vm()).transaction(or,"readwrite");await i.objectStore(or).put(e,wm(t)),await i.done}catch(n){if(n instanceof Xt)gi.warn(n.message);else{const i=On.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gi.warn(i.message)}}}function wm(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=1024,XI=30*24*60*60*1e3;class QI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ld();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=XI}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ld(),{heartbeatsToSend:i,unsentEntries:s}=JI(this._heartbeatsCache.heartbeats),r=Po(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function ld(){return new Date().toISOString().substring(0,10)}function JI(t,e=YI){const n=[];let i=t.slice();for(const s of t){const r=n.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),cd(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),cd(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class ZI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gm()?mm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ad(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ad(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function cd(t){return Po(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t){Gt(new Dt("platform-logger",e=>new pI(e),"PRIVATE")),Gt(new Dt("heartbeat",e=>new QI(e),"PRIVATE")),vt(Ql,od,t),vt(Ql,od,"esm2017"),vt("fire-js","")}eE("");var tE="firebase",nE="10.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vt(tE,nE,"app");const iE=(t,e)=>e.some(n=>t instanceof n);let ud,hd;function sE(){return ud||(ud=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rE(){return hd||(hd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Im=new WeakMap,ec=new WeakMap,Em=new WeakMap,sl=new WeakMap,su=new WeakMap;function oE(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Mn(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Im.set(n,t)}).catch(()=>{}),su.set(e,t),e}function aE(t){if(ec.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});ec.set(t,e)}let tc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ec.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Em.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lE(t){tc=t(tc)}function cE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(rl(this),e,...n);return Em.set(i,e.sort?e.sort():[e]),Mn(i)}:rE().includes(t)?function(...e){return t.apply(rl(this),e),Mn(Im.get(this))}:function(...e){return Mn(t.apply(rl(this),e))}}function uE(t){return typeof t=="function"?cE(t):(t instanceof IDBTransaction&&aE(t),iE(t,sE())?new Proxy(t,tc):t)}function Mn(t){if(t instanceof IDBRequest)return oE(t);if(sl.has(t))return sl.get(t);const e=uE(t);return e!==t&&(sl.set(t,e),su.set(e,t)),e}const rl=t=>su.get(t);function hE(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(t,e),a=Mn(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Mn(o.result),l.oldVersion,l.newVersion,Mn(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",()=>s())}).catch(()=>{}),a}const dE=["get","getKey","getAll","getAllKeys","count"],fE=["put","add","delete","clear"],ol=new Map;function dd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ol.get(e))return ol.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=fE.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||dE.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return ol.set(e,r),r}lE(t=>({...t,get:(e,n,i)=>dd(e,n)||t.get(e,n,i),has:(e,n)=>!!dd(e,n)||t.has(e,n)}));const Cm="@firebase/installations",ru="0.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=1e4,xm=`w:${ru}`,Tm="FIS_v2",pE="https://firebaseinstallations.googleapis.com/v1",gE=60*60*1e3,mE="installations",_E="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},mi=new Si(mE,_E,yE);function km(t){return t instanceof Xt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm({projectId:t}){return`${pE}/projects/${t}/installations`}function Am(t){return{token:t.token,requestStatus:2,expiresIn:vE(t.expiresIn),creationTime:Date.now()}}async function Rm(t,e){const i=(await e.json()).error;return mi.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Om({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function bE(t,{refreshToken:e}){const n=Om(t);return n.append("Authorization",wE(e)),n}async function Mm(t){const e=await t();return e.status>=500&&e.status<600?t():e}function vE(t){return Number(t.replace("s","000"))}function wE(t){return`${Tm} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IE({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=Pm(t),s=Om(t),r=e.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:Tm,appId:t.appId,sdkVersion:xm},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Mm(()=>fetch(i,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:Am(c.authToken)}}else throw await Rm("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=/^[cdef][\w-]{21}$/,nc="";function SE(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=xE(t);return CE.test(n)?n:nc}catch{return nc}}function xE(t){return EE(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm=new Map;function Lm(t,e){const n=Ta(t);Fm(n,e),TE(n,e)}function Fm(t,e){const n=Nm.get(t);if(n)for(const i of n)i(e)}function TE(t,e){const n=kE();n&&n.postMessage({key:t,fid:e}),PE()}let ii=null;function kE(){return!ii&&"BroadcastChannel"in self&&(ii=new BroadcastChannel("[Firebase] FID Change"),ii.onmessage=t=>{Fm(t.data.key,t.data.fid)}),ii}function PE(){Nm.size===0&&ii&&(ii.close(),ii=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="firebase-installations-database",RE=1,_i="firebase-installations-store";let al=null;function ou(){return al||(al=hE(AE,RE,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_i)}}})),al}async function Mo(t,e){const n=Ta(t),s=(await ou()).transaction(_i,"readwrite"),r=s.objectStore(_i),o=await r.get(n);return await r.put(e,n),await s.done,(!o||o.fid!==e.fid)&&Lm(t,e.fid),e}async function $m(t){const e=Ta(t),i=(await ou()).transaction(_i,"readwrite");await i.objectStore(_i).delete(e),await i.done}async function ka(t,e){const n=Ta(t),s=(await ou()).transaction(_i,"readwrite"),r=s.objectStore(_i),o=await r.get(n),a=e(o);return a===void 0?await r.delete(n):await r.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&Lm(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function au(t){let e;const n=await ka(t.appConfig,i=>{const s=OE(i),r=ME(t,s);return e=r.registrationPromise,r.installationEntry});return n.fid===nc?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function OE(t){const e=t||{fid:SE(),registrationStatus:0};return Bm(e)}function ME(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(mi.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=DE(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:NE(t)}:{installationEntry:e}}async function DE(t,e){try{const n=await IE(t,e);return Mo(t.appConfig,n)}catch(n){throw km(n)&&n.customData.serverCode===409?await $m(t.appConfig):await Mo(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function NE(t){let e=await fd(t.appConfig);for(;e.registrationStatus===1;)await Dm(100),e=await fd(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await au(t);return i||n}return e}function fd(t){return ka(t,e=>{if(!e)throw mi.create("installation-not-found");return Bm(e)})}function Bm(t){return LE(t)?{fid:t.fid,registrationStatus:0}:t}function LE(t){return t.registrationStatus===1&&t.registrationTime+Sm<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FE({appConfig:t,heartbeatServiceProvider:e},n){const i=$E(t,n),s=bE(t,n),r=e.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:xm,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Mm(()=>fetch(i,a));if(l.ok){const c=await l.json();return Am(c)}else throw await Rm("Generate Auth Token",l)}function $E(t,{fid:e}){return`${Pm(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lu(t,e=!1){let n;const i=await ka(t.appConfig,r=>{if(!Um(r))throw mi.create("not-registered");const o=r.authToken;if(!e&&HE(o))return r;if(o.requestStatus===1)return n=BE(t,e),r;{if(!navigator.onLine)throw mi.create("app-offline");const a=jE(r);return n=UE(t,a),a}});return n?await n:i.authToken}async function BE(t,e){let n=await pd(t.appConfig);for(;n.authToken.requestStatus===1;)await Dm(100),n=await pd(t.appConfig);const i=n.authToken;return i.requestStatus===0?lu(t,e):i}function pd(t){return ka(t,e=>{if(!Um(e))throw mi.create("not-registered");const n=e.authToken;return VE(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function UE(t,e){try{const n=await FE(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Mo(t.appConfig,i),n}catch(n){if(km(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await $m(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Mo(t.appConfig,i)}throw n}}function Um(t){return t!==void 0&&t.registrationStatus===2}function HE(t){return t.requestStatus===2&&!WE(t)}function WE(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+gE}function jE(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function VE(t){return t.requestStatus===1&&t.requestTime+Sm<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zE(t){const e=t,{installationEntry:n,registrationPromise:i}=await au(e);return i?i.catch(console.error):lu(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qE(t,e=!1){const n=t;return await KE(n),(await lu(n,e)).token}async function KE(t){const{registrationPromise:e}=await au(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t){if(!t||!t.options)throw ll("App Configuration");if(!t.name)throw ll("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw ll(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ll(t){return mi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="installations",YE="installations-internal",XE=t=>{const e=t.getProvider("app").getImmediate(),n=GE(e),i=xi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},QE=t=>{const e=t.getProvider("app").getImmediate(),n=xi(e,Hm).getImmediate();return{getId:()=>zE(n),getToken:s=>qE(n,s)}};function JE(){Gt(new Dt(Hm,XE,"PUBLIC")),Gt(new Dt(YE,QE,"PRIVATE"))}JE();vt(Cm,ru);vt(Cm,ru,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="analytics",ZE="firebase_id",eC="origin",tC=60*1e3,nC="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",cu="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st=new xa("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},mt=new Si("analytics","Analytics",iC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t){if(!t.startsWith(cu)){const e=mt.create("invalid-gtag-resource",{gtagURL:t});return st.warn(e.message),""}return t}function Wm(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function rC(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function oC(t,e){const n=rC("firebase-js-sdk-policy",{createScriptURL:sC}),i=document.createElement("script"),s=`${cu}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function aC(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function lC(t,e,n,i,s,r){const o=i[s];try{if(o)await e[o];else{const l=(await Wm(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){st.error(a)}t("config",s,r)}async function cC(t,e,n,i,s){try{let r=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await Wm(n);for(const l of o){const c=a.find(h=>h.measurementId===l),u=c&&e[c.appId];if(u)r.push(u);else{r=[];break}}}r.length===0&&(r=Object.values(e)),await Promise.all(r),t("event",i,s||{})}catch(r){st.error(r)}}function uC(t,e,n,i){async function s(r,...o){try{if(r==="event"){const[a,l]=o;await cC(t,e,n,a,l)}else if(r==="config"){const[a,l]=o;await lC(t,e,n,i,a,l)}else if(r==="consent"){const[a]=o;t("consent","update",a)}else if(r==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(r==="set"){const[a]=o;t("set",a)}else t(r,...o)}catch(a){st.error(a)}}return s}function hC(t,e,n,i,s){let r=function(...o){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=uC(r,t,e,n),{gtagCore:r,wrappedGtag:window[s]}}function dC(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(cu)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=30,pC=1e3;class gC{constructor(e={},n=pC){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const jm=new gC;function mC(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function _C(t){var e;const{appId:n,apiKey:i}=t,s={method:"GET",headers:mC(i)},r=nC.replace("{app-id}",n),o=await fetch(r,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw mt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function yC(t,e=jm,n){const{appId:i,apiKey:s,measurementId:r}=t.options;if(!i)throw mt.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:i};throw mt.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new wC;return setTimeout(async()=>{a.abort()},n!==void 0?n:tC),Vm({appId:i,apiKey:s,measurementId:r},o,a,e)}async function Vm(t,{throttleEndTimeMillis:e,backoffCount:n},i,s=jm){var r;const{appId:o,measurementId:a}=t;try{await bC(i,e)}catch(l){if(a)return st.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await _C(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!vC(c)){if(s.deleteThrottleMetadata(o),a)return st.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((r=c==null?void 0:c.customData)===null||r===void 0?void 0:r.httpStatus)===503?nd(n,s.intervalMillis,fC):nd(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return s.setThrottleMetadata(o,h),st.debug(`Calling attemptFetch again in ${u} millis`),Vm(t,h,i,s)}}function bC(t,e){return new Promise((n,i)=>{const s=Math.max(e-Date.now(),0),r=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(r),i(mt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function vC(t){if(!(t instanceof Xt)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class wC{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function IC(t,e,n,i,s){if(s&&s.global){t("event",n,i);return}else{const r=await e,o=Object.assign(Object.assign({},i),{send_to:r});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EC(){if(gm())try{await mm()}catch(t){return st.warn(mt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return st.warn(mt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function CC(t,e,n,i,s,r,o){var a;const l=yC(t);l.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&st.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>st.error(f)),e.push(l);const c=EC().then(f=>{if(f)return i.getId()}),[u,h]=await Promise.all([l,c]);dC(r)||oC(r,u.measurementId),s("js",new Date);const d=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return d[eC]="firebase",d.update=!0,h!=null&&(d[ZE]=h),s("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.app=e}_delete(){return delete Bs[this.app.options.appId],Promise.resolve()}}let Bs={},gd=[];const md={};let cl="dataLayer",xC="gtag",_d,zm,yd=!1;function TC(){const t=[];if(dm()&&t.push("This is a browser extension environment."),D0()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=mt.create("invalid-analytics-context",{errorInfo:e});st.warn(n.message)}}function kC(t,e,n){TC();const i=t.options.appId;if(!i)throw mt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)st.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw mt.create("no-api-key");if(Bs[i]!=null)throw mt.create("already-exists",{id:i});if(!yd){aC(cl);const{wrappedGtag:r,gtagCore:o}=hC(Bs,gd,md,cl,xC);zm=r,_d=o,yd=!0}return Bs[i]=CC(t,gd,md,e,_d,cl,n),new SC(t)}function nN(t=iu()){t=ut(t);const e=xi(t,Do);return e.isInitialized()?e.getImmediate():PC(t)}function PC(t,e={}){const n=xi(t,Do);if(n.isInitialized()){const s=n.getImmediate();if(rr(e,n.getOptions()))return s;throw mt.create("already-initialized")}return n.initialize({options:e})}function AC(t,e,n,i){t=ut(t),IC(zm,Bs[t.app.options.appId],e,n,i).catch(s=>st.error(s))}const bd="@firebase/analytics",vd="0.10.0";function RC(){Gt(new Dt(Do,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return kC(i,s,n)},"PUBLIC")),Gt(new Dt("analytics-internal",t,"PRIVATE")),vt(bd,vd),vt(bd,vd,"esm2017");function t(e){try{const n=e.getProvider(Do).getImmediate();return{logEvent:(i,s,r)=>AC(n,i,s,r)}}catch(n){throw mt.create("interop-component-reg-failed",{reason:n})}}}RC();function uu(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function qm(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OC=qm,Km=new Si("auth","Firebase",qm());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=new xa("@firebase/auth");function MC(t,...e){No.logLevel<=Ee.WARN&&No.warn(`Auth (${gs}): ${t}`,...e)}function po(t,...e){No.logLevel<=Ee.ERROR&&No.error(`Auth (${gs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t,...e){throw hu(t,...e)}function zt(t,...e){return hu(t,...e)}function Gm(t,e,n){const i=Object.assign(Object.assign({},OC()),{[e]:n});return new Si("auth","Firebase",i).create(e,{appName:t.name})}function DC(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Yt(t,"argument-error"),Gm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hu(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Km.create(t,...e)}function ne(t,e,...n){if(!t)throw hu(e,...n)}function rn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw po(e),new Error(e)}function hn(t,e){t||rn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function NC(){return wd()==="http:"||wd()==="https:"}function wd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NC()||dm()||"connection"in navigator)?navigator.onLine:!0}function FC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n){this.shortDelay=e,this.longDelay=n,hn(n>e,"Short delay should be less than long delay!"),this.isMobile=eu()||fm()}get(){return LC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t,e){hn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=new Cr(3e4,6e4);function fu(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ms(t,e,n,i,s={}){return Xm(t,s,async()=>{let r={},o={};i&&(e==="GET"?o=i:r={body:JSON.stringify(i)});const a=ps(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),Ym.fetch()(Qm(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},r))})}async function Xm(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},$C),e);try{const s=new HC(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Hr(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hr(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Hr(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Hr(t,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Gm(t,u,c);Yt(t,u)}}catch(s){if(s instanceof Xt)throw s;Yt(t,"network-request-failed",{message:String(s)})}}async function UC(t,e,n,i,s={}){const r=await ms(t,e,n,i,s);return"mfaPendingCredential"in r&&Yt(t,"multi-factor-auth-required",{_serverResponse:r}),r}function Qm(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?du(t.config,s):`${t.config.apiScheme}://${s}`}class HC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(zt(this.auth,"network-request-failed")),BC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hr(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=zt(t,e,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC(t,e){return ms(t,"POST","/v1/accounts:delete",e)}async function jC(t,e){return ms(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VC(t,e=!1){const n=ut(t),i=await n.getIdToken(e),s=pu(i);ne(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Us(ul(s.auth_time)),issuedAtTime:Us(ul(s.iat)),expirationTime:Us(ul(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function ul(t){return Number(t)*1e3}function pu(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return po("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ao(n);return s?JSON.parse(s):(po("Failed to decode base64 JWT payload"),null)}catch(s){return po("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function zC(t){const e=pu(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ar(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Xt&&qC(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function qC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Us(this.lastLoginAt),this.creationTime=Us(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(t){var e;const n=t.auth,i=await t.getIdToken(),s=await ar(t,jC(n,{idToken:i}));ne(s==null?void 0:s.users.length,n,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?XC(r.providerUserInfo):[],a=YC(t.providerData,o),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Jm(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function GC(t){const e=ut(t);await Lo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YC(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function XC(t){return t.map(e=>{var{providerId:n}=e,i=uu(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(t,e){const n=await Xm(t,{},async()=>{const i=ps({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,o=Qm(t,s,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ym.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function JC(t,e){return ms(t,"POST","/v2/accounts:revokeToken",fu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ne(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await QC(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,o=new lr;return i&&(ne(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(ne(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),r&&(ne(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lr,this.toJSON())}_performRefresh(){return rn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ui{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,r=uu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Jm(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await ar(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return VC(this,e)}reload(){return GC(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Lo(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ar(this,WC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,r,o,a,l,c,u;const h=(i=n.displayName)!==null&&i!==void 0?i:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,f=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:A,emailVerified:C,isAnonymous:T,providerData:H,stsTokenManager:W}=n;ne(A&&W,e,"internal-error");const j=lr.fromJSON(this.name,W);ne(typeof A=="string",e,"internal-error"),yn(h,e.name),yn(d,e.name),ne(typeof C=="boolean",e,"internal-error"),ne(typeof T=="boolean",e,"internal-error"),yn(f,e.name),yn(p,e.name),yn(m,e.name),yn(y,e.name),yn(b,e.name),yn(w,e.name);const J=new ui({uid:A,auth:e,email:d,emailVerified:C,displayName:h,isAnonymous:T,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:j,createdAt:b,lastLoginAt:w});return H&&Array.isArray(H)&&(J.providerData=H.map(Y=>Object.assign({},Y))),y&&(J._redirectEventId=y),J}static async _fromIdTokenResponse(e,n,i=!1){const s=new lr;s.updateFromServerResponse(n);const r=new ui({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Lo(r),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new Map;function on(t){hn(t instanceof Function,"Expected a class definition");let e=Id.get(t);return e?(hn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Id.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Zm.type="NONE";const Ed=Zm;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t,e,n){return`firebase:${t}:${e}:${n}`}class Vi{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=go(this.userKey,s.apiKey,r),this.fullPersistenceKey=go("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ui._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Vi(on(Ed),e,i);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=s[0]||on(Ed);const o=go(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=ui._fromJSON(e,u);c!==r&&(a=h),r=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Vi(r,e,i):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new Vi(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(n_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(e_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(s_(e))return"Blackberry";if(r_(e))return"Webos";if(gu(e))return"Safari";if((e.includes("chrome/")||t_(e))&&!e.includes("edge/"))return"Chrome";if(i_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function e_(t=Qe()){return/firefox\//i.test(t)}function gu(t=Qe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function t_(t=Qe()){return/crios\//i.test(t)}function n_(t=Qe()){return/iemobile/i.test(t)}function i_(t=Qe()){return/android/i.test(t)}function s_(t=Qe()){return/blackberry/i.test(t)}function r_(t=Qe()){return/webos/i.test(t)}function Pa(t=Qe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ZC(t=Qe()){var e;return Pa(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function eS(){return M0()&&document.documentMode===10}function o_(t=Qe()){return Pa(t)||i_(t)||r_(t)||s_(t)||/windows phone/i.test(t)||n_(t)}function tS(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t,e=[]){let n;switch(t){case"Browser":n=Cd(Qe());break;case"Worker":n=`${Cd(Qe())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gs}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iS(t,e={}){return ms(t,"GET","/v2/passwordPolicy",fu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=6;class rS{constructor(e){var n,i,s,r;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:sS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,r,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(r=l.containsUppercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sd(this),this.idTokenSubscription=new Sd(this),this.beforeStateQueue=new nS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Km,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=on(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await Vi.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lo(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ut(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(on(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iS(this),n=new rS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Si("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await JC(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&on(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await Vi.create(this,[on(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=a_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&MC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Aa(t){return ut(t)}class Sd{constructor(e){this.auth=e,this.observer=null,this.addObserver=H0(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function lS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=zt("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",aS().appendChild(i)})}function cS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(t,e){const n=xi(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(rr(r,e??{}))return s;Yt(s,"already-initialized")}return n.initialize({options:e})}function hS(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(on);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function dS(t,e,n){const i=Aa(t);ne(i._canInitEmulator,i,"emulator-config-failed"),ne(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),r=l_(e),{host:o,port:a}=fS(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${r}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||pS()}function l_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fS(t){const e=l_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:xd(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:xd(o)}}}function xd(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rn("not implemented")}_getIdTokenResponse(e){return rn("not implemented")}_linkToIdToken(e,n){return rn("not implemented")}_getReauthenticationResolver(e){return rn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zi(t,e){return UC(t,"POST","/v1/accounts:signInWithIdp",fu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="http://localhost";class yi extends c_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Yt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,r=uu(n,["providerId","signInMethod"]);if(!i||!s)return null;const o=new yi(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return zi(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,zi(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zi(e,n)}buildRequest(){const e={requestUri:gS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ps(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends mu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In extends Sr{constructor(){super("facebook.com")}static credential(e){return yi._fromParams({providerId:In.PROVIDER_ID,signInMethod:In.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return In.credentialFromTaggedObject(e)}static credentialFromError(e){return In.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return In.credential(e.oauthAccessToken)}catch{return null}}}In.FACEBOOK_SIGN_IN_METHOD="facebook.com";In.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En extends Sr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return yi._fromParams({providerId:En.PROVIDER_ID,signInMethod:En.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return En.credentialFromTaggedObject(e)}static credentialFromError(e){return En.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return En.credential(n,i)}catch{return null}}}En.GOOGLE_SIGN_IN_METHOD="google.com";En.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn extends Sr{constructor(){super("github.com")}static credential(e){return yi._fromParams({providerId:Cn.PROVIDER_ID,signInMethod:Cn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cn.credentialFromTaggedObject(e)}static credentialFromError(e){return Cn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cn.credential(e.oauthAccessToken)}catch{return null}}}Cn.GITHUB_SIGN_IN_METHOD="github.com";Cn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn extends Sr{constructor(){super("twitter.com")}static credential(e,n){return yi._fromParams({providerId:Sn.PROVIDER_ID,signInMethod:Sn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Sn.credentialFromTaggedObject(e)}static credentialFromError(e){return Sn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Sn.credential(n,i)}catch{return null}}}Sn.TWITTER_SIGN_IN_METHOD="twitter.com";Sn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await ui._fromIdTokenResponse(e,i,s),o=Td(i);return new es({user:r,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=Td(i);return new es({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function Td(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends Xt{constructor(e,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Fo.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Fo(e,n,i,s)}}function u_(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Fo._fromErrorAndOperation(t,r,e,i):r})}async function mS(t,e,n=!1){const i=await ar(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return es._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _S(t,e,n=!1){const{auth:i}=t,s="reauthenticate";try{const r=await ar(t,u_(i,s,e,t),n);ne(r.idToken,i,"internal-error");const o=pu(r.idToken);ne(o,i,"internal-error");const{sub:a}=o;return ne(t.uid===a,i,"user-mismatch"),es._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Yt(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(t,e,n=!1){const i="signIn",s=await u_(t,i,e),r=await es._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}function bS(t,e,n,i){return ut(t).onIdTokenChanged(e,n,i)}function vS(t,e,n){return ut(t).beforeAuthStateChanged(e,n)}function iN(t){return ut(t).signOut()}const $o="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($o,"1"),this.storage.removeItem($o),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(){const t=Qe();return gu(t)||Pa(t)}const IS=1e3,ES=10;class d_ extends h_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=wS()&&tS(),this.fallbackToPolling=o_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(i);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);eS()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ES):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},IS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}d_.type="LOCAL";const CS=d_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_ extends h_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}f_.type="SESSION";const p_=f_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Ra(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,r)),l=await SS(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ra.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=_u("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(d.data.response);break;default:clearTimeout(u),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return window}function TS(t){qt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(){return typeof qt().WorkerGlobalScope<"u"&&typeof qt().importScripts=="function"}async function kS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function AS(){return g_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="firebaseLocalStorageDb",RS=1,Bo="firebaseLocalStorage",__="fbase_key";class xr{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Oa(t,e){return t.transaction([Bo],e?"readwrite":"readonly").objectStore(Bo)}function OS(){const t=indexedDB.deleteDatabase(m_);return new xr(t).toPromise()}function sc(){const t=indexedDB.open(m_,RS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Bo,{keyPath:__})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Bo)?e(i):(i.close(),await OS(),e(await sc()))})})}async function kd(t,e,n){const i=Oa(t,!0).put({[__]:e,value:n});return new xr(i).toPromise()}async function MS(t,e){const n=Oa(t,!1).get(e),i=await new xr(n).toPromise();return i===void 0?null:i.value}function Pd(t,e){const n=Oa(t,!0).delete(e);return new xr(n).toPromise()}const DS=800,NS=3;class y_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>NS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return g_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ra._getInstance(AS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await kS(),!this.activeServiceWorker)return;this.sender=new xS(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sc();return await kd(e,$o,"1"),await Pd(e,$o),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>kd(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>MS(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Pd(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Oa(s,!1).getAll();return new xr(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}y_.type="LOCAL";const LS=y_;new Cr(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t,e){return e?on(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends c_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function FS(t){return yS(t.auth,new yu(t),t.bypassAuthState)}function $S(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),_S(n,new yu(t),t.bypassAuthState)}async function BS(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),mS(n,new yu(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FS;case"linkViaPopup":case"linkViaRedirect":return BS;case"reauthViaPopup":case"reauthViaRedirect":return $S;default:Yt(this.auth,"internal-error")}}resolve(e){hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=new Cr(2e3,1e4);async function sN(t,e,n){const i=Aa(t);DC(t,e,mu);const s=b_(i,n);return new si(i,"signInViaPopup",e,s).executeNotNull()}class si extends v_{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,si.currentPopupAction&&si.currentPopupAction.cancel(),si.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){hn(this.filter.length===1,"Popup operations only handle one event");const e=_u();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,si.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,US.get())};e()}}si.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="pendingRedirect",mo=new Map;class WS extends v_{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=mo.get(this.auth._key());if(!e){try{const i=await jS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}mo.set(this.auth._key(),e)}return this.bypassAuthState||mo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jS(t,e){const n=qS(e),i=zS(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function VS(t,e){mo.set(t._key(),e)}function zS(t){return on(t._redirectPersistence)}function qS(t){return go(HS,t.config.apiKey,t.name)}async function KS(t,e,n=!1){const i=Aa(t),s=b_(i,e),o=await new WS(i,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=10*60*1e3;class YS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!w_(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(zt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ad(e))}saveEventToCache(e){this.cachedEventUids.add(Ad(e)),this.lastProcessedEventTime=Date.now()}}function Ad(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function w_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return w_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(t,e={}){return ms(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZS=/^https?/;async function ex(t){if(t.config.emulator)return;const{authorizedDomains:e}=await QS(t);for(const n of e)try{if(tx(n))return}catch{}Yt(t,"unauthorized-domain")}function tx(t){const e=ic(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!ZS.test(n))return!1;if(JS.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=new Cr(3e4,6e4);function Rd(){const t=qt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ix(t){return new Promise((e,n)=>{var i,s,r;function o(){Rd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Rd(),n(zt(t,"network-request-failed"))},timeout:nx.get()})}if(!((s=(i=qt().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=qt().gapi)===null||r===void 0)&&r.load)o();else{const a=cS("iframefcb");return qt()[a]=()=>{gapi.load?o():n(zt(t,"network-request-failed"))},lS(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw _o=null,e})}let _o=null;function sx(t){return _o=_o||ix(t),_o}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new Cr(5e3,15e3),ox="__/auth/iframe",ax="emulator/auth/iframe",lx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ux(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?du(e,ax):`https://${t.config.authDomain}/${ox}`,i={apiKey:e.apiKey,appName:t.name,v:gs},s=cx.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${ps(i).slice(1)}`}async function hx(t){const e=await sx(t),n=qt().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:ux(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lx,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=zt(t,"network-request-failed"),a=qt().setTimeout(()=>{r(o)},rx.get());function l(){qt().clearTimeout(a),s(i)}i.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fx=500,px=600,gx="_blank",mx="http://localhost";class Od{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _x(t,e,n,i=fx,s=px){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},dx),{width:i.toString(),height:s.toString(),top:r,left:o}),c=Qe().toLowerCase();n&&(a=t_(c)?gx:n),e_(c)&&(e=e||mx,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(ZC(c)&&a!=="_self")return yx(e||"",a),new Od(null);const h=window.open(e||"",a,u);ne(h,t,"popup-blocked");try{h.focus()}catch{}return new Od(h)}function yx(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="__/auth/handler",vx="emulator/auth/handler",wx=encodeURIComponent("fac");async function Md(t,e,n,i,s,r){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:gs,eventId:s};if(e instanceof mu){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Gl(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(r||{}))o[u]=h}if(e instanceof Sr){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${wx}=${encodeURIComponent(l)}`:"";return`${Ix(t)}?${ps(a).slice(1)}${c}`}function Ix({config:t}){return t.emulator?du(t,vx):`https://${t.authDomain}/${bx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl="webStorageSupport";class Ex{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=p_,this._completeRedirectFn=KS,this._overrideRedirectResult=VS}async _openPopup(e,n,i,s){var r;hn((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await Md(e,n,i,ic(),s);return _x(e,o,_u())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await Md(e,n,i,ic(),s);return TS(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(hn(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await hx(e),i=new YS(e);return n.register("authEvent",s=>(ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hl,{type:hl},s=>{var r;const o=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[hl];o!==void 0&&n(!!o),Yt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ex(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return o_()||gu()||Pa()}}const Cx=Ex;var Dd="@firebase/auth",Nd="1.5.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Tx(t){Gt(new Dt("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:a_(t)},c=new oS(i,s,r,l);return hS(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Gt(new Dt("auth-internal",e=>{const n=Aa(e.getProvider("auth").getImmediate());return(i=>new Sx(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vt(Dd,Nd,xx(t)),vt(Dd,Nd,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=5*60,Px=hm("authIdTokenMaxAge")||kx;let Ld=null;const Ax=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Px)return;const s=n==null?void 0:n.token;Ld!==s&&(Ld=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function rN(t=iu()){const e=xi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=uS(t,{popupRedirectResolver:Cx,persistence:[LS,CS,p_]}),i=hm("authTokenSyncURL");if(i){const r=Ax(i);vS(n,r,()=>r(n.currentUser)),bS(n,o=>r(o))}const s=cm("auth");return s&&dS(n,`http://${s}`),n}Tx("Browser");var Fd={};const $d="@firebase/database",Bd="1.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I_="";function Rx(t){I_=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),je(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:sr(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return gn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ox(e)}}catch{}return new Mx},ri=E_("localStorage"),rc=E_("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new xa("@firebase/database"),Dx=function(){let t=1;return function(){return t++}}(),C_=function(t){const e=V0(t),n=new U0;n.update(e);const i=n.digest();return Jc.encodeByteArray(i)},Tr=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Tr.apply(null,i):typeof i=="object"?e+=je(i):e+=i,e+=" "}return e};let hi=null,Ud=!0;const Nx=function(t,e){D(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(qi.logLevel=Ee.VERBOSE,hi=qi.log.bind(qi),e&&rc.set("logging_enabled",!0)):typeof t=="function"?hi=t:(hi=null,rc.remove("logging_enabled"))},Ye=function(...t){if(Ud===!0&&(Ud=!1,hi===null&&rc.get("logging_enabled")===!0&&Nx(!0)),hi){const e=Tr.apply(null,t);hi(e)}},kr=function(t){return function(...e){Ye(t,...e)}},oc=function(...t){const e="FIREBASE INTERNAL ERROR: "+Tr(...t);qi.error(e)},dn=function(...t){const e=`FIREBASE FATAL ERROR: ${Tr(...t)}`;throw qi.error(e),new Error(e)},rt=function(...t){const e="FIREBASE WARNING: "+Tr(...t);qi.warn(e)},Lx=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&rt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},S_=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Fx=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ts="[MIN_NAME]",bi="[MAX_NAME]",_s=function(t,e){if(t===e)return 0;if(t===ts||e===bi)return-1;if(e===ts||t===bi)return 1;{const n=Hd(t),i=Hd(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},$x=function(t,e){return t===e?0:t<e?-1:1},Is=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+je(e))},bu=function(t){if(typeof t!="object"||t===null)return je(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=je(e[i]),n+=":",n+=bu(t[e[i]]);return n+="}",n},x_=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let s=0;s<n;s+=e)s+e>n?i.push(t.substring(s,n)):i.push(t.substring(s,s+e));return i};function lt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const T_=function(t){D(!S_(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let s,r,o,a,l;t===0?(r=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),r=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(r=0,o=Math.round(t/Math.pow(2,1-i-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(s?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(u.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},Bx=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Ux=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Hx(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const Wx=new RegExp("^-?(0*)\\d{1,10}$"),jx=-2147483648,Vx=2147483647,Hd=function(t){if(Wx.test(t)){const e=Number(t);if(e>=jx&&e<=Vx)return e}return null},ys=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw rt("Exception was thrown by user callback.",n),e},Math.floor(0))}},zx=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Hs=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){rt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ye("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rt(e)}}class Ki{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ki.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu="5",k_="v",P_="s",A_="r",R_="f",O_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,M_="ls",D_="p",ac="ac",N_="websocket",L_="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n,i,s,r=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ri.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ri.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Gx(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function $_(t,e,n){D(typeof e=="string","typeof type must == string"),D(typeof n=="object","typeof params must == object");let i;if(e===N_)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===L_)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Gx(t)&&(n.ns=t.namespace);const s=[];return lt(n,(r,o)=>{s.push(r+"="+o)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(){this.counters_={}}incrementCounter(e,n=1){gn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return S0(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl={},fl={};function wu(t){const e=t.toString();return dl[e]||(dl[e]=new Yx),dl[e]}function Xx(t,e){const n=t.toString();return fl[n]||(fl[n]=e()),fl[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&ys(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="start",Jx="close",Zx="pLPCommand",eT="pRTLPCB",B_="id",U_="pw",H_="ser",tT="cb",nT="seg",iT="ts",sT="d",rT="dframe",W_=1870,j_=30,oT=W_-j_,aT=25e3,lT=3e4;class Li{constructor(e,n,i,s,r,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=kr(e),this.stats_=wu(n),this.urlFn=l=>(this.appCheckToken&&(l[ac]=this.appCheckToken),$_(n,L_,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Qx(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(lT)),Fx(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Iu((...r)=>{const[o,a,l,c,u]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Wd)this.id=a,this.password=l;else if(o===Jx)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{const[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[Wd]="t",i[H_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[tT]=this.scriptTagHolder.uniqueCallbackIdentifier),i[k_]=vu,this.transportSessionId&&(i[P_]=this.transportSessionId),this.lastSessionId&&(i[M_]=this.lastSessionId),this.applicationId&&(i[D_]=this.applicationId),this.appCheckToken&&(i[ac]=this.appCheckToken),typeof location<"u"&&location.hostname&&O_.test(location.hostname)&&(i[A_]=R_);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Li.forceAllow_=!0}static forceDisallow(){Li.forceDisallow_=!0}static isAvailable(){return Li.forceAllow_?!0:!Li.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Bx()&&!Ux()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=je(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=am(n),s=x_(i,oT);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[rT]="t",i[B_]=e,i[U_]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=je(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Iu{constructor(e,n,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Dx(),window[Zx+this.uniqueCallbackIdentifier]=e,window[eT+this.uniqueCallbackIdentifier]=n,this.myIFrame=Iu.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ye("frame writing exception"),a.stack&&Ye(a.stack),Ye(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ye("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[B_]=this.myID,e[U_]=this.myPW,e[H_]=this.currentSerial;let n=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+j_+i.length<=W_;){const o=this.pendingSegs.shift();i=i+"&"+nT+s+"="+o.seg+"&"+iT+s+"="+o.ts+"&"+sT+s+"="+o.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(aT)),r=()=>{clearTimeout(s),i()};this.addTag(e,r)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Ye("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=16384,uT=45e3;let Uo=null;typeof MozWebSocket<"u"?Uo=MozWebSocket:typeof WebSocket<"u"&&(Uo=WebSocket);class kt{constructor(e,n,i,s,r,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=kr(this.connId),this.stats_=wu(n),this.connURL=kt.connectionURL_(n,o,a,s,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,s,r){const o={};return o[k_]=vu,typeof location<"u"&&location.hostname&&O_.test(location.hostname)&&(o[A_]=R_),n&&(o[P_]=n),i&&(o[M_]=i),s&&(o[ac]=s),r&&(o[D_]=r),$_(e,N_,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ri.set("previous_websocket_failure",!0);try{let i;pm(),this.mySock=new Uo(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){kt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Uo!==null&&!kt.forceDisallow_}static previouslyFailed(){return ri.isInMemoryStorage||ri.get("previous_websocket_failure")===!0}markConnectionHealthy(){ri.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=sr(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(D(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=je(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=x_(n,cT);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(uT))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}kt.responsesRequiredToBeHealthy=2;kt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Li,kt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=kt&&kt.isAvailable();let i=n&&!kt.previouslyFailed();if(e.webSocketOnly&&(n||rt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[kt];else{const s=this.transports_=[];for(const r of cr.ALL_TRANSPORTS)r&&r.isAvailable()&&s.push(r);cr.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}cr.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT=6e4,dT=5e3,fT=10*1024,pT=100*1024,pl="t",jd="d",gT="s",Vd="r",mT="e",zd="o",qd="a",Kd="n",Gd="p",_T="h";class yT{constructor(e,n,i,s,r,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=kr("c:"+this.id+":"),this.transportManager_=new cr(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Hs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>pT?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>fT?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(pl in e){const n=e[pl];n===qd?this.upgradeIfSecondaryHealthy_():n===Vd?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===zd&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Is("t",e),i=Is("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Gd,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:qd,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Kd,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Is("t",e),i=Is("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Is(pl,e);if(jd in e){const i=e[jd];if(n===_T){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Kd){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===gT?this.onConnectionShutdown_(i):n===Vd?this.onReset_(i):n===mT?oc("Server Error: "+i):n===zd?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):oc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),vu!==i&&rt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Hs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(hT))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Hs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(dT))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Gd,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ri.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{put(e,n,i,s){}merge(e,n,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e){this.allowedEvents_=e,this.listeners_={},D(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const s=this.getInitialEvent(e);s&&n.apply(i,s)}off(e,n,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(e){D(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends z_{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!eu()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ho}getInitialEvent(e){return D(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd=32,Xd=768;class Se{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function _e(){return new Se("")}function le(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function $n(t){return t.pieces_.length-t.pieceNum_}function Te(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Se(t.pieces_,e)}function q_(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function bT(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function K_(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function G_(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Se(e,0)}function Be(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof Se)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new Se(n,0)}function ue(t){return t.pieceNum_>=t.pieces_.length}function nt(t,e){const n=le(t),i=le(e);if(n===null)return e;if(n===i)return nt(Te(t),Te(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Eu(t,e){if($n(t)!==$n(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function At(t,e){let n=t.pieceNum_,i=e.pieceNum_;if($n(t)>$n(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class vT{constructor(e,n){this.errorPrefix_=n,this.parts_=K_(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Sa(this.parts_[i]);Y_(this)}}function wT(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Sa(e),Y_(t)}function IT(t){const e=t.parts_.pop();t.byteLength_-=Sa(e),t.parts_.length>0&&(t.byteLength_-=1)}function Y_(t){if(t.byteLength_>Xd)throw new Error(t.errorPrefix_+"has a key path longer than "+Xd+" bytes ("+t.byteLength_+").");if(t.parts_.length>Yd)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Yd+") or object contains a cycle "+Yn(t))}function Yn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends z_{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Cu}getInitialEvent(e){return D(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=1e3,ET=60*5*1e3,Qd=30*1e3,CT=1.3,ST=3e4,xT="server_kill",Jd=3;class un extends V_{constructor(e,n,i,s,r,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=un.nextPersistentConnectionId_++,this.log_=kr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Es,this.maxReconnectDelay_=ET,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!pm())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Cu.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ho.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const s=++this.requestNumber_,r={r:s,a:e,b:n};this.log_(je(r)),D(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();const n=new Ca,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,i,s){this.initConnection_();const r=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),D(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),D(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:i};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+i+" for "+s);const r={p:i},o="q";e.tag&&(r.q=n._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(o,r,a=>{const l=a.d,c=a.s;un.warnOnListenWarnings_(l,n),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&gn(e,"w")){const i=Zi(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();rt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||B0(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Qd)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=$0(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,s=>{const r=s.s,o=s.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),D(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,n)}sendUnlisten_(e,n,i,s){this.log_("Unlisten on "+e+" for "+n);const r={p:e},o="n";s&&(r.q=i,r.t=s),this.sendRequest(o,r)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,s){const r={p:n,d:i};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,i,s){this.putInternal("p",e,n,i,s)}merge(e,n,i,s){this.putInternal("m",e,n,i,s)}putInternal(e,n,i,s,r){this.initConnection_();const o={p:n,d:i};r!==void 0&&(o.h=r),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(r.s,r.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const r=i.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+je(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):oc("Unrecognized action received from server: "+je(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){D(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Es,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Es,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>ST&&(this.reconnectDelay_=Es),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*CT)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+un.nextConnectionId_++,r=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,i())},c=function(h){D(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Ye("getToken() completed but was canceled"):(Ye("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new yT(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,f=>{rt(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(xT)},r))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&rt(h),l())}}}interrupt(e){Ye("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ye("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Gl(this.interruptReasons_)&&(this.reconnectDelay_=Es,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(r=>bu(r)).join("$"):i="default";const s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const i=new Se(e).toString();let s;if(this.listens.has(i)){const r=this.listens.get(i);s=r.get(n),r.delete(n),r.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,n){Ye("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Jd&&(this.reconnectDelay_=Qd,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ye("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Jd&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+I_.replace(/\./g,"-")]=1,eu()?e["framework.cordova"]=1:fm()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ho.getInstance().currentlyOnline();return Gl(this.interruptReasons_)&&e}}un.nextPersistentConnectionId_=0;un.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ce(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new ce(ts,e),s=new ce(ts,n);return this.compare(i,s)!==0}minPost(){return ce.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wr;class X_ extends Ma{static get __EMPTY_NODE(){return Wr}static set __EMPTY_NODE(e){Wr=e}compare(e,n){return _s(e.name,n.name)}isDefinedOn(e){throw fs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ce.MIN}maxPost(){return new ce(bi,Wr)}makePost(e,n){return D(typeof e=="string","KeyIndex indexValue must always be a string."),new ce(e,Wr)}toString(){return".key"}}const Gi=new X_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class We{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??We.RED,this.left=s??it.EMPTY_NODE,this.right=r??it.EMPTY_NODE}copy(e,n,i,s,r){return new We(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return r<0?s=s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return it.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,s;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return it.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}We.RED=!0;We.BLACK=!1;class TT{copy(e,n,i,s,r){return this}insert(e,n,i){return new We(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class it{constructor(e,n=it.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new it(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,We.BLACK,null,null))}remove(e){return new it(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,We.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new jr(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new jr(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new jr(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new jr(this.root_,null,this.comparator_,!0,e)}}it.EMPTY_NODE=new TT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t,e){return _s(t.name,e.name)}function Su(t,e){return _s(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lc;function PT(t){lc=t}const Q_=function(t){return typeof t=="number"?"number:"+T_(t):"string:"+t},J_=function(t){if(t.isLeafNode()){const e=t.val();D(typeof e=="string"||typeof e=="number"||typeof e=="object"&&gn(e,".sv"),"Priority must be a string or number.")}else D(t===lc||t.isEmpty(),"priority of unexpected type.");D(t===lc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zd;class He{constructor(e,n=He.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,D(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),J_(this.priorityNode_)}static set __childrenNodeConstructor(e){Zd=e}static get __childrenNodeConstructor(){return Zd}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new He(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:He.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ue(e)?this:le(e)===".priority"?this.priorityNode_:He.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:He.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=le(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(D(i!==".priority"||$n(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,He.__childrenNodeConstructor.EMPTY_NODE.updateChild(Te(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Q_(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=T_(this.value_):e+=this.value_,this.lazyHash_=C_(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===He.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof He.__childrenNodeConstructor?-1:(D(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,s=He.VALUE_TYPE_ORDER.indexOf(n),r=He.VALUE_TYPE_ORDER.indexOf(i);return D(s>=0,"Unknown leaf type: "+n),D(r>=0,"Unknown leaf type: "+i),s===r?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}He.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z_,ey;function AT(t){Z_=t}function RT(t){ey=t}class OT extends Ma{compare(e,n){const i=e.node.getPriority(),s=n.node.getPriority(),r=i.compareTo(s);return r===0?_s(e.name,n.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ce.MIN}maxPost(){return new ce(bi,new He("[PRIORITY-POST]",ey))}makePost(e,n){const i=Z_(e);return new ce(n,new He("[PRIORITY-POST]",i))}toString(){return".priority"}}const Le=new OT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=Math.log(2);class DT{constructor(e){const n=r=>parseInt(Math.log(r)/MT,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Wo=function(t,e,n,i){t.sort(e);const s=function(l,c){const u=c-l;let h,d;if(u===0)return null;if(u===1)return h=t[l],d=n?n(h):h,new We(d,h.node,We.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=s(l,f),m=s(f+1,c);return h=t[f],d=n?n(h):h,new We(d,h.node,We.BLACK,p,m)}},r=function(l){let c=null,u=null,h=t.length;const d=function(p,m){const y=h-p,b=h;h-=p;const w=s(y+1,b),A=t[y],C=n?n(A):A;f(new We(C,A.node,m,null,w))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const m=l.nextBitIsOne(),y=Math.pow(2,l.count-(p+1));m?d(y,We.BLACK):(d(y,We.BLACK),d(y,We.RED))}return u},o=new DT(t.length),a=r(o);return new it(i||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gl;const Mi={};class an{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return D(Mi&&Le,"ChildrenNode.ts has not been loaded"),gl=gl||new an({".priority":Mi},{".priority":Le}),gl}get(e){const n=Zi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof it?n:null}hasIndex(e){return gn(this.indexSet_,e.toString())}addIndex(e,n){D(e!==Gi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const r=n.getIterator(ce.Wrap);let o=r.getNext();for(;o;)s=s||e.isDefinedOn(o.node),i.push(o),o=r.getNext();let a;s?a=Wo(i,e.getCompare()):a=Mi;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new an(u,c)}addToIndexes(e,n){const i=Ro(this.indexes_,(s,r)=>{const o=Zi(this.indexSet_,r);if(D(o,"Missing index implementation for "+r),s===Mi)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(ce.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Wo(a,o.getCompare())}else return Mi;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new ce(e.name,a))),l.insert(e,e.node)}});return new an(i,this.indexSet_)}removeFromIndexes(e,n){const i=Ro(this.indexes_,s=>{if(s===Mi)return s;{const r=n.get(e.name);return r?s.remove(new ce(e.name,r)):s}});return new an(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cs;class ee{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&J_(this.priorityNode_),this.children_.isEmpty()&&D(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Cs||(Cs=new ee(new it(Su),null,an.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Cs}updatePriority(e){return this.children_.isEmpty()?this:new ee(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Cs:n}}getChild(e){const n=le(e);return n===null?this:this.getImmediateChild(n).getChild(Te(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(D(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new ce(e,n);let s,r;n.isEmpty()?(s=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,n),r=this.indexMap_.addToIndexes(i,this.children_));const o=s.isEmpty()?Cs:this.priorityNode_;return new ee(s,o,r)}}updateChild(e,n){const i=le(e);if(i===null)return n;{D(le(e)!==".priority"||$n(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Te(e),n);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,s=0,r=!0;if(this.forEachChild(Le,(o,a)=>{n[o]=a.val(e),i++,r&&ee.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):r=!1}),!e&&r&&s<2*i){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Q_(this.getPriority().val())+":"),this.forEachChild(Le,(n,i)=>{const s=i.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":C_(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const s=this.resolveIndex_(i);if(s){const r=s.getPredecessorKey(new ce(e,n));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ce(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ce(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,ce.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)<0;)s.getNext(),r=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,ce.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)>0;)s.getNext(),r=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Pr?-1:0}withIndex(e){if(e===Gi||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ee(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Gi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Le),s=n.getIterator(Le);let r=i.getNext(),o=s.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=i.getNext(),o=s.getNext()}return r===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Gi?null:this.indexMap_.get(e.toString())}}ee.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class NT extends ee{constructor(){super(new it(Su),ee.EMPTY_NODE,an.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ee.EMPTY_NODE}isEmpty(){return!1}}const Pr=new NT;Object.defineProperties(ce,{MIN:{value:new ce(ts,ee.EMPTY_NODE)},MAX:{value:new ce(bi,Pr)}});X_.__EMPTY_NODE=ee.EMPTY_NODE;He.__childrenNodeConstructor=ee;PT(Pr);RT(Pr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=!0;function qe(t,e=null){if(t===null)return ee.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),D(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new He(n,qe(e))}if(!(t instanceof Array)&&LT){const n=[];let i=!1;if(lt(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=qe(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new ce(o,l)))}}),n.length===0)return ee.EMPTY_NODE;const r=Wo(n,kT,o=>o.name,Su);if(i){const o=Wo(n,Le.getCompare());return new ee(r,qe(e),new an({".priority":o},{".priority":Le}))}else return new ee(r,qe(e),an.Default)}else{let n=ee.EMPTY_NODE;return lt(t,(i,s)=>{if(gn(t,i)&&i.substring(0,1)!=="."){const r=qe(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(i,r))}}),n.updatePriority(qe(e))}}AT(qe);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT extends Ma{constructor(e){super(),this.indexPath_=e,D(!ue(e)&&le(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),s=this.extractChild(n.node),r=i.compareTo(s);return r===0?_s(e.name,n.name):r}makePost(e,n){const i=qe(e),s=ee.EMPTY_NODE.updateChild(this.indexPath_,i);return new ce(n,s)}maxPost(){const e=ee.EMPTY_NODE.updateChild(this.indexPath_,Pr);return new ce(bi,e)}toString(){return K_(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T extends Ma{compare(e,n){const i=e.node.compareTo(n.node);return i===0?_s(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ce.MIN}maxPost(){return ce.MAX}makePost(e,n){const i=qe(e);return new ce(n,i)}toString(){return".value"}}const BT=new $T;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t){return{type:"value",snapshotNode:t}}function ns(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ur(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function hr(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function UT(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e){this.index_=e}updateChild(e,n,i,s,r,o){D(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(i.getChild(s))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(n)?o.trackChildChange(ur(n,a)):D(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ns(n,i)):o.trackChildChange(hr(n,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Le,(s,r)=>{n.hasChild(s)||i.trackChildChange(ur(s,r))}),n.isLeafNode()||n.forEachChild(Le,(s,r)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(r)||i.trackChildChange(hr(s,r,o))}else i.trackChildChange(ns(s,r))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ee.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.indexedFilter_=new xu(e.getIndex()),this.index_=e.getIndex(),this.startPost_=dr.getStartPost_(e),this.endPost_=dr.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,s,r,o){return this.matches(new ce(n,i))||(i=ee.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,s,r,o)}updateFullNode(e,n,i){n.isLeafNode()&&(n=ee.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(ee.EMPTY_NODE);const r=this;return n.forEachChild(Le,(o,a)=>{r.matches(new ce(o,a))||(s=s.updateImmediateChild(o,ee.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new dr(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,s,r,o){return this.rangedFilter_.matches(new ce(n,i))||(i=ee.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,s,r,o):this.fullLimitUpdateChild_(e,n,i,r,o)}updateFullNode(e,n,i){let s;if(n.isLeafNode()||n.isEmpty())s=ee.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=ee.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){const a=r.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(ee.EMPTY_NODE);let r;this.reverse_?r=s.getReverseIterator(this.index_):r=s.getIterator(this.index_);let o=0;for(;r.hasNext();){const a=r.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,ee.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,s,r){let o;if(this.reverse_){const h=this.index_.getCompare();o=(d,f)=>h(f,d)}else o=this.index_.getCompare();const a=e;D(a.numChildren()===this.limit_,"");const l=new ce(n,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const h=a.getImmediateChild(n);let d=s.getChildAfterChild(this.index_,c,this.reverse_);for(;d!=null&&(d.name===n||a.hasChild(d.name));)d=s.getChildAfterChild(this.index_,d,this.reverse_);const f=d==null?1:o(d,l);if(u&&!i.isEmpty()&&f>=0)return r!=null&&r.trackChildChange(hr(n,i,h)),a.updateImmediateChild(n,i);{r!=null&&r.trackChildChange(ur(n,h));const m=a.updateImmediateChild(n,ee.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(r!=null&&r.trackChildChange(ns(d.name,d.node)),m.updateImmediateChild(d.name,d.node)):m}}else return i.isEmpty()?e:u&&o(c,l)>=0?(r!=null&&(r.trackChildChange(ur(c.name,c.node)),r.trackChildChange(ns(n,i))),a.updateImmediateChild(n,i).updateImmediateChild(c.name,ee.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Le}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return D(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return D(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ts}hasEnd(){return this.endSet_}getIndexEndValue(){return D(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return D(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:bi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return D(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Le}copy(){const e=new Tu;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function WT(t){return t.loadsAllData()?new xu(t.getIndex()):t.hasLimit()?new HT(t):new dr(t)}function ef(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Le?n="$priority":t.index_===BT?n="$value":t.index_===Gi?n="$key":(D(t.index_ instanceof FT,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=je(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=je(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+je(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=je(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+je(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function tf(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Le&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo extends V_{constructor(e,n,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=kr("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(D(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,s){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const o=jo.getListenId_(e,i),a={};this.listens_[o]=a;const l=ef(e._queryParams);this.restRequest_(r+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(r,h,!1,i),Zi(this.listens_,o)===a){let d;c?c===401?d="permission_denied":d="rest_error:"+c:d="ok",s(d,null)}})}unlisten(e,n){const i=jo.getListenId_(e,n);delete this.listens_[i]}get(e){const n=ef(e._queryParams),i=e._path.toString(),s=new Ca;return this.restRequest_(i+".json",n,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(i,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ps(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=sr(a.responseText)}catch{rt("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&rt("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(){this.rootNode_=ee.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(){return{value:null,children:new Map}}function ny(t,e,n){if(ue(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=le(e);t.children.has(i)||t.children.set(i,Vo());const s=t.children.get(i);e=Te(e),ny(s,e,n)}}function cc(t,e,n){t.value!==null?n(e,t.value):VT(t,(i,s)=>{const r=new Se(e.toString()+"/"+i);cc(s,r,n)})}function VT(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&lt(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf=10*1e3,qT=30*1e3,KT=5*60*1e3;class GT{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new zT(e);const i=nf+(qT-nf)*Math.random();Hs(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;lt(e,(s,r)=>{r>0&&gn(this.statsToReport_,s)&&(n[s]=r,i=!0)}),i&&this.server_.reportStats(n),Hs(this.reportStats_.bind(this),Math.floor(Math.random()*2*KT))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Rt||(Rt={}));function iy(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ku(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Pu(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Rt.ACK_USER_WRITE,this.source=iy()}operationForChild(e){if(ue(this.path)){if(this.affectedTree.value!=null)return D(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Se(e));return new zo(_e(),n,this.revert)}}else return D(le(this.path)===e,"operationForChild called for unrelated child."),new zo(Te(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n){this.source=e,this.path=n,this.type=Rt.LISTEN_COMPLETE}operationForChild(e){return ue(this.path)?new fr(this.source,_e()):new fr(this.source,Te(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Rt.OVERWRITE}operationForChild(e){return ue(this.path)?new vi(this.source,_e(),this.snap.getImmediateChild(e)):new vi(this.source,Te(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Rt.MERGE}operationForChild(e){if(ue(this.path)){const n=this.children.subtree(new Se(e));return n.isEmpty()?null:n.value?new vi(this.source,_e(),n.value):new pr(this.source,_e(),n)}else return D(le(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new pr(this.source,Te(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ue(e))return this.isFullyInitialized()&&!this.filtered_;const n=le(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function XT(t,e,n,i){const s=[],r=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(UT(o.childName,o.snapshotNode))}),Ss(t,s,"child_removed",e,i,n),Ss(t,s,"child_added",e,i,n),Ss(t,s,"child_moved",r,i,n),Ss(t,s,"child_changed",e,i,n),Ss(t,s,"value",e,i,n),s}function Ss(t,e,n,i,s,r){const o=i.filter(a=>a.type===n);o.sort((a,l)=>JT(t,a,l)),o.forEach(a=>{const l=QT(t,a,r);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function QT(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function JT(t,e,n){if(e.childName==null||n.childName==null)throw fs("Should only compare child_ events.");const i=new ce(e.childName,e.snapshotNode),s=new ce(n.childName,n.snapshotNode);return t.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t,e){return{eventCache:t,serverCache:e}}function Ws(t,e,n,i){return Da(new wi(e,n,i),t.serverCache)}function sy(t,e,n,i){return Da(t.eventCache,new wi(e,n,i))}function uc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ii(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ml;const ZT=()=>(ml||(ml=new it($x)),ml);class Pe{constructor(e,n=ZT()){this.value=e,this.children=n}static fromObject(e){let n=new Pe(null);return lt(e,(i,s)=>{n=n.set(new Se(i),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:_e(),value:this.value};if(ue(e))return null;{const i=le(e),s=this.children.get(i);if(s!==null){const r=s.findRootMostMatchingPathAndValue(Te(e),n);return r!=null?{path:Be(new Se(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ue(e))return this;{const n=le(e),i=this.children.get(n);return i!==null?i.subtree(Te(e)):new Pe(null)}}set(e,n){if(ue(e))return new Pe(n,this.children);{const i=le(e),r=(this.children.get(i)||new Pe(null)).set(Te(e),n),o=this.children.insert(i,r);return new Pe(this.value,o)}}remove(e){if(ue(e))return this.children.isEmpty()?new Pe(null):new Pe(null,this.children);{const n=le(e),i=this.children.get(n);if(i){const s=i.remove(Te(e));let r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new Pe(null):new Pe(this.value,r)}else return this}}get(e){if(ue(e))return this.value;{const n=le(e),i=this.children.get(n);return i?i.get(Te(e)):null}}setTree(e,n){if(ue(e))return n;{const i=le(e),r=(this.children.get(i)||new Pe(null)).setTree(Te(e),n);let o;return r.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,r),new Pe(this.value,o)}}fold(e){return this.fold_(_e(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(Be(e,s),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,_e(),n)}findOnPath_(e,n,i){const s=this.value?i(n,this.value):!1;if(s)return s;if(ue(e))return null;{const r=le(e),o=this.children.get(r);return o?o.findOnPath_(Te(e),Be(n,r),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,_e(),n)}foreachOnPath_(e,n,i){if(ue(e))return this;{this.value&&i(n,this.value);const s=le(e),r=this.children.get(s);return r?r.foreachOnPath_(Te(e),Be(n,s),i):new Pe(null)}}foreach(e){this.foreach_(_e(),e)}foreach_(e,n){this.children.inorderTraversal((i,s)=>{s.foreach_(Be(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.writeTree_=e}static empty(){return new Mt(new Pe(null))}}function js(t,e,n){if(ue(e))return new Mt(new Pe(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const s=i.path;let r=i.value;const o=nt(s,e);return r=r.updateChild(o,n),new Mt(t.writeTree_.set(s,r))}else{const s=new Pe(n),r=t.writeTree_.setTree(e,s);return new Mt(r)}}}function sf(t,e,n){let i=t;return lt(n,(s,r)=>{i=js(i,Be(e,s),r)}),i}function rf(t,e){if(ue(e))return Mt.empty();{const n=t.writeTree_.setTree(e,new Pe(null));return new Mt(n)}}function hc(t,e){return Ti(t,e)!=null}function Ti(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(nt(n.path,e)):null}function of(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Le,(i,s)=>{e.push(new ce(i,s))}):t.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new ce(i,s.value))}),e}function Dn(t,e){if(ue(e))return t;{const n=Ti(t,e);return n!=null?new Mt(new Pe(n)):new Mt(t.writeTree_.subtree(e))}}function dc(t){return t.writeTree_.isEmpty()}function is(t,e){return ry(_e(),t.writeTree_,e)}function ry(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((s,r)=>{s===".priority"?(D(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):n=ry(Be(t,s),r,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Be(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t,e){return cy(e,t)}function ek(t,e,n,i,s){D(i>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:s}),s&&(t.visibleWrites=js(t.visibleWrites,e,n)),t.lastWriteId=i}function tk(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function nk(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);D(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let s=i.visible,r=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&ik(a,i.path)?s=!1:At(i.path,a.path)&&(r=!0)),o--}if(s){if(r)return sk(t),!0;if(i.snap)t.visibleWrites=rf(t.visibleWrites,i.path);else{const a=i.children;lt(a,l=>{t.visibleWrites=rf(t.visibleWrites,Be(i.path,l))})}return!0}else return!1}function ik(t,e){if(t.snap)return At(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&At(Be(t.path,n),e))return!0;return!1}function sk(t){t.visibleWrites=oy(t.allWrites,rk,_e()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function rk(t){return t.visible}function oy(t,e,n){let i=Mt.empty();for(let s=0;s<t.length;++s){const r=t[s];if(e(r)){const o=r.path;let a;if(r.snap)At(n,o)?(a=nt(n,o),i=js(i,a,r.snap)):At(o,n)&&(a=nt(o,n),i=js(i,_e(),r.snap.getChild(a)));else if(r.children){if(At(n,o))a=nt(n,o),i=sf(i,a,r.children);else if(At(o,n))if(a=nt(o,n),ue(a))i=sf(i,_e(),r.children);else{const l=Zi(r.children,le(a));if(l){const c=l.getChild(Te(a));i=js(i,_e(),c)}}}else throw fs("WriteRecord should have .snap or .children")}}return i}function ay(t,e,n,i,s){if(!i&&!s){const r=Ti(t.visibleWrites,e);if(r!=null)return r;{const o=Dn(t.visibleWrites,e);if(dc(o))return n;if(n==null&&!hc(o,_e()))return null;{const a=n||ee.EMPTY_NODE;return is(o,a)}}}else{const r=Dn(t.visibleWrites,e);if(!s&&dc(r))return n;if(!s&&n==null&&!hc(r,_e()))return null;{const o=function(c){return(c.visible||s)&&(!i||!~i.indexOf(c.writeId))&&(At(c.path,e)||At(e,c.path))},a=oy(t.allWrites,o,e),l=n||ee.EMPTY_NODE;return is(a,l)}}}function ok(t,e,n){let i=ee.EMPTY_NODE;const s=Ti(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Le,(r,o)=>{i=i.updateImmediateChild(r,o)}),i;if(n){const r=Dn(t.visibleWrites,e);return n.forEachChild(Le,(o,a)=>{const l=is(Dn(r,new Se(o)),a);i=i.updateImmediateChild(o,l)}),of(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const r=Dn(t.visibleWrites,e);return of(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function ak(t,e,n,i,s){D(i||s,"Either existingEventSnap or existingServerSnap must exist");const r=Be(e,n);if(hc(t.visibleWrites,r))return null;{const o=Dn(t.visibleWrites,r);return dc(o)?s.getChild(n):is(o,s.getChild(n))}}function lk(t,e,n,i){const s=Be(e,n),r=Ti(t.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(n)){const o=Dn(t.visibleWrites,s);return is(o,i.getNode().getImmediateChild(n))}else return null}function ck(t,e){return Ti(t.visibleWrites,e)}function uk(t,e,n,i,s,r,o){let a;const l=Dn(t.visibleWrites,e),c=Ti(l,_e());if(c!=null)a=c;else if(n!=null)a=is(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=r?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let f=d.getNext();for(;f&&u.length<s;)h(f,i)!==0&&u.push(f),f=d.getNext();return u}else return[]}function hk(){return{visibleWrites:Mt.empty(),allWrites:[],lastWriteId:-1}}function qo(t,e,n,i){return ay(t.writeTree,t.treePath,e,n,i)}function Ru(t,e){return ok(t.writeTree,t.treePath,e)}function af(t,e,n,i){return ak(t.writeTree,t.treePath,e,n,i)}function Ko(t,e){return ck(t.writeTree,Be(t.treePath,e))}function dk(t,e,n,i,s,r){return uk(t.writeTree,t.treePath,e,n,i,s,r)}function Ou(t,e,n){return lk(t.writeTree,t.treePath,e,n)}function ly(t,e){return cy(Be(t.treePath,e),t.writeTree)}function cy(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;D(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),D(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(i,hr(i,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(i,ur(i,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(i,ns(i,e.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(i,hr(i,e.snapshotNode,s.oldSnap));else throw fs("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const uy=new pk;class Mu{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new wi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ou(this.writes_,e,i)}}getChildAfterChild(e,n,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ii(this.viewCache_),r=dk(this.writes_,s,n,1,i,e);return r.length===0?null:r[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(t){return{filter:t}}function mk(t,e){D(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),D(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function _k(t,e,n,i,s){const r=new fk;let o,a;if(n.type===Rt.OVERWRITE){const c=n;c.source.fromUser?o=fc(t,e,c.path,c.snap,i,s,r):(D(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ue(c.path),o=Go(t,e,c.path,c.snap,i,s,a,r))}else if(n.type===Rt.MERGE){const c=n;c.source.fromUser?o=bk(t,e,c.path,c.children,i,s,r):(D(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=pc(t,e,c.path,c.children,i,s,a,r))}else if(n.type===Rt.ACK_USER_WRITE){const c=n;c.revert?o=Ik(t,e,c.path,i,s,r):o=vk(t,e,c.path,c.affectedTree,i,s,r)}else if(n.type===Rt.LISTEN_COMPLETE)o=wk(t,e,n.path,i,r);else throw fs("Unknown operation type: "+n.type);const l=r.getChanges();return yk(e,o,l),{viewCache:o,changes:l}}function yk(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=uc(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(ty(uc(e)))}}function hy(t,e,n,i,s,r){const o=e.eventCache;if(Ko(i,n)!=null)return e;{let a,l;if(ue(n))if(D(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Ii(e),u=c instanceof ee?c:ee.EMPTY_NODE,h=Ru(i,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,r)}else{const c=qo(i,Ii(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,r)}else{const c=le(n);if(c===".priority"){D($n(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=af(i,n,u,l);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=Te(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const d=af(i,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(c).updateChild(u,d):h=o.getNode().getImmediateChild(c)}else h=Ou(i,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,u,s,r):a=o.getNode()}}return Ws(e,a,o.isFullyInitialized()||ue(n),t.filter.filtersNodes())}}function Go(t,e,n,i,s,r,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(ue(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),f,null)}else{const f=le(n);if(!l.isCompleteForPath(n)&&$n(n)>1)return e;const p=Te(n),y=l.getNode().getImmediateChild(f).updateChild(p,i);f===".priority"?c=u.updatePriority(l.getNode(),y):c=u.updateChild(l.getNode(),f,y,p,uy,null)}const h=sy(e,c,l.isFullyInitialized()||ue(n),u.filtersNodes()),d=new Mu(s,h,r);return hy(t,h,n,s,d,a)}function fc(t,e,n,i,s,r,o){const a=e.eventCache;let l,c;const u=new Mu(s,e,r);if(ue(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),l=Ws(e,c,!0,t.filter.filtersNodes());else{const h=le(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),l=Ws(e,c,a.isFullyInitialized(),a.isFiltered());else{const d=Te(n),f=a.getNode().getImmediateChild(h);let p;if(ue(d))p=i;else{const m=u.getCompleteChild(h);m!=null?q_(d)===".priority"&&m.getChild(G_(d)).isEmpty()?p=m:p=m.updateChild(d,i):p=ee.EMPTY_NODE}if(f.equals(p))l=e;else{const m=t.filter.updateChild(a.getNode(),h,p,d,u,o);l=Ws(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function lf(t,e){return t.eventCache.isCompleteForChild(e)}function bk(t,e,n,i,s,r,o){let a=e;return i.foreach((l,c)=>{const u=Be(n,l);lf(e,le(u))&&(a=fc(t,a,u,c,s,r,o))}),i.foreach((l,c)=>{const u=Be(n,l);lf(e,le(u))||(a=fc(t,a,u,c,s,r,o))}),a}function cf(t,e,n){return n.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function pc(t,e,n,i,s,r,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;ue(n)?c=i:c=new Pe(null).setTree(n,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),p=cf(t,f,d);l=Go(t,l,new Se(h),p,s,r,o,a)}}),c.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!f){const p=e.serverCache.getNode().getImmediateChild(h),m=cf(t,p,d);l=Go(t,l,new Se(h),m,s,r,o,a)}}),l}function vk(t,e,n,i,s,r,o){if(Ko(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(ue(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Go(t,e,n,l.getNode().getChild(n),s,r,a,o);if(ue(n)){let c=new Pe(null);return l.getNode().forEachChild(Gi,(u,h)=>{c=c.set(new Se(u),h)}),pc(t,e,n,c,s,r,a,o)}else return e}else{let c=new Pe(null);return i.foreach((u,h)=>{const d=Be(n,u);l.isCompleteForPath(d)&&(c=c.set(u,l.getNode().getChild(d)))}),pc(t,e,n,c,s,r,a,o)}}function wk(t,e,n,i,s){const r=e.serverCache,o=sy(e,r.getNode(),r.isFullyInitialized()||ue(n),r.isFiltered());return hy(t,o,n,i,uy,s)}function Ik(t,e,n,i,s,r){let o;if(Ko(i,n)!=null)return e;{const a=new Mu(i,e,s),l=e.eventCache.getNode();let c;if(ue(n)||le(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=qo(i,Ii(e));else{const h=e.serverCache.getNode();D(h instanceof ee,"serverChildren would be complete if leaf node"),u=Ru(i,h)}u=u,c=t.filter.updateFullNode(l,u,r)}else{const u=le(n);let h=Ou(i,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=t.filter.updateChild(l,u,h,Te(n),a,r):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,ee.EMPTY_NODE,Te(n),a,r):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=qo(i,Ii(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,r)))}return o=e.serverCache.isFullyInitialized()||Ko(i,_e())!=null,Ws(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new xu(i.getIndex()),r=WT(i);this.processor_=gk(r);const o=n.serverCache,a=n.eventCache,l=s.updateFullNode(ee.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(ee.EMPTY_NODE,a.getNode(),null),u=new wi(l,o.isFullyInitialized(),s.filtersNodes()),h=new wi(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=Da(h,u),this.eventGenerator_=new YT(this.query_)}get query(){return this.query_}}function Ck(t){return t.viewCache_.serverCache.getNode()}function Sk(t,e){const n=Ii(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ue(e)&&!n.getImmediateChild(le(e)).isEmpty())?n.getChild(e):null}function uf(t){return t.eventRegistrations_.length===0}function xk(t,e){t.eventRegistrations_.push(e)}function hf(t,e,n){const i=[];if(n){D(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(r=>{const o=r.createCancelEvent(n,s);o&&i.push(o)})}if(e){let s=[];for(let r=0;r<t.eventRegistrations_.length;++r){const o=t.eventRegistrations_[r];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(r+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return i}function df(t,e,n,i){e.type===Rt.MERGE&&e.source.queryId!==null&&(D(Ii(t.viewCache_),"We should always have a full cache before handling merges"),D(uc(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,r=_k(t.processor_,s,e,n,i);return mk(t.processor_,r.viewCache),D(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,dy(t,r.changes,r.viewCache.eventCache.getNode(),null)}function Tk(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Le,(r,o)=>{i.push(ns(r,o))}),n.isFullyInitialized()&&i.push(ty(n.getNode())),dy(t,i,n.getNode(),e)}function dy(t,e,n,i){const s=i?[i]:t.eventRegistrations_;return XT(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yo;class kk{constructor(){this.views=new Map}}function Pk(t){D(!Yo,"__referenceConstructor has already been defined"),Yo=t}function Ak(){return D(Yo,"Reference.ts has not been loaded"),Yo}function Rk(t){return t.views.size===0}function Du(t,e,n,i){const s=e.source.queryId;if(s!==null){const r=t.views.get(s);return D(r!=null,"SyncTree gave us an op for an invalid query."),df(r,e,n,i)}else{let r=[];for(const o of t.views.values())r=r.concat(df(o,e,n,i));return r}}function Ok(t,e,n,i,s){const r=e._queryIdentifier,o=t.views.get(r);if(!o){let a=qo(n,s?i:null),l=!1;a?l=!0:i instanceof ee?(a=Ru(n,i),l=!1):(a=ee.EMPTY_NODE,l=!1);const c=Da(new wi(a,l,!1),new wi(i,s,!1));return new Ek(e,c)}return o}function Mk(t,e,n,i,s,r){const o=Ok(t,e,i,s,r);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),xk(o,n),Tk(o,n)}function Dk(t,e,n,i){const s=e._queryIdentifier,r=[];let o=[];const a=Bn(t);if(s==="default")for(const[l,c]of t.views.entries())o=o.concat(hf(c,n,i)),uf(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||r.push(c.query));else{const l=t.views.get(s);l&&(o=o.concat(hf(l,n,i)),uf(l)&&(t.views.delete(s),l.query._queryParams.loadsAllData()||r.push(l.query)))}return a&&!Bn(t)&&r.push(new(Ak())(e._repo,e._path)),{removed:r,events:o}}function fy(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Yi(t,e){let n=null;for(const i of t.views.values())n=n||Sk(i,e);return n}function py(t,e){if(e._queryParams.loadsAllData())return Na(t);{const i=e._queryIdentifier;return t.views.get(i)}}function gy(t,e){return py(t,e)!=null}function Bn(t){return Na(t)!=null}function Na(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo;function Nk(t){D(!Xo,"__referenceConstructor has already been defined"),Xo=t}function Lk(){return D(Xo,"Reference.ts has not been loaded"),Xo}let Fk=1;class ff{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Pe(null),this.pendingWriteTree_=hk(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function my(t,e,n,i,s){return ek(t.pendingWriteTree_,e,n,i,s),s?Ar(t,new vi(iy(),e,n)):[]}function oi(t,e,n=!1){const i=tk(t.pendingWriteTree_,e);if(nk(t.pendingWriteTree_,e)){let r=new Pe(null);return i.snap!=null?r=r.set(_e(),!0):lt(i.children,o=>{r=r.set(new Se(o),!0)}),Ar(t,new zo(i.path,r,n))}else return[]}function La(t,e,n){return Ar(t,new vi(ku(),e,n))}function $k(t,e,n){const i=Pe.fromObject(n);return Ar(t,new pr(ku(),e,i))}function Bk(t,e){return Ar(t,new fr(ku(),e))}function Uk(t,e,n){const i=Lu(t,n);if(i){const s=Fu(i),r=s.path,o=s.queryId,a=nt(r,e),l=new fr(Pu(o),a);return $u(t,r,l)}else return[]}function gc(t,e,n,i,s=!1){const r=e._path,o=t.syncPointTree_.get(r);let a=[];if(o&&(e._queryIdentifier==="default"||gy(o,e))){const l=Dk(o,e,n,i);Rk(o)&&(t.syncPointTree_=t.syncPointTree_.remove(r));const c=l.removed;if(a=l.events,!s){const u=c.findIndex(d=>d._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(r,(d,f)=>Bn(f));if(u&&!h){const d=t.syncPointTree_.subtree(r);if(!d.isEmpty()){const f=jk(d);for(let p=0;p<f.length;++p){const m=f[p],y=m.query,b=by(t,m);t.listenProvider_.startListening(Vs(y),Qo(t,y),b.hashFn,b.onComplete)}}}!h&&c.length>0&&!i&&(u?t.listenProvider_.stopListening(Vs(e),null):c.forEach(d=>{const f=t.queryToTagMap.get(Fa(d));t.listenProvider_.stopListening(Vs(d),f)}))}Vk(t,c)}return a}function Hk(t,e,n,i){const s=Lu(t,i);if(s!=null){const r=Fu(s),o=r.path,a=r.queryId,l=nt(o,e),c=new vi(Pu(a),l,n);return $u(t,o,c)}else return[]}function Wk(t,e,n,i){const s=Lu(t,i);if(s){const r=Fu(s),o=r.path,a=r.queryId,l=nt(o,e),c=Pe.fromObject(n),u=new pr(Pu(a),l,c);return $u(t,o,u)}else return[]}function pf(t,e,n,i=!1){const s=e._path;let r=null,o=!1;t.syncPointTree_.foreachOnPath(s,(d,f)=>{const p=nt(d,s);r=r||Yi(f,p),o=o||Bn(f)});let a=t.syncPointTree_.get(s);a?(o=o||Bn(a),r=r||Yi(a,_e())):(a=new kk,t.syncPointTree_=t.syncPointTree_.set(s,a));let l;r!=null?l=!0:(l=!1,r=ee.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const m=Yi(p,_e());m&&(r=r.updateImmediateChild(f,m))}));const c=gy(a,e);if(!c&&!e._queryParams.loadsAllData()){const d=Fa(e);D(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const f=zk();t.queryToTagMap.set(d,f),t.tagToQueryMap.set(f,d)}const u=Au(t.pendingWriteTree_,s);let h=Mk(a,e,n,u,r,l);if(!c&&!o&&!i){const d=py(a,e);h=h.concat(qk(t,e,d))}return h}function Nu(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=nt(o,e),c=Yi(a,l);if(c)return c});return ay(s,e,r,n,!0)}function Ar(t,e){return _y(e,t.syncPointTree_,null,Au(t.pendingWriteTree_,_e()))}function _y(t,e,n,i){if(ue(t.path))return yy(t,e,n,i);{const s=e.get(_e());n==null&&s!=null&&(n=Yi(s,_e()));let r=[];const o=le(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=ly(i,o);r=r.concat(_y(a,l,c,u))}return s&&(r=r.concat(Du(s,t,i,n))),r}}function yy(t,e,n,i){const s=e.get(_e());n==null&&s!=null&&(n=Yi(s,_e()));let r=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=ly(i,o),u=t.operationForChild(o);u&&(r=r.concat(yy(u,a,l,c)))}),s&&(r=r.concat(Du(s,t,i,n))),r}function by(t,e){const n=e.query,i=Qo(t,n);return{hashFn:()=>(Ck(e)||ee.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?Uk(t,n._path,i):Bk(t,n._path);{const r=Hx(s,n);return gc(t,n,null,r)}}}}function Qo(t,e){const n=Fa(e);return t.queryToTagMap.get(n)}function Fa(t){return t._path.toString()+"$"+t._queryIdentifier}function Lu(t,e){return t.tagToQueryMap.get(e)}function Fu(t){const e=t.indexOf("$");return D(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Se(t.substr(0,e))}}function $u(t,e,n){const i=t.syncPointTree_.get(e);D(i,"Missing sync point for query tag that we're tracking");const s=Au(t.pendingWriteTree_,e);return Du(i,n,s,null)}function jk(t){return t.fold((e,n,i)=>{if(n&&Bn(n))return[Na(n)];{let s=[];return n&&(s=fy(n)),lt(i,(r,o)=>{s=s.concat(o)}),s}})}function Vs(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Lk())(t._repo,t._path):t}function Vk(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const s=Fa(i),r=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(r)}}}function zk(){return Fk++}function qk(t,e,n){const i=e._path,s=Qo(t,e),r=by(t,n),o=t.listenProvider_.startListening(Vs(e),s,r.hashFn,r.onComplete),a=t.syncPointTree_.subtree(i);if(s)D(!Bn(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,h)=>{if(!ue(c)&&u&&Bn(u))return[Na(u).query];{let d=[];return u&&(d=d.concat(fy(u).map(f=>f.query))),lt(h,(f,p)=>{d=d.concat(p)}),d}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(Vs(u),Qo(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Bu(n)}node(){return this.node_}}class Uu{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Be(this.path_,e);return new Uu(this.syncTree_,n)}node(){return Nu(this.syncTree_,this.path_)}}const Kk=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},gf=function(t,e,n){if(!t||typeof t!="object")return t;if(D(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Gk(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Yk(t[".sv"],e);D(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Gk=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:D(!1,"Unexpected server value: "+t)}},Yk=function(t,e,n){t.hasOwnProperty("increment")||D(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&D(!1,"Unexpected increment value: "+i);const s=e.node();if(D(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const o=s.getValue();return typeof o!="number"?i:o+i},Xk=function(t,e,n,i){return Hu(e,new Uu(n,t),i)},vy=function(t,e,n){return Hu(t,new Bu(e),n)};function Hu(t,e,n){const i=t.getPriority().val(),s=gf(i,e.getImmediateChild(".priority"),n);let r;if(t.isLeafNode()){const o=t,a=gf(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new He(a,qe(s)):t}else{const o=t;return r=o,s!==o.getPriority().val()&&(r=r.updatePriority(new He(s))),o.forEachChild(Le,(a,l)=>{const c=Hu(l,e.getImmediateChild(a),n);c!==l&&(r=r.updateImmediateChild(a,c))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function ju(t,e){let n=e instanceof Se?e:new Se(e),i=t,s=le(n);for(;s!==null;){const r=Zi(i.node.children,s)||{children:{},childCount:0};i=new Wu(s,i,r),n=Te(n),s=le(n)}return i}function bs(t){return t.node.value}function wy(t,e){t.node.value=e,mc(t)}function Iy(t){return t.node.childCount>0}function Qk(t){return bs(t)===void 0&&!Iy(t)}function $a(t,e){lt(t.node.children,(n,i)=>{e(new Wu(n,t,i))})}function Ey(t,e,n,i){n&&!i&&e(t),$a(t,s=>{Ey(s,e,!0,i)}),n&&i&&e(t)}function Jk(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Rr(t){return new Se(t.parent===null?t.name:Rr(t.parent)+"/"+t.name)}function mc(t){t.parent!==null&&Zk(t.parent,t.name,t)}function Zk(t,e,n){const i=Qk(n),s=gn(t.node.children,e);i&&s?(delete t.node.children[e],t.node.childCount--,mc(t)):!i&&!s&&(t.node.children[e]=n.node,t.node.childCount++,mc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=/[\[\].#$\/\u0000-\u001F\u007F]/,tP=/[\[\].#$\u0000-\u001F\u007F]/,_l=10*1024*1024,Cy=function(t){return typeof t=="string"&&t.length!==0&&!eP.test(t)},Sy=function(t){return typeof t=="string"&&t.length!==0&&!tP.test(t)},nP=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Sy(t)},iP=function(t,e,n,i){i&&e===void 0||Vu(tu(t,"value"),e,n)},Vu=function(t,e,n){const i=n instanceof Se?new vT(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Yn(i));if(typeof e=="function")throw new Error(t+"contains a function "+Yn(i)+" with contents = "+e.toString());if(S_(e))throw new Error(t+"contains "+e.toString()+" "+Yn(i));if(typeof e=="string"&&e.length>_l/3&&Sa(e)>_l)throw new Error(t+"contains a string greater than "+_l+" utf8 bytes "+Yn(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,r=!1;if(lt(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!Cy(o)))throw new Error(t+" contains an invalid key ("+o+") "+Yn(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);wT(i,o),Vu(t,a,i),IT(i)}),s&&r)throw new Error(t+' contains ".value" child '+Yn(i)+" in addition to actual children.")}},xy=function(t,e,n,i){if(!(i&&n===void 0)&&!Sy(n))throw new Error(tu(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},sP=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),xy(t,e,n,i)},rP=function(t,e){if(le(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},oP=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Cy(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!nP(n))throw new Error(tu(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function zu(t,e){let n=null;for(let i=0;i<e.length;i++){const s=e[i],r=s.getPath();n!==null&&!Eu(r,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&t.eventLists_.push(n)}function Ty(t,e,n){zu(t,n),ky(t,i=>Eu(i,e))}function fn(t,e,n){zu(t,n),ky(t,i=>At(i,e)||At(e,i))}function ky(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const s=t.eventLists_[i];if(s){const r=s.path;e(r)?(lP(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function lP(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();hi&&Ye("event: "+n.toString()),ys(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP="repo_interrupt",uP=25;class hP{constructor(e,n,i,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new aP,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Vo(),this.transactionQueueTree_=new Wu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dP(t,e,n){if(t.stats_=wu(t.repoInfo_),t.forceRestClient_||zx())t.server_=new jo(t.repoInfo_,(i,s,r,o)=>{mf(t,i,s,r,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>_f(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{je(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new un(t.repoInfo_,e,(i,s,r,o)=>{mf(t,i,s,r,o)},i=>{_f(t,i)},i=>{pP(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=Xx(t.repoInfo_,()=>new GT(t.stats_,t.server_)),t.infoData_=new jT,t.infoSyncTree_=new ff({startListening:(i,s,r,o)=>{let a=[];const l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=La(t.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Ku(t,"connected",!1),t.serverSyncTree_=new ff({startListening:(i,s,r,o)=>(t.server_.listen(i,r,s,(a,l)=>{const c=o(a,l);fn(t.eventQueue_,i._path,c)}),[]),stopListening:(i,s)=>{t.server_.unlisten(i,s)}})}function fP(t){const n=t.infoData_.getNode(new Se(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function qu(t){return Kk({timestamp:fP(t)})}function mf(t,e,n,i,s){t.dataUpdateCount++;const r=new Se(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(i){const l=Ro(n,c=>qe(c));o=Wk(t.serverSyncTree_,r,l,s)}else{const l=qe(n);o=Hk(t.serverSyncTree_,r,l,s)}else if(i){const l=Ro(n,c=>qe(c));o=$k(t.serverSyncTree_,r,l)}else{const l=qe(n);o=La(t.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=Ba(t,r)),fn(t.eventQueue_,a,o)}function _f(t,e){Ku(t,"connected",e),e===!1&&mP(t)}function pP(t,e){lt(e,(n,i)=>{Ku(t,n,i)})}function Ku(t,e,n){const i=new Se("/.info/"+e),s=qe(n);t.infoData_.updateSnapshot(i,s);const r=La(t.infoSyncTree_,i,s);fn(t.eventQueue_,i,r)}function Py(t){return t.nextWriteId_++}function gP(t,e,n,i,s){Gu(t,"set",{path:e.toString(),value:n,priority:i});const r=qu(t),o=qe(n,i),a=Nu(t.serverSyncTree_,e),l=vy(o,a,r),c=Py(t),u=my(t.serverSyncTree_,e,l,c,!0);zu(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(d,f)=>{const p=d==="ok";p||rt("set at "+e+" failed: "+d);const m=oi(t.serverSyncTree_,c,!p);fn(t.eventQueue_,e,m),bP(t,s,d,f)});const h=Dy(t,e);Ba(t,h),fn(t.eventQueue_,h,[])}function mP(t){Gu(t,"onDisconnectEvents");const e=qu(t),n=Vo();cc(t.onDisconnect_,_e(),(s,r)=>{const o=Xk(s,r,t.serverSyncTree_,e);ny(n,s,o)});let i=[];cc(n,_e(),(s,r)=>{i=i.concat(La(t.serverSyncTree_,s,r));const o=Dy(t,s);Ba(t,o)}),t.onDisconnect_=Vo(),fn(t.eventQueue_,_e(),i)}function _P(t,e,n){let i;le(e._path)===".info"?i=pf(t.infoSyncTree_,e,n):i=pf(t.serverSyncTree_,e,n),Ty(t.eventQueue_,e._path,i)}function yf(t,e,n){let i;le(e._path)===".info"?i=gc(t.infoSyncTree_,e,n):i=gc(t.serverSyncTree_,e,n),Ty(t.eventQueue_,e._path,i)}function yP(t){t.persistentConnection_&&t.persistentConnection_.interrupt(cP)}function Gu(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ye(n,...e)}function bP(t,e,n,i){e&&ys(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let r=s;i&&(r+=": "+i);const o=new Error(r);o.code=s,e(o)}})}function Ay(t,e,n){return Nu(t.serverSyncTree_,e,n)||ee.EMPTY_NODE}function Yu(t,e=t.transactionQueueTree_){if(e||Ua(t,e),bs(e)){const n=Oy(t,e);D(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&vP(t,Rr(e),n)}else Iy(e)&&$a(e,n=>{Yu(t,n)})}function vP(t,e,n){const i=n.map(c=>c.currentWriteId),s=Ay(t,e,i);let r=s;const o=s.hash();for(let c=0;c<n.length;c++){const u=n[c];D(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=nt(e,u.path);r=r.updateChild(h,u.currentOutputSnapshotRaw)}const a=r.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Gu(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(oi(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();Ua(t,ju(t.transactionQueueTree_,e)),Yu(t,t.transactionQueueTree_),fn(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)ys(h[d])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{rt("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}Ba(t,e)}},o)}function Ba(t,e){const n=Ry(t,e),i=Rr(n),s=Oy(t,n);return wP(t,s,i),i}function wP(t,e,n){if(e.length===0)return;const i=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=nt(n,l.path);let u=!1,h;if(D(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,s=s.concat(oi(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=uP)u=!0,h="maxretry",s=s.concat(oi(t.serverSyncTree_,l.currentWriteId,!0));else{const d=Ay(t,l.path,o);l.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){Vu("transaction failed: Data returned ",f,l.path);let p=qe(f);typeof f=="object"&&f!=null&&gn(f,".priority")||(p=p.updatePriority(d.getPriority()));const y=l.currentWriteId,b=qu(t),w=vy(p,d,b);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=w,l.currentWriteId=Py(t),o.splice(o.indexOf(y),1),s=s.concat(my(t.serverSyncTree_,l.path,w,l.currentWriteId,l.applyLocally)),s=s.concat(oi(t.serverSyncTree_,y,!0))}else u=!0,h="nodata",s=s.concat(oi(t.serverSyncTree_,l.currentWriteId,!0))}fn(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(h),!1,null))))}Ua(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)ys(i[a]);Yu(t,t.transactionQueueTree_)}function Ry(t,e){let n,i=t.transactionQueueTree_;for(n=le(e);n!==null&&bs(i)===void 0;)i=ju(i,n),e=Te(e),n=le(e);return i}function Oy(t,e){const n=[];return My(t,e,n),n.sort((i,s)=>i.order-s.order),n}function My(t,e,n){const i=bs(e);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);$a(e,s=>{My(t,s,n)})}function Ua(t,e){const n=bs(e);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,wy(e,n.length>0?n:void 0)}$a(e,i=>{Ua(t,i)})}function Dy(t,e){const n=Rr(Ry(t,e)),i=ju(t.transactionQueueTree_,e);return Jk(i,s=>{yl(t,s)}),yl(t,i),Ey(i,s=>{yl(t,s)}),n}function yl(t,e){const n=bs(e);if(n){const i=[];let s=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(D(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):(D(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(oi(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?wy(e,void 0):n.length=r+1,fn(t.eventQueue_,Rr(e),s);for(let o=0;o<i.length;o++)ys(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function EP(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):rt(`Invalid query segment '${n}' in query '${t}'`)}return e}const bf=function(t,e){const n=CP(t),i=n.namespace;n.domain==="firebase.com"&&dn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&dn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Lx();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new F_(n.host,n.secure,i,s,e,"",i!==n.subdomain),path:new Se(n.pathString)}},CP=function(t){let e="",n="",i="",s="",r="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(s=IP(t.substring(u,h)));const d=EP(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");i=e.substring(0,p).toLowerCase(),n=e.substring(p+1),r=i}"ns"in d&&(r=d.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:s,namespace:r}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,n,i,s){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+je(this.snapshot.exportVal())}}class Ly{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return D(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,n,i,s){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return ue(this._path)?null:q_(this._path)}get ref(){return new mn(this._repo,this._path)}get _queryIdentifier(){const e=tf(this._queryParams),n=bu(e);return n==="{}"?"default":n}get _queryObject(){return tf(this._queryParams)}isEqual(e){if(e=ut(e),!(e instanceof Xu))return!1;const n=this._repo===e._repo,i=Eu(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+bT(this._path)}}class mn extends Xu{constructor(e,n){super(e,n,new Tu,!1)}get parent(){const e=G_(this._path);return e===null?null:new mn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class gr{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Se(e),i=Jo(this.ref,e);return new gr(this._node.getChild(n),i,Le)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>e(new gr(s,Jo(this.ref,i),Le)))}hasChild(e){const n=new Se(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function oN(t,e){return t=ut(t),t._checkNotDeleted("ref"),e!==void 0?Jo(t._root,e):t._root}function Jo(t,e){return t=ut(t),le(t._path)===null?sP("child","path",e,!1):xy("child","path",e,!1),new mn(t._repo,Be(t._path,e))}function aN(t,e){t=ut(t),rP("set",t._path),iP("set",e,t._path,!1);const n=new Ca;return gP(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class Qu{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new Ny("value",this,new gr(e.snapshotNode,new mn(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Ly(this,e,n):null}matches(e){return e instanceof Qu?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Ju{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Ly(this,e,n):null}createEvent(e,n){D(e.childName!=null,"Child events should have a childName.");const i=Jo(new mn(n._repo,n._path),e.childName),s=n._queryParams.getIndex();return new Ny(e.type,this,new gr(e.snapshotNode,i,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ju?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function xP(t,e,n,i,s){let r;if(typeof i=="object"&&(r=void 0,s=i),typeof i=="function"&&(r=i),s&&s.onlyOnce){const l=n,c=(u,h)=>{yf(t._repo,t,a),l(u,h)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new SP(n,r||void 0),a=e==="value"?new Qu(o):new Ju(e,o);return _P(t._repo,t,a),()=>yf(t._repo,t,a)}function lN(t,e,n,i){return xP(t,"value",e,n,i)}Pk(mn);Nk(mn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP="FIREBASE_DATABASE_EMULATOR_HOST",_c={};let kP=!1;function PP(t,e,n,i){t.repoInfo_=new F_(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function AP(t,e,n,i,s){let r=i||t.options.databaseURL;r===void 0&&(t.options.projectId||dn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ye("Using default host for project ",t.options.projectId),r=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=bf(r,s),a=o.repoInfo,l,c;typeof process<"u"&&Fd&&(c=Fd[TP]),c?(l=!0,r=`http://${c}?ns=${a.namespace}`,o=bf(r,s),a=o.repoInfo):l=!o.repoInfo.secure;const u=s&&l?new Ki(Ki.OWNER):new Kx(t.name,t.options,e);oP("Invalid Firebase Database URL",o),ue(o.path)||dn("Database URL must point to the root of a Firebase Database (not including a child path).");const h=OP(a,t,u,new qx(t.name,n));return new MP(h,t)}function RP(t,e){const n=_c[e];(!n||n[t.key]!==t)&&dn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),yP(t),delete n[t.key]}function OP(t,e,n,i){let s=_c[e.name];s||(s={},_c[e.name]=s);let r=s[t.toURLString()];return r&&dn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new hP(t,kP,n,i),s[t.toURLString()]=r,r}class MP{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(dP(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new mn(this._repo,_e())),this._rootInternal}_delete(){return this._rootInternal!==null&&(RP(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&dn("Cannot call "+e+" on a deleted database.")}}function cN(t=iu(),e){const n=xi(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=R0("database");i&&DP(n,...i)}return n}function DP(t,e,n,i={}){t=ut(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&dn("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let r;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&dn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new Ki(Ki.OWNER);else if(i.mockUserToken){const o=typeof i.mockUserToken=="string"?i.mockUserToken:O0(i.mockUserToken,t.app.options.projectId);r=new Ki(o)}PP(s,e,n,r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t){Rx(gs),Gt(new Dt("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return AP(i,s,r,n)},"PUBLIC").setMultipleInstances(!0)),vt($d,Bd,t),vt($d,Bd,"esm2017")}un.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};un.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};NP();var LP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function FP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fy={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(LP,function(){var n=1e3,i=6e4,s=36e5,r="millisecond",o="second",a="minute",l="hour",c="day",u="week",h="month",d="quarter",f="year",p="date",m="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(q){var M=["th","st","nd","rd"],S=q%100;return"["+q+(M[(S-20)%10]||M[S]||M[0])+"]"}},A=function(q,M,S){var R=String(q);return!R||R.length>=M?q:""+Array(M+1-R.length).join(S)+q},C={s:A,z:function(q){var M=-q.utcOffset(),S=Math.abs(M),R=Math.floor(S/60),k=S%60;return(M<=0?"+":"-")+A(R,2,"0")+":"+A(k,2,"0")},m:function q(M,S){if(M.date()<S.date())return-q(S,M);var R=12*(S.year()-M.year())+(S.month()-M.month()),k=M.clone().add(R,h),G=S-k<0,K=M.clone().add(R+(G?-1:1),h);return+(-(R+(S-k)/(G?k-K:K-k))||0)},a:function(q){return q<0?Math.ceil(q)||0:Math.floor(q)},p:function(q){return{M:h,y:f,w:u,d:c,D:p,h:l,m:a,s:o,ms:r,Q:d}[q]||String(q||"").toLowerCase().replace(/s$/,"")},u:function(q){return q===void 0}},T="en",H={};H[T]=w;var W="$isDayjsObject",j=function(q){return q instanceof fe||!(!q||!q[W])},J=function q(M,S,R){var k;if(!M)return T;if(typeof M=="string"){var G=M.toLowerCase();H[G]&&(k=G),S&&(H[G]=S,k=G);var K=M.split("-");if(!k&&K.length>1)return q(K[0])}else{var re=M.name;H[re]=M,k=re}return!R&&k&&(T=k),k||!R&&T},Y=function(q,M){if(j(q))return q.clone();var S=typeof M=="object"?M:{};return S.date=q,S.args=arguments,new fe(S)},z=C;z.l=J,z.i=j,z.w=function(q,M){return Y(q,{locale:M.$L,utc:M.$u,x:M.$x,$offset:M.$offset})};var fe=function(){function q(S){this.$L=J(S.locale,null,!0),this.parse(S),this.$x=this.$x||S.x||{},this[W]=!0}var M=q.prototype;return M.parse=function(S){this.$d=function(R){var k=R.date,G=R.utc;if(k===null)return new Date(NaN);if(z.u(k))return new Date;if(k instanceof Date)return new Date(k);if(typeof k=="string"&&!/Z$/i.test(k)){var K=k.match(y);if(K){var re=K[2]-1||0,ie=(K[7]||"0").substring(0,3);return G?new Date(Date.UTC(K[1],re,K[3]||1,K[4]||0,K[5]||0,K[6]||0,ie)):new Date(K[1],re,K[3]||1,K[4]||0,K[5]||0,K[6]||0,ie)}}return new Date(k)}(S),this.init()},M.init=function(){var S=this.$d;this.$y=S.getFullYear(),this.$M=S.getMonth(),this.$D=S.getDate(),this.$W=S.getDay(),this.$H=S.getHours(),this.$m=S.getMinutes(),this.$s=S.getSeconds(),this.$ms=S.getMilliseconds()},M.$utils=function(){return z},M.isValid=function(){return this.$d.toString()!==m},M.isSame=function(S,R){var k=Y(S);return this.startOf(R)<=k&&k<=this.endOf(R)},M.isAfter=function(S,R){return Y(S)<this.startOf(R)},M.isBefore=function(S,R){return this.endOf(R)<Y(S)},M.$g=function(S,R,k){return z.u(S)?this[R]:this.set(k,S)},M.unix=function(){return Math.floor(this.valueOf()/1e3)},M.valueOf=function(){return this.$d.getTime()},M.startOf=function(S,R){var k=this,G=!!z.u(R)||R,K=z.p(S),re=function(N,B){var ae=z.w(k.$u?Date.UTC(k.$y,B,N):new Date(k.$y,B,N),k);return G?ae:ae.endOf(c)},ie=function(N,B){return z.w(k.toDate()[N].apply(k.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(B)),k)},pe=this.$W,ge=this.$M,Me=this.$D,me="set"+(this.$u?"UTC":"");switch(K){case f:return G?re(1,0):re(31,11);case h:return G?re(1,ge):re(0,ge+1);case u:var E=this.$locale().weekStart||0,$=(pe<E?pe+7:pe)-E;return re(G?Me-$:Me+(6-$),ge);case c:case p:return ie(me+"Hours",0);case l:return ie(me+"Minutes",1);case a:return ie(me+"Seconds",2);case o:return ie(me+"Milliseconds",3);default:return this.clone()}},M.endOf=function(S){return this.startOf(S,!1)},M.$set=function(S,R){var k,G=z.p(S),K="set"+(this.$u?"UTC":""),re=(k={},k[c]=K+"Date",k[p]=K+"Date",k[h]=K+"Month",k[f]=K+"FullYear",k[l]=K+"Hours",k[a]=K+"Minutes",k[o]=K+"Seconds",k[r]=K+"Milliseconds",k)[G],ie=G===c?this.$D+(R-this.$W):R;if(G===h||G===f){var pe=this.clone().set(p,1);pe.$d[re](ie),pe.init(),this.$d=pe.set(p,Math.min(this.$D,pe.daysInMonth())).$d}else re&&this.$d[re](ie);return this.init(),this},M.set=function(S,R){return this.clone().$set(S,R)},M.get=function(S){return this[z.p(S)]()},M.add=function(S,R){var k,G=this;S=Number(S);var K=z.p(R),re=function(ge){var Me=Y(G);return z.w(Me.date(Me.date()+Math.round(ge*S)),G)};if(K===h)return this.set(h,this.$M+S);if(K===f)return this.set(f,this.$y+S);if(K===c)return re(1);if(K===u)return re(7);var ie=(k={},k[a]=i,k[l]=s,k[o]=n,k)[K]||1,pe=this.$d.getTime()+S*ie;return z.w(pe,this)},M.subtract=function(S,R){return this.add(-1*S,R)},M.format=function(S){var R=this,k=this.$locale();if(!this.isValid())return k.invalidDate||m;var G=S||"YYYY-MM-DDTHH:mm:ssZ",K=z.z(this),re=this.$H,ie=this.$m,pe=this.$M,ge=k.weekdays,Me=k.months,me=k.meridiem,E=function(B,ae,g,_){return B&&(B[ae]||B(R,G))||g[ae].slice(0,_)},$=function(B){return z.s(re%12||12,B,"0")},N=me||function(B,ae,g){var _=B<12?"AM":"PM";return g?_.toLowerCase():_};return G.replace(b,function(B,ae){return ae||function(g){switch(g){case"YY":return String(R.$y).slice(-2);case"YYYY":return z.s(R.$y,4,"0");case"M":return pe+1;case"MM":return z.s(pe+1,2,"0");case"MMM":return E(k.monthsShort,pe,Me,3);case"MMMM":return E(Me,pe);case"D":return R.$D;case"DD":return z.s(R.$D,2,"0");case"d":return String(R.$W);case"dd":return E(k.weekdaysMin,R.$W,ge,2);case"ddd":return E(k.weekdaysShort,R.$W,ge,3);case"dddd":return ge[R.$W];case"H":return String(re);case"HH":return z.s(re,2,"0");case"h":return $(1);case"hh":return $(2);case"a":return N(re,ie,!0);case"A":return N(re,ie,!1);case"m":return String(ie);case"mm":return z.s(ie,2,"0");case"s":return String(R.$s);case"ss":return z.s(R.$s,2,"0");case"SSS":return z.s(R.$ms,3,"0");case"Z":return K}return null}(B)||K.replace(":","")})},M.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},M.diff=function(S,R,k){var G,K=this,re=z.p(R),ie=Y(S),pe=(ie.utcOffset()-this.utcOffset())*i,ge=this-ie,Me=function(){return z.m(K,ie)};switch(re){case f:G=Me()/12;break;case h:G=Me();break;case d:G=Me()/3;break;case u:G=(ge-pe)/6048e5;break;case c:G=(ge-pe)/864e5;break;case l:G=ge/s;break;case a:G=ge/i;break;case o:G=ge/n;break;default:G=ge}return k?G:z.a(G)},M.daysInMonth=function(){return this.endOf(h).$D},M.$locale=function(){return H[this.$L]},M.locale=function(S,R){if(!S)return this.$L;var k=this.clone(),G=J(S,R,!0);return G&&(k.$L=G),k},M.clone=function(){return z.w(this.$d,this)},M.toDate=function(){return new Date(this.valueOf())},M.toJSON=function(){return this.isValid()?this.toISOString():null},M.toISOString=function(){return this.$d.toISOString()},M.toString=function(){return this.$d.toUTCString()},q}(),Oe=fe.prototype;return Y.prototype=Oe,[["$ms",r],["$s",o],["$m",a],["$H",l],["$W",c],["$M",h],["$y",f],["$D",p]].forEach(function(q){Oe[q[1]]=function(M){return this.$g(M,q[0],q[1])}}),Y.extend=function(q,M){return q.$i||(q(M,fe,Y),q.$i=!0),Y},Y.locale=J,Y.isDayjs=j,Y.unix=function(q){return Y(1e3*q)},Y.en=H[T],Y.Ls=H,Y.p={},Y})})(Fy);var $P=Fy.exports;const uN=FP($P);/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Ni=typeof window<"u";function BP(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const ve=Object.assign;function bl(t,e){const n={};for(const i in e){const s=e[i];n[i]=Nt(s)?s.map(t):t(s)}return n}const zs=()=>{},Nt=Array.isArray,UP=/\/$/,HP=t=>t.replace(UP,"");function vl(t,e,n="/"){let i,s={},r="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),r=e.slice(l+1,a>-1?a:e.length),s=t(r)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=zP(i??e,n),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:o}}function WP(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function vf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function jP(t,e,n){const i=e.matched.length-1,s=n.matched.length-1;return i>-1&&i===s&&ss(e.matched[i],n.matched[s])&&$y(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ss(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function $y(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!VP(t[n],e[n]))return!1;return!0}function VP(t,e){return Nt(t)?wf(t,e):Nt(e)?wf(e,t):t===e}function wf(t,e){return Nt(e)?t.length===e.length&&t.every((n,i)=>n===e[i]):t.length===1&&t[0]===e}function zP(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=n.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var mr;(function(t){t.pop="pop",t.push="push"})(mr||(mr={}));var qs;(function(t){t.back="back",t.forward="forward",t.unknown=""})(qs||(qs={}));function qP(t){if(!t)if(Ni){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),HP(t)}const KP=/^[^#]+#/;function GP(t,e){return t.replace(KP,"#")+e}function YP(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const Ha=()=>({left:window.pageXOffset,top:window.pageYOffset});function XP(t){let e;if("el"in t){const n=t.el,i=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=YP(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function If(t,e){return(history.state?history.state.position-e:-1)+t}const yc=new Map;function QP(t,e){yc.set(t,e)}function JP(t){const e=yc.get(t);return yc.delete(t),e}let ZP=()=>location.protocol+"//"+location.host;function By(t,e){const{pathname:n,search:i,hash:s}=e,r=t.indexOf("#");if(r>-1){let a=s.includes(t.slice(r))?t.slice(r).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),vf(l,"")}return vf(n,t)+i+s}function eA(t,e,n,i){let s=[],r=[],o=null;const a=({state:d})=>{const f=By(t,location),p=n.value,m=e.value;let y=0;if(d){if(n.value=f,e.value=d,o&&o===p){o=null;return}y=m?d.position-m.position:0}else i(f);s.forEach(b=>{b(n.value,p,{delta:y,type:mr.pop,direction:y?y>0?qs.forward:qs.back:qs.unknown})})};function l(){o=n.value}function c(d){s.push(d);const f=()=>{const p=s.indexOf(d);p>-1&&s.splice(p,1)};return r.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(ve({},d.state,{scroll:Ha()}),"")}function h(){for(const d of r)d();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Ef(t,e,n,i=!1,s=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:s?Ha():null}}function tA(t){const{history:e,location:n}=window,i={value:By(t,n)},s={value:e.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:ZP()+t+l;try{e[u?"replaceState":"pushState"](c,"",d),s.value=c}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(l,c){const u=ve({},e.state,Ef(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});r(l,u,!0),i.value=l}function a(l,c){const u=ve({},s.value,e.state,{forward:l,scroll:Ha()});r(u.current,u,!0);const h=ve({},Ef(i.value,l,null),{position:u.position+1},c);r(l,h,!1),i.value=l}return{location:i,state:s,push:a,replace:o}}function hN(t){t=qP(t);const e=tA(t),n=eA(t,e.state,e.location,e.replace);function i(r,o=!0){o||n.pauseListeners(),history.go(r)}const s=ve({location:"",base:t,go:i,createHref:GP.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function nA(t){return typeof t=="string"||t&&typeof t=="object"}function Uy(t){return typeof t=="string"||typeof t=="symbol"}const bn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Hy=Symbol("");var Cf;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Cf||(Cf={}));function rs(t,e){return ve(new Error,{type:t,[Hy]:!0},e)}function Qt(t,e){return t instanceof Error&&Hy in t&&(e==null||!!(t.type&e))}const Sf="[^/]+?",iA={sensitive:!1,strict:!1,start:!0,end:!0},sA=/[.+*?^${}()[\]/\\]/g;function rA(t,e){const n=ve({},iA,e),i=[];let s=n.start?"^":"";const r=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(sA,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:m,optional:y,regexp:b}=d;r.push({name:p,repeatable:m,optional:y});const w=b||Sf;if(w!==Sf){f+=10;try{new RegExp(`(${w})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${p}" (${w}): `+C.message)}}let A=m?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;h||(A=y&&c.length<2?`(?:/${A})`:"/"+A),y&&(A+="?"),s+=A,f+=20,y&&(f+=-8),m&&(f+=-20),w===".*"&&(f+=-50)}u.push(f)}i.push(u)}if(n.strict&&n.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",p=r[d-1];h[p.name]=f&&p.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:y}=f,b=p in c?c[p]:"";if(Nt(b)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const w=Nt(b)?b.join("/"):b;if(!w)if(y)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=w}}return u||"/"}return{re:o,score:i,keys:r,parse:a,stringify:l}}function oA(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function aA(t,e){let n=0;const i=t.score,s=e.score;for(;n<i.length&&n<s.length;){const r=oA(i[n],s[n]);if(r)return r;n++}if(Math.abs(s.length-i.length)===1){if(xf(i))return 1;if(xf(s))return-1}return s.length-i.length}function xf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const lA={type:0,value:""},cA=/[a-zA-Z0-9_]/;function uA(t){if(!t)return[[]];if(t==="/")return[[lA]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,i=n;const s=[];let r;function o(){r&&s.push(r),r=[]}let a=0,l,c="",u="";function h(){c&&(n===0?r.push({type:0,value:c}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=i;break;case 1:l==="("?n=2:cA.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function hA(t,e,n){const i=rA(uA(t.path),n),s=ve(i,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function dA(t,e){const n=[],i=new Map;e=Pf({strict:!1,end:!0,sensitive:!1},e);function s(u){return i.get(u)}function r(u,h,d){const f=!d,p=fA(u);p.aliasOf=d&&d.record;const m=Pf(e,u),y=[p];if("alias"in u){const A=typeof u.alias=="string"?[u.alias]:u.alias;for(const C of A)y.push(ve({},p,{components:d?d.record.components:p.components,path:C,aliasOf:d?d.record:p}))}let b,w;for(const A of y){const{path:C}=A;if(h&&C[0]!=="/"){const T=h.record.path,H=T[T.length-1]==="/"?"":"/";A.path=h.record.path+(C&&H+C)}if(b=hA(A,h,m),d?d.alias.push(b):(w=w||b,w!==b&&w.alias.push(b),f&&u.name&&!kf(b)&&o(u.name)),p.children){const T=p.children;for(let H=0;H<T.length;H++)r(T[H],b,d&&d.children[H])}d=d||b,(b.record.components&&Object.keys(b.record.components).length||b.record.name||b.record.redirect)&&l(b)}return w?()=>{o(w)}:zs}function o(u){if(Uy(u)){const h=i.get(u);h&&(i.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&aA(u,n[h])>=0&&(u.record.path!==n[h].record.path||!Wy(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!kf(u)&&i.set(u.record.name,u)}function c(u,h){let d,f={},p,m;if("name"in u&&u.name){if(d=i.get(u.name),!d)throw rs(1,{location:u});m=d.record.name,f=ve(Tf(h.params,d.keys.filter(w=>!w.optional).map(w=>w.name)),u.params&&Tf(u.params,d.keys.map(w=>w.name))),p=d.stringify(f)}else if("path"in u)p=u.path,d=n.find(w=>w.re.test(p)),d&&(f=d.parse(p),m=d.record.name);else{if(d=h.name?i.get(h.name):n.find(w=>w.re.test(h.path)),!d)throw rs(1,{location:u,currentLocation:h});m=d.record.name,f=ve({},h.params,u.params),p=d.stringify(f)}const y=[];let b=d;for(;b;)y.unshift(b.record),b=b.parent;return{name:m,path:p,params:f,matched:y,meta:gA(y)}}return t.forEach(u=>r(u)),{addRoute:r,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Tf(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function fA(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:pA(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function pA(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]=typeof n=="object"?n[i]:n;return e}function kf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function gA(t){return t.reduce((e,n)=>ve(e,n.meta),{})}function Pf(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}function Wy(t,e){return e.children.some(n=>n===t||Wy(t,n))}const jy=/#/g,mA=/&/g,_A=/\//g,yA=/=/g,bA=/\?/g,Vy=/\+/g,vA=/%5B/g,wA=/%5D/g,zy=/%5E/g,IA=/%60/g,qy=/%7B/g,EA=/%7C/g,Ky=/%7D/g,CA=/%20/g;function Zu(t){return encodeURI(""+t).replace(EA,"|").replace(vA,"[").replace(wA,"]")}function SA(t){return Zu(t).replace(qy,"{").replace(Ky,"}").replace(zy,"^")}function bc(t){return Zu(t).replace(Vy,"%2B").replace(CA,"+").replace(jy,"%23").replace(mA,"%26").replace(IA,"`").replace(qy,"{").replace(Ky,"}").replace(zy,"^")}function xA(t){return bc(t).replace(yA,"%3D")}function TA(t){return Zu(t).replace(jy,"%23").replace(bA,"%3F")}function kA(t){return t==null?"":TA(t).replace(_A,"%2F")}function Zo(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function PA(t){const e={};if(t===""||t==="?")return e;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(Vy," "),o=r.indexOf("="),a=Zo(o<0?r:r.slice(0,o)),l=o<0?null:Zo(r.slice(o+1));if(a in e){let c=e[a];Nt(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Af(t){let e="";for(let n in t){const i=t[n];if(n=xA(n),i==null){i!==void 0&&(e+=(e.length?"&":"")+n);continue}(Nt(i)?i.map(r=>r&&bc(r)):[i&&bc(i)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function AA(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=Nt(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const RA=Symbol(""),Rf=Symbol(""),eh=Symbol(""),Gy=Symbol(""),vc=Symbol("");function xs(){let t=[];function e(i){return t.push(i),()=>{const s=t.indexOf(i);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function wn(t,e,n,i,s){const r=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(rs(4,{from:n,to:e})):h instanceof Error?a(h):nA(h)?a(rs(2,{from:e,to:h})):(r&&i.enterCallbacks[s]===r&&typeof h=="function"&&r.push(h),o())},c=t.call(i&&i.instances[s],e,n,l);let u=Promise.resolve(c);t.length<3&&(u=u.then(l)),u.catch(h=>a(h))})}function wl(t,e,n,i){const s=[];for(const r of t)for(const o in r.components){let a=r.components[o];if(!(e!=="beforeRouteEnter"&&!r.instances[o]))if(OA(a)){const c=(a.__vccOpts||a)[e];c&&s.push(wn(c,n,i,r,o))}else{let l=a();s.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${r.path}"`));const u=BP(c)?c.default:c;r.components[o]=u;const d=(u.__vccOpts||u)[e];return d&&wn(d,n,i,r,o)()}))}}return s}function OA(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Of(t){const e=Vt(eh),n=Vt(Gy),i=Tt(()=>e.resolve(Ui(t.to))),s=Tt(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(ss.bind(null,u));if(d>-1)return d;const f=Mf(l[c-2]);return c>1&&Mf(u)===f&&h[h.length-1].path!==f?h.findIndex(ss.bind(null,l[c-2])):d}),r=Tt(()=>s.value>-1&&LA(n.params,i.value.params)),o=Tt(()=>s.value>-1&&s.value===n.matched.length-1&&$y(n.params,i.value.params));function a(l={}){return NA(l)?e[Ui(t.replace)?"replace":"push"](Ui(t.to)).catch(zs):Promise.resolve()}return{route:i,href:Tt(()=>i.value.href),isActive:r,isExactActive:o,navigate:a}}const MA=Ag({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Of,setup(t,{slots:e}){const n=Er(Of(t)),{options:i}=Vt(eh),s=Tt(()=>({[Df(t.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[Df(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=e.default&&e.default(n);return t.custom?r:Kg("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},r)}}}),DA=MA;function NA(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function LA(t,e){for(const n in e){const i=e[n],s=t[n];if(typeof i=="string"){if(i!==s)return!1}else if(!Nt(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function Mf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Df=(t,e,n)=>t??e??n,FA=Ag({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const i=Vt(vc),s=Tt(()=>t.route||i.value),r=Vt(Rf,0),o=Tt(()=>{let c=Ui(r);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Tt(()=>s.value.matched[o.value]);ho(Rf,Tt(()=>o.value+1)),ho(RA,a),ho(vc,s);const l=fv();return Wi(()=>[l.value,a.value,t.name],([c,u,h],[d,f,p])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!ss(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return Nf(n.default,{Component:d,route:c});const f=h.props[u],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,y=Kg(d,ve({},p,e,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Nf(n.default,{Component:y,route:c})||y}}});function Nf(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const $A=FA;function dN(t){const e=dA(t.routes,t),n=t.parseQuery||PA,i=t.stringifyQuery||Af,s=t.history,r=xs(),o=xs(),a=xs(),l=pv(bn);let c=bn;Ni&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=bl.bind(null,E=>""+E),h=bl.bind(null,kA),d=bl.bind(null,Zo);function f(E,$){let N,B;return Uy(E)?(N=e.getRecordMatcher(E),B=$):B=E,e.addRoute(B,N)}function p(E){const $=e.getRecordMatcher(E);$&&e.removeRoute($)}function m(){return e.getRoutes().map(E=>E.record)}function y(E){return!!e.getRecordMatcher(E)}function b(E,$){if($=ve({},$||l.value),typeof E=="string"){const v=vl(n,E,$.path),I=e.resolve({path:v.path},$),x=s.createHref(v.fullPath);return ve(v,I,{params:d(I.params),hash:Zo(v.hash),redirectedFrom:void 0,href:x})}let N;if("path"in E)N=ve({},E,{path:vl(n,E.path,$.path).path});else{const v=ve({},E.params);for(const I in v)v[I]==null&&delete v[I];N=ve({},E,{params:h(v)}),$.params=h($.params)}const B=e.resolve(N,$),ae=E.hash||"";B.params=u(d(B.params));const g=WP(i,ve({},E,{hash:SA(ae),path:B.path})),_=s.createHref(g);return ve({fullPath:g,hash:ae,query:i===Af?AA(E.query):E.query||{}},B,{redirectedFrom:void 0,href:_})}function w(E){return typeof E=="string"?vl(n,E,l.value.path):ve({},E)}function A(E,$){if(c!==E)return rs(8,{from:$,to:E})}function C(E){return W(E)}function T(E){return C(ve(w(E),{replace:!0}))}function H(E){const $=E.matched[E.matched.length-1];if($&&$.redirect){const{redirect:N}=$;let B=typeof N=="function"?N(E):N;return typeof B=="string"&&(B=B.includes("?")||B.includes("#")?B=w(B):{path:B},B.params={}),ve({query:E.query,hash:E.hash,params:"path"in B?{}:E.params},B)}}function W(E,$){const N=c=b(E),B=l.value,ae=E.state,g=E.force,_=E.replace===!0,v=H(N);if(v)return W(ve(w(v),{state:typeof v=="object"?ve({},ae,v.state):ae,force:g,replace:_}),$||N);const I=N;I.redirectedFrom=$;let x;return!g&&jP(i,B,N)&&(x=rs(16,{to:I,from:B}),re(B,B,!0,!1)),(x?Promise.resolve(x):Y(I,B)).catch(P=>Qt(P)?Qt(P,2)?P:K(P):k(P,I,B)).then(P=>{if(P){if(Qt(P,2))return W(ve({replace:_},w(P.to),{state:typeof P.to=="object"?ve({},ae,P.to.state):ae,force:g}),$||I)}else P=fe(I,B,!0,_,ae);return z(I,B,P),P})}function j(E,$){const N=A(E,$);return N?Promise.reject(N):Promise.resolve()}function J(E){const $=ge.values().next().value;return $&&typeof $.runWithContext=="function"?$.runWithContext(E):E()}function Y(E,$){let N;const[B,ae,g]=BA(E,$);N=wl(B.reverse(),"beforeRouteLeave",E,$);for(const v of B)v.leaveGuards.forEach(I=>{N.push(wn(I,E,$))});const _=j.bind(null,E,$);return N.push(_),me(N).then(()=>{N=[];for(const v of r.list())N.push(wn(v,E,$));return N.push(_),me(N)}).then(()=>{N=wl(ae,"beforeRouteUpdate",E,$);for(const v of ae)v.updateGuards.forEach(I=>{N.push(wn(I,E,$))});return N.push(_),me(N)}).then(()=>{N=[];for(const v of g)if(v.beforeEnter)if(Nt(v.beforeEnter))for(const I of v.beforeEnter)N.push(wn(I,E,$));else N.push(wn(v.beforeEnter,E,$));return N.push(_),me(N)}).then(()=>(E.matched.forEach(v=>v.enterCallbacks={}),N=wl(g,"beforeRouteEnter",E,$),N.push(_),me(N))).then(()=>{N=[];for(const v of o.list())N.push(wn(v,E,$));return N.push(_),me(N)}).catch(v=>Qt(v,8)?v:Promise.reject(v))}function z(E,$,N){a.list().forEach(B=>J(()=>B(E,$,N)))}function fe(E,$,N,B,ae){const g=A(E,$);if(g)return g;const _=$===bn,v=Ni?history.state:{};N&&(B||_?s.replace(E.fullPath,ve({scroll:_&&v&&v.scroll},ae)):s.push(E.fullPath,ae)),l.value=E,re(E,$,N,_),K()}let Oe;function q(){Oe||(Oe=s.listen((E,$,N)=>{if(!Me.listening)return;const B=b(E),ae=H(B);if(ae){W(ve(ae,{replace:!0}),B).catch(zs);return}c=B;const g=l.value;Ni&&QP(If(g.fullPath,N.delta),Ha()),Y(B,g).catch(_=>Qt(_,12)?_:Qt(_,2)?(W(_.to,B).then(v=>{Qt(v,20)&&!N.delta&&N.type===mr.pop&&s.go(-1,!1)}).catch(zs),Promise.reject()):(N.delta&&s.go(-N.delta,!1),k(_,B,g))).then(_=>{_=_||fe(B,g,!1),_&&(N.delta&&!Qt(_,8)?s.go(-N.delta,!1):N.type===mr.pop&&Qt(_,20)&&s.go(-1,!1)),z(B,g,_)}).catch(zs)}))}let M=xs(),S=xs(),R;function k(E,$,N){K(E);const B=S.list();return B.length?B.forEach(ae=>ae(E,$,N)):console.error(E),Promise.reject(E)}function G(){return R&&l.value!==bn?Promise.resolve():new Promise((E,$)=>{M.add([E,$])})}function K(E){return R||(R=!E,q(),M.list().forEach(([$,N])=>E?N(E):$()),M.reset()),E}function re(E,$,N,B){const{scrollBehavior:ae}=t;if(!Ni||!ae)return Promise.resolve();const g=!N&&JP(If(E.fullPath,0))||(B||!N)&&history.state&&history.state.scroll||null;return wg().then(()=>ae(E,$,g)).then(_=>_&&XP(_)).catch(_=>k(_,E,$))}const ie=E=>s.go(E);let pe;const ge=new Set,Me={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,hasRoute:y,getRoutes:m,resolve:b,options:t,push:C,replace:T,go:ie,back:()=>ie(-1),forward:()=>ie(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:S.add,isReady:G,install(E){const $=this;E.component("RouterLink",DA),E.component("RouterView",$A),E.config.globalProperties.$router=$,Object.defineProperty(E.config.globalProperties,"$route",{enumerable:!0,get:()=>Ui(l)}),Ni&&!pe&&l.value===bn&&(pe=!0,C(s.location).catch(ae=>{}));const N={};for(const ae in bn)Object.defineProperty(N,ae,{get:()=>l.value[ae],enumerable:!0});E.provide(eh,$),E.provide(Gy,dg(N)),E.provide(vc,l);const B=E.unmount;ge.add(E),E.unmount=function(){ge.delete(E),ge.size<1&&(c=bn,Oe&&Oe(),Oe=null,l.value=bn,pe=!1,R=!1),B()}}};function me(E){return E.reduce(($,N)=>$.then(()=>J(N)),Promise.resolve())}return Me}function BA(t,e){const n=[],i=[],s=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(t.matched.find(c=>ss(c,a))?i.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>ss(c,l))||s.push(l))}return[n,i,s]}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Or(t){return t+.5|0}const xn=(t,e,n)=>Math.max(Math.min(t,n),e);function Ds(t){return xn(Or(t*2.55),0,255)}function Nn(t){return xn(Or(t*255),0,255)}function sn(t){return xn(Or(t/2.55)/100,0,1)}function Lf(t){return xn(Or(t*100),0,100)}const _t={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},wc=[..."0123456789ABCDEF"],UA=t=>wc[t&15],HA=t=>wc[(t&240)>>4]+wc[t&15],Vr=t=>(t&240)>>4===(t&15),WA=t=>Vr(t.r)&&Vr(t.g)&&Vr(t.b)&&Vr(t.a);function jA(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&_t[t[1]]*17,g:255&_t[t[2]]*17,b:255&_t[t[3]]*17,a:e===5?_t[t[4]]*17:255}:(e===7||e===9)&&(n={r:_t[t[1]]<<4|_t[t[2]],g:_t[t[3]]<<4|_t[t[4]],b:_t[t[5]]<<4|_t[t[6]],a:e===9?_t[t[7]]<<4|_t[t[8]]:255})),n}const VA=(t,e)=>t<255?e(t):"";function zA(t){var e=WA(t)?UA:HA;return t?"#"+e(t.r)+e(t.g)+e(t.b)+VA(t.a,e):void 0}const qA=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Yy(t,e,n){const i=e*Math.min(n,1-n),s=(r,o=(r+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function KA(t,e,n){const i=(s,r=(s+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function GA(t,e,n){const i=Yy(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)i[s]*=1-e-n,i[s]+=e;return i}function YA(t,e,n,i,s){return t===s?(e-n)/i+(e<n?6:0):e===s?(n-t)/i+2:(t-e)/i+4}function th(t){const n=t.r/255,i=t.g/255,s=t.b/255,r=Math.max(n,i,s),o=Math.min(n,i,s),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=YA(n,i,s,u,r),l=l*60+.5),[l|0,c||0,a]}function nh(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Nn)}function ih(t,e,n){return nh(Yy,t,e,n)}function XA(t,e,n){return nh(GA,t,e,n)}function QA(t,e,n){return nh(KA,t,e,n)}function Xy(t){return(t%360+360)%360}function JA(t){const e=qA.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Ds(+e[5]):Nn(+e[5]));const s=Xy(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=XA(s,r,o):e[1]==="hsv"?i=QA(s,r,o):i=ih(s,r,o),{r:i[0],g:i[1],b:i[2],a:n}}function ZA(t,e){var n=th(t);n[0]=Xy(n[0]+e),n=ih(n),t.r=n[0],t.g=n[1],t.b=n[2]}function eR(t){if(!t)return;const e=th(t),n=e[0],i=Lf(e[1]),s=Lf(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${s}%, ${sn(t.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const Ff={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},$f={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function tR(){const t={},e=Object.keys($f),n=Object.keys(Ff);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<n.length;s++)r=n[s],a=a.replace(r,Ff[r]);r=parseInt($f[o],16),t[a]=[r>>16&255,r>>8&255,r&255]}return t}let zr;function nR(t){zr||(zr=tR(),zr.transparent=[0,0,0,0]);const e=zr[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const iR=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function sR(t){const e=iR.exec(t);let n=255,i,s,r;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Ds(o):xn(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?Ds(i):xn(i,0,255)),s=255&(e[4]?Ds(s):xn(s,0,255)),r=255&(e[6]?Ds(r):xn(r,0,255)),{r:i,g:s,b:r,a:n}}}function rR(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${sn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Il=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Di=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function oR(t,e,n){const i=Di(sn(t.r)),s=Di(sn(t.g)),r=Di(sn(t.b));return{r:Nn(Il(i+n*(Di(sn(e.r))-i))),g:Nn(Il(s+n*(Di(sn(e.g))-s))),b:Nn(Il(r+n*(Di(sn(e.b))-r))),a:t.a+n*(e.a-t.a)}}function qr(t,e,n){if(t){let i=th(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=ih(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Qy(t,e){return t&&Object.assign(e||{},t)}function Bf(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Nn(t[3]))):(e=Qy(t,{r:0,g:0,b:0,a:1}),e.a=Nn(e.a)),e}function aR(t){return t.charAt(0)==="r"?sR(t):JA(t)}class _r{constructor(e){if(e instanceof _r)return e;const n=typeof e;let i;n==="object"?i=Bf(e):n==="string"&&(i=jA(e)||nR(e)||aR(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Qy(this._rgb);return e&&(e.a=sn(e.a)),e}set rgb(e){this._rgb=Bf(e)}rgbString(){return this._valid?rR(this._rgb):void 0}hexString(){return this._valid?zA(this._rgb):void 0}hslString(){return this._valid?eR(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,s=e.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=oR(this._rgb,e._rgb,n)),this}clone(){return new _r(this.rgb)}alpha(e){return this._rgb.a=Nn(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Or(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return qr(this._rgb,2,e),this}darken(e){return qr(this._rgb,2,-e),this}saturate(e){return qr(this._rgb,1,e),this}desaturate(e){return qr(this._rgb,1,-e),this}rotate(e){return ZA(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function Jt(){}const lR=(()=>{let t=0;return()=>t++})();function Re(t){return t===null||typeof t>"u"}function Ne(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ye(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ve(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function dt(t,e){return Ve(t)?t:e}function Ce(t,e){return typeof t>"u"?e:t}const cR=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function De(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function we(t,e,n,i){let s,r,o;if(Ne(t))if(r=t.length,i)for(s=r-1;s>=0;s--)e.call(n,t[s],s);else for(s=0;s<r;s++)e.call(n,t[s],s);else if(ye(t))for(o=Object.keys(t),r=o.length,s=0;s<r;s++)e.call(n,t[o[s]],o[s])}function ea(t,e){let n,i,s,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(s=t[n],r=e[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function ta(t){if(Ne(t))return t.map(ta);if(ye(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let s=0;for(;s<i;++s)e[n[s]]=ta(t[n[s]]);return e}return t}function Jy(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function uR(t,e,n,i){if(!Jy(t))return;const s=e[t],r=n[t];ye(s)&&ye(r)?yr(s,r,i):e[t]=ta(r)}function yr(t,e,n){const i=Ne(e)?e:[e],s=i.length;if(!ye(t))return t;n=n||{};const r=n.merger||uR;let o;for(let a=0;a<s;++a){if(o=i[a],!ye(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],t,o,n)}return t}function Ks(t,e){return yr(t,e,{merger:hR})}function hR(t,e,n){if(!Jy(t))return;const i=e[t],s=n[t];ye(i)&&ye(s)?Ks(i,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ta(s))}const Uf={"":t=>t,x:t=>t.x,y:t=>t.y};function dR(t){const e=t.split("."),n=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function fR(t){const e=dR(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function na(t,e){return(Uf[e]||(Uf[e]=fR(e)))(t)}function sh(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ia=t=>typeof t<"u",Un=t=>typeof t=="function",Hf=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function pR(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ze=Math.PI,wt=2*ze,gR=wt+ze,sa=Number.POSITIVE_INFINITY,mR=ze/180,pt=ze/2,Vn=ze/4,Wf=ze*2/3,Tn=Math.log10,os=Math.sign;function Gs(t,e,n){return Math.abs(t-e)<n}function jf(t){const e=Math.round(t);t=Gs(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Tn(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function _R(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((s,r)=>s-r).pop(),e}function br(t){return!isNaN(parseFloat(t))&&isFinite(t)}function yR(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Zy(t,e,n){let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function kn(t){return t*(ze/180)}function rh(t){return t*(180/ze)}function Vf(t){if(!Ve(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function bR(t,e){const n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*ze&&(r+=wt),{angle:r,distance:s}}function Ic(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function vR(t,e){return(t-e+gR)%wt-ze}function St(t){return(t%wt+wt)%wt}function eb(t,e,n,i){const s=St(t),r=St(e),o=St(n),a=St(r-s),l=St(o-s),c=St(s-r),u=St(s-o);return s===r||s===o||i&&r===o||a>l&&c<u}function bt(t,e,n){return Math.max(e,Math.min(n,t))}function wR(t){return bt(t,-32768,32767)}function IR(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function oh(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const ai=(t,e,n,i)=>oh(t,n,i?s=>{const r=t[s][e];return r<n||r===n&&t[s+1][e]===n}:s=>t[s][e]<n),ER=(t,e,n)=>oh(t,n,i=>t[i][e]>=n);function CR(t,e,n){let i=0,s=t.length;for(;i<s&&t[i]<e;)i++;for(;s>i&&t[s-1]>n;)s--;return i>0||s<t.length?t.slice(i,s):t}const tb=["push","pop","shift","splice","unshift"];function SR(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),tb.forEach(n=>{const i="_onData"+sh(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function zf(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(tb.forEach(r=>{delete t[r]}),delete t._chartjs)}function xR(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const nb=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function ib(t,e){let n=[],i=!1;return function(...s){n=s,i||(i=!0,nb.call(window,()=>{i=!1,t.apply(e,n)}))}}function TR(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const kR=t=>t==="start"?"left":t==="end"?"right":"center",qf=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2;function PR(t,e,n){const i=e.length;let s=0,r=i;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(s=bt(Math.min(ai(a,l,c).lo,n?i:ai(e,l,o.getPixelForValue(c)).lo),0,i-1)),d?r=bt(Math.max(ai(a,o.axis,u,!0).hi+1,n?0:ai(e,l,o.getPixelForValue(u),!0).hi+1),s,i)-s:r=i-s}return{start:s,count:r}}function AR(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const Kr=t=>t===0||t===1,Kf=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*wt/n)),Gf=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*wt/n)+1,Ys={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*pt)+1,easeOutSine:t=>Math.sin(t*pt),easeInOutSine:t=>-.5*(Math.cos(ze*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Kr(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Kr(t)?t:Kf(t,.075,.3),easeOutElastic:t=>Kr(t)?t:Gf(t,.075,.3),easeInOutElastic(t){return Kr(t)?t:t<.5?.5*Kf(t*2,.1125,.45):.5+.5*Gf(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Ys.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Ys.easeInBounce(t*2)*.5:Ys.easeOutBounce(t*2-1)*.5+.5};function ah(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Yf(t){return ah(t)?t:new _r(t)}function El(t){return ah(t)?t:new _r(t).saturate(.5).darken(.1).hexString()}const RR=["x","y","borderWidth","radius","tension"],OR=["color","borderColor","backgroundColor"];function MR(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:OR},numbers:{type:"number",properties:RR}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function DR(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Xf=new Map;function NR(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Xf.get(n);return i||(i=new Intl.NumberFormat(t,e),Xf.set(n,i)),i}function lh(t,e,n){return NR(e,n).format(t)}const sb={values(t){return Ne(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let s,r=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=LR(t,n)}const o=Tn(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),lh(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Tn(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?sb.numeric.call(this,t,e,n):""}};function LR(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Wa={formatters:sb};function FR(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Wa.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ei=Object.create(null),Ec=Object.create(null);function Xs(t,e){if(!e)return t;const n=e.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];t=t[r]||(t[r]=Object.create(null))}return t}function Cl(t,e,n){return typeof e=="string"?yr(Xs(t,e),n):yr(Xs(t,""),e)}class $R{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>El(s.backgroundColor),this.hoverBorderColor=(i,s)=>El(s.borderColor),this.hoverColor=(i,s)=>El(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Cl(this,e,n)}get(e){return Xs(this,e)}describe(e,n){return Cl(Ec,e,n)}override(e,n){return Cl(Ei,e,n)}route(e,n,i,s){const r=Xs(this,e),o=Xs(this,i),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return ye(l)?Object.assign({},c,l):Ce(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Fe=new $R({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[MR,DR,FR]);function BR(t){return!t||Re(t.size)||Re(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function ra(t,e,n,i,s){let r=e[s];return r||(r=e[s]=t.measureText(s).width,n.push(s)),r>i&&(i=r),i}function UR(t,e,n,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],h!=null&&!Ne(h))o=ra(t,s,r,o,h);else if(Ne(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!Ne(d)&&(o=ra(t,s,r,o,d));t.restore();const f=r.length/2;if(f>n.length){for(l=0;l<f;l++)delete s[r[l]];r.splice(0,f)}return o}function zn(t,e,n){const i=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*i)/i+s}function Qf(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Cc(t,e,n,i){HR(t,e,n,i,null)}function HR(t,e,n,i,s){let r,o,a,l,c,u,h,d;const f=e.pointStyle,p=e.rotation,m=e.radius;let y=(p||0)*mR;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(y),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(m)||m<=0)){switch(t.beginPath(),f){default:s?t.ellipse(n,i,s/2,m,0,0,wt):t.arc(n,i,m,0,wt),t.closePath();break;case"triangle":u=s?s/2:m,t.moveTo(n+Math.sin(y)*u,i-Math.cos(y)*m),y+=Wf,t.lineTo(n+Math.sin(y)*u,i-Math.cos(y)*m),y+=Wf,t.lineTo(n+Math.sin(y)*u,i-Math.cos(y)*m),t.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(y+Vn)*l,h=Math.cos(y+Vn)*(s?s/2-c:l),a=Math.sin(y+Vn)*l,d=Math.sin(y+Vn)*(s?s/2-c:l),t.arc(n-h,i-a,c,y-ze,y-pt),t.arc(n+d,i-o,c,y-pt,y),t.arc(n+h,i+a,c,y,y+pt),t.arc(n-d,i+o,c,y+pt,y+ze),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=s?s/2:l,t.rect(n-u,i-l,2*u,2*l);break}y+=Vn;case"rectRot":h=Math.cos(y)*(s?s/2:m),o=Math.cos(y)*m,a=Math.sin(y)*m,d=Math.sin(y)*(s?s/2:m),t.moveTo(n-h,i-a),t.lineTo(n+d,i-o),t.lineTo(n+h,i+a),t.lineTo(n-d,i+o),t.closePath();break;case"crossRot":y+=Vn;case"cross":h=Math.cos(y)*(s?s/2:m),o=Math.cos(y)*m,a=Math.sin(y)*m,d=Math.sin(y)*(s?s/2:m),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"star":h=Math.cos(y)*(s?s/2:m),o=Math.cos(y)*m,a=Math.sin(y)*m,d=Math.sin(y)*(s?s/2:m),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o),y+=Vn,h=Math.cos(y)*(s?s/2:m),o=Math.cos(y)*m,a=Math.sin(y)*m,d=Math.sin(y)*(s?s/2:m),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"line":o=s?s/2:Math.cos(y)*m,a=Math.sin(y)*m,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(y)*(s?s/2:m),i+Math.sin(y)*m);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ln(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function rb(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ob(t){t.restore()}function WR(t,e,n,i,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else s==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function jR(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function VR(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Re(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function zR(t,e,n,i,s){if(s.strikethrough||s.underline){const r=t.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function qR(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function oa(t,e,n,i,s,r={}){const o=Ne(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,VR(t,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&qR(t,r.backdrop),a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),Re(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,n,i,r.maxWidth)),t.fillText(c,n,i,r.maxWidth),zR(t,n,i,c,r),i+=Number(s.lineHeight);t.restore()}function Sc(t,e){const{x:n,y:i,w:s,h:r,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*ze,ze,!0),t.lineTo(n,i+r-o.bottomLeft),t.arc(n+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,ze,pt,!0),t.lineTo(n+s-o.bottomRight,i+r),t.arc(n+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,pt,0,!0),t.lineTo(n+s,i+o.topRight),t.arc(n+s-o.topRight,i+o.topRight,o.topRight,0,-pt,!0),t.lineTo(n+o.topLeft,i)}const KR=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,GR=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function YR(t,e){const n=(""+t).match(KR);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const XR=t=>+t||0;function ab(t,e){const n={},i=ye(e),s=i?Object.keys(e):e,r=ye(t)?i?o=>Ce(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=XR(r(o));return n}function QR(t){return ab(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Qs(t){return ab(t,["topLeft","topRight","bottomLeft","bottomRight"])}function It(t){const e=QR(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function gt(t,e){t=t||{},e=e||Fe.font;let n=Ce(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=Ce(t.style,e.style);i&&!(""+i).match(GR)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Ce(t.family,e.family),lineHeight:YR(Ce(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Ce(t.weight,e.weight),string:""};return s.string=BR(s),s}function Gr(t,e,n,i){let s=!0,r,o,a;for(r=0,o=t.length;r<o;++r)if(a=t[r],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),s=!1),n!==void 0&&Ne(a)&&(a=a[n%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function JR(t,e,n){const{min:i,max:s}=t,r=cR(e,(s-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function Hn(t,e){return Object.assign(Object.create(t),e)}function ch(t,e=[""],n,i,s=()=>t[0]){const r=n||t;typeof i>"u"&&(i=hb("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>ch([a,...t],e,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return cb(a,l,()=>oO(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Zf(a).includes(l)},ownKeys(a){return Zf(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function as(t,e,n,i){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:lb(t,i),setContext:r=>as(t,r,n,i),override:r=>as(t.override(r),e,n,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,a){return cb(r,o,()=>eO(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,a){return t[o]=a,delete r[o],!0}})}function lb(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:i,isScriptable:Un(n)?n:()=>n,isIndexable:Un(i)?i:()=>i}}const ZR=(t,e)=>t?t+sh(e):e,uh=(t,e)=>ye(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function cb(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function eO(t,e,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=t;let a=i[e];return Un(a)&&o.isScriptable(e)&&(a=tO(e,a,t,n)),Ne(a)&&a.length&&(a=nO(e,a,t,o.isIndexable)),uh(e,a)&&(a=as(a,s,r&&r[e],o)),a}function tO(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(r,o||i);return a.delete(t),uh(t,l)&&(l=hh(s._scopes,s,t,l)),l}function nO(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&i(t))return e[r.index%e.length];if(ye(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=hh(c,s,t,u);e.push(as(h,r,o&&o[t],a))}}return e}function ub(t,e,n){return Un(t)?t(e,n):t}const iO=(t,e)=>t===!0?e:typeof t=="string"?na(e,t):void 0;function sO(t,e,n,i,s){for(const r of e){const o=iO(n,r);if(o){t.add(o);const a=ub(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function hh(t,e,n,i){const s=e._rootScopes,r=ub(e._fallback,n,i),o=[...t,...s],a=new Set;a.add(i);let l=Jf(a,o,n,r||n,i);return l===null||typeof r<"u"&&r!==n&&(l=Jf(a,o,r,l,i),l===null)?!1:ch(Array.from(a),[""],s,r,()=>rO(e,n,i))}function Jf(t,e,n,i,s){for(;n;)n=sO(t,e,n,i,s);return n}function rO(t,e,n){const i=t._getTarget();e in i||(i[e]={});const s=i[e];return Ne(s)&&ye(n)?n:s||{}}function oO(t,e,n,i){let s;for(const r of e)if(s=hb(ZR(r,t),n),typeof s<"u")return uh(t,s)?hh(n,i,t,s):s}function hb(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function Zf(t){let e=t._keys;return e||(e=t._keys=aO(t._scopes)),e}function aO(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}const lO=Number.EPSILON||1e-14,ls=(t,e)=>e<t.length&&!t[e].skip&&t[e],db=t=>t==="x"?"y":"x";function cO(t,e,n,i){const s=t.skip?e:t,r=e,o=n.skip?e:n,a=Ic(r,s),l=Ic(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:r.x-h*(o.x-s.x),y:r.y-h*(o.y-s.y)},next:{x:r.x+d*(o.x-s.x),y:r.y+d*(o.y-s.y)}}}function uO(t,e,n){const i=t.length;let s,r,o,a,l,c=ls(t,0);for(let u=0;u<i-1;++u)if(l=c,c=ls(t,u+1),!(!l||!c)){if(Gs(e[u],0,lO)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],r=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=r*o*e[u])}}function hO(t,e,n="x"){const i=db(n),s=t.length;let r,o,a,l=ls(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=ls(t,c+1),!a)continue;const u=a[n],h=a[i];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${i}`]=h-r*e[c]),l&&(r=(l[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${i}`]=h+r*e[c])}}function dO(t,e="x"){const n=db(e),i=t.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=ls(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=ls(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}r[o]=a?c?os(s[o-1])!==os(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}uO(t,s,r),hO(t,r,e)}function Yr(t,e,n){return Math.max(Math.min(t,n),e)}function fO(t,e){let n,i,s,r,o,a=ln(t[0],e);for(n=0,i=t.length;n<i;++n)o=r,r=a,a=n<i-1&&ln(t[n+1],e),r&&(s=t[n],o&&(s.cp1x=Yr(s.cp1x,e.left,e.right),s.cp1y=Yr(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Yr(s.cp2x,e.left,e.right),s.cp2y=Yr(s.cp2y,e.top,e.bottom)))}function pO(t,e,n,i,s){let r,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")dO(t,s);else{let c=i?t[t.length-1]:t[0];for(r=0,o=t.length;r<o;++r)a=t[r],l=cO(c,a,t[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&fO(t,n)}function dh(){return typeof window<"u"&&typeof document<"u"}function fh(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function aa(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const ja=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function gO(t,e){return ja(t).getPropertyValue(e)}const mO=["top","right","bottom","left"];function di(t,e,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=mO[s];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const _O=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function yO(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(_O(s,r,t.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Xn(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,s=ja(n),r=s.boxSizing==="border-box",o=di(s,"padding"),a=di(s,"border","width"),{x:l,y:c,box:u}=yO(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}function bO(t,e,n){let i,s;if(e===void 0||n===void 0){const r=fh(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const o=r.getBoundingClientRect(),a=ja(r),l=di(a,"border","width"),c=di(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=aa(a.maxWidth,r,"clientWidth"),s=aa(a.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:i||sa,maxHeight:s||sa}}const Xr=t=>Math.round(t*10)/10;function vO(t,e,n,i){const s=ja(t),r=di(s,"margin"),o=aa(s.maxWidth,t,"clientWidth")||sa,a=aa(s.maxHeight,t,"clientHeight")||sa,l=bO(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const d=di(s,"border","width"),f=di(s,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?c/i:u-r.height),c=Xr(Math.min(c,o,l.maxWidth)),u=Xr(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Xr(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=Xr(Math.floor(u*i))),{width:c,height:u}}function ep(t,e,n){const i=e||1,s=Math.floor(t.height*i),r=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(t.currentDevicePixelRatio=i,o.height=s,o.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const wO=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};dh()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function tp(t,e){const n=gO(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Qn(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function IO(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function EO(t,e,n,i){const s={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},o=Qn(t,s,n),a=Qn(s,r,n),l=Qn(r,e,n),c=Qn(o,a,n),u=Qn(a,l,n);return Qn(c,u,n)}const CO=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},SO=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Sl(t,e,n){return t?CO(e,n):SO()}function xO(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function TO(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function fb(t){return t==="angle"?{between:eb,compare:vR,normalize:St}:{between:IR,compare:(e,n)=>e-n,normalize:e=>e}}function np({start:t,end:e,count:n,loop:i,style:s}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:s}}function kO(t,e,n){const{property:i,start:s,end:r}=n,{between:o,normalize:a}=fb(i),l=e.length;let{start:c,end:u,loop:h}=t,d,f;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(e[c%l][i]),s,r);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function PO(t,e,n){if(!n)return[t];const{property:i,start:s,end:r}=n,o=e.length,{compare:a,between:l,normalize:c}=fb(i),{start:u,end:h,loop:d,style:f}=kO(t,e,n),p=[];let m=!1,y=null,b,w,A;const C=()=>l(s,A,b)&&a(s,A)!==0,T=()=>a(r,b)===0||l(r,A,b),H=()=>m||C(),W=()=>!m||T();for(let j=u,J=u;j<=h;++j)w=e[j%o],!w.skip&&(b=c(w[i]),b!==A&&(m=l(b,s,r),y===null&&H()&&(y=a(b,s)===0?j:J),y!==null&&W()&&(p.push(np({start:y,end:j,loop:d,count:o,style:f})),y=null),J=j,A=b));return y!==null&&p.push(np({start:y,end:h,loop:d,count:o,style:f})),p}function AO(t,e){const n=[],i=t.segments;for(let s=0;s<i.length;s++){const r=PO(i[s],t.points,e);r.length&&n.push(...r)}return n}function RO(t,e,n,i){let s=0,r=e-1;if(n&&!i)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(r+=s);r>s&&t[r%e].skip;)r--;return r%=e,{start:s,end:r}}function OO(t,e,n,i){const s=t.length,r=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:e%s,end:(l-1)%s,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function MO(t,e){const n=t.points,i=t.options.spanGaps,s=n.length;if(!s)return[];const r=!!t._loop,{start:o,end:a}=RO(n,s,r,i);if(i===!0)return ip(t,[{start:o,end:a,loop:r}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return ip(t,OO(n,o,l,c),n,e)}function ip(t,e,n,i){return!i||!i.setContext||!n?e:DO(t,e,n,i)}function DO(t,e,n,i){const s=t._chart.getContext(),r=sp(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=r,h=e[0].start,d=h;function f(p,m,y,b){const w=a?-1:1;if(p!==m){for(p+=l;n[p%l].skip;)p-=w;for(;n[m%l].skip;)m+=w;p%l!==m%l&&(c.push({start:p%l,end:m%l,loop:y,style:b}),u=b,h=m%l)}}for(const p of e){h=a?h:p.start;let m=n[h%l],y;for(d=h+1;d<=p.end;d++){const b=n[d%l];y=sp(i.setContext(Hn(s,{type:"segment",p0:m,p1:b,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),NO(y,u)&&f(h,d-1,p.loop,u),m=b,u=y}h<d-1&&f(h,d-1,p.loop,u)}return c}function sp(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function NO(t,e){if(!e)return!1;const n=[],i=function(s,r){return ah(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(t,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class LO{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,s){const r=n.listeners[s],o=n.duration;r.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=nb.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Zt=new LO;const rp="transparent",FO={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Yf(t||rp),s=i.valid&&Yf(e||rp);return s&&s.valid?s.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class $O{constructor(e,n,i,s){const r=n[i];s=Gr([e.to,s,r,e.from]);const o=Gr([e.from,r,s]);this._active=!0,this._fn=e.fn||FO[e.type||typeof o],this._easing=Ys[e.easing]||Ys.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Gr([e.to,n,s,e.from]),this._from=Gr([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<i),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=r;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class pb{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ye(e))return;const n=Object.keys(Fe.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!ye(r))return;const o={};for(const a of n)o[a]=r[a];(Ne(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,s=UO(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&BO(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,n){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let h=r[c];const d=i.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}r[c]=h=new $O(d,e,c,u),s.push(h)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Zt.add(this._chart,i),!0}}function BO(t,e){const n=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=t[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function UO(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function op(t,e){const n=t&&t.options||{},i=n.reverse,s=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function HO(t,e,n){if(n===!1)return!1;const i=op(t,n),s=op(e,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function WO(t){let e,n,i,s;return ye(t)?(e=t.top,n=t.right,i=t.bottom,s=t.left):e=n=i=s=t,{top:e,right:n,bottom:i,left:s,disabled:t===!1}}function gb(t,e){const n=[],i=t._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function ap(t,e,n,i={}){const s=t.keys,r=i.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(i.all)continue;break}c=t.values[l],Ve(c)&&(r||e===0||os(e)===os(c))&&(e+=c)}return e}}function jO(t){const e=Object.keys(t),n=new Array(e.length);let i,s,r;for(i=0,s=e.length;i<s;++i)r=e[i],n[i]={x:r,y:t[r]};return n}function lp(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function VO(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function zO(t){const{min:e,max:n,minDefined:i,maxDefined:s}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function qO(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function cp(t,e,n,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=t[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function up(t,e){const{chart:n,_cachedMeta:i}=t,s=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,u=VO(r,o,i),h=e.length;let d;for(let f=0;f<h;++f){const p=e[f],{[l]:m,[c]:y}=p,b=p._stacks||(p._stacks={});d=b[c]=qO(s,u,m),d[a]=y,d._top=cp(d,o,!0,i.type),d._bottom=cp(d,o,!1,i.type);const w=d._visualValues||(d._visualValues={});w[a]=y}}function xl(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function KO(t,e){return Hn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function GO(t,e,n){return Hn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Ts(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n],r[i]._visualValues!==void 0&&r[i]._visualValues[n]!==void 0&&delete r[i]._visualValues[n]}}}const Tl=t=>t==="reset"||t==="none",hp=(t,e)=>e?t:Object.assign({},t),YO=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:gb(n,!0),values:null};class Js{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=lp(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ts(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(h,d,f,p)=>h==="x"?d:h==="r"?p:f,r=n.xAxisID=Ce(i.xAxisID,xl(e,"x")),o=n.yAxisID=Ce(i.yAxisID,xl(e,"y")),a=n.rAxisID=Ce(i.rAxisID,xl(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,r,o,a),u=n.vAxisID=s(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&zf(this._data,this),e._stacked&&Ts(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(ye(n))this._data=jO(n);else if(i!==n){if(i){zf(i,this);const s=this._cachedMeta;Ts(s),s._parsed=[]}n&&Object.isExtensible(n)&&SR(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=lp(n.vScale,n),n.stack!==i.stack&&(s=!0,Ts(n),n.stack=i.stack),this._resyncElements(e),(s||r!==n._stacked)&&up(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&n===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,d;if(this._parsing===!1)i._parsed=s,i._sorted=!0,d=s;else{Ne(s[e])?d=this.parseArrayData(i,s,e,n):ye(s[e])?d=this.parseObjectData(i,s,e,n):d=this.parsePrimitiveData(i,s,e,n);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=h=d[u],l&&(f()&&(l=!1),c=h);i._sorted=l}o&&up(this,d)}parsePrimitiveData(e,n,i,s){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,h=new Array(s);let d,f,p;for(d=0,f=s;d<f;++d)p=d+i,h[d]={[a]:u||r.parse(c[p],p),[l]:o.parse(n[p],p)};return h}parseArrayData(e,n,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+i,h=n[u],a[l]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,d,f;for(u=0,h=s;u<h;++u)d=u+i,f=n[d],c[u]={x:r.parse(na(f,a),d),y:o.parse(na(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const s=this.chart,r=this._cachedMeta,o=n[e.axis],a={keys:gb(s,!0),values:n._stacks[e.axis]._visualValues};return ap(a,o,r.index,{mode:i})}updateRangeFromParsed(e,n,i,s){const r=i[n.axis];let o=r===null?NaN:r;const a=s&&i._stacks[n.axis];s&&a&&(s.values=a,o=ap(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),l=YO(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=zO(a);let d,f;function p(){f=s[d];const m=f[a.axis];return!Ve(f[e.axis])||u>m||h<m}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(c,e,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=n.length;s<r;++s)o=n[s][e.axis],Ve(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=WO(Ce(this.options.clip,HO(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,r,a,l),u=a;u<a+l;++u){const h=s[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=GO(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=KO(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const s=n==="active",r=this._cachedDataOpts,o=e+"-"+n,a=r[o],l=this.enableOptionSharing&&ia(i);if(a)return hp(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Fe.elements[e]),p=()=>this.getContext(i,s,n),m=c.resolveNamedOptions(d,f,p,h);return m.$shared&&(m.$shared=l,r[o]=Object.freeze(hp(m,l))),m}_resolveAnimations(e,n,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,i,n))}const c=new pb(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Tl(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(n,r)||r!==s;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:o}}updateElement(e,n,i,s){Tl(s)?Object.assign(e,i):this._resolveAnimations(n,s).update(e,i)}updateSharedOptions(e,n,i){e&&!Tl(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,s){e.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=n.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,n,i=!0){const s=this._cachedMeta,r=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),i&&this.updateElements(r,e,n,"reset")}updateElements(e,n,i,s){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,n);i._stacked&&Ts(i,s)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,s]=e;this[n](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}te(Js,"defaults",{}),te(Js,"datasetElementType",null),te(Js,"dataElementType",null);class kl extends Js{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=PR(n,s,o);this._drawStart=a,this._drawCount=l,AR(n)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,s),d=o.axis,f=a.axis,{spanGaps:p,segment:m}=this.options,y=br(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||s==="none",w=n+i,A=e.length;let C=n>0&&this.getParsed(n-1);for(let T=0;T<A;++T){const H=e[T],W=b?H:{};if(T<n||T>=w){W.skip=!0;continue}const j=this.getParsed(T),J=Re(j[f]),Y=W[d]=o.getPixelForValue(j[d],T),z=W[f]=r||J?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,j,l):j[f],T);W.skip=isNaN(Y)||isNaN(z)||J,W.stop=T>0&&Math.abs(j[d]-C[d])>y,m&&(W.parsed=j,W.raw=c.data[T]),h&&(W.options=u||this.resolveDataElementOptions(T,H.active?"active":s)),b||this.updateElement(H,T,W,s),C=j}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}te(kl,"id","line"),te(kl,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),te(kl,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function qn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ph{constructor(e){te(this,"options");this.options=e||{}}static override(e){Object.assign(ph.prototype,e)}init(){}formats(){return qn()}parse(){return qn()}format(){return qn()}add(){return qn()}diff(){return qn()}startOf(){return qn()}endOf(){return qn()}}var XO={_date:ph};function QO(t,e,n,i){const{controller:s,data:r,_sorted:o}=t,a=s._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const l=a._reversePixels?ER:ai;if(i){if(s._sharedOptions){const c=r[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const h=l(r,e,n-u),d=l(r,e,n+u);return{lo:h.lo,hi:d.hi}}}}else return l(r,e,n)}return{lo:0,hi:r.length-1}}function Mr(t,e,n,i,s){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:h,hi:d}=QO(r[a],e,o,s);for(let f=h;f<=d;++f){const p=u[f];p.skip||i(p,c,f)}}}function JO(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Pl(t,e,n,i,s){const r=[];return!s&&!t.isPointInArea(e)||Mr(t,n,e,function(a,l,c){!s&&!ln(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function ZO(t,e,n,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=bR(o,{x:e.x,y:e.y});eb(h,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return Mr(t,n,e,r),s}function eM(t,e,n,i,s,r){let o=[];const a=JO(n);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(e.x,e.y,s);if(i&&!f)return;const p=u.getCenterPoint(s);if(!(!!r||t.isPointInArea(p))&&!f)return;const y=a(e,p);y<l?(o=[{element:u,datasetIndex:h,index:d}],l=y):y===l&&o.push({element:u,datasetIndex:h,index:d})}return Mr(t,n,e,c),o}function Al(t,e,n,i,s,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!i?ZO(t,e,n,s):eM(t,e,n,i,s,r)}function dp(t,e,n,i,s){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Mr(t,n,e,(l,c,u)=>{l[o](e[n],s)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var tM={evaluateInteractionItems:Mr,modes:{index(t,e,n,i){const s=Xn(e,t),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Pl(t,s,r,i,o):Al(t,s,r,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const s=Xn(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Pl(t,s,r,i,o):Al(t,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const s=Xn(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return Pl(t,s,r,i,o)},nearest(t,e,n,i){const s=Xn(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return Al(t,s,r,n.intersect,i,o)},x(t,e,n,i){const s=Xn(e,t);return dp(t,s,"x",n.intersect,i)},y(t,e,n,i){const s=Xn(e,t);return dp(t,s,"y",n.intersect,i)}}};const mb=["left","top","right","bottom"];function ks(t,e){return t.filter(n=>n.pos===e)}function fp(t,e){return t.filter(n=>mb.indexOf(n.pos)===-1&&n.box.axis===e)}function Ps(t,e){return t.sort((n,i)=>{const s=e?i:n,r=e?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function nM(t){const e=[];let n,i,s,r,o,a;for(n=0,i=(t||[]).length;n<i;++n)s=t[n],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function iM(t){const e={};for(const n of t){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!mb.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function sM(t,e){const n=iM(t),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:l&&e.availableHeight)}return n}function rM(t){const e=nM(t),n=Ps(e.filter(c=>c.box.fullSize),!0),i=Ps(ks(e,"left"),!0),s=Ps(ks(e,"right")),r=Ps(ks(e,"top"),!0),o=Ps(ks(e,"bottom")),a=fp(e,"x"),l=fp(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:ks(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function pp(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function _b(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function oM(t,e,n,i){const{pos:s,box:r}=n,o=t.maxPadding;if(!ye(s)){n.size&&(t[s]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?r.height:r.width),n.size=h.size/h.count,t[s]+=n.size}r.getPadding&&_b(o,r.getPadding());const a=Math.max(0,e.outerWidth-pp(o,t,"left","right")),l=Math.max(0,e.outerHeight-pp(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function aM(t){const e=t.maxPadding;function n(i){const s=Math.max(e[i]-t[i],0);return t[i]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function lM(t,e){const n=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],n[o])}),r}return i(t?["left","right"]:["top","bottom"])}function Ns(t,e,n,i){const s=[];let r,o,a,l,c,u;for(r=0,o=t.length,c=0;r<o;++r){a=t[r],l=a.box,l.update(a.width||e.w,a.height||e.h,lM(a.horizontal,e));const{same:h,other:d}=oM(e,n,a,i);c|=h&&s.length,u=u||d,l.fullSize||s.push(a)}return c&&Ns(s,e,n,i)||u}function Qr(t,e,n,i,s){t.top=n,t.left=e,t.right=e+i,t.bottom=n+s,t.width=i,t.height=s}function gp(t,e,n,i){const s=n.padding;let{x:r,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;ia(c.start)&&(o=c.start),l.fullSize?Qr(l,s.left,o,n.outerWidth-s.right-s.left,d):Qr(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;ia(c.start)&&(r=c.start),l.fullSize?Qr(l,r,s.top,d,n.outerHeight-s.bottom-s.top):Qr(l,r,e.top+c.placed,d,h),c.start=r,c.placed+=h,r=l.right}}e.x=r,e.y=o}var Jr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const s=It(t.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=rM(t.boxes),l=a.vertical,c=a.horizontal;we(t.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,y)=>y.box.options&&y.box.options.display===!1?m:m+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},s);_b(d,It(i));const f=Object.assign({maxPadding:d,w:r,h:o,x:s.left,y:s.top},s),p=sM(l.concat(c),h);Ns(a.fullSize,f,h,p),Ns(l,f,h,p),Ns(c,f,h,p)&&Ns(l,f,h,p),aM(f),gp(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,gp(a.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},we(a.chartArea,m=>{const y=m.box;Object.assign(y,t.chartArea),y.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class yb{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,s){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(e){return!0}updateConfig(e){}}class cM extends yb{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const yo="$chartjs",uM={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},mp=t=>t===null||t==="";function hM(t,e){const n=t.style,i=t.getAttribute("height"),s=t.getAttribute("width");if(t[yo]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",mp(s)){const r=tp(t,"width");r!==void 0&&(t.width=r)}if(mp(i))if(t.style.height==="")t.height=t.width/(e||2);else{const r=tp(t,"height");r!==void 0&&(t.height=r)}return t}const bb=wO?{passive:!0}:!1;function dM(t,e,n){t.addEventListener(e,n,bb)}function fM(t,e,n){t.canvas.removeEventListener(e,n,bb)}function pM(t,e){const n=uM[t.type]||t.type,{x:i,y:s}=Xn(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:s!==void 0?s:null}}function la(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function gM(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||la(a.addedNodes,i),o=o&&!la(a.removedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function mM(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||la(a.removedNodes,i),o=o&&!la(a.addedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const vr=new Map;let _p=0;function vb(){const t=window.devicePixelRatio;t!==_p&&(_p=t,vr.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function _M(t,e){vr.size||window.addEventListener("resize",vb),vr.set(t,e)}function yM(t){vr.delete(t),vr.size||window.removeEventListener("resize",vb)}function bM(t,e,n){const i=t.canvas,s=i&&fh(i);if(!s)return;const r=ib((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(s),_M(t,r),o}function Rl(t,e,n){n&&n.disconnect(),e==="resize"&&yM(t)}function vM(t,e,n){const i=t.canvas,s=ib(r=>{t.ctx!==null&&n(pM(r,t))},t);return dM(i,e,s),s}class wM extends yb{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(hM(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[yo])return!1;const i=n[yo].initial;["height","width"].forEach(r=>{const o=i[r];Re(o)?n.removeAttribute(r):n.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[yo],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:gM,detach:mM,resize:bM}[n]||vM;s[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),s=i[n];if(!s)return;({attach:Rl,detach:Rl,resize:Rl}[n]||fM)(e,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,s){return vO(e,n,i,s)}isAttached(e){const n=fh(e);return!!(n&&n.isConnected)}}function IM(t){return!dh()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?cM:wM}var ao;let Dr=(ao=class{constructor(){te(this,"x");te(this,"y");te(this,"active",!1);te(this,"options");te(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return br(this.x)&&br(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}},te(ao,"defaults",{}),te(ao,"defaultRoutes"),ao);function EM(t,e){const n=t.options.ticks,i=CM(t),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?xM(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return TM(e,c,r,o/s),c;const u=SM(r,e,s);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(Zr(e,c,u,Re(f)?0:a-f,a),h=0,d=o-1;h<d;h++)Zr(e,c,u,r[h],r[h+1]);return Zr(e,c,u,l,Re(f)?e.length:l+f),c}return Zr(e,c,u),c}function CM(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(i,s))}function SM(t,e,n){const i=kM(t),s=e.length/n;if(!i)return Math.max(s,1);const r=_R(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function xM(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function TM(t,e,n,i){let s=0,r=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===r&&(e.push(t[o]),s++,r=n[s*i])}function Zr(t,e,n,i,s){const r=Ce(i,0),o=Math.min(Ce(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-i,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(r+a*n))}function kM(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const PM=t=>t==="left"?"right":t==="right"?"left":t,yp=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,bp=(t,e)=>Math.min(e||t,t);function vp(t,e){const n=[],i=t.length/e,s=t.length;let r=0;for(;r<s;r+=i)n.push(t[Math.floor(r)]);return n}function AM(t,e,n){const i=t.ticks.length,s=Math.min(e,i-1),r=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(i===1?c=Math.max(l-r,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function RM(t,e){we(t,n=>{const i=n.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function As(t){return t.drawTicks?t.tickLength:0}function wp(t,e){if(!t.display)return 0;const n=gt(t.font,e),i=It(t.padding);return(Ne(t.text)?t.text.length:1)*n.lineHeight+i.height}function OM(t,e){return Hn(t,{scale:e,type:"scale"})}function MM(t,e,n){return Hn(t,{tick:n,index:e,type:"tick"})}function DM(t,e,n){let i=kR(t);return(n&&e!=="right"||!n&&e==="right")&&(i=PM(i)),i}function NM(t,e,n,i){const{top:s,left:r,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,d,f,p;const m=o-s,y=a-r;if(t.isHorizontal()){if(f=qf(i,r,a),ye(n)){const b=Object.keys(n)[0],w=n[b];p=u[b].getPixelForValue(w)+m-e}else n==="center"?p=(c.bottom+c.top)/2+m-e:p=yp(t,n,e);d=a-r}else{if(ye(n)){const b=Object.keys(n)[0],w=n[b];f=u[b].getPixelForValue(w)-y+e}else n==="center"?f=(c.left+c.right)/2-y+e:f=yp(t,n,e);p=qf(i,o,s),h=n==="left"?-pt:pt}return{titleX:f,titleY:p,maxWidth:d,rotation:h}}class ki extends Dr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return e=dt(e,Number.POSITIVE_INFINITY),n=dt(n,Number.NEGATIVE_INFINITY),i=dt(i,Number.POSITIVE_INFINITY),s=dt(s,Number.NEGATIVE_INFINITY),{min:dt(e,i),max:dt(n,s),minDefined:Ve(e),maxDefined:Ve(n)}}getMinMax(e){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),r||(i=Math.max(i,o.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:dt(n,dt(i,n)),max:dt(i,dt(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){De(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=JR(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?vp(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=EM(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){De(this.options.afterUpdate,[this])}beforeSetDimensions(){De(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){De(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),De(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){De(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=De(n.callback,[r.value,i,e],this)}afterTickToLabelConversion(){De(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){De(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=bp(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,r=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=bt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),h+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-As(e.grid)-n.padding-wp(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=rh(Math.min(Math.asin(bt((u.highest.height+6)/a,-1,1)),Math.asin(bt(l/c,-1,1))-Math.asin(bt(d/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){De(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){De(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=wp(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=As(r)+l):(e.height=this.maxHeight,e.width=As(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=i.padding*2,p=kn(this.labelRotation),m=Math.cos(p),y=Math.sin(p);if(a){const b=i.mirror?0:y*h.width+m*d.height;e.height=Math.min(this.maxHeight,e.height+b+f)}else{const b=i.mirror?0:m*h.width+y*d.height;e.width=Math.min(this.maxWidth,e.width+b+f)}this._calculatePadding(c,u,y,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=s*e.width,f=i*n.height):(d=i*e.height,f=s*n.width):r==="start"?f=n.width:r==="end"?d=e.width:r!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;r==="start"?(u=0,h=e.height):r==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){De(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)Re(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=vp(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/bp(n,i));let c=0,u=0,h,d,f,p,m,y,b,w,A,C,T;for(h=0;h<n;h+=l){if(p=e[h].label,m=this._resolveTickFontOptions(h),s.font=y=m.string,b=r[y]=r[y]||{data:{},gc:[]},w=m.lineHeight,A=C=0,!Re(p)&&!Ne(p))A=ra(s,b.data,b.gc,A,p),C=w;else if(Ne(p))for(d=0,f=p.length;d<f;++d)T=p[d],!Re(T)&&!Ne(T)&&(A=ra(s,b.data,b.gc,A,T),C+=w);o.push(A),a.push(C),c=Math.max(A,c),u=Math.max(C,u)}RM(r,n);const H=o.indexOf(c),W=a.indexOf(u),j=J=>({width:o[J]||0,height:a[J]||0});return{first:j(0),last:j(n-1),widest:j(H),highest:j(W),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return wR(this._alignToPixels?zn(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=MM(this.getContext(),e,i))}return this.$context||(this.$context=OM(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=kn(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=As(r),f=[],p=a.setContext(this.getContext()),m=p.display?p.width:0,y=m/2,b=function(S){return zn(i,S,m)};let w,A,C,T,H,W,j,J,Y,z,fe,Oe;if(o==="top")w=b(this.bottom),W=this.bottom-d,J=w-y,z=b(e.top)+y,Oe=e.bottom;else if(o==="bottom")w=b(this.top),z=e.top,Oe=b(e.bottom)-y,W=w+y,J=this.top+d;else if(o==="left")w=b(this.right),H=this.right-d,j=w-y,Y=b(e.left)+y,fe=e.right;else if(o==="right")w=b(this.left),Y=e.left,fe=b(e.right)-y,H=w+y,j=this.left+d;else if(n==="x"){if(o==="center")w=b((e.top+e.bottom)/2+.5);else if(ye(o)){const S=Object.keys(o)[0],R=o[S];w=b(this.chart.scales[S].getPixelForValue(R))}z=e.top,Oe=e.bottom,W=w+y,J=W+d}else if(n==="y"){if(o==="center")w=b((e.left+e.right)/2);else if(ye(o)){const S=Object.keys(o)[0],R=o[S];w=b(this.chart.scales[S].getPixelForValue(R))}H=w-y,j=H-d,Y=e.left,fe=e.right}const q=Ce(s.ticks.maxTicksLimit,h),M=Math.max(1,Math.ceil(h/q));for(A=0;A<h;A+=M){const S=this.getContext(A),R=r.setContext(S),k=a.setContext(S),G=R.lineWidth,K=R.color,re=k.dash||[],ie=k.dashOffset,pe=R.tickWidth,ge=R.tickColor,Me=R.tickBorderDash||[],me=R.tickBorderDashOffset;C=AM(this,A,l),C!==void 0&&(T=zn(i,C,G),c?H=j=Y=fe=T:W=J=z=Oe=T,f.push({tx1:H,ty1:W,tx2:j,ty2:J,x1:Y,y1:z,x2:fe,y2:Oe,width:G,color:K,borderDash:re,borderDashOffset:ie,tickWidth:pe,tickColor:ge,tickBorderDash:Me,tickBorderDashOffset:me}))}return this._ticksLength=h,this._borderValue=w,f}_computeLabelItems(e){const n=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=r,d=As(i.grid),f=d+u,p=h?-u:f,m=-kn(this.labelRotation),y=[];let b,w,A,C,T,H,W,j,J,Y,z,fe,Oe="middle";if(s==="top")H=this.bottom-p,W=this._getXAxisLabelAlignment();else if(s==="bottom")H=this.top+p,W=this._getXAxisLabelAlignment();else if(s==="left"){const M=this._getYAxisLabelAlignment(d);W=M.textAlign,T=M.x}else if(s==="right"){const M=this._getYAxisLabelAlignment(d);W=M.textAlign,T=M.x}else if(n==="x"){if(s==="center")H=(e.top+e.bottom)/2+f;else if(ye(s)){const M=Object.keys(s)[0],S=s[M];H=this.chart.scales[M].getPixelForValue(S)+f}W=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")T=(e.left+e.right)/2-f;else if(ye(s)){const M=Object.keys(s)[0],S=s[M];T=this.chart.scales[M].getPixelForValue(S)}W=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?Oe="top":l==="end"&&(Oe="bottom"));const q=this._getLabelSizes();for(b=0,w=a.length;b<w;++b){A=a[b],C=A.label;const M=r.setContext(this.getContext(b));j=this.getPixelForTick(b)+r.labelOffset,J=this._resolveTickFontOptions(b),Y=J.lineHeight,z=Ne(C)?C.length:1;const S=z/2,R=M.color,k=M.textStrokeColor,G=M.textStrokeWidth;let K=W;o?(T=j,W==="inner"&&(b===w-1?K=this.options.reverse?"left":"right":b===0?K=this.options.reverse?"right":"left":K="center"),s==="top"?c==="near"||m!==0?fe=-z*Y+Y/2:c==="center"?fe=-q.highest.height/2-S*Y+Y:fe=-q.highest.height+Y/2:c==="near"||m!==0?fe=Y/2:c==="center"?fe=q.highest.height/2-S*Y:fe=q.highest.height-z*Y,h&&(fe*=-1),m!==0&&!M.showLabelBackdrop&&(T+=Y/2*Math.sin(m))):(H=j,fe=(1-z)*Y/2);let re;if(M.showLabelBackdrop){const ie=It(M.backdropPadding),pe=q.heights[b],ge=q.widths[b];let Me=fe-ie.top,me=0-ie.left;switch(Oe){case"middle":Me-=pe/2;break;case"bottom":Me-=pe;break}switch(W){case"center":me-=ge/2;break;case"right":me-=ge;break;case"inner":b===w-1?me-=ge:b>0&&(me-=ge/2);break}re={left:me,top:Me,width:ge+ie.width,height:pe+ie.height,color:M.backdropColor}}y.push({label:C,font:J,textOffset:fe,options:{rotation:m,color:R,strokeColor:k,strokeWidth:G,textAlign:K,textBaseline:Oe,translation:[T,H],backdrop:re}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-kn(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:s,width:r,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(r=0,o=s.length;r<o;++r){const l=s[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=zn(e,this.left,o)-o/2,u=zn(e,this.right,a)+a/2,h=d=l):(h=zn(e,this.top,o)-o/2,d=zn(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&rb(i,s);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;oa(i,c,0,u,l,a)}s&&ob(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=gt(i.font),o=It(i.padding),a=i.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||ye(n)?(l+=o.bottom,Ne(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=NM(this,l,n,a);oa(e,i.text,0,0,r,{color:i.color,maxWidth:h,rotation:d,textAlign:DM(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=Ce(e.grid&&e.grid.z,-1),s=Ce(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ki.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return gt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class eo{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;$M(n)&&(i=this.register(n));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,LM(e,o,i),this.override&&Fe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,s=this.scope;i in n&&delete n[i],s&&i in Fe[s]&&(delete Fe[s][i],this.override&&delete Ei[i])}}function LM(t,e,n){const i=yr(Object.create(null),[n?Fe.get(n):{},Fe.get(e),t.defaults]);Fe.set(e,i),t.defaultRoutes&&FM(e,t.defaultRoutes),t.descriptors&&Fe.describe(e,t.descriptors)}function FM(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),s=i.pop(),r=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Fe.route(r,s,l,a)})}function $M(t){return"id"in t&&"defaults"in t}class BM{constructor(){this.controllers=new eo(Js,"datasets",!0),this.elements=new eo(Dr,"elements"),this.plugins=new eo(Object,"plugins"),this.scales=new eo(ki,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):we(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const s=sh(e);De(i["before"+s],[],i),n[e](i),De(i["after"+s],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var Ut=new BM;class UM{constructor(){this._init=[]}notify(e,n,i,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,n,i);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],l=[n,s,r.options];if(De(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Re(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,s=Ce(i.options&&i.options.plugins,{}),r=HM(i);return s===!1&&!n?[]:jM(e,r,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,i),e,"stop"),this._notify(s(i,n),e,"start")}}function HM(t){const e={},n=[],i=Object.keys(Ut.plugins.items);for(let r=0;r<i.length;r++)n.push(Ut.getPlugin(i[r]));const s=t.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function WM(t,e){return!e&&t===!1?null:t===!0?{}:t}function jM(t,{plugins:e,localIds:n},i,s){const r=[],o=t.getContext();for(const a of e){const l=a.id,c=WM(i[l],s);c!==null&&r.push({plugin:a,options:VM(t.config,{plugin:a,local:n[l]},c,o)})}return r}function VM(t,{plugin:e,local:n},i,s){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(i,r);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xc(t,e){const n=Fe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function zM(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function qM(t,e){return t===e?"_index_":"_value_"}function Ip(t){if(t==="x"||t==="y"||t==="r")return t}function KM(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Tc(t,...e){if(Ip(t))return t;for(const n of e){const i=n.axis||KM(n.position)||t.length>1&&Ip(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Ep(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function GM(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return Ep(t,"x",n[0])||Ep(t,"y",n[0])}return{}}function YM(t,e){const n=Ei[t.type]||{scales:{}},i=e.scales||{},s=xc(t.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!ye(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Tc(o,a,GM(o,t),Fe.scales[a.type]),c=qM(l,s),u=n.scales||{};r[o]=Ks(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||xc(a,e),u=(Ei[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=zM(h,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),Ks(r[f],[{axis:d},i[f],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];Ks(a,[Fe.scales[a.type],Fe.scale])}),r}function wb(t){const e=t.options||(t.options={});e.plugins=Ce(e.plugins,{}),e.scales=YM(t,e)}function Ib(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function XM(t){return t=t||{},t.data=Ib(t.data),wb(t),t}const Cp=new Map,Eb=new Set;function to(t,e){let n=Cp.get(t);return n||(n=e(),Cp.set(t,n),Eb.add(n)),n}const Rs=(t,e,n)=>{const i=na(e,n);i!==void 0&&t.add(i)};class QM{constructor(e){this._config=XM(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Ib(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),wb(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return to(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return to(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return to(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return to(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let s=i.get(e);return(!s||n)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,n,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>Rs(l,e,h))),u.forEach(h=>Rs(l,s,h)),u.forEach(h=>Rs(l,Ei[r]||{},h)),u.forEach(h=>Rs(l,Fe,h)),u.forEach(h=>Rs(l,Ec,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Eb.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ei[n]||{},Fe.datasets[n]||{},{type:n},Fe,Ec]}resolveNamedOptions(e,n,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Sp(this._resolverCache,e,s);let l=o;if(ZM(o,n)){r.$shared=!1,i=Un(i)?i():i;const c=this.createResolver(e,i,a);l=as(o,i,c)}for(const c of n)r[c]=l[c];return r}createResolver(e,n,i=[""],s){const{resolver:r}=Sp(this._resolverCache,e,i);return ye(n)?as(r,n,void 0,s):r}}function Sp(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const s=n.join();let r=i.get(s);return r||(r={resolver:ch(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const JM=t=>ye(t)&&Object.getOwnPropertyNames(t).some(e=>Un(t[e]));function ZM(t,e){const{isScriptable:n,isIndexable:i}=lb(t);for(const s of e){const r=n(s),o=i(s),a=(o||r)&&t[s];if(r&&(Un(a)||JM(a))||o&&Ne(a))return!0}return!1}var eD="4.4.1";const tD=["top","bottom","left","right","chartArea"];function xp(t,e){return t==="top"||t==="bottom"||tD.indexOf(t)===-1&&e==="x"}function Tp(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function kp(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),De(n&&n.onComplete,[t],e)}function nD(t){const e=t.chart,n=e.options.animation;De(n&&n.onProgress,[t],e)}function Cb(t){return dh()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const bo={},Pp=t=>{const e=Cb(t);return Object.values(bo).filter(n=>n.canvas===e).pop()};function iD(t,e,n){const i=Object.keys(t);for(const s of i){const r=+s;if(r>=e){const o=t[s];delete t[s],(n>0||r>e)&&(t[r+n]=o)}}}function sD(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function no(t,e,n){return t.options.clip?t[n]:e[n]}function rD(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:no(n,e,"left"),right:no(n,e,"right"),top:no(i,e,"top"),bottom:no(i,e,"bottom")}:e}class Jn{static register(...e){Ut.add(...e),Ap()}static unregister(...e){Ut.remove(...e),Ap()}constructor(e,n){const i=this.config=new QM(n),s=Cb(e),r=Pp(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||IM(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=lR(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new UM,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=TR(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],bo[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Zt.listen(this,"complete",kp),Zt.listen(this,"progress",nD),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return Re(e)?n&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ut}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ep(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Qf(this.canvas,this.ctx),this}stop(){return Zt.stop(this),this}resize(e,n){Zt.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,ep(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),De(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};we(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=Tc(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),we(r,o=>{const a=o.options,l=a.id,c=Tc(l,a),u=Ce(a.type,o.dtype);(a.position===void 0||xp(a.position,c)!==xp(o.dposition))&&(a.position=o.dposition),s[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const d=Ut.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),we(s,(o,a)=>{o||delete i[a]}),we(i,o=>{Jr.configure(this,o,o.options),Jr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(Tp("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||xc(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Ut.getController(a),{datasetElementType:c,dataElementType:u}=Fe.datasets[a];Object.assign(l,{dataElementType:Ut.getElement(u),datasetElementType:c&&Ut.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){we(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!s&&r.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||we(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Tp("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){we(this.scales,e=>{Jr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Hf(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const o=i==="_removeElements"?-r:r;iD(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!Hf(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Jr.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],we(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Un(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Zt.has(this)?this.attached&&!Zt.running(this)&&Zt.start(this):(this.draw(),kp({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const o=n[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,s=!i.disabled,r=rD(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&rb(n,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),e.controller.draw(),s&&ob(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return ln(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,s){const r=tM.modes[n];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Hn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);ia(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Zt.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Qf(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete bo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(r,o)=>{n.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};we(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){we(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},we(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const s=i?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!ea(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const s=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(n,e),a=i?e:r(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:s=[],options:r}=this,o=n,a=this._getActiveElements(e,s,i,o),l=pR(e),c=sD(e,this._lastEvent,i,l);i&&(this._lastEvent=null,De(r.onHover,[e,a,this],this),l&&De(r.onClick,[e,a,this],this));const u=!ea(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,s){if(e.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}}te(Jn,"defaults",Fe),te(Jn,"instances",bo),te(Jn,"overrides",Ei),te(Jn,"registry",Ut),te(Jn,"version",eD),te(Jn,"getChart",Pp);function Ap(){return we(Jn.instances,t=>t._plugins.invalidate())}function Sb(t,e,n=e){t.lineCap=Ce(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Ce(n.borderDash,e.borderDash)),t.lineDashOffset=Ce(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Ce(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ce(n.borderWidth,e.borderWidth),t.strokeStyle=Ce(n.borderColor,e.borderColor)}function oD(t,e,n){t.lineTo(n.x,n.y)}function aD(t){return t.stepped?WR:t.tension||t.cubicInterpolationMode==="monotone"?jR:oD}function xb(t,e,n={}){const i=t.length,{start:s=0,end:r=i-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function lD(t,e,n,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=xb(s,n,i),u=aD(r);let{move:h=!0,reverse:d}=i||{},f,p,m;for(f=0;f<=c;++f)p=s[(a+(d?c-f:f))%o],!p.skip&&(h?(t.moveTo(p.x,p.y),h=!1):u(t,m,p,d,r.stepped),m=p);return l&&(p=s[(a+(d?c:0))%o],u(t,m,p,d,r.stepped)),!!l}function cD(t,e,n,i){const s=e.points,{count:r,start:o,ilen:a}=xb(s,n,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,d,f,p,m,y,b;const w=C=>(o+(c?a-C:C))%r,A=()=>{m!==y&&(t.lineTo(u,y),t.lineTo(u,m),t.lineTo(u,b))};for(l&&(f=s[w(0)],t.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=s[w(d)],f.skip)continue;const C=f.x,T=f.y,H=C|0;H===p?(T<m?m=T:T>y&&(y=T),u=(h*u+C)/++h):(A(),t.lineTo(C,T),p=H,h=0,m=y=T),b=T}A()}function kc(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?cD:lD}function uD(t){return t.stepped?IO:t.tension||t.cubicInterpolationMode==="monotone"?EO:Qn}function hD(t,e,n,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,i)&&s.closePath()),Sb(t,e.options),t.stroke(s)}function dD(t,e,n,i){const{segments:s,options:r}=e,o=kc(e);for(const a of s)Sb(t,r,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const fD=typeof Path2D=="function";function pD(t,e,n,i){fD&&!e.options.segment?hD(t,e,n,i):dD(t,e,n,i)}class io extends Dr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;pO(this._points,i,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=MO(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,s=e[n],r=this.points,o=AO(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=uD(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],f=r[h],p=r[d];if(f===p){a.push(f);continue}const m=Math.abs((s-f[n])/(p[n]-f[n])),y=l(f,p,m,i.stepped);y[n]=e[n],a.push(y)}return a.length===1?a[0]:a}pathSegment(e,n,i){return kc(this)(e,this,n,i)}path(e,n,i){const s=this.segments,r=kc(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of s)o&=r(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),pD(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}te(io,"id","line"),te(io,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),te(io,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),te(io,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Rp(t,e,n,i){const s=t.options,{[n]:r}=t.getProps([n],i);return Math.abs(e-r)<s.radius+s.hitRadius}class Ol extends Dr{constructor(n){super();te(this,"parsed");te(this,"skip");te(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,i){return Rp(this,n,"x",i)}inYRange(n,i){return Rp(this,n,"y",i)}getCenterPoint(n){const{x:i,y:s}=this.getProps(["x","y"],n);return{x:i,y:s}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const s=i&&n.borderWidth||0;return(i+s)*2}draw(n,i){const s=this.options;this.skip||s.radius<.1||!ln(this,i,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Cc(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}te(Ol,"id","point"),te(Ol,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),te(Ol,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Ls={average(t){if(!t.length)return!1;let e,n,i=0,s=0,r=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();i+=a.x,s+=a.y,++r}}return{x:i/r,y:s/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=t.length;r<o;++r){const l=t[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Ic(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Bt(t,e){return e&&(Ne(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function en(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function gD(t,e){const{element:n,datasetIndex:i,index:s}=e,r=t.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:t,label:o,parsed:r.getParsed(s),raw:t.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function Op(t,e){const n=t.chart.ctx,{body:i,footer:s,title:r}=t,{boxWidth:o,boxHeight:a}=e,l=gt(e.bodyFont),c=gt(e.titleFont),u=gt(e.footerFont),h=r.length,d=s.length,f=i.length,p=It(e.padding);let m=p.height,y=0,b=i.reduce((C,T)=>C+T.before.length+T.lines.length+T.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,h&&(m+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),b){const C=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=f*C+(b-f)*l.lineHeight+(b-1)*e.bodySpacing}d&&(m+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let w=0;const A=function(C){y=Math.max(y,n.measureText(C).width+w)};return n.save(),n.font=c.string,we(t.title,A),n.font=l.string,we(t.beforeBody.concat(t.afterBody),A),w=e.displayColors?o+2+e.boxPadding:0,we(i,C=>{we(C.before,A),we(C.lines,A),we(C.after,A)}),w=0,n.font=u.string,we(t.footer,A),n.restore(),y+=p.width,{width:y,height:m}}function mD(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function _D(t,e,n,i){const{x:s,width:r}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&s+r+o>e.width||t==="right"&&s-r-o<0)return!0}function yD(t,e,n,i){const{x:s,width:r}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),_D(c,t,e,n)&&(c="center"),c}function Mp(t,e,n){const i=n.yAlign||e.yAlign||mD(t,n);return{xAlign:n.xAlign||e.xAlign||yD(t,e,n,i),yAlign:i}}function bD(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function vD(t,e,n){let{y:i,height:s}=t;return e==="top"?i+=n:e==="bottom"?i-=s+n:i-=s/2,i}function Dp(t,e,n,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+r,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Qs(o);let p=bD(e,a);const m=vD(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,d)+s:a==="right"&&(p+=Math.max(h,f)+s),{x:bt(p,0,i.width-e.width),y:bt(m,0,i.height-e.height)}}function so(t,e,n){const i=It(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function Np(t){return Bt([],en(t))}function wD(t,e,n){return Hn(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Lp(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Tb={beforeTitle:Jt,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Jt,beforeBody:Jt,beforeLabel:Jt,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Re(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Jt,afterBody:Jt,beforeFooter:Jt,footer:Jt,afterFooter:Jt};function Ze(t,e,n,i){const s=t[e].call(n,i);return typeof s>"u"?Tb[e].call(n,i):s}class Pc extends Dr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new pb(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=wD(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,s=Ze(i,"beforeTitle",this,e),r=Ze(i,"title",this,e),o=Ze(i,"afterTitle",this,e);let a=[];return a=Bt(a,en(s)),a=Bt(a,en(r)),a=Bt(a,en(o)),a}getBeforeBody(e,n){return Np(Ze(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,s=[];return we(e,r=>{const o={before:[],lines:[],after:[]},a=Lp(i,r);Bt(o.before,en(Ze(a,"beforeLabel",this,r))),Bt(o.lines,Ze(a,"label",this,r)),Bt(o.after,en(Ze(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,n){return Np(Ze(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,s=Ze(i,"beforeFooter",this,e),r=Ze(i,"footer",this,e),o=Ze(i,"afterFooter",this,e);let a=[];return a=Bt(a,en(s)),a=Bt(a,en(r)),a=Bt(a,en(o)),a}_createItems(e){const n=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(gD(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),we(a,u=>{const h=Lp(e.callbacks,u);s.push(Ze(h,"labelColor",this,u)),r.push(Ze(h,"labelPointStyle",this,u)),o.push(Ze(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=Ls[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Op(this,i),c=Object.assign({},a,l),u=Mp(this.chart,i,c),h=Dp(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,s){const r=this.getCaretPosition(e,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Qs(a),{x:d,y:f}=e,{width:p,height:m}=n;let y,b,w,A,C,T;return r==="center"?(C=f+m/2,s==="left"?(y=d,b=y-o,A=C+o,T=C-o):(y=d+p,b=y+o,A=C-o,T=C+o),w=y):(s==="left"?b=d+Math.max(l,u)+o:s==="right"?b=d+p-Math.max(c,h)-o:b=this.caretX,r==="top"?(A=f,C=A-o,y=b-o,w=b+o):(A=f+m,C=A+o,y=b+o,w=b-o),T=A),{x1:y,x2:b,x3:w,y1:A,y2:C,y3:T}}drawTitle(e,n,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=Sl(i.rtl,this.x,this.width);for(e.x=so(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=gt(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,u=gt(r.bodyFont),h=so(this,"left",r),d=s.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,p=n.y+f;if(r.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=s.leftForLtr(d,c)+c/2,b=p+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Cc(e,m,y,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Cc(e,m,y,b)}else{e.lineWidth=ye(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const m=s.leftForLtr(d,c),y=s.leftForLtr(s.xPlus(d,1),c-2),b=Qs(o.borderRadius);Object.values(b).some(w=>w!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Sc(e,{x:m,y:p,w:c,h:l,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Sc(e,{x:y,y:p+1,w:c-2,h:l-2,radius:b}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(m,p,c,l),e.strokeRect(m,p,c,l),e.fillStyle=o.backgroundColor,e.fillRect(y,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=gt(i.bodyFont);let d=h.lineHeight,f=0;const p=Sl(i.rtl,this.x,this.width),m=function(j){n.fillText(j,p.x(e.x+f),e.y+d/2),e.y+=d+r},y=p.textAlign(o);let b,w,A,C,T,H,W;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=so(this,y,i),n.fillStyle=i.bodyColor,we(this.beforeBody,m),f=a&&y!=="right"?o==="center"?c/2+u:c+2+u:0,C=0,H=s.length;C<H;++C){for(b=s[C],w=this.labelTextColors[C],n.fillStyle=w,we(b.before,m),A=b.lines,a&&A.length&&(this._drawColorBox(n,e,C,p,i),d=Math.max(h.lineHeight,l)),T=0,W=A.length;T<W;++T)m(A[T]),d=h.lineHeight;we(b.after,m)}f=0,d=h.lineHeight,we(this.afterBody,m),e.y-=r}drawFooter(e,n,i){const s=this.footer,r=s.length;let o,a;if(r){const l=Sl(i.rtl,this.x,this.width);for(e.x=so(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=gt(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=Qs(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,i,s),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(e,n,i,s),n.lineTo(a+c,l+u-p),n.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(e,n,i,s),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&r==="left"&&this.drawCaret(e,n,i,s),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=Ls[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Op(this,e),l=Object.assign({},o,this._size),c=Mp(n,e,l),u=Dp(e,l,c,n);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=It(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,n),xO(e,n.textDirection),r.y+=o.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),TO(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!ea(i,s),o=this._positionChanged(s,n);(r||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,n,i),a=this._positionChanged(o,e),l=n||!ea(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:s,options:r}=this,o=Ls[r.position].call(this,e,n);return o!==!1&&(i!==o.x||s!==o.y)}}te(Pc,"positioners",Ls);var pN={id:"tooltip",_element:Pc,positioners:Ls,afterInit(t,e,n){n&&(t.tooltip=new Pc({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Tb},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const ID=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function ED(t,e,n,i){const s=t.indexOf(e);if(s===-1)return ID(t,e,n,i);const r=t.lastIndexOf(e);return s!==r?n:s}const CD=(t,e)=>t===null?null:bt(Math.round(t),0,e);function Fp(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class $p extends ki{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Re(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:ED(i,e,Ce(n,e),this._addedLabels),CD(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return Fp.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}te($p,"id","category"),te($p,"defaults",{ticks:{callback:Fp}});function SD(t,e){const n=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=r||1,p=u-1,{min:m,max:y}=e,b=!Re(o),w=!Re(a),A=!Re(c),C=(y-m)/(h+1);let T=jf((y-m)/p/f)*f,H,W,j,J;if(T<1e-14&&!b&&!w)return[{value:m},{value:y}];J=Math.ceil(y/T)-Math.floor(m/T),J>p&&(T=jf(J*T/p/f)*f),Re(l)||(H=Math.pow(10,l),T=Math.ceil(T*H)/H),s==="ticks"?(W=Math.floor(m/T)*T,j=Math.ceil(y/T)*T):(W=m,j=y),b&&w&&r&&yR((a-o)/r,T/1e3)?(J=Math.round(Math.min((a-o)/T,u)),T=(a-o)/J,W=o,j=a):A?(W=b?o:W,j=w?a:j,J=c-1,T=(j-W)/J):(J=(j-W)/T,Gs(J,Math.round(J),T/1e3)?J=Math.round(J):J=Math.ceil(J));const Y=Math.max(Vf(T),Vf(W));H=Math.pow(10,Re(l)?Y:l),W=Math.round(W*H)/H,j=Math.round(j*H)/H;let z=0;for(b&&(d&&W!==o?(n.push({value:o}),W<o&&z++,Gs(Math.round((W+z*T)*H)/H,o,Bp(o,C,t))&&z++):W<o&&z++);z<J;++z){const fe=Math.round((W+z*T)*H)/H;if(w&&fe>a)break;n.push({value:fe})}return w&&d&&j!==a?n.length&&Gs(n[n.length-1].value,a,Bp(a,C,t))?n[n.length-1].value=a:n.push({value:a}):(!w||j===a)&&n.push({value:j}),n}function Bp(t,e,{horizontal:n,minRotation:i}){const s=kn(i),r=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class ca extends ki{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Re(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=n?s:l,a=l=>r=i?r:l;if(e){const l=os(s),c=os(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=SD(s,r);return e.bounds==="ticks"&&Zy(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-n)/Math.max(e.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return lh(e,this.chart.options.locale,this.options.ticks.format)}}class Up extends ca{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ve(e)?e:0,this.max=Ve(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=kn(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}te(Up,"id","linear"),te(Up,"defaults",{ticks:{callback:Wa.formatters.numeric}});const wr=t=>Math.floor(Tn(t)),Kn=(t,e)=>Math.pow(10,wr(t)+e);function Hp(t){return t/Math.pow(10,wr(t))===1}function Wp(t,e,n){const i=Math.pow(10,n),s=Math.floor(t/i);return Math.ceil(e/i)-s}function xD(t,e){const n=e-t;let i=wr(n);for(;Wp(t,e,i)>10;)i++;for(;Wp(t,e,i)<10;)i--;return Math.min(i,wr(t))}function TD(t,{min:e,max:n}){e=dt(t.min,e);const i=[],s=wr(e);let r=xD(e,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,r)),d=dt(t.min,Math.round((l+u+h*Math.pow(10,r))*o)/o);for(;d<n;)i.push({value:d,major:Hp(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,o=r>=0?1:o),d=Math.round((l+u+h*Math.pow(10,r))*o)/o;const f=dt(t.max,d);return i.push({value:f,major:Hp(f),significand:h}),i}class jp extends ki{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=ca.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return Ve(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ve(e)?Math.max(0,e):null,this.max=Ve(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ve(this._userMin)&&(this.min=e===Kn(this.min,0)?Kn(this.min,-1):Kn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=e?i:a,o=a=>s=n?s:a;i===s&&(i<=0?(r(1),o(10)):(r(Kn(i,-1)),o(Kn(s,1)))),i<=0&&r(Kn(s,-1)),s<=0&&o(Kn(i,1)),this.min=i,this.max=s}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=TD(n,this);return e.bounds==="ticks"&&Zy(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":lh(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Tn(e),this._valueRange=Tn(this.max)-Tn(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Tn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}te(jp,"id","logarithmic"),te(jp,"defaults",{ticks:{callback:Wa.formatters.logarithmic,major:{enabled:!0}}});function Ac(t){const e=t.ticks;if(e.display&&t.display){const n=It(e.backdropPadding);return Ce(e.font&&e.font.size,Fe.font.size)+n.height}return 0}function kD(t,e,n){return n=Ne(n)?n:[n],{w:UR(t,e.string,n),h:n.length*e.lineHeight}}function Vp(t,e,n,i,s){return t===i||t===s?{start:e-n/2,end:e+n/2}:t<i||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function PD(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],s=[],r=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?ze/r:0;for(let l=0;l<r;l++){const c=o.setContext(t.getPointLabelContext(l));s[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+s[l],a),h=gt(c.font),d=kD(t.ctx,h,t._pointLabels[l]);i[l]=d;const f=St(t.getIndexAngle(l)+a),p=Math.round(rh(f)),m=Vp(p,u.x,d.w,0,180),y=Vp(p,u.y,d.h,90,270);AD(n,e,f,m,y)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=MD(t,i,s)}function AD(t,e,n,i,s){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function RD(t,e,n){const i=t.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=n,l=t.getPointPosition(e,i+s+o,r),c=Math.round(rh(St(l.angle+pt))),u=LD(l.y,a.h,c),h=DD(c),d=ND(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function OD(t,e){if(!e)return!0;const{left:n,top:i,right:s,bottom:r}=t;return!(ln({x:n,y:i},e)||ln({x:n,y:r},e)||ln({x:s,y:i},e)||ln({x:s,y:r},e))}function MD(t,e,n){const i=[],s=t._pointLabels.length,r=t.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:Ac(r)/2,additionalAngle:o?ze/s:0};let c;for(let u=0;u<s;u++){l.padding=n[u],l.size=e[u];const h=RD(t,u,l);i.push(h),a==="auto"&&(h.visible=OD(h,c),h.visible&&(c=h))}return i}function DD(t){return t===0||t===180?"center":t<180?"left":"right"}function ND(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function LD(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function FD(t,e,n){const{left:i,top:s,right:r,bottom:o}=n,{backdropColor:a}=e;if(!Re(a)){const l=Qs(e.borderRadius),c=It(e.backdropPadding);t.fillStyle=a;const u=i-c.left,h=s-c.top,d=r-i+c.width,f=o-s+c.height;Object.values(l).some(p=>p!==0)?(t.beginPath(),Sc(t,{x:u,y:h,w:d,h:f,radius:l}),t.fill()):t.fillRect(u,h,d,f)}}function $D(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let s=e-1;s>=0;s--){const r=t._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(t.getPointLabelContext(s));FD(n,o,r);const a=gt(o.font),{x:l,y:c,textAlign:u}=r;oa(n,t._pointLabels[s],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function kb(t,e,n,i){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,wt);else{let r=t.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=t.getPointPosition(o,e),s.lineTo(r.x,r.y)}}function BD(t,e,n,i,s){const r=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash),r.lineDashOffset=s.dashOffset,r.beginPath(),kb(t,n,o,i),r.closePath(),r.stroke(),r.restore())}function UD(t,e,n){return Hn(t,{label:n,index:e,type:"pointLabel"})}class ro extends ca{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=It(Ac(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Ve(e)&&!isNaN(e)?e:0,this.max=Ve(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ac(this.options))}generateTickLabels(e){ca.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const s=De(this.options.pointLabels.callback,[n,i],this);return s||s===0?s:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?PD(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,s){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,s))}getIndexAngle(e){const n=wt/(this._pointLabels.length||1),i=this.options.startAngle||0;return St(e*n+kn(i))}getDistanceFromCenterForValue(e){if(Re(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Re(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return UD(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const s=this.getIndexAngle(e)-pt+i;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:n,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),kb(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:s,border:r}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&$D(this,o),s.display&&this.ticks.forEach((u,h)=>{if(h!==0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=s.setContext(d),p=r.setContext(d);BD(this,f,l,o,p)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=gt(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=It(c.backdropPadding);e.fillRect(-o/2-h.left,-r-u.size/2-h.top,o+h.width,u.size+h.height)}oa(e,a.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}te(ro,"id","radialLinear"),te(ro,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Wa.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),te(ro,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),te(ro,"descriptors",{angleLines:{_fallback:"grid"}});const Va={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},tt=Object.keys(Va);function zp(t,e){return t-e}function qp(t,e){if(Re(e))return null;const n=t._adapter,{parser:i,round:s,isoWeekday:r}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Ve(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(br(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,s)),+o)}function Kp(t,e,n,i){const s=tt.length;for(let r=tt.indexOf(t);r<s-1;++r){const o=Va[tt[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return tt[r]}return tt[s-1]}function HD(t,e,n,i,s){for(let r=tt.length-1;r>=tt.indexOf(n);r--){const o=tt[r];if(Va[o].common&&t._adapter.diff(s,i,o)>=e-1)return o}return tt[n?tt.indexOf(n):0]}function WD(t){for(let e=tt.indexOf(t)+1,n=tt.length;e<n;++e)if(Va[tt[e]].common)return tt[e]}function Gp(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:s}=oh(n,e),r=n[i]>=e?n[i]:n[s];t[r]=!0}}function jD(t,e,n,i){const s=t._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function Yp(t,e,n){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!n?i:jD(t,i,s,n)}class ua extends ki{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),s=this._adapter=new XO._date(e.adapters.date);s.init(n),Ks(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:qp(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Ve(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=Ve(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=CR(s,r,o);return this._unit=n.unit||(i.autoSkip?Kp(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):HD(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:WD(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),Yp(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=bt(n,0,o),i=bt(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||Kp(r.minUnit,n,i,this._getLabelCapacity(n)),a=Ce(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=br(l)||l===!0,u={};let h=n,d,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=s.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<i;d=+e.add(d,a,o),f++)Gp(u,d,p);return(d===i||s.bounds==="ticks"||f===1)&&Gp(u,d,p),Object.keys(u).sort(zp).map(m=>+m)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,r=this._unit,o=n||s[r];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,s){const r=this.options,o=r.ticks.callback;if(o)return De(o,[e,n,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=i[n],f=c&&h&&d&&d.major;return this._adapter.format(e,s||(f?h:u))}generateTickLabels(e){let n,i,s;for(n=0,i=e.length;n<i;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,s=kn(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(e,0,Yp(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)e.push(qp(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return xR(e.sort(zp))}}te(ua,"id","time"),te(ua,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function oo(t,e,n){let i=0,s=t.length-1,r,o,a,l;n?(e>=t[i].pos&&e<=t[s].pos&&({lo:i,hi:s}=ai(t,"pos",e)),{pos:r,time:a}=t[i],{pos:o,time:l}=t[s]):(e>=t[i].time&&e<=t[s].time&&({lo:i,hi:s}=ai(t,"time",e)),{time:r,pos:a}=t[i],{time:o,pos:l}=t[s]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class Xp extends ua{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=oo(n,this.min),this._tableRange=oo(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,s=[],r=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(oo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return oo(this._table,i*this._tableRange+this._minPos,!0)}}te(Xp,"id","timeseries"),te(Xp,"defaults",ua.defaults);export{zD as A,mw as B,Jn as C,KD as D,JD as E,nn as F,En as G,GD as H,QD as I,dN as J,hN as K,kl as L,ZD as M,Ol as P,YD as a,Vg as b,Tt as c,uN as d,iN as e,nN as f,rN as g,cN as h,zI as i,lN as j,qD as k,ft as l,aN as m,tN as n,hw as o,fw as p,XD as q,oN as r,sN as s,io as t,eN as u,$p as v,Up as w,pN as x,fv as y,Bv as z};
