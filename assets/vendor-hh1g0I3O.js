var Ky=Object.defineProperty;var qy=(e,t,n)=>t in e?Ky(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var $=(e,t,n)=>(qy(e,typeof t!="symbol"?t+"":t,n),n);function Dc(e,t){const n=Object.create(null),i=e.split(",");for(let s=0;s<i.length;s++)n[i[s]]=!0;return t?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const Nt={},ji=[],qe=()=>{},Gy=()=>!1,la=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Nc=e=>e.startsWith("onUpdate:"),Qt=Object.assign,Lc=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Yy=Object.prototype.hasOwnProperty,pt=(e,t)=>Yy.call(e,t),nt=Array.isArray,Ki=e=>ca(e)==="[object Map]",Jp=e=>ca(e)==="[object Set]",at=e=>typeof e=="function",qt=e=>typeof e=="string",gs=e=>typeof e=="symbol",Ft=e=>e!==null&&typeof e=="object",Zp=e=>(Ft(e)||at(e))&&at(e.then)&&at(e.catch),tg=Object.prototype.toString,ca=e=>tg.call(e),Xy=e=>ca(e).slice(8,-1),eg=e=>ca(e)==="[object Object]",Fc=e=>qt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,uo=Dc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ua=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Qy=/-(\w)/g,Je=ua(e=>e.replace(Qy,(t,n)=>n?n.toUpperCase():"")),Jy=/\B([A-Z])/g,ms=ua(e=>e.replace(Jy,"-$1").toLowerCase()),ha=ua(e=>e.charAt(0).toUpperCase()+e.slice(1)),Wa=ua(e=>e?`on${ha(e)}`:""),yi=(e,t)=>!Object.is(e,t),Ua=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},ko=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Zy=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let gh;const Ml=()=>gh||(gh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Bc(e){if(nt(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],s=qt(i)?iv(i):Bc(i);if(s)for(const r in s)t[r]=s[r]}return t}else if(qt(e)||Ft(e))return e}const tv=/;(?![^(]*\))/g,ev=/:([^]+)/,nv=/\/\*[^]*?\*\//g;function iv(e){const t={};return e.replace(nv,"").split(tv).forEach(n=>{if(n){const i=n.split(ev);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function $c(e){let t="";if(qt(e))t=e;else if(nt(e))for(let n=0;n<e.length;n++){const i=$c(e[n]);i&&(t+=i+" ")}else if(Ft(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const sv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",rv=Dc(sv);function ng(e){return!!e||e===""}const U1=e=>qt(e)?e:e==null?"":nt(e)||Ft(e)&&(e.toString===tg||!at(e.toString))?JSON.stringify(e,ig,2):String(e),ig=(e,t)=>t&&t.__v_isRef?ig(e,t.value):Ki(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,s],r)=>(n[Ha(i,r)+" =>"]=s,n),{})}:Jp(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Ha(n))}:gs(t)?Ha(t):Ft(t)&&!nt(t)&&!eg(t)?String(t):t,Ha=(e,t="")=>{var n;return gs(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let Ie;class ov{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ie,!t&&Ie&&(this.index=(Ie.scopes||(Ie.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Ie;try{return Ie=this,t()}finally{Ie=n}}}on(){Ie=this}off(){Ie=this.parent}stop(t){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function av(e,t=Ie){t&&t.active&&t.effects.push(e)}function lv(){return Ie}const Wc=e=>{const t=new Set(e);return t.w=0,t.n=0,t},sg=e=>(e.w&jn)>0,rg=e=>(e.n&jn)>0,cv=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=jn},uv=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const s=t[i];sg(s)&&!rg(s)?s.delete(e):t[n++]=s,s.w&=~jn,s.n&=~jn}t.length=n}},Rl=new WeakMap;let $s=0,jn=1;const Pl=30;let Ce;const fi=Symbol(""),Ol=Symbol("");class Uc{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,av(this,i)}run(){if(!this.active)return this.fn();let t=Ce,n=Bn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Ce,Ce=this,Bn=!0,jn=1<<++$s,$s<=Pl?cv(this):mh(this),this.fn()}finally{$s<=Pl&&uv(this),jn=1<<--$s,Ce=this.parent,Bn=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ce===this?this.deferStop=!0:this.active&&(mh(this),this.onStop&&this.onStop(),this.active=!1)}}function mh(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Bn=!0;const og=[];function _s(){og.push(Bn),Bn=!1}function bs(){const e=og.pop();Bn=e===void 0?!0:e}function de(e,t,n){if(Bn&&Ce){let i=Rl.get(e);i||Rl.set(e,i=new Map);let s=i.get(n);s||i.set(n,s=Wc()),ag(s)}}function ag(e,t){let n=!1;$s<=Pl?rg(e)||(e.n|=jn,n=!sg(e)):n=!e.has(Ce),n&&(e.add(Ce),Ce.deps.push(e))}function mn(e,t,n,i,s,r){const o=Rl.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&nt(e)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||!gs(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":nt(e)?Fc(n)&&a.push(o.get("length")):(a.push(o.get(fi)),Ki(e)&&a.push(o.get(Ol)));break;case"delete":nt(e)||(a.push(o.get(fi)),Ki(e)&&a.push(o.get(Ol)));break;case"set":Ki(e)&&a.push(o.get(fi));break}if(a.length===1)a[0]&&Dl(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Dl(Wc(l))}}function Dl(e,t){const n=nt(e)?e:[...e];for(const i of n)i.computed&&_h(i);for(const i of n)i.computed||_h(i)}function _h(e,t){(e!==Ce||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const hv=Dc("__proto__,__v_isRef,__isVue"),lg=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(gs)),bh=dv();function dv(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=vt(this);for(let r=0,o=this.length;r<o;r++)de(i,"get",r+"");const s=i[t](...n);return s===-1||s===!1?i[t](...n.map(vt)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){_s();const i=vt(this)[t].apply(this,n);return bs(),i}}),e}function fv(e){const t=vt(this);return de(t,"has",e),t.hasOwnProperty(e)}class cg{constructor(t=!1,n=!1){this._isReadonly=t,this._shallow=n}get(t,n,i){const s=this._isReadonly,r=this._shallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return i===(s?r?Cv:fg:r?dg:hg).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=nt(t);if(!s){if(o&&pt(bh,n))return Reflect.get(bh,n,i);if(n==="hasOwnProperty")return fv}const a=Reflect.get(t,n,i);return(gs(n)?lg.has(n):hv(n))||(s||de(t,"get",n),r)?a:fe(a)?o&&Fc(n)?a:a.value:Ft(a)?s?gg(a):Ar(a):a}}class ug extends cg{constructor(t=!1){super(!1,t)}set(t,n,i,s){let r=t[n];if(!this._shallow){const l=is(r);if(!Ao(i)&&!is(i)&&(r=vt(r),i=vt(i)),!nt(t)&&fe(r)&&!fe(i))return l?!1:(r.value=i,!0)}const o=nt(t)&&Fc(n)?Number(n)<t.length:pt(t,n),a=Reflect.set(t,n,i,s);return t===vt(s)&&(o?yi(i,r)&&mn(t,"set",n,i):mn(t,"add",n,i)),a}deleteProperty(t,n){const i=pt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&i&&mn(t,"delete",n,void 0),s}has(t,n){const i=Reflect.has(t,n);return(!gs(n)||!lg.has(n))&&de(t,"has",n),i}ownKeys(t){return de(t,"iterate",nt(t)?"length":fi),Reflect.ownKeys(t)}}class pv extends cg{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const gv=new ug,mv=new pv,_v=new ug(!0),Hc=e=>e,da=e=>Reflect.getPrototypeOf(e);function Wr(e,t,n=!1,i=!1){e=e.__v_raw;const s=vt(e),r=vt(t);n||(yi(t,r)&&de(s,"get",t),de(s,"get",r));const{has:o}=da(s),a=i?Hc:n?jc:ar;if(o.call(s,t))return a(e.get(t));if(o.call(s,r))return a(e.get(r));e!==s&&e.get(t)}function Ur(e,t=!1){const n=this.__v_raw,i=vt(n),s=vt(e);return t||(yi(e,s)&&de(i,"has",e),de(i,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function Hr(e,t=!1){return e=e.__v_raw,!t&&de(vt(e),"iterate",fi),Reflect.get(e,"size",e)}function yh(e){e=vt(e);const t=vt(this);return da(t).has.call(t,e)||(t.add(e),mn(t,"add",e,e)),this}function vh(e,t){t=vt(t);const n=vt(this),{has:i,get:s}=da(n);let r=i.call(n,e);r||(e=vt(e),r=i.call(n,e));const o=s.call(n,e);return n.set(e,t),r?yi(t,o)&&mn(n,"set",e,t):mn(n,"add",e,t),this}function wh(e){const t=vt(this),{has:n,get:i}=da(t);let s=n.call(t,e);s||(e=vt(e),s=n.call(t,e)),i&&i.call(t,e);const r=t.delete(e);return s&&mn(t,"delete",e,void 0),r}function xh(){const e=vt(this),t=e.size!==0,n=e.clear();return t&&mn(e,"clear",void 0,void 0),n}function zr(e,t){return function(i,s){const r=this,o=r.__v_raw,a=vt(o),l=t?Hc:e?jc:ar;return!e&&de(a,"iterate",fi),o.forEach((c,u)=>i.call(s,l(c),l(u),r))}}function Vr(e,t,n){return function(...i){const s=this.__v_raw,r=vt(s),o=Ki(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=s[e](...i),u=n?Hc:t?jc:ar;return!t&&de(r,"iterate",l?Ol:fi),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function En(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function bv(){const e={get(r){return Wr(this,r)},get size(){return Hr(this)},has:Ur,add:yh,set:vh,delete:wh,clear:xh,forEach:zr(!1,!1)},t={get(r){return Wr(this,r,!1,!0)},get size(){return Hr(this)},has:Ur,add:yh,set:vh,delete:wh,clear:xh,forEach:zr(!1,!0)},n={get(r){return Wr(this,r,!0)},get size(){return Hr(this,!0)},has(r){return Ur.call(this,r,!0)},add:En("add"),set:En("set"),delete:En("delete"),clear:En("clear"),forEach:zr(!0,!1)},i={get(r){return Wr(this,r,!0,!0)},get size(){return Hr(this,!0)},has(r){return Ur.call(this,r,!0)},add:En("add"),set:En("set"),delete:En("delete"),clear:En("clear"),forEach:zr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=Vr(r,!1,!1),n[r]=Vr(r,!0,!1),t[r]=Vr(r,!1,!0),i[r]=Vr(r,!0,!0)}),[e,n,t,i]}const[yv,vv,wv,xv]=bv();function zc(e,t){const n=t?e?xv:wv:e?vv:yv;return(i,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?i:Reflect.get(pt(n,s)&&s in i?n:i,s,r)}const Sv={get:zc(!1,!1)},Ev={get:zc(!1,!0)},Iv={get:zc(!0,!1)},hg=new WeakMap,dg=new WeakMap,fg=new WeakMap,Cv=new WeakMap;function Tv(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function kv(e){return e.__v_skip||!Object.isExtensible(e)?0:Tv(Xy(e))}function Ar(e){return is(e)?e:Vc(e,!1,gv,Sv,hg)}function pg(e){return Vc(e,!1,_v,Ev,dg)}function gg(e){return Vc(e,!0,mv,Iv,fg)}function Vc(e,t,n,i,s){if(!Ft(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=s.get(e);if(r)return r;const o=kv(e);if(o===0)return e;const a=new Proxy(e,o===2?i:n);return s.set(e,a),a}function qi(e){return is(e)?qi(e.__v_raw):!!(e&&e.__v_isReactive)}function is(e){return!!(e&&e.__v_isReadonly)}function Ao(e){return!!(e&&e.__v_isShallow)}function mg(e){return qi(e)||is(e)}function vt(e){const t=e&&e.__v_raw;return t?vt(t):e}function _g(e){return ko(e,"__v_skip",!0),e}const ar=e=>Ft(e)?Ar(e):e,jc=e=>Ft(e)?gg(e):e;function bg(e){Bn&&Ce&&(e=vt(e),ag(e.dep||(e.dep=Wc())))}function yg(e,t){e=vt(e);const n=e.dep;n&&Dl(n)}function fe(e){return!!(e&&e.__v_isRef===!0)}function Av(e){return vg(e,!1)}function Mv(e){return vg(e,!0)}function vg(e,t){return fe(e)?e:new Rv(e,t)}class Rv{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:vt(t),this._value=n?t:ar(t)}get value(){return bg(this),this._value}set value(t){const n=this.__v_isShallow||Ao(t)||is(t);t=n?t:vt(t),yi(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:ar(t),yg(this))}}function Gi(e){return fe(e)?e.value:e}const Pv={get:(e,t,n)=>Gi(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const s=e[t];return fe(s)&&!fe(n)?(s.value=n,!0):Reflect.set(e,t,n,i)}};function wg(e){return qi(e)?e:new Proxy(e,Pv)}class Ov{constructor(t,n,i,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Uc(t,()=>{this._dirty||(this._dirty=!0,yg(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const t=vt(this);return bg(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Dv(e,t,n=!1){let i,s;const r=at(e);return r?(i=e,s=qe):(i=e.get,s=e.set),new Ov(i,s,r||!s,n)}function $n(e,t,n,i){let s;try{s=i?e(...i):e()}catch(r){fa(r,t,n)}return s}function De(e,t,n,i){if(at(e)){const r=$n(e,t,n,i);return r&&Zp(r)&&r.catch(o=>{fa(o,t,n)}),r}const s=[];for(let r=0;r<e.length;r++)s.push(De(e[r],t,n,i));return s}function fa(e,t,n,i=!0){const s=t?t.vnode:null;if(t){let r=t.parent;const o=t.proxy,a=n;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}r=r.parent}const l=t.appContext.config.errorHandler;if(l){$n(l,null,10,[e,o,a]);return}}Nv(e,n,s,i)}function Nv(e,t,n,i=!0){console.error(e)}let lr=!1,Nl=!1;const te=[];let je=0;const Yi=[];let an=null,oi=0;const xg=Promise.resolve();let Kc=null;function Sg(e){const t=Kc||xg;return e?t.then(this?e.bind(this):e):t}function Lv(e){let t=je+1,n=te.length;for(;t<n;){const i=t+n>>>1,s=te[i],r=cr(s);r<e||r===e&&s.pre?t=i+1:n=i}return t}function qc(e){(!te.length||!te.includes(e,lr&&e.allowRecurse?je+1:je))&&(e.id==null?te.push(e):te.splice(Lv(e.id),0,e),Eg())}function Eg(){!lr&&!Nl&&(Nl=!0,Kc=xg.then(Cg))}function Fv(e){const t=te.indexOf(e);t>je&&te.splice(t,1)}function Bv(e){nt(e)?Yi.push(...e):(!an||!an.includes(e,e.allowRecurse?oi+1:oi))&&Yi.push(e),Eg()}function Sh(e,t,n=lr?je+1:0){for(;n<te.length;n++){const i=te[n];if(i&&i.pre){if(e&&i.id!==e.uid)continue;te.splice(n,1),n--,i()}}}function Ig(e){if(Yi.length){const t=[...new Set(Yi)];if(Yi.length=0,an){an.push(...t);return}for(an=t,an.sort((n,i)=>cr(n)-cr(i)),oi=0;oi<an.length;oi++)an[oi]();an=null,oi=0}}const cr=e=>e.id==null?1/0:e.id,$v=(e,t)=>{const n=cr(e)-cr(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Cg(e){Nl=!1,lr=!0,te.sort($v);try{for(je=0;je<te.length;je++){const t=te[je];t&&t.active!==!1&&$n(t,null,14)}}finally{je=0,te.length=0,Ig(),lr=!1,Kc=null,(te.length||Yi.length)&&Cg()}}function Wv(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||Nt;let s=n;const r=t.startsWith("update:"),o=r&&t.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=i[u]||Nt;d&&(s=n.map(f=>qt(f)?f.trim():f)),h&&(s=n.map(Zy))}let a,l=i[a=Wa(t)]||i[a=Wa(Je(t))];!l&&r&&(l=i[a=Wa(ms(t))]),l&&De(l,e,6,s);const c=i[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,De(c,e,6,s)}}function Tg(e,t,n=!1){const i=t.emitsCache,s=i.get(e);if(s!==void 0)return s;const r=e.emits;let o={},a=!1;if(!at(e)){const l=c=>{const u=Tg(c,t,!0);u&&(a=!0,Qt(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(Ft(e)&&i.set(e,null),null):(nt(r)?r.forEach(l=>o[l]=null):Qt(o,r),Ft(e)&&i.set(e,o),o)}function pa(e,t){return!e||!la(t)?!1:(t=t.slice(2).replace(/Once$/,""),pt(e,t[0].toLowerCase()+t.slice(1))||pt(e,ms(t))||pt(e,t))}let Ae=null,kg=null;function Mo(e){const t=Ae;return Ae=e,kg=e&&e.type.__scopeId||null,t}function Uv(e,t=Ae,n){if(!t||e._n)return e;const i=(...s)=>{i._d&&Dh(-1);const r=Mo(t);let o;try{o=e(...s)}finally{Mo(r),i._d&&Dh(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function za(e){const{type:t,vnode:n,proxy:i,withProxy:s,props:r,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:p,inheritAttrs:g}=e;let m,y;const v=Mo(e);try{if(n.shapeFlag&4){const x=s||i,E=x;m=Ve(u.call(E,x,h,r,f,d,p)),y=l}else{const x=t;m=Ve(x.length>1?x(r,{attrs:l,slots:a,emit:c}):x(r,null)),y=t.props?l:Hv(l)}}catch(x){Gs.length=0,fa(x,e,1),m=Re(ur)}let S=m;if(y&&g!==!1){const x=Object.keys(y),{shapeFlag:E}=S;x.length&&E&7&&(o&&x.some(Nc)&&(y=zv(y,o)),S=ss(S,y))}return n.dirs&&(S=ss(S),S.dirs=S.dirs?S.dirs.concat(n.dirs):n.dirs),n.transition&&(S.transition=n.transition),m=S,Mo(v),m}const Hv=e=>{let t;for(const n in e)(n==="class"||n==="style"||la(n))&&((t||(t={}))[n]=e[n]);return t},zv=(e,t)=>{const n={};for(const i in e)(!Nc(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function Vv(e,t,n){const{props:i,children:s,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?Eh(i,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==i[d]&&!pa(c,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Eh(i,o,c):!0:!!o;return!1}function Eh(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(t[r]!==e[r]&&!pa(n,r))return!0}return!1}function jv({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const Ag="components";function H1(e,t){return qv(Ag,e,!0,t)||e}const Kv=Symbol.for("v-ndc");function qv(e,t,n=!0,i=!1){const s=Ae||Yt;if(s){const r=s.type;if(e===Ag){const a=W0(r,!1);if(a&&(a===t||a===Je(t)||a===ha(Je(t))))return r}const o=Ih(s[e]||r[e],t)||Ih(s.appContext[e],t);return!o&&i?r:o}}function Ih(e,t){return e&&(e[t]||e[Je(t)]||e[ha(Je(t))])}const Gv=e=>e.__isSuspense;function Yv(e,t){t&&t.pendingBranch?nt(e)?t.effects.push(...e):t.effects.push(e):Bv(e)}const jr={};function Xi(e,t,n){return Mg(e,t,n)}function Mg(e,t,{immediate:n,deep:i,flush:s,onTrack:r,onTrigger:o}=Nt){var a;const l=lv()===((a=Yt)==null?void 0:a.scope)?Yt:null;let c,u=!1,h=!1;if(fe(e)?(c=()=>e.value,u=Ao(e)):qi(e)?(c=()=>e,i=!0):nt(e)?(h=!0,u=e.some(x=>qi(x)||Ao(x)),c=()=>e.map(x=>{if(fe(x))return x.value;if(qi(x))return zi(x);if(at(x))return $n(x,l,2)})):at(e)?t?c=()=>$n(e,l,2):c=()=>{if(!(l&&l.isUnmounted))return d&&d(),De(e,l,3,[f])}:c=qe,t&&i){const x=c;c=()=>zi(x())}let d,f=x=>{d=v.onStop=()=>{$n(x,l,4),d=v.onStop=void 0}},p;if(dr)if(f=qe,t?n&&De(t,l,3,[c(),h?[]:void 0,f]):c(),s==="sync"){const x=z0();p=x.__watcherHandles||(x.__watcherHandles=[])}else return qe;let g=h?new Array(e.length).fill(jr):jr;const m=()=>{if(v.active)if(t){const x=v.run();(i||u||(h?x.some((E,A)=>yi(E,g[A])):yi(x,g)))&&(d&&d(),De(t,l,3,[x,g===jr?void 0:h&&g[0]===jr?[]:g,f]),g=x)}else v.run()};m.allowRecurse=!!t;let y;s==="sync"?y=m:s==="post"?y=()=>ae(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),y=()=>qc(m));const v=new Uc(c,y);t?n?m():g=v.run():s==="post"?ae(v.run.bind(v),l&&l.suspense):v.run();const S=()=>{v.stop(),l&&l.scope&&Lc(l.scope.effects,v)};return p&&p.push(S),S}function Xv(e,t,n){const i=this.proxy,s=qt(e)?e.includes(".")?Rg(i,e):()=>i[e]:e.bind(i,i);let r;at(t)?r=t:(r=t.handler,n=t);const o=Yt;rs(this);const a=Mg(s,r.bind(i),n);return o?rs(o):pi(),a}function Rg(e,t){const n=t.split(".");return()=>{let i=e;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}function zi(e,t){if(!Ft(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),fe(e))zi(e.value,t);else if(nt(e))for(let n=0;n<e.length;n++)zi(e[n],t);else if(Jp(e)||Ki(e))e.forEach(n=>{zi(n,t)});else if(eg(e))for(const n in e)zi(e[n],t);return e}function Xn(e,t,n,i){const s=e.dirs,r=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(_s(),De(l,n,8,[e.el,a,e,t]),bs())}}/*! #__NO_SIDE_EFFECTS__ */function Pg(e,t){return at(e)?Qt({name:e.name},t,{setup:e}):e}const ho=e=>!!e.type.__asyncLoader,Og=e=>e.type.__isKeepAlive;function Qv(e,t){Dg(e,"a",t)}function Jv(e,t){Dg(e,"da",t)}function Dg(e,t,n=Yt){const i=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(ga(t,i,n),n){let s=n.parent;for(;s&&s.parent;)Og(s.parent.vnode)&&Zv(i,t,n,s),s=s.parent}}function Zv(e,t,n,i){const s=ga(t,e,i,!0);Ng(()=>{Lc(i[t],s)},n)}function ga(e,t,n=Yt,i=!1){if(n){const s=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;_s(),rs(n);const a=De(t,n,e,o);return pi(),bs(),a});return i?s.unshift(r):s.push(r),r}}const wn=e=>(t,n=Yt)=>(!dr||e==="sp")&&ga(e,(...i)=>t(...i),n),t0=wn("bm"),e0=wn("m"),n0=wn("bu"),i0=wn("u"),s0=wn("bum"),Ng=wn("um"),r0=wn("sp"),o0=wn("rtg"),a0=wn("rtc");function l0(e,t=Yt){ga("ec",e,t)}const Ll=e=>e?Kg(e)?Jc(e)||e.proxy:Ll(e.parent):null,qs=Qt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ll(e.parent),$root:e=>Ll(e.root),$emit:e=>e.emit,$options:e=>Gc(e),$forceUpdate:e=>e.f||(e.f=()=>qc(e.update)),$nextTick:e=>e.n||(e.n=Sg.bind(e.proxy)),$watch:e=>Xv.bind(e)}),Va=(e,t)=>e!==Nt&&!e.__isScriptSetup&&pt(e,t),c0={get({_:e},t){const{ctx:n,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return i[t];case 2:return s[t];case 4:return n[t];case 3:return r[t]}else{if(Va(i,t))return o[t]=1,i[t];if(s!==Nt&&pt(s,t))return o[t]=2,s[t];if((c=e.propsOptions[0])&&pt(c,t))return o[t]=3,r[t];if(n!==Nt&&pt(n,t))return o[t]=4,n[t];Fl&&(o[t]=0)}}const u=qs[t];let h,d;if(u)return t==="$attrs"&&de(e,"get",t),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==Nt&&pt(n,t))return o[t]=4,n[t];if(d=l.config.globalProperties,pt(d,t))return d[t]},set({_:e},t,n){const{data:i,setupState:s,ctx:r}=e;return Va(s,t)?(s[t]=n,!0):i!==Nt&&pt(i,t)?(i[t]=n,!0):pt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!n[o]||e!==Nt&&pt(e,o)||Va(t,o)||(a=r[0])&&pt(a,o)||pt(i,o)||pt(qs,o)||pt(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:pt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Ch(e){return nt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Fl=!0;function u0(e){const t=Gc(e),n=e.proxy,i=e.ctx;Fl=!1,t.beforeCreate&&Th(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:g,deactivated:m,beforeDestroy:y,beforeUnmount:v,destroyed:S,unmounted:x,render:E,renderTracked:A,renderTriggered:D,errorCaptured:L,serverPrefetch:q,expose:z,inheritAttrs:W,components:tt,directives:mt,filters:Y}=t;if(c&&h0(c,i,null),o)for(const R in o){const k=o[R];at(k)&&(i[R]=k.bind(n))}if(s){const R=s.call(n,n);Ft(R)&&(e.data=Ar(R))}if(Fl=!0,r)for(const R in r){const k=r[R],G=at(k)?k.bind(n,n):at(k.get)?k.get.bind(n,n):qe,Q=!at(k)&&at(k.set)?k.set.bind(n):qe,rt=Te({get:G,set:Q});Object.defineProperty(i,R,{enumerable:!0,configurable:!0,get:()=>rt.value,set:it=>rt.value=it})}if(a)for(const R in a)Lg(a[R],i,n,R);if(l){const R=at(l)?l.call(n):l;Reflect.ownKeys(R).forEach(k=>{fo(k,R[k])})}u&&Th(u,e,"c");function T(R,k){nt(k)?k.forEach(G=>R(G.bind(n))):k&&R(k.bind(n))}if(T(t0,h),T(e0,d),T(n0,f),T(i0,p),T(Qv,g),T(Jv,m),T(l0,L),T(a0,A),T(o0,D),T(s0,v),T(Ng,x),T(r0,q),nt(z))if(z.length){const R=e.exposed||(e.exposed={});z.forEach(k=>{Object.defineProperty(R,k,{get:()=>n[k],set:G=>n[k]=G})})}else e.exposed||(e.exposed={});E&&e.render===qe&&(e.render=E),W!=null&&(e.inheritAttrs=W),tt&&(e.components=tt),mt&&(e.directives=mt)}function h0(e,t,n=qe){nt(e)&&(e=Bl(e));for(const i in e){const s=e[i];let r;Ft(s)?"default"in s?r=Ge(s.from||i,s.default,!0):r=Ge(s.from||i):r=Ge(s),fe(r)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[i]=r}}function Th(e,t,n){De(nt(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function Lg(e,t,n,i){const s=i.includes(".")?Rg(n,i):()=>n[i];if(qt(e)){const r=t[e];at(r)&&Xi(s,r)}else if(at(e))Xi(s,e.bind(n));else if(Ft(e))if(nt(e))e.forEach(r=>Lg(r,t,n,i));else{const r=at(e.handler)?e.handler.bind(n):t[e.handler];at(r)&&Xi(s,r,e)}}function Gc(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!s.length&&!n&&!i?l=t:(l={},s.length&&s.forEach(c=>Ro(l,c,o,!0)),Ro(l,t,o)),Ft(t)&&r.set(t,l),l}function Ro(e,t,n,i=!1){const{mixins:s,extends:r}=t;r&&Ro(e,r,n,!0),s&&s.forEach(o=>Ro(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const a=d0[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const d0={data:kh,props:Ah,emits:Ah,methods:Ws,computed:Ws,beforeCreate:re,created:re,beforeMount:re,mounted:re,beforeUpdate:re,updated:re,beforeDestroy:re,beforeUnmount:re,destroyed:re,unmounted:re,activated:re,deactivated:re,errorCaptured:re,serverPrefetch:re,components:Ws,directives:Ws,watch:p0,provide:kh,inject:f0};function kh(e,t){return t?e?function(){return Qt(at(e)?e.call(this,this):e,at(t)?t.call(this,this):t)}:t:e}function f0(e,t){return Ws(Bl(e),Bl(t))}function Bl(e){if(nt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function re(e,t){return e?[...new Set([].concat(e,t))]:t}function Ws(e,t){return e?Qt(Object.create(null),e,t):t}function Ah(e,t){return e?nt(e)&&nt(t)?[...new Set([...e,...t])]:Qt(Object.create(null),Ch(e),Ch(t??{})):t}function p0(e,t){if(!e)return t;if(!t)return e;const n=Qt(Object.create(null),e);for(const i in t)n[i]=re(e[i],t[i]);return n}function Fg(){return{app:null,config:{isNativeTag:Gy,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let g0=0;function m0(e,t){return function(i,s=null){at(i)||(i=Qt({},i)),s!=null&&!Ft(s)&&(s=null);const r=Fg(),o=new WeakSet;let a=!1;const l=r.app={_uid:g0++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:V0,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&at(c.install)?(o.add(c),c.install(l,...u)):at(c)&&(o.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,h){if(!a){const d=Re(i,s);return d.appContext=r,u&&t?t(d,c):e(d,c,h),a=!0,l._container=c,c.__vue_app__=l,Jc(d.component)||d.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l},runWithContext(c){Po=l;try{return c()}finally{Po=null}}};return l}}let Po=null;function fo(e,t){if(Yt){let n=Yt.provides;const i=Yt.parent&&Yt.parent.provides;i===n&&(n=Yt.provides=Object.create(i)),n[e]=t}}function Ge(e,t,n=!1){const i=Yt||Ae;if(i||Po){const s=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Po._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&at(t)?t.call(i&&i.proxy):t}}function _0(e,t,n,i=!1){const s={},r={};ko(r,_a,1),e.propsDefaults=Object.create(null),Bg(e,t,s,r);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=i?s:pg(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function b0(e,t,n,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=e,a=vt(s),[l]=e.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(pa(e.emitsOptions,d))continue;const f=t[d];if(l)if(pt(r,d))f!==r[d]&&(r[d]=f,c=!0);else{const p=Je(d);s[p]=$l(l,a,p,f,e,!1)}else f!==r[d]&&(r[d]=f,c=!0)}}}else{Bg(e,t,s,r)&&(c=!0);let u;for(const h in a)(!t||!pt(t,h)&&((u=ms(h))===h||!pt(t,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=$l(l,a,h,void 0,e,!0)):delete s[h]);if(r!==a)for(const h in r)(!t||!pt(t,h))&&(delete r[h],c=!0)}c&&mn(e,"set","$attrs")}function Bg(e,t,n,i){const[s,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(uo(l))continue;const c=t[l];let u;s&&pt(s,u=Je(l))?!r||!r.includes(u)?n[u]=c:(a||(a={}))[u]=c:pa(e.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=vt(n),c=a||Nt;for(let u=0;u<r.length;u++){const h=r[u];n[h]=$l(s,l,h,c[h],e,!pt(c,h))}}return o}function $l(e,t,n,i,s,r){const o=e[n];if(o!=null){const a=pt(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&at(l)){const{propsDefaults:c}=s;n in c?i=c[n]:(rs(s),i=c[n]=l.call(null,t),pi())}else i=l}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===ms(n))&&(i=!0))}return i}function $g(e,t,n=!1){const i=t.propsCache,s=i.get(e);if(s)return s;const r=e.props,o={},a=[];let l=!1;if(!at(e)){const u=h=>{l=!0;const[d,f]=$g(h,t,!0);Qt(o,d),f&&a.push(...f)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!l)return Ft(e)&&i.set(e,ji),ji;if(nt(r))for(let u=0;u<r.length;u++){const h=Je(r[u]);Mh(h)&&(o[h]=Nt)}else if(r)for(const u in r){const h=Je(u);if(Mh(h)){const d=r[u],f=o[h]=nt(d)||at(d)?{type:d}:Qt({},d);if(f){const p=Oh(Boolean,f.type),g=Oh(String,f.type);f[0]=p>-1,f[1]=g<0||p<g,(p>-1||pt(f,"default"))&&a.push(h)}}}const c=[o,a];return Ft(e)&&i.set(e,c),c}function Mh(e){return e[0]!=="$"}function Rh(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Ph(e,t){return Rh(e)===Rh(t)}function Oh(e,t){return nt(t)?t.findIndex(n=>Ph(n,e)):at(t)&&Ph(t,e)?0:-1}const Wg=e=>e[0]==="_"||e==="$stable",Yc=e=>nt(e)?e.map(Ve):[Ve(e)],y0=(e,t,n)=>{if(t._n)return t;const i=Uv((...s)=>Yc(t(...s)),n);return i._c=!1,i},Ug=(e,t,n)=>{const i=e._ctx;for(const s in e){if(Wg(s))continue;const r=e[s];if(at(r))t[s]=y0(s,r,i);else if(r!=null){const o=Yc(r);t[s]=()=>o}}},Hg=(e,t)=>{const n=Yc(t);e.slots.default=()=>n},v0=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=vt(t),ko(t,"_",n)):Ug(t,e.slots={})}else e.slots={},t&&Hg(e,t);ko(e.slots,_a,1)},w0=(e,t,n)=>{const{vnode:i,slots:s}=e;let r=!0,o=Nt;if(i.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:(Qt(s,t),!n&&a===1&&delete s._):(r=!t.$stable,Ug(t,s)),o=t}else t&&(Hg(e,t),o={default:1});if(r)for(const a in s)!Wg(a)&&o[a]==null&&delete s[a]};function Wl(e,t,n,i,s=!1){if(nt(e)){e.forEach((d,f)=>Wl(d,t&&(nt(t)?t[f]:t),n,i,s));return}if(ho(i)&&!s)return;const r=i.shapeFlag&4?Jc(i.component)||i.component.proxy:i.el,o=s?null:r,{i:a,r:l}=e,c=t&&t.r,u=a.refs===Nt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(qt(c)?(u[c]=null,pt(h,c)&&(h[c]=null)):fe(c)&&(c.value=null)),at(l))$n(l,a,12,[o,u]);else{const d=qt(l),f=fe(l);if(d||f){const p=()=>{if(e.f){const g=d?pt(h,l)?h[l]:u[l]:l.value;s?nt(g)&&Lc(g,r):nt(g)?g.includes(r)||g.push(r):d?(u[l]=[r],pt(h,l)&&(h[l]=u[l])):(l.value=[r],e.k&&(u[e.k]=l.value))}else d?(u[l]=o,pt(h,l)&&(h[l]=o)):f&&(l.value=o,e.k&&(u[e.k]=o))};o?(p.id=-1,ae(p,n)):p()}}}const ae=Yv;function x0(e){return S0(e)}function S0(e,t){const n=Ml();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=qe,insertStaticContent:p}=e,g=(_,b,w,I=null,M=null,O=null,K=!1,B=null,U=!!b.dynamicChildren)=>{if(_===b)return;_&&!ks(_,b)&&(I=C(_),it(_,M,O,!0),_=null),b.patchFlag===-2&&(U=!1,b.dynamicChildren=null);const{type:N,ref:J,shapeFlag:X}=b;switch(N){case ma:m(_,b,w,I);break;case ur:y(_,b,w,I);break;case ja:_==null&&v(b,w,I,K);break;case ln:tt(_,b,w,I,M,O,K,B,U);break;default:X&1?E(_,b,w,I,M,O,K,B,U):X&6?mt(_,b,w,I,M,O,K,B,U):(X&64||X&128)&&N.process(_,b,w,I,M,O,K,B,U,F)}J!=null&&M&&Wl(J,_&&_.ref,O,b||_,!b)},m=(_,b,w,I)=>{if(_==null)i(b.el=a(b.children),w,I);else{const M=b.el=_.el;b.children!==_.children&&c(M,b.children)}},y=(_,b,w,I)=>{_==null?i(b.el=l(b.children||""),w,I):b.el=_.el},v=(_,b,w,I)=>{[_.el,_.anchor]=p(_.children,b,w,I,_.el,_.anchor)},S=({el:_,anchor:b},w,I)=>{let M;for(;_&&_!==b;)M=d(_),i(_,w,I),_=M;i(b,w,I)},x=({el:_,anchor:b})=>{let w;for(;_&&_!==b;)w=d(_),s(_),_=w;s(b)},E=(_,b,w,I,M,O,K,B,U)=>{K=K||b.type==="svg",_==null?A(b,w,I,M,O,K,B,U):q(_,b,M,O,K,B,U)},A=(_,b,w,I,M,O,K,B)=>{let U,N;const{type:J,props:X,shapeFlag:Z,transition:st,dirs:ct}=_;if(U=_.el=o(_.type,O,X&&X.is,X),Z&8?u(U,_.children):Z&16&&L(_.children,U,null,I,M,O&&J!=="foreignObject",K,B),ct&&Xn(_,null,I,"created"),D(U,_,_.scopeId,K,I),X){for(const Et in X)Et!=="value"&&!uo(Et)&&r(U,Et,null,X[Et],O,_.children,I,M,yt);"value"in X&&r(U,"value",null,X.value),(N=X.onVnodeBeforeMount)&&Ue(N,I,_)}ct&&Xn(_,null,I,"beforeMount");const Tt=E0(M,st);Tt&&st.beforeEnter(U),i(U,b,w),((N=X&&X.onVnodeMounted)||Tt||ct)&&ae(()=>{N&&Ue(N,I,_),Tt&&st.enter(U),ct&&Xn(_,null,I,"mounted")},M)},D=(_,b,w,I,M)=>{if(w&&f(_,w),I)for(let O=0;O<I.length;O++)f(_,I[O]);if(M){let O=M.subTree;if(b===O){const K=M.vnode;D(_,K,K.scopeId,K.slotScopeIds,M.parent)}}},L=(_,b,w,I,M,O,K,B,U=0)=>{for(let N=U;N<_.length;N++){const J=_[N]=B?Tn(_[N]):Ve(_[N]);g(null,J,b,w,I,M,O,K,B)}},q=(_,b,w,I,M,O,K)=>{const B=b.el=_.el;let{patchFlag:U,dynamicChildren:N,dirs:J}=b;U|=_.patchFlag&16;const X=_.props||Nt,Z=b.props||Nt;let st;w&&Qn(w,!1),(st=Z.onVnodeBeforeUpdate)&&Ue(st,w,b,_),J&&Xn(b,_,w,"beforeUpdate"),w&&Qn(w,!0);const ct=M&&b.type!=="foreignObject";if(N?z(_.dynamicChildren,N,B,w,I,ct,O):K||k(_,b,B,null,w,I,ct,O,!1),U>0){if(U&16)W(B,b,X,Z,w,I,M);else if(U&2&&X.class!==Z.class&&r(B,"class",null,Z.class,M),U&4&&r(B,"style",X.style,Z.style,M),U&8){const Tt=b.dynamicProps;for(let Et=0;Et<Tt.length;Et++){const Ut=Tt[Et],Ee=X[Ut],Ni=Z[Ut];(Ni!==Ee||Ut==="value")&&r(B,Ut,Ee,Ni,M,_.children,w,I,yt)}}U&1&&_.children!==b.children&&u(B,b.children)}else!K&&N==null&&W(B,b,X,Z,w,I,M);((st=Z.onVnodeUpdated)||J)&&ae(()=>{st&&Ue(st,w,b,_),J&&Xn(b,_,w,"updated")},I)},z=(_,b,w,I,M,O,K)=>{for(let B=0;B<b.length;B++){const U=_[B],N=b[B],J=U.el&&(U.type===ln||!ks(U,N)||U.shapeFlag&70)?h(U.el):w;g(U,N,J,null,I,M,O,K,!0)}},W=(_,b,w,I,M,O,K)=>{if(w!==I){if(w!==Nt)for(const B in w)!uo(B)&&!(B in I)&&r(_,B,w[B],null,K,b.children,M,O,yt);for(const B in I){if(uo(B))continue;const U=I[B],N=w[B];U!==N&&B!=="value"&&r(_,B,N,U,K,b.children,M,O,yt)}"value"in I&&r(_,"value",w.value,I.value)}},tt=(_,b,w,I,M,O,K,B,U)=>{const N=b.el=_?_.el:a(""),J=b.anchor=_?_.anchor:a("");let{patchFlag:X,dynamicChildren:Z,slotScopeIds:st}=b;st&&(B=B?B.concat(st):st),_==null?(i(N,w,I),i(J,w,I),L(b.children,w,J,M,O,K,B,U)):X>0&&X&64&&Z&&_.dynamicChildren?(z(_.dynamicChildren,Z,w,M,O,K,B),(b.key!=null||M&&b===M.subTree)&&zg(_,b,!0)):k(_,b,w,J,M,O,K,B,U)},mt=(_,b,w,I,M,O,K,B,U)=>{b.slotScopeIds=B,_==null?b.shapeFlag&512?M.ctx.activate(b,w,I,K,U):Y(b,w,I,M,O,K,U):P(_,b,U)},Y=(_,b,w,I,M,O,K)=>{const B=_.component=N0(_,I,M);if(Og(_)&&(B.ctx.renderer=F),L0(B),B.asyncDep){if(M&&M.registerDep(B,T),!_.el){const U=B.subTree=Re(ur);y(null,U,b,w)}return}T(B,_,b,w,M,O,K)},P=(_,b,w)=>{const I=b.component=_.component;if(Vv(_,b,w))if(I.asyncDep&&!I.asyncResolved){R(I,b,w);return}else I.next=b,Fv(I.update),I.update();else b.el=_.el,I.vnode=b},T=(_,b,w,I,M,O,K)=>{const B=()=>{if(_.isMounted){let{next:J,bu:X,u:Z,parent:st,vnode:ct}=_,Tt=J,Et;Qn(_,!1),J?(J.el=ct.el,R(_,J,K)):J=ct,X&&Ua(X),(Et=J.props&&J.props.onVnodeBeforeUpdate)&&Ue(Et,st,J,ct),Qn(_,!0);const Ut=za(_),Ee=_.subTree;_.subTree=Ut,g(Ee,Ut,h(Ee.el),C(Ee),_,M,O),J.el=Ut.el,Tt===null&&jv(_,Ut.el),Z&&ae(Z,M),(Et=J.props&&J.props.onVnodeUpdated)&&ae(()=>Ue(Et,st,J,ct),M)}else{let J;const{el:X,props:Z}=b,{bm:st,m:ct,parent:Tt}=_,Et=ho(b);if(Qn(_,!1),st&&Ua(st),!Et&&(J=Z&&Z.onVnodeBeforeMount)&&Ue(J,Tt,b),Qn(_,!0),X&&lt){const Ut=()=>{_.subTree=za(_),lt(X,_.subTree,_,M,null)};Et?b.type.__asyncLoader().then(()=>!_.isUnmounted&&Ut()):Ut()}else{const Ut=_.subTree=za(_);g(null,Ut,w,I,_,M,O),b.el=Ut.el}if(ct&&ae(ct,M),!Et&&(J=Z&&Z.onVnodeMounted)){const Ut=b;ae(()=>Ue(J,Tt,Ut),M)}(b.shapeFlag&256||Tt&&ho(Tt.vnode)&&Tt.vnode.shapeFlag&256)&&_.a&&ae(_.a,M),_.isMounted=!0,b=w=I=null}},U=_.effect=new Uc(B,()=>qc(N),_.scope),N=_.update=()=>U.run();N.id=_.uid,Qn(_,!0),N()},R=(_,b,w)=>{b.component=_;const I=_.vnode.props;_.vnode=b,_.next=null,b0(_,b.props,I,w),w0(_,b.children,w),_s(),Sh(_),bs()},k=(_,b,w,I,M,O,K,B,U=!1)=>{const N=_&&_.children,J=_?_.shapeFlag:0,X=b.children,{patchFlag:Z,shapeFlag:st}=b;if(Z>0){if(Z&128){Q(N,X,w,I,M,O,K,B,U);return}else if(Z&256){G(N,X,w,I,M,O,K,B,U);return}}st&8?(J&16&&yt(N,M,O),X!==N&&u(w,X)):J&16?st&16?Q(N,X,w,I,M,O,K,B,U):yt(N,M,O,!0):(J&8&&u(w,""),st&16&&L(X,w,I,M,O,K,B,U))},G=(_,b,w,I,M,O,K,B,U)=>{_=_||ji,b=b||ji;const N=_.length,J=b.length,X=Math.min(N,J);let Z;for(Z=0;Z<X;Z++){const st=b[Z]=U?Tn(b[Z]):Ve(b[Z]);g(_[Z],st,w,null,M,O,K,B,U)}N>J?yt(_,M,O,!0,!1,X):L(b,w,I,M,O,K,B,U,X)},Q=(_,b,w,I,M,O,K,B,U)=>{let N=0;const J=b.length;let X=_.length-1,Z=J-1;for(;N<=X&&N<=Z;){const st=_[N],ct=b[N]=U?Tn(b[N]):Ve(b[N]);if(ks(st,ct))g(st,ct,w,null,M,O,K,B,U);else break;N++}for(;N<=X&&N<=Z;){const st=_[X],ct=b[Z]=U?Tn(b[Z]):Ve(b[Z]);if(ks(st,ct))g(st,ct,w,null,M,O,K,B,U);else break;X--,Z--}if(N>X){if(N<=Z){const st=Z+1,ct=st<J?b[st].el:I;for(;N<=Z;)g(null,b[N]=U?Tn(b[N]):Ve(b[N]),w,ct,M,O,K,B,U),N++}}else if(N>Z)for(;N<=X;)it(_[N],M,O,!0),N++;else{const st=N,ct=N,Tt=new Map;for(N=ct;N<=Z;N++){const me=b[N]=U?Tn(b[N]):Ve(b[N]);me.key!=null&&Tt.set(me.key,N)}let Et,Ut=0;const Ee=Z-ct+1;let Ni=!1,dh=0;const Ts=new Array(Ee);for(N=0;N<Ee;N++)Ts[N]=0;for(N=st;N<=X;N++){const me=_[N];if(Ut>=Ee){it(me,M,O,!0);continue}let We;if(me.key!=null)We=Tt.get(me.key);else for(Et=ct;Et<=Z;Et++)if(Ts[Et-ct]===0&&ks(me,b[Et])){We=Et;break}We===void 0?it(me,M,O,!0):(Ts[We-ct]=N+1,We>=dh?dh=We:Ni=!0,g(me,b[We],w,null,M,O,K,B,U),Ut++)}const fh=Ni?I0(Ts):ji;for(Et=fh.length-1,N=Ee-1;N>=0;N--){const me=ct+N,We=b[me],ph=me+1<J?b[me+1].el:I;Ts[N]===0?g(null,We,w,ph,M,O,K,B,U):Ni&&(Et<0||N!==fh[Et]?rt(We,w,ph,2):Et--)}}},rt=(_,b,w,I,M=null)=>{const{el:O,type:K,transition:B,children:U,shapeFlag:N}=_;if(N&6){rt(_.component.subTree,b,w,I);return}if(N&128){_.suspense.move(b,w,I);return}if(N&64){K.move(_,b,w,F);return}if(K===ln){i(O,b,w);for(let X=0;X<U.length;X++)rt(U[X],b,w,I);i(_.anchor,b,w);return}if(K===ja){S(_,b,w);return}if(I!==2&&N&1&&B)if(I===0)B.beforeEnter(O),i(O,b,w),ae(()=>B.enter(O),M);else{const{leave:X,delayLeave:Z,afterLeave:st}=B,ct=()=>i(O,b,w),Tt=()=>{X(O,()=>{ct(),st&&st()})};Z?Z(O,ct,Tt):Tt()}else i(O,b,w)},it=(_,b,w,I=!1,M=!1)=>{const{type:O,props:K,ref:B,children:U,dynamicChildren:N,shapeFlag:J,patchFlag:X,dirs:Z}=_;if(B!=null&&Wl(B,null,w,_,!0),J&256){b.ctx.deactivate(_);return}const st=J&1&&Z,ct=!ho(_);let Tt;if(ct&&(Tt=K&&K.onVnodeBeforeUnmount)&&Ue(Tt,b,_),J&6)Lt(_.component,w,I);else{if(J&128){_.suspense.unmount(w,I);return}st&&Xn(_,null,b,"beforeUnmount"),J&64?_.type.remove(_,b,w,M,F,I):N&&(O!==ln||X>0&&X&64)?yt(N,b,w,!1,!0):(O===ln&&X&384||!M&&J&16)&&yt(U,b,w),I&&_t(_)}(ct&&(Tt=K&&K.onVnodeUnmounted)||st)&&ae(()=>{Tt&&Ue(Tt,b,_),st&&Xn(_,null,b,"unmounted")},w)},_t=_=>{const{type:b,el:w,anchor:I,transition:M}=_;if(b===ln){bt(w,I);return}if(b===ja){x(_);return}const O=()=>{s(w),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(_.shapeFlag&1&&M&&!M.persisted){const{leave:K,delayLeave:B}=M,U=()=>K(w,O);B?B(_.el,O,U):U()}else O()},bt=(_,b)=>{let w;for(;_!==b;)w=d(_),s(_),_=w;s(b)},Lt=(_,b,w)=>{const{bum:I,scope:M,update:O,subTree:K,um:B}=_;I&&Ua(I),M.stop(),O&&(O.active=!1,it(K,_,b,w)),B&&ae(B,b),ae(()=>{_.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},yt=(_,b,w,I=!1,M=!1,O=0)=>{for(let K=O;K<_.length;K++)it(_[K],b,w,I,M)},C=_=>_.shapeFlag&6?C(_.component.subTree):_.shapeFlag&128?_.suspense.next():d(_.anchor||_.el),V=(_,b,w)=>{_==null?b._vnode&&it(b._vnode,null,null,!0):g(b._vnode||null,_,b,null,null,null,w),Sh(),Ig(),b._vnode=_},F={p:g,um:it,m:rt,r:_t,mt:Y,mc:L,pc:k,pbc:z,n:C,o:e};let j,lt;return t&&([j,lt]=t(F)),{render:V,hydrate:j,createApp:m0(V,j)}}function Qn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function E0(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function zg(e,t,n=!1){const i=e.children,s=t.children;if(nt(i)&&nt(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=Tn(s[r]),a.el=o.el),n||zg(o,a)),a.type===ma&&(a.el=o.el)}}function I0(e){const t=e.slice(),n=[0];let i,s,r,o,a;const l=e.length;for(i=0;i<l;i++){const c=e[i];if(c!==0){if(s=n[n.length-1],e[s]<c){t[i]=s,n.push(i);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<c?r=a+1:o=a;c<e[n[r]]&&(r>0&&(t[i]=n[r-1]),n[r]=i)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}const C0=e=>e.__isTeleport,ln=Symbol.for("v-fgt"),ma=Symbol.for("v-txt"),ur=Symbol.for("v-cmt"),ja=Symbol.for("v-stc"),Gs=[];let Me=null;function z1(e=!1){Gs.push(Me=e?null:[])}function T0(){Gs.pop(),Me=Gs[Gs.length-1]||null}let hr=1;function Dh(e){hr+=e}function k0(e){return e.dynamicChildren=hr>0?Me||ji:null,T0(),hr>0&&Me&&Me.push(e),e}function V1(e,t,n,i,s,r){return k0(jg(e,t,n,i,s,r,!0))}function Ul(e){return e?e.__v_isVNode===!0:!1}function ks(e,t){return e.type===t.type&&e.key===t.key}const _a="__vInternal",Vg=({key:e})=>e??null,po=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?qt(e)||fe(e)||at(e)?{i:Ae,r:e,k:t,f:!!n}:e:null);function jg(e,t=null,n=null,i=0,s=null,r=e===ln?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Vg(t),ref:t&&po(t),scopeId:kg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ae};return a?(Xc(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=qt(n)?8:16),hr>0&&!o&&Me&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Me.push(l),l}const Re=A0;function A0(e,t=null,n=null,i=0,s=null,r=!1){if((!e||e===Kv)&&(e=ur),Ul(e)){const a=ss(e,t,!0);return n&&Xc(a,n),hr>0&&!r&&Me&&(a.shapeFlag&6?Me[Me.indexOf(e)]=a:Me.push(a)),a.patchFlag|=-2,a}if(U0(e)&&(e=e.__vccOpts),t){t=M0(t);let{class:a,style:l}=t;a&&!qt(a)&&(t.class=$c(a)),Ft(l)&&(mg(l)&&!nt(l)&&(l=Qt({},l)),t.style=Bc(l))}const o=qt(e)?1:Gv(e)?128:C0(e)?64:Ft(e)?4:at(e)?2:0;return jg(e,t,n,i,s,o,r,!0)}function M0(e){return e?mg(e)||_a in e?Qt({},e):e:null}function ss(e,t,n=!1){const{props:i,ref:s,patchFlag:r,children:o}=e,a=t?P0(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Vg(a),ref:t&&t.ref?n&&s?nt(s)?s.concat(po(t)):[s,po(t)]:po(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ln?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ss(e.ssContent),ssFallback:e.ssFallback&&ss(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function R0(e=" ",t=0){return Re(ma,null,e,t)}function Ve(e){return e==null||typeof e=="boolean"?Re(ur):nt(e)?Re(ln,null,e.slice()):typeof e=="object"?Tn(e):Re(ma,null,String(e))}function Tn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ss(e)}function Xc(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(nt(t))n=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),Xc(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(_a in t)?t._ctx=Ae:s===3&&Ae&&(Ae.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else at(t)?(t={default:t,_ctx:Ae},n=32):(t=String(t),i&64?(n=16,t=[R0(t)]):n=8);e.children=t,e.shapeFlag|=n}function P0(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=$c([t.class,i.class]));else if(s==="style")t.style=Bc([t.style,i.style]);else if(la(s)){const r=t[s],o=i[s];o&&r!==o&&!(nt(r)&&r.includes(o))&&(t[s]=r?[].concat(r,o):o)}else s!==""&&(t[s]=i[s])}return t}function Ue(e,t,n,i=null){De(e,t,7,[n,i])}const O0=Fg();let D0=0;function N0(e,t,n){const i=e.type,s=(t?t.appContext:e.appContext)||O0,r={uid:D0++,vnode:e,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new ov(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$g(i,s),emitsOptions:Tg(i,s),emit:null,emitted:null,propsDefaults:Nt,inheritAttrs:i.inheritAttrs,ctx:Nt,data:Nt,props:Nt,attrs:Nt,slots:Nt,refs:Nt,setupState:Nt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Wv.bind(null,r),e.ce&&e.ce(r),r}let Yt=null,Qc,Li,Nh="__VUE_INSTANCE_SETTERS__";(Li=Ml()[Nh])||(Li=Ml()[Nh]=[]),Li.push(e=>Yt=e),Qc=e=>{Li.length>1?Li.forEach(t=>t(e)):Li[0](e)};const rs=e=>{Qc(e),e.scope.on()},pi=()=>{Yt&&Yt.scope.off(),Qc(null)};function Kg(e){return e.vnode.shapeFlag&4}let dr=!1;function L0(e,t=!1){dr=t;const{props:n,children:i}=e.vnode,s=Kg(e);_0(e,n,s,t),v0(e,i);const r=s?F0(e,t):void 0;return dr=!1,r}function F0(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=_g(new Proxy(e.ctx,c0));const{setup:i}=n;if(i){const s=e.setupContext=i.length>1?$0(e):null;rs(e),_s();const r=$n(i,e,0,[e.props,s]);if(bs(),pi(),Zp(r)){if(r.then(pi,pi),t)return r.then(o=>{Lh(e,o,t)}).catch(o=>{fa(o,e,0)});e.asyncDep=r}else Lh(e,r,t)}else qg(e,t)}function Lh(e,t,n){at(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ft(t)&&(e.setupState=wg(t)),qg(e,n)}let Fh;function qg(e,t,n){const i=e.type;if(!e.render){if(!t&&Fh&&!i.render){const s=i.template||Gc(e).template;if(s){const{isCustomElement:r,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=i,c=Qt(Qt({isCustomElement:r,delimiters:a},o),l);i.render=Fh(s,c)}}e.render=i.render||qe}{rs(e),_s();try{u0(e)}finally{bs(),pi()}}}function B0(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return de(e,"get","$attrs"),t[n]}}))}function $0(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return B0(e)},slots:e.slots,emit:e.emit,expose:t}}function Jc(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(wg(_g(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in qs)return qs[n](e)},has(t,n){return n in t||n in qs}}))}function W0(e,t=!0){return at(e)?e.displayName||e.name:e.name||t&&e.__name}function U0(e){return at(e)&&"__vccOpts"in e}const Te=(e,t)=>Dv(e,t,dr);function Gg(e,t,n){const i=arguments.length;return i===2?Ft(t)&&!nt(t)?Ul(t)?Re(e,null,[t]):Re(e,t):Re(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Ul(n)&&(n=[n]),Re(e,t,n))}const H0=Symbol.for("v-scx"),z0=()=>Ge(H0),V0="3.3.13",j0="http://www.w3.org/2000/svg",ai=typeof document<"u"?document:null,Bh=ai&&ai.createElement("template"),K0={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const s=t?ai.createElementNS(j0,e):ai.createElement(e,n?{is:n}:void 0);return e==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:e=>ai.createTextNode(e),createComment:e=>ai.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ai.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,s,r){const o=n?n.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{Bh.innerHTML=i?`<svg>${e}</svg>`:e;const a=Bh.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},q0=Symbol("_vtc");function G0(e,t,n){const i=e[q0];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Y0=Symbol("_vod"),X0=Symbol("");function Q0(e,t,n){const i=e.style,s=qt(n);if(n&&!s){if(t&&!qt(t))for(const r in t)n[r]==null&&Hl(i,r,"");for(const r in n)Hl(i,r,n[r])}else{const r=i.display;if(s){if(t!==n){const o=i[X0];o&&(n+=";"+o),i.cssText=n}}else t&&e.removeAttribute("style");Y0 in e&&(i.display=r)}}const $h=/\s*!important$/;function Hl(e,t,n){if(nt(n))n.forEach(i=>Hl(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=J0(e,t);$h.test(n)?e.setProperty(ms(i),n.replace($h,""),"important"):e[i]=n}}const Wh=["Webkit","Moz","ms"],Ka={};function J0(e,t){const n=Ka[t];if(n)return n;let i=Je(t);if(i!=="filter"&&i in e)return Ka[t]=i;i=ha(i);for(let s=0;s<Wh.length;s++){const r=Wh[s]+i;if(r in e)return Ka[t]=r}return t}const Uh="http://www.w3.org/1999/xlink";function Z0(e,t,n,i,s){if(i&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Uh,t.slice(6,t.length)):e.setAttributeNS(Uh,t,n);else{const r=rv(t);n==null||r&&!ng(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function tw(e,t,n,i,s,r,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,s,r),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const c=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";c!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=ng(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function ew(e,t,n,i){e.addEventListener(t,n,i)}function nw(e,t,n,i){e.removeEventListener(t,n,i)}const Hh=Symbol("_vei");function iw(e,t,n,i,s=null){const r=e[Hh]||(e[Hh]={}),o=r[t];if(i&&o)o.value=i;else{const[a,l]=sw(t);if(i){const c=r[t]=aw(i,s);ew(e,a,c,l)}else o&&(nw(e,a,o,l),r[t]=void 0)}}const zh=/(?:Once|Passive|Capture)$/;function sw(e){let t;if(zh.test(e)){t={};let i;for(;i=e.match(zh);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ms(e.slice(2)),t]}let qa=0;const rw=Promise.resolve(),ow=()=>qa||(rw.then(()=>qa=0),qa=Date.now());function aw(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;De(lw(i,n.value),t,5,[i])};return n.value=e,n.attached=ow(),n}function lw(e,t){if(nt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const Vh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,cw=(e,t,n,i,s=!1,r,o,a,l)=>{t==="class"?G0(e,i,s):t==="style"?Q0(e,n,i):la(t)?Nc(t)||iw(e,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):uw(e,t,i,s))?tw(e,t,i,r,o,a,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),Z0(e,t,i,s))};function uw(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&Vh(t)&&at(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Vh(t)&&qt(n)?!1:t in e}const hw=Qt({patchProp:cw},K0);let jh;function dw(){return jh||(jh=x0(hw))}const j1=(...e)=>{const t=dw().createApp(...e),{mount:n}=t;return t.mount=i=>{const s=fw(i);if(!s)return;const r=t._component;!at(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function fw(e){return qt(e)?document.querySelector(e):e}function pw(){return Yg().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Yg(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const gw=typeof Proxy=="function",mw="devtools-plugin:setup",_w="plugin:settings:set";let Fi,zl;function bw(){var e;return Fi!==void 0||(typeof window<"u"&&window.performance?(Fi=!0,zl=window.performance):typeof global<"u"&&(!((e=global.perf_hooks)===null||e===void 0)&&e.performance)?(Fi=!0,zl=global.perf_hooks.performance):Fi=!1),Fi}function yw(){return bw()?zl.now():Date.now()}class vw{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const i={};if(t.settings)for(const o in t.settings){const a=t.settings[o];i[o]=a.defaultValue}const s=`__vue-devtools-plugin-settings__${t.id}`;let r=Object.assign({},i);try{const o=localStorage.getItem(s),a=JSON.parse(o);Object.assign(r,a)}catch{}this.fallbacks={getSettings(){return r},setSettings(o){try{localStorage.setItem(s,JSON.stringify(o))}catch{}r=o},now(){return yw()}},n&&n.on(_w,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function ww(e,t){const n=e,i=Yg(),s=pw(),r=gw&&n.enableEarlyProxy;if(s&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!r))s.emit(mw,e,t);else{const o=r?new vw(n,s):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:o}),o&&t(o.proxiedTarget)}}/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var Xg="store";function K1(e){return e===void 0&&(e=null),Ge(e!==null?e:Xg)}function ys(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function xw(e){return e!==null&&typeof e=="object"}function Sw(e){return e&&typeof e.then=="function"}function Ew(e,t){return function(){return e(t)}}function Qg(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var i=t.indexOf(e);i>-1&&t.splice(i,1)}}function Jg(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;ba(e,n,[],e._modules.root,!0),Zc(e,n,t)}function Zc(e,t,n){var i=e._state;e.getters={},e._makeLocalGettersCache=Object.create(null);var s=e._wrappedGetters,r={};ys(s,function(o,a){r[a]=Ew(o,e),Object.defineProperty(e.getters,a,{get:function(){return r[a]()},enumerable:!0})}),e._state=Ar({data:t}),e.strict&&Aw(e),i&&n&&e._withCommit(function(){i.data=null})}function ba(e,t,n,i,s){var r=!n.length,o=e._modules.getNamespace(n);if(i.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=i),!r&&!s){var a=tu(t,n.slice(0,-1)),l=n[n.length-1];e._withCommit(function(){a[l]=i.state})}var c=i.context=Iw(e,o,n);i.forEachMutation(function(u,h){var d=o+h;Cw(e,d,u,c)}),i.forEachAction(function(u,h){var d=u.root?h:o+h,f=u.handler||u;Tw(e,d,f,c)}),i.forEachGetter(function(u,h){var d=o+h;kw(e,d,u,c)}),i.forEachChild(function(u,h){ba(e,t,n.concat(h),u,s)})}function Iw(e,t,n){var i=t==="",s={dispatch:i?e.dispatch:function(r,o,a){var l=Oo(r,o,a),c=l.payload,u=l.options,h=l.type;return(!u||!u.root)&&(h=t+h),e.dispatch(h,c)},commit:i?e.commit:function(r,o,a){var l=Oo(r,o,a),c=l.payload,u=l.options,h=l.type;(!u||!u.root)&&(h=t+h),e.commit(h,c,u)}};return Object.defineProperties(s,{getters:{get:i?function(){return e.getters}:function(){return Zg(e,t)}},state:{get:function(){return tu(e.state,n)}}}),s}function Zg(e,t){if(!e._makeLocalGettersCache[t]){var n={},i=t.length;Object.keys(e.getters).forEach(function(s){if(s.slice(0,i)===t){var r=s.slice(i);Object.defineProperty(n,r,{get:function(){return e.getters[s]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function Cw(e,t,n,i){var s=e._mutations[t]||(e._mutations[t]=[]);s.push(function(o){n.call(e,i.state,o)})}function Tw(e,t,n,i){var s=e._actions[t]||(e._actions[t]=[]);s.push(function(o){var a=n.call(e,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},o);return Sw(a)||(a=Promise.resolve(a)),e._devtoolHook?a.catch(function(l){throw e._devtoolHook.emit("vuex:error",l),l}):a})}function kw(e,t,n,i){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(r){return n(i.state,i.getters,r.state,r.getters)})}function Aw(e){Xi(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function tu(e,t){return t.reduce(function(n,i){return n[i]},e)}function Oo(e,t,n){return xw(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var Mw="vuex bindings",Kh="vuex:mutations",Ga="vuex:actions",Bi="vuex",Rw=0;function Pw(e,t){ww({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[Mw]},function(n){n.addTimelineLayer({id:Kh,label:"Vuex Mutations",color:qh}),n.addTimelineLayer({id:Ga,label:"Vuex Actions",color:qh}),n.addInspector({id:Bi,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(i){if(i.app===e&&i.inspectorId===Bi)if(i.filter){var s=[];im(s,t._modules.root,i.filter,""),i.rootNodes=s}else i.rootNodes=[nm(t._modules.root,"")]}),n.on.getInspectorState(function(i){if(i.app===e&&i.inspectorId===Bi){var s=i.nodeId;Zg(t,s),i.state=Nw(Fw(t._modules,s),s==="root"?t.getters:t._makeLocalGettersCache,s)}}),n.on.editInspectorState(function(i){if(i.app===e&&i.inspectorId===Bi){var s=i.nodeId,r=i.path;s!=="root"&&(r=s.split("/").filter(Boolean).concat(r)),t._withCommit(function(){i.set(t._state.data,r,i.state.value)})}}),t.subscribe(function(i,s){var r={};i.payload&&(r.payload=i.payload),r.state=s,n.notifyComponentUpdate(),n.sendInspectorTree(Bi),n.sendInspectorState(Bi),n.addTimelineEvent({layerId:Kh,event:{time:Date.now(),title:i.type,data:r}})}),t.subscribeAction({before:function(i,s){var r={};i.payload&&(r.payload=i.payload),i._id=Rw++,i._time=Date.now(),r.state=s,n.addTimelineEvent({layerId:Ga,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:r}})},after:function(i,s){var r={},o=Date.now()-i._time;r.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},i.payload&&(r.payload=i.payload),r.state=s,n.addTimelineEvent({layerId:Ga,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:r}})}})})}var qh=8702998,Ow=6710886,Dw=16777215,tm={label:"namespaced",textColor:Dw,backgroundColor:Ow};function em(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function nm(e,t){return{id:t||"root",label:em(t),tags:e.namespaced?[tm]:[],children:Object.keys(e._children).map(function(n){return nm(e._children[n],t+n+"/")})}}function im(e,t,n,i){i.includes(n)&&e.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:t.namespaced?[tm]:[]}),Object.keys(t._children).forEach(function(s){im(e,t._children[s],n,i+s+"/")})}function Nw(e,t,n){t=n==="root"?t:t[n];var i=Object.keys(t),s={state:Object.keys(e.state).map(function(o){return{key:o,editable:!0,value:e.state[o]}})};if(i.length){var r=Lw(t);s.getters=Object.keys(r).map(function(o){return{key:o.endsWith("/")?em(o):o,editable:!1,value:Vl(function(){return r[o]})}})}return s}function Lw(e){var t={};return Object.keys(e).forEach(function(n){var i=n.split("/");if(i.length>1){var s=t,r=i.pop();i.forEach(function(o){s[o]||(s[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),s=s[o]._custom.value}),s[r]=Vl(function(){return e[n]})}else t[n]=Vl(function(){return e[n]})}),t}function Fw(e,t){var n=t.split("/").filter(function(i){return i});return n.reduce(function(i,s,r){var o=i[s];if(!o)throw new Error('Missing module "'+s+'" for path "'+t+'".');return r===n.length-1?o:o._children},t==="root"?e:e.root._children)}function Vl(e){try{return e()}catch(t){return t}}var $e=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var i=t.state;this.state=(typeof i=="function"?i():i)||{}},sm={namespaced:{configurable:!0}};sm.namespaced.get=function(){return!!this._rawModule.namespaced};$e.prototype.addChild=function(t,n){this._children[t]=n};$e.prototype.removeChild=function(t){delete this._children[t]};$e.prototype.getChild=function(t){return this._children[t]};$e.prototype.hasChild=function(t){return t in this._children};$e.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};$e.prototype.forEachChild=function(t){ys(this._children,t)};$e.prototype.forEachGetter=function(t){this._rawModule.getters&&ys(this._rawModule.getters,t)};$e.prototype.forEachAction=function(t){this._rawModule.actions&&ys(this._rawModule.actions,t)};$e.prototype.forEachMutation=function(t){this._rawModule.mutations&&ys(this._rawModule.mutations,t)};Object.defineProperties($e.prototype,sm);var Ai=function(t){this.register([],t,!1)};Ai.prototype.get=function(t){return t.reduce(function(n,i){return n.getChild(i)},this.root)};Ai.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(i,s){return n=n.getChild(s),i+(n.namespaced?s+"/":"")},"")};Ai.prototype.update=function(t){rm([],this.root,t)};Ai.prototype.register=function(t,n,i){var s=this;i===void 0&&(i=!0);var r=new $e(n,i);if(t.length===0)this.root=r;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],r)}n.modules&&ys(n.modules,function(a,l){s.register(t.concat(l),a,i)})};Ai.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),i=t[t.length-1],s=n.getChild(i);s&&s.runtime&&n.removeChild(i)};Ai.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),i=t[t.length-1];return n?n.hasChild(i):!1};function rm(e,t,n){if(t.update(n),n.modules)for(var i in n.modules){if(!t.getChild(i))return;rm(e.concat(i),t.getChild(i),n.modules[i])}}function q1(e){return new pe(e)}var pe=function(t){var n=this;t===void 0&&(t={});var i=t.plugins;i===void 0&&(i=[]);var s=t.strict;s===void 0&&(s=!1);var r=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Ai(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=r;var o=this,a=this,l=a.dispatch,c=a.commit;this.dispatch=function(d,f){return l.call(o,d,f)},this.commit=function(d,f,p){return c.call(o,d,f,p)},this.strict=s;var u=this._modules.root.state;ba(this,u,[],this._modules.root),Zc(this,u),i.forEach(function(h){return h(n)})},eu={state:{configurable:!0}};pe.prototype.install=function(t,n){t.provide(n||Xg,this),t.config.globalProperties.$store=this;var i=this._devtools!==void 0?this._devtools:!1;i&&Pw(t,this)};eu.state.get=function(){return this._state.data};eu.state.set=function(e){};pe.prototype.commit=function(t,n,i){var s=this,r=Oo(t,n,i),o=r.type,a=r.payload,l={type:o,payload:a},c=this._mutations[o];c&&(this._withCommit(function(){c.forEach(function(h){h(a)})}),this._subscribers.slice().forEach(function(u){return u(l,s.state)}))};pe.prototype.dispatch=function(t,n){var i=this,s=Oo(t,n),r=s.type,o=s.payload,a={type:r,payload:o},l=this._actions[r];if(l){try{this._actionSubscribers.slice().filter(function(u){return u.before}).forEach(function(u){return u.before(a,i.state)})}catch{}var c=l.length>1?Promise.all(l.map(function(u){return u(o)})):l[0](o);return new Promise(function(u,h){c.then(function(d){try{i._actionSubscribers.filter(function(f){return f.after}).forEach(function(f){return f.after(a,i.state)})}catch{}u(d)},function(d){try{i._actionSubscribers.filter(function(f){return f.error}).forEach(function(f){return f.error(a,i.state,d)})}catch{}h(d)})})}};pe.prototype.subscribe=function(t,n){return Qg(t,this._subscribers,n)};pe.prototype.subscribeAction=function(t,n){var i=typeof t=="function"?{before:t}:t;return Qg(i,this._actionSubscribers,n)};pe.prototype.watch=function(t,n,i){var s=this;return Xi(function(){return t(s.state,s.getters)},n,Object.assign({},i))};pe.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};pe.prototype.registerModule=function(t,n,i){i===void 0&&(i={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),ba(this,this.state,t,this._modules.get(t),i.preserveState),Zc(this,this.state)};pe.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var i=tu(n.state,t.slice(0,-1));delete i[t[t.length-1]]}),Jg(this)};pe.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};pe.prototype.hotUpdate=function(t){this._modules.update(t),Jg(this,!0)};pe.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(pe.prototype,eu);var Gh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H=function(e,t){if(!e)throw vs(t)},vs=function(e){return new Error("Firebase Database ("+om.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},Bw=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=e[n++],o=e[n++],a=e[n++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{const r=e[n++],o=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return t.join("")},nu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const r=e[s],o=s+1<e.length,a=o?e[s+1]:0,l=s+2<e.length,c=l?e[s+2]:0,u=r>>2,h=(r&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),i.push(n[u],n[h],n[d],n[f])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(am(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Bw(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const r=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const c=s<e.length?n[e.charAt(s)]:64;++s;const h=s<e.length?n[e.charAt(s)]:64;if(++s,r==null||a==null||c==null||h==null)throw new $w;const d=r<<2|a>>4;if(i.push(d),c!==64){const f=a<<4&240|c>>2;if(i.push(f),h!==64){const p=c<<6&192|h;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class $w extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lm=function(e){const t=am(e);return nu.encodeByteArray(t,!0)},Do=function(e){return lm(e).replace(/\./g,"")},No=function(e){try{return nu.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(e){return cm(void 0,e)}function cm(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!Uw(n)||(e[n]=cm(e[n],t[n]));return e}function Uw(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=()=>Hw().__FIREBASE_DEFAULTS__,Vw=()=>{if(typeof process>"u"||typeof Gh>"u")return;const e=Gh.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},jw=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&No(e[1]);return t&&JSON.parse(t)},iu=()=>{try{return zw()||Vw()||jw()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},um=e=>{var t,n;return(n=(t=iu())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Kw=e=>{const t=um(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},hm=()=>{var e;return(e=iu())===null||e===void 0?void 0:e.config},dm=e=>{var t;return(t=iu())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[Do(JSON.stringify(n)),Do(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function su(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ie())}function fm(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function pm(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Gw(){const e=ie();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function gm(){return om.NODE_ADMIN===!0}function mm(){try{return typeof indexedDB=="object"}catch{return!1}}function _m(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;t(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){t(n)}})}function Yw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="FirebaseError";class en extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=Xw,Object.setPrototypeOf(this,en.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mi.prototype.create)}}class Mi{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,r=this.errors[t],o=r?Qw(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new en(s,a,i)}}function Qw(e,t){return e.replace(Jw,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const Jw=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(e){return JSON.parse(e)}function Xt(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=function(e){let t={},n={},i={},s="";try{const r=e.split(".");t=fr(No(r[0])||""),n=fr(No(r[1])||""),s=r[2],i=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:i,signature:s}},Zw=function(e){const t=bm(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},tx=function(e){const t=bm(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function os(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function jl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Lo(e,t,n){const i={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=t.call(n,e[s],s,e));return i}function pr(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const r=e[s],o=t[s];if(Yh(r)&&Yh(o)){if(!pr(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Yh(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const i=this.W_;if(typeof t=="string")for(let h=0;h<16;h++)i[h]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)i[h]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let h=16;h<80;h++){const d=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=(d<<1|d>>>31)&4294967295}let s=this.chain_[0],r=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^r&(o^a),u=1518500249):(c=r^o^a,u=1859775393):h<60?(c=r&o|a&(r|o),u=2400959708):(c=r^o^a,u=3395469782);const d=(s<<5|s>>>27)+c+l+u+i[h]&4294967295;l=a,a=o,o=(r<<30|r>>>2)&4294967295,r=s,s=d}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const i=n-this.blockSize;let s=0;const r=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=i;)this.compress_(t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<n;)if(r[o]=t.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(r),o=0;break}}else for(;s<n;)if(r[o]=t[s],++o,++s,o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let r=24;r>=0;r-=8)t[i]=this.chain_[s]>>r&255,++i;return t}}function nx(e,t){const n=new ix(e,t);return n.subscribe.bind(n)}class ix{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let s;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");sx(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:i},s.next===void 0&&(s.next=Ya),s.error===void 0&&(s.error=Ya),s.complete===void 0&&(s.complete=Ya);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sx(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Ya(){}function ru(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);if(s>=55296&&s<=56319){const r=s-55296;i++,H(i<e.length,"Surrogate pair missing trail surrogate.");const o=e.charCodeAt(i)-56320;s=65536+(r<<10)+o}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},va=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=1e3,ax=2,lx=4*60*60*1e3,cx=.5;function Xh(e,t=ox,n=ax){const i=t*Math.pow(n,e),s=Math.round(cx*i*(Math.random()-.5)*2);return Math.min(lx,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(e){return e&&e._delegate?e._delegate:e}class Fe{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new ya;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(dx(t))try{this.getOrInitializeService({instanceIdentifier:ni})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=ni){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ni){return this.instances.has(t)}getOptions(t=ni){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(t,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(t),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&t(o,s),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:hx(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=ni){return this.component?this.component.multipleInstances?t:ni:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hx(e){return e===ni?void 0:e}function dx(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new ux(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(It||(It={}));const px={debug:It.DEBUG,verbose:It.VERBOSE,info:It.INFO,warn:It.WARN,error:It.ERROR,silent:It.SILENT},gx=It.INFO,mx={[It.DEBUG]:"log",[It.VERBOSE]:"log",[It.INFO]:"info",[It.WARN]:"warn",[It.ERROR]:"error"},_x=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=mx[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class wa{constructor(t){this.name=t,this._logLevel=gx,this._logHandler=_x,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in It))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?px[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,It.DEBUG,...t),this._logHandler(this,It.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,It.VERBOSE,...t),this._logHandler(this,It.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,It.INFO,...t),this._logHandler(this,It.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,It.WARN,...t),this._logHandler(this,It.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,It.ERROR,...t),this._logHandler(this,It.ERROR,...t)}}const bx=(e,t)=>t.some(n=>e instanceof n);let Qh,Jh;function yx(){return Qh||(Qh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vx(){return Jh||(Jh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ym=new WeakMap,Kl=new WeakMap,vm=new WeakMap,Xa=new WeakMap,ou=new WeakMap;function wx(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(Wn(e.result)),s()},o=()=>{i(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&ym.set(n,e)}).catch(()=>{}),ou.set(t,e),t}function xx(e){if(Kl.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});Kl.set(e,t)}let ql={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Kl.get(e);if(t==="objectStoreNames")return e.objectStoreNames||vm.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Sx(e){ql=e(ql)}function Ex(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(Qa(this),t,...n);return vm.set(i,t.sort?t.sort():[t]),Wn(i)}:vx().includes(e)?function(...t){return e.apply(Qa(this),t),Wn(ym.get(this))}:function(...t){return Wn(e.apply(Qa(this),t))}}function Ix(e){return typeof e=="function"?Ex(e):(e instanceof IDBTransaction&&xx(e),bx(e,yx())?new Proxy(e,ql):e)}function Wn(e){if(e instanceof IDBRequest)return wx(e);if(Xa.has(e))return Xa.get(e);const t=Ix(e);return t!==e&&(Xa.set(e,t),ou.set(t,e)),t}const Qa=e=>ou.get(e);function Cx(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(e,t),a=Wn(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Wn(o.result),l.oldVersion,l.newVersion,Wn(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Tx=["get","getKey","getAll","getAllKeys","count"],kx=["put","add","delete","clear"],Ja=new Map;function Zh(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Ja.get(t))return Ja.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=kx.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||Tx.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Ja.set(t,r),r}Sx(e=>({...e,get:(t,n,i)=>Zh(t,n)||e.get(t,n,i),has:(t,n)=>!!Zh(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Mx(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Mx(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Gl="@firebase/app",td="0.9.25";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new wa("@firebase/app"),Rx="@firebase/app-compat",Px="@firebase/analytics-compat",Ox="@firebase/analytics",Dx="@firebase/app-check-compat",Nx="@firebase/app-check",Lx="@firebase/auth",Fx="@firebase/auth-compat",Bx="@firebase/database",$x="@firebase/database-compat",Wx="@firebase/functions",Ux="@firebase/functions-compat",Hx="@firebase/installations",zx="@firebase/installations-compat",Vx="@firebase/messaging",jx="@firebase/messaging-compat",Kx="@firebase/performance",qx="@firebase/performance-compat",Gx="@firebase/remote-config",Yx="@firebase/remote-config-compat",Xx="@firebase/storage",Qx="@firebase/storage-compat",Jx="@firebase/firestore",Zx="@firebase/firestore-compat",tS="firebase",eS="10.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl="[DEFAULT]",nS={[Gl]:"fire-core",[Rx]:"fire-core-compat",[Ox]:"fire-analytics",[Px]:"fire-analytics-compat",[Nx]:"fire-app-check",[Dx]:"fire-app-check-compat",[Lx]:"fire-auth",[Fx]:"fire-auth-compat",[Bx]:"fire-rtdb",[$x]:"fire-rtdb-compat",[Wx]:"fire-fn",[Ux]:"fire-fn-compat",[Hx]:"fire-iid",[zx]:"fire-iid-compat",[Vx]:"fire-fcm",[jx]:"fire-fcm-compat",[Kx]:"fire-perf",[qx]:"fire-perf-compat",[Gx]:"fire-rc",[Yx]:"fire-rc-compat",[Xx]:"fire-gcs",[Qx]:"fire-gcs-compat",[Jx]:"fire-fst",[Zx]:"fire-fst-compat","fire-js":"fire-js",[tS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=new Map,Xl=new Map;function iS(e,t){try{e.container.addComponent(t)}catch(n){vi.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ze(e){const t=e.name;if(Xl.has(t))return vi.debug(`There were multiple attempts to register component ${t}.`),!1;Xl.set(t,e);for(const n of Fo.values())iS(n,e);return!0}function Ri(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Un=new Mi("app","Firebase",sS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Fe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Un.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=eS;function oS(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:Yl,automaticDataCollectionEnabled:!1},t),s=i.name;if(typeof s!="string"||!s)throw Un.create("bad-app-name",{appName:String(s)});if(n||(n=hm()),!n)throw Un.create("no-options");const r=Fo.get(s);if(r){if(pr(n,r.options)&&pr(i,r.config))return r;throw Un.create("duplicate-app",{appName:s})}const o=new fx(s);for(const l of Xl.values())o.addComponent(l);const a=new rS(n,i,o);return Fo.set(s,a),a}function au(e=Yl){const t=Fo.get(e);if(!t&&e===Yl&&hm())return oS();if(!t)throw Un.create("no-app",{appName:e});return t}function xe(e,t,n){var i;let s=(i=nS[e])!==null&&i!==void 0?i:e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const a=[`Unable to register library "${s}" with version "${t}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),vi.warn(a.join(" "));return}Ze(new Fe(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="firebase-heartbeat-database",lS=1,gr="firebase-heartbeat-store";let Za=null;function wm(){return Za||(Za=Cx(aS,lS,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(gr)}}}).catch(e=>{throw Un.create("idb-open",{originalErrorMessage:e.message})})),Za}async function cS(e){try{return await(await wm()).transaction(gr).objectStore(gr).get(xm(e))}catch(t){if(t instanceof en)vi.warn(t.message);else{const n=Un.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});vi.warn(n.message)}}}async function ed(e,t){try{const i=(await wm()).transaction(gr,"readwrite");await i.objectStore(gr).put(t,xm(e)),await i.done}catch(n){if(n instanceof en)vi.warn(n.message);else{const i=Un.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vi.warn(i.message)}}}function xm(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=1024,hS=30*24*60*60*1e3;class dS{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pS(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=nd();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=hS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nd(),{heartbeatsToSend:i,unsentEntries:s}=fS(this._heartbeatsCache.heartbeats),r=Do(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function nd(){return new Date().toISOString().substring(0,10)}function fS(e,t=uS){const n=[];let i=e.slice();for(const s of e){const r=n.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),id(n)>t){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),id(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class pS{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mm()?_m().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ed(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ed(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function id(e){return Do(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(e){Ze(new Fe("platform-logger",t=>new Ax(t),"PRIVATE")),Ze(new Fe("heartbeat",t=>new dS(t),"PRIVATE")),xe(Gl,td,e),xe(Gl,td,"esm2017"),xe("fire-js","")}gS("");var mS="firebase",_S="10.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xe(mS,_S,"app");const bS=(e,t)=>t.some(n=>e instanceof n);let sd,rd;function yS(){return sd||(sd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vS(){return rd||(rd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sm=new WeakMap,Ql=new WeakMap,Em=new WeakMap,tl=new WeakMap,lu=new WeakMap;function wS(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(Hn(e.result)),s()},o=()=>{i(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Sm.set(n,e)}).catch(()=>{}),lu.set(t,e),t}function xS(e){if(Ql.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});Ql.set(e,t)}let Jl={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Ql.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Em.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function SS(e){Jl=e(Jl)}function ES(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(el(this),t,...n);return Em.set(i,t.sort?t.sort():[t]),Hn(i)}:vS().includes(e)?function(...t){return e.apply(el(this),t),Hn(Sm.get(this))}:function(...t){return Hn(e.apply(el(this),t))}}function IS(e){return typeof e=="function"?ES(e):(e instanceof IDBTransaction&&xS(e),bS(e,yS())?new Proxy(e,Jl):e)}function Hn(e){if(e instanceof IDBRequest)return wS(e);if(tl.has(e))return tl.get(e);const t=IS(e);return t!==e&&(tl.set(e,t),lu.set(t,e)),t}const el=e=>lu.get(e);function CS(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(e,t),a=Hn(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Hn(o.result),l.oldVersion,l.newVersion,Hn(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",()=>s())}).catch(()=>{}),a}const TS=["get","getKey","getAll","getAllKeys","count"],kS=["put","add","delete","clear"],nl=new Map;function od(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(nl.get(t))return nl.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=kS.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||TS.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return nl.set(t,r),r}SS(e=>({...e,get:(t,n,i)=>od(t,n)||e.get(t,n,i),has:(t,n)=>!!od(t,n)||e.has(t,n)}));const Im="@firebase/installations",cu="0.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm=1e4,Tm=`w:${cu}`,km="FIS_v2",AS="https://firebaseinstallations.googleapis.com/v1",MS=60*60*1e3,RS="installations",PS="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},wi=new Mi(RS,PS,OS);function Am(e){return e instanceof en&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm({projectId:e}){return`${AS}/projects/${e}/installations`}function Rm(e){return{token:e.token,requestStatus:2,expiresIn:NS(e.expiresIn),creationTime:Date.now()}}async function Pm(e,t){const i=(await t.json()).error;return wi.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Om({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function DS(e,{refreshToken:t}){const n=Om(e);return n.append("Authorization",LS(t)),n}async function Dm(e){const t=await e();return t.status>=500&&t.status<600?e():t}function NS(e){return Number(e.replace("s","000"))}function LS(e){return`${km} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FS({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=Mm(e),s=Om(e),r=t.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:km,appId:e.appId,sdkVersion:Tm},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Dm(()=>fetch(i,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:Rm(c.authToken)}}else throw await Pm("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=/^[cdef][\w-]{21}$/,Zl="";function WS(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=US(e);return $S.test(n)?n:Zl}catch{return Zl}}function US(e){return BS(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm=new Map;function Fm(e,t){const n=xa(e);Bm(n,t),HS(n,t)}function Bm(e,t){const n=Lm.get(e);if(n)for(const i of n)i(t)}function HS(e,t){const n=zS();n&&n.postMessage({key:e,fid:t}),VS()}let li=null;function zS(){return!li&&"BroadcastChannel"in self&&(li=new BroadcastChannel("[Firebase] FID Change"),li.onmessage=e=>{Bm(e.data.key,e.data.fid)}),li}function VS(){Lm.size===0&&li&&(li.close(),li=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="firebase-installations-database",KS=1,xi="firebase-installations-store";let il=null;function uu(){return il||(il=CS(jS,KS,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(xi)}}})),il}async function Bo(e,t){const n=xa(e),s=(await uu()).transaction(xi,"readwrite"),r=s.objectStore(xi),o=await r.get(n);return await r.put(t,n),await s.done,(!o||o.fid!==t.fid)&&Fm(e,t.fid),t}async function $m(e){const t=xa(e),i=(await uu()).transaction(xi,"readwrite");await i.objectStore(xi).delete(t),await i.done}async function Sa(e,t){const n=xa(e),s=(await uu()).transaction(xi,"readwrite"),r=s.objectStore(xi),o=await r.get(n),a=t(o);return a===void 0?await r.delete(n):await r.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&Fm(e,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(e){let t;const n=await Sa(e.appConfig,i=>{const s=qS(i),r=GS(e,s);return t=r.registrationPromise,r.installationEntry});return n.fid===Zl?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function qS(e){const t=e||{fid:WS(),registrationStatus:0};return Wm(t)}function GS(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(wi.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=YS(e,n);return{installationEntry:n,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:XS(e)}:{installationEntry:t}}async function YS(e,t){try{const n=await FS(e,t);return Bo(e.appConfig,n)}catch(n){throw Am(n)&&n.customData.serverCode===409?await $m(e.appConfig):await Bo(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function XS(e){let t=await ad(e.appConfig);for(;t.registrationStatus===1;)await Nm(100),t=await ad(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await hu(e);return i||n}return t}function ad(e){return Sa(e,t=>{if(!t)throw wi.create("installation-not-found");return Wm(t)})}function Wm(e){return QS(e)?{fid:e.fid,registrationStatus:0}:e}function QS(e){return e.registrationStatus===1&&e.registrationTime+Cm<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JS({appConfig:e,heartbeatServiceProvider:t},n){const i=ZS(e,n),s=DS(e,n),r=t.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:Tm,appId:e.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Dm(()=>fetch(i,a));if(l.ok){const c=await l.json();return Rm(c)}else throw await Pm("Generate Auth Token",l)}function ZS(e,{fid:t}){return`${Mm(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(e,t=!1){let n;const i=await Sa(e.appConfig,r=>{if(!Um(r))throw wi.create("not-registered");const o=r.authToken;if(!t&&nE(o))return r;if(o.requestStatus===1)return n=tE(e,t),r;{if(!navigator.onLine)throw wi.create("app-offline");const a=sE(r);return n=eE(e,a),a}});return n?await n:i.authToken}async function tE(e,t){let n=await ld(e.appConfig);for(;n.authToken.requestStatus===1;)await Nm(100),n=await ld(e.appConfig);const i=n.authToken;return i.requestStatus===0?du(e,t):i}function ld(e){return Sa(e,t=>{if(!Um(t))throw wi.create("not-registered");const n=t.authToken;return rE(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function eE(e,t){try{const n=await JS(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await Bo(e.appConfig,i),n}catch(n){if(Am(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await $m(e.appConfig);else{const i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Bo(e.appConfig,i)}throw n}}function Um(e){return e!==void 0&&e.registrationStatus===2}function nE(e){return e.requestStatus===2&&!iE(e)}function iE(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+MS}function sE(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function rE(e){return e.requestStatus===1&&e.requestTime+Cm<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oE(e){const t=e,{installationEntry:n,registrationPromise:i}=await hu(t);return i?i.catch(console.error):du(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aE(e,t=!1){const n=e;return await lE(n),(await du(n,t)).token}async function lE(e){const{registrationPromise:t}=await hu(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(e){if(!e||!e.options)throw sl("App Configuration");if(!e.name)throw sl("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw sl(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function sl(e){return wi.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="installations",uE="installations-internal",hE=e=>{const t=e.getProvider("app").getImmediate(),n=cE(t),i=Ri(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},dE=e=>{const t=e.getProvider("app").getImmediate(),n=Ri(t,Hm).getImmediate();return{getId:()=>oE(n),getToken:s=>aE(n,s)}};function fE(){Ze(new Fe(Hm,hE,"PUBLIC")),Ze(new Fe(uE,dE,"PRIVATE"))}fE();xe(Im,cu);xe(Im,cu,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="analytics",pE="firebase_id",gE="origin",mE=60*1e3,_E="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",fu="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue=new wa("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ye=new Mi("analytics","Analytics",bE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(e){if(!e.startsWith(fu)){const t=ye.create("invalid-gtag-resource",{gtagURL:e});return ue.warn(t.message),""}return e}function zm(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function vE(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function wE(e,t){const n=vE("firebase-js-sdk-policy",{createScriptURL:yE}),i=document.createElement("script"),s=`${fu}?l=${e}&id=${t}`;i.src=n?n==null?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function xE(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function SE(e,t,n,i,s,r){const o=i[s];try{if(o)await t[o];else{const l=(await zm(n)).find(c=>c.measurementId===s);l&&await t[l.appId]}}catch(a){ue.error(a)}e("config",s,r)}async function EE(e,t,n,i,s){try{let r=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await zm(n);for(const l of o){const c=a.find(h=>h.measurementId===l),u=c&&t[c.appId];if(u)r.push(u);else{r=[];break}}}r.length===0&&(r=Object.values(t)),await Promise.all(r),e("event",i,s||{})}catch(r){ue.error(r)}}function IE(e,t,n,i){async function s(r,...o){try{if(r==="event"){const[a,l]=o;await EE(e,t,n,a,l)}else if(r==="config"){const[a,l]=o;await SE(e,t,n,i,a,l)}else if(r==="consent"){const[a]=o;e("consent","update",a)}else if(r==="get"){const[a,l,c]=o;e("get",a,l,c)}else if(r==="set"){const[a]=o;e("set",a)}else e(r,...o)}catch(a){ue.error(a)}}return s}function CE(e,t,n,i,s){let r=function(...o){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=IE(r,e,t,n),{gtagCore:r,wrappedGtag:window[s]}}function TE(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(fu)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=30,AE=1e3;class ME{constructor(t={},n=AE){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const Vm=new ME;function RE(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function PE(e){var t;const{appId:n,apiKey:i}=e,s={method:"GET",headers:RE(i)},r=_E.replace("{app-id}",n),o=await fetch(r,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((t=l.error)===null||t===void 0)&&t.message&&(a=l.error.message)}catch{}throw ye.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function OE(e,t=Vm,n){const{appId:i,apiKey:s,measurementId:r}=e.options;if(!i)throw ye.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:i};throw ye.create("no-api-key")}const o=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new LE;return setTimeout(async()=>{a.abort()},n!==void 0?n:mE),jm({appId:i,apiKey:s,measurementId:r},o,a,t)}async function jm(e,{throttleEndTimeMillis:t,backoffCount:n},i,s=Vm){var r;const{appId:o,measurementId:a}=e;try{await DE(i,t)}catch(l){if(a)return ue.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await PE(e);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!NE(c)){if(s.deleteThrottleMetadata(o),a)return ue.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((r=c==null?void 0:c.customData)===null||r===void 0?void 0:r.httpStatus)===503?Xh(n,s.intervalMillis,kE):Xh(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return s.setThrottleMetadata(o,h),ue.debug(`Calling attemptFetch again in ${u} millis`),jm(e,h,i,s)}}function DE(e,t){return new Promise((n,i)=>{const s=Math.max(t-Date.now(),0),r=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(r),i(ye.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function NE(e){if(!(e instanceof en)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class LE{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function FE(e,t,n,i,s){if(s&&s.global){e("event",n,i);return}else{const r=await t,o=Object.assign(Object.assign({},i),{send_to:r});e("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BE(){if(mm())try{await _m()}catch(e){return ue.warn(ye.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return ue.warn(ye.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function $E(e,t,n,i,s,r,o){var a;const l=OE(e);l.then(f=>{n[f.measurementId]=f.appId,e.options.measurementId&&f.measurementId!==e.options.measurementId&&ue.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>ue.error(f)),t.push(l);const c=BE().then(f=>{if(f)return i.getId()}),[u,h]=await Promise.all([l,c]);TE(r)||wE(r,u.measurementId),s("js",new Date);const d=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return d[gE]="firebase",d.update=!0,h!=null&&(d[pE]=h),s("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(t){this.app=t}_delete(){return delete Ys[this.app.options.appId],Promise.resolve()}}let Ys={},cd=[];const ud={};let rl="dataLayer",UE="gtag",hd,Km,dd=!1;function HE(){const e=[];if(fm()&&e.push("This is a browser extension environment."),Yw()||e.push("Cookies are not available."),e.length>0){const t=e.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=ye.create("invalid-analytics-context",{errorInfo:t});ue.warn(n.message)}}function zE(e,t,n){HE();const i=e.options.appId;if(!i)throw ye.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)ue.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ye.create("no-api-key");if(Ys[i]!=null)throw ye.create("already-exists",{id:i});if(!dd){xE(rl);const{wrappedGtag:r,gtagCore:o}=CE(Ys,cd,ud,rl,UE);Km=r,hd=o,dd=!0}return Ys[i]=$E(e,cd,ud,t,hd,rl,n),new WE(e)}function G1(e=au()){e=ge(e);const t=Ri(e,$o);return t.isInitialized()?t.getImmediate():VE(e)}function VE(e,t={}){const n=Ri(e,$o);if(n.isInitialized()){const s=n.getImmediate();if(pr(t,n.getOptions()))return s;throw ye.create("already-initialized")}return n.initialize({options:t})}function jE(e,t,n,i){e=ge(e),FE(Km,Ys[e.app.options.appId],t,n,i).catch(s=>ue.error(s))}const fd="@firebase/analytics",pd="0.10.0";function KE(){Ze(new Fe($o,(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();return zE(i,s,n)},"PUBLIC")),Ze(new Fe("analytics-internal",e,"PRIVATE")),xe(fd,pd),xe(fd,pd,"esm2017");function e(t){try{const n=t.getProvider($o).getImmediate();return{logEvent:(i,s,r)=>jE(n,i,s,r)}}catch(n){throw ye.create("interop-component-reg-failed",{reason:n})}}}KE();function pu(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]]);return n}function qm(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qE=qm,Gm=new Mi("auth","Firebase",qm());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=new wa("@firebase/auth");function GE(e,...t){Wo.logLevel<=It.WARN&&Wo.warn(`Auth (${xs}): ${e}`,...t)}function go(e,...t){Wo.logLevel<=It.ERROR&&Wo.error(`Auth (${xs}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(e,...t){throw gu(e,...t)}function Ye(e,...t){return gu(e,...t)}function Ym(e,t,n){const i=Object.assign(Object.assign({},qE()),{[t]:n});return new Mi("auth","Firebase",i).create(t,{appName:e.name})}function YE(e,t,n){const i=n;if(!(t instanceof i))throw i.name!==t.constructor.name&&tn(e,"argument-error"),Ym(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gu(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return Gm.create(e,...t)}function et(e,t,...n){if(!e)throw gu(t,...n)}function un(e){const t="INTERNAL ASSERTION FAILED: "+e;throw go(t),new Error(t)}function bn(e,t){e||un(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function XE(){return gd()==="http:"||gd()==="https:"}function gd(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XE()||fm()||"connection"in navigator)?navigator.onLine:!0}function JE(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(t,n){this.shortDelay=t,this.longDelay=n,bn(n>t,"Short delay should be less than long delay!"),this.isMobile=su()||pm()}get(){return QE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(e,t){bn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=new Mr(3e4,6e4);function _u(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ss(e,t,n,i,s={}){return Qm(e,s,async()=>{let r={},o={};i&&(t==="GET"?o=i:r={body:JSON.stringify(i)});const a=ws(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),Xm.fetch()(Jm(e,e.config.apiHost,n,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},r))})}async function Qm(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},ZE),t);try{const s=new nI(e),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Kr(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kr(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Kr(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw Kr(e,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Ym(e,u,c);tn(e,u)}}catch(s){if(s instanceof en)throw s;tn(e,"network-request-failed",{message:String(s)})}}async function eI(e,t,n,i,s={}){const r=await Ss(e,t,n,i,s);return"mfaPendingCredential"in r&&tn(e,"multi-factor-auth-required",{_serverResponse:r}),r}function Jm(e,t,n,i){const s=`${t}${n}?${i}`;return e.config.emulator?mu(e.config,s):`${e.config.apiScheme}://${s}`}class nI{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ye(this.auth,"network-request-failed")),tI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kr(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Ye(e,t,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iI(e,t){return Ss(e,"POST","/v1/accounts:delete",t)}async function sI(e,t){return Ss(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function rI(e,t=!1){const n=ge(e),i=await n.getIdToken(t),s=bu(i);et(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Xs(ol(s.auth_time)),issuedAtTime:Xs(ol(s.iat)),expirationTime:Xs(ol(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function ol(e){return Number(e)*1e3}function bu(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return go("JWT malformed, contained fewer than 3 sections"),null;try{const s=No(n);return s?JSON.parse(s):(go("Failed to decode base64 JWT payload"),null)}catch(s){return go("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function oI(e){const t=bu(e);return et(t,"internal-error"),et(typeof t.exp<"u","internal-error"),et(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mr(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof en&&aI(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function aI({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xs(this.lastLoginAt),this.creationTime=Xs(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(e){var t;const n=e.auth,i=await e.getIdToken(),s=await mr(e,sI(n,{idToken:i}));et(s==null?void 0:s.users.length,n,"internal-error");const r=s.users[0];e._notifyReloadListener(r);const o=!((t=r.providerUserInfo)===null||t===void 0)&&t.length?hI(r.providerUserInfo):[],a=uI(e.providerData,o),l=e.isAnonymous,c=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Zm(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(e,h)}async function cI(e){const t=ge(e);await Uo(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function uI(e,t){return[...e.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function hI(e){return e.map(t=>{var{providerId:n}=t,i=pu(t,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(e,t){const n=await Qm(e,{},async()=>{const i=ws({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,o=Jm(e,s,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Xm.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fI(e,t){return Ss(e,"POST","/v2/accounts:revokeToken",_u(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){et(t.idToken,"internal-error"),et(typeof t.idToken<"u","internal-error"),et(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):oI(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return et(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await dI(t,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,o=new _r;return i&&(et(typeof i=="string","internal-error",{appName:t}),o.refreshToken=i),s&&(et(typeof s=="string","internal-error",{appName:t}),o.accessToken=s),r&&(et(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new _r,this.toJSON())}_performRefresh(){return un("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(e,t){et(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class gi{constructor(t){var{uid:n,auth:i,stsTokenManager:s}=t,r=pu(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Zm(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await mr(this,this.stsTokenManager.getToken(this.auth,t));return et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return rI(this,t)}reload(){return cI(this)}_assign(t){this!==t&&(et(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new gi(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Uo(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await mr(this,iI(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var i,s,r,o,a,l,c,u;const h=(i=n.displayName)!==null&&i!==void 0?i:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,f=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,m=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:S,emailVerified:x,isAnonymous:E,providerData:A,stsTokenManager:D}=n;et(S&&D,t,"internal-error");const L=_r.fromJSON(this.name,D);et(typeof S=="string",t,"internal-error"),In(h,t.name),In(d,t.name),et(typeof x=="boolean",t,"internal-error"),et(typeof E=="boolean",t,"internal-error"),In(f,t.name),In(p,t.name),In(g,t.name),In(m,t.name),In(y,t.name),In(v,t.name);const q=new gi({uid:S,auth:t,email:d,emailVerified:x,displayName:h,isAnonymous:E,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:L,createdAt:y,lastLoginAt:v});return A&&Array.isArray(A)&&(q.providerData=A.map(z=>Object.assign({},z))),m&&(q._redirectEventId=m),q}static async _fromIdTokenResponse(t,n,i=!1){const s=new _r;s.updateFromServerResponse(n);const r=new gi({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await Uo(r),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new Map;function hn(e){bn(e instanceof Function,"Expected a class definition");let t=md.get(e);return t?(bn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,md.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}t_.type="NONE";const _d=t_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(e,t,n){return`firebase:${e}:${t}:${n}`}class Qi{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=mo(this.userKey,s.apiKey,r),this.fullPersistenceKey=mo("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?gi._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Qi(hn(_d),t,i);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=s[0]||hn(_d);const o=mo(i,t.config.apiKey,t.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=gi._fromJSON(t,u);c!==r&&(a=h),r=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Qi(r,t,i):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new Qi(r,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(i_(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(e_(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(r_(t))return"Blackberry";if(o_(t))return"Webos";if(yu(t))return"Safari";if((t.includes("chrome/")||n_(t))&&!t.includes("edge/"))return"Chrome";if(s_(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function e_(e=ie()){return/firefox\//i.test(e)}function yu(e=ie()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function n_(e=ie()){return/crios\//i.test(e)}function i_(e=ie()){return/iemobile/i.test(e)}function s_(e=ie()){return/android/i.test(e)}function r_(e=ie()){return/blackberry/i.test(e)}function o_(e=ie()){return/webos/i.test(e)}function Ea(e=ie()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function pI(e=ie()){var t;return Ea(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function gI(){return Gw()&&document.documentMode===10}function a_(e=ie()){return Ea(e)||s_(e)||o_(e)||r_(e)||/windows phone/i.test(e)||i_(e)}function mI(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(e,t=[]){let n;switch(e){case"Browser":n=bd(ie());break;case"Worker":n=`${bd(ie())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${xs}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=r=>new Promise((o,a)=>{try{const l=t(r);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bI(e,t={}){return Ss(e,"GET","/v2/passwordPolicy",_u(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=6;class vI{constructor(t){var n,i,s,r;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:yI,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=t.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,i,s,r,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(r=l.containsUppercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),s&&(n.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(t,n,i,s){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yd(this),this.idTokenSubscription=new yd(this),this.beforeStateQueue=new _I(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gm,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=hn(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await Qi.create(this,t),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUser(t){var n;const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Uo(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=JE()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?ge(t):null;return n&&et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&et(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(hn(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await bI(this),n=new vI(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Mi("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await fI(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&hn(t)||this._popupRedirectResolver;et(n,this,"argument-error"),this.redirectPersistenceManager=await Qi.create(this,[hn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,i,s);return()=>{o=!0,l()}}else{const l=t.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=l_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&GE(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ia(e){return ge(e)}class yd{constructor(t){this.auth=t,this.observer=null,this.addObserver=nx(n=>this.observer=n)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}function SI(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=s=>{const r=Ye("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",xI().appendChild(i)})}function EI(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(e,t){const n=Ri(e,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(pr(r,t??{}))return s;tn(s,"already-initialized")}return n.initialize({options:t})}function CI(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(hn);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function TI(e,t,n){const i=Ia(e);et(i._canInitEmulator,i,"emulator-config-failed"),et(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),r=c_(t),{host:o,port:a}=kI(t),l=a===null?"":`:${a}`;i.config.emulator={url:`${r}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||AI()}function c_(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function kI(e){const t=c_(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:vd(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:vd(o)}}}function vd(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function AI(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return un("not implemented")}_getIdTokenResponse(t){return un("not implemented")}_linkToIdToken(t,n){return un("not implemented")}_getReauthenticationResolver(t){return un("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ji(e,t){return eI(e,"POST","/v1/accounts:signInWithIdp",_u(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="http://localhost";class Si extends u_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Si(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):tn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s}=n,r=pu(n,["providerId","signInMethod"]);if(!i||!s)return null;const o=new Si(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Ji(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Ji(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ji(t,n)}buildRequest(){const t={requestUri:MI,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=ws(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends vu{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn extends Rr{constructor(){super("facebook.com")}static credential(t){return Si._fromParams({providerId:Mn.PROVIDER_ID,signInMethod:Mn.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Mn.credentialFromTaggedObject(t)}static credentialFromError(t){return Mn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Mn.credential(t.oauthAccessToken)}catch{return null}}}Mn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn extends Rr{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Si._fromParams({providerId:Rn.PROVIDER_ID,signInMethod:Rn.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Rn.credentialFromTaggedObject(t)}static credentialFromError(t){return Rn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Rn.credential(n,i)}catch{return null}}}Rn.GOOGLE_SIGN_IN_METHOD="google.com";Rn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn extends Rr{constructor(){super("github.com")}static credential(t){return Si._fromParams({providerId:Pn.PROVIDER_ID,signInMethod:Pn.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Pn.credentialFromTaggedObject(t)}static credentialFromError(t){return Pn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Pn.credential(t.oauthAccessToken)}catch{return null}}}Pn.GITHUB_SIGN_IN_METHOD="github.com";Pn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On extends Rr{constructor(){super("twitter.com")}static credential(t,n){return Si._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return On.credentialFromTaggedObject(t)}static credentialFromError(t){return On.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return On.credential(n,i)}catch{return null}}}On.TWITTER_SIGN_IN_METHOD="twitter.com";On.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,s=!1){const r=await gi._fromIdTokenResponse(t,i,s),o=wd(i);return new as({user:r,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const s=wd(i);return new as({user:t,providerId:s,_tokenResponse:i,operationType:n})}}function wd(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends en{constructor(t,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Ho.prototype),this.customData={appName:t.name,tenantId:(r=t.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,s){return new Ho(t,n,i,s)}}function h_(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Ho._fromErrorAndOperation(e,r,t,i):r})}async function RI(e,t,n=!1){const i=await mr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return as._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(e,t,n=!1){const{auth:i}=e,s="reauthenticate";try{const r=await mr(e,h_(i,s,t,e),n);et(r.idToken,i,"internal-error");const o=bu(r.idToken);et(o,i,"internal-error");const{sub:a}=o;return et(e.uid===a,i,"user-mismatch"),as._forOperation(e,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&tn(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(e,t,n=!1){const i="signIn",s=await h_(e,i,t),r=await as._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}function DI(e,t,n,i){return ge(e).onIdTokenChanged(t,n,i)}function NI(e,t,n){return ge(e).beforeAuthStateChanged(t,n)}function Y1(e){return ge(e).signOut()}const zo="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zo,"1"),this.storage.removeItem(zo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(){const e=ie();return yu(e)||Ea(e)}const FI=1e3,BI=10;class f_ extends d_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=LI()&&mI(),this.fallbackToPolling=a_(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&t(n,s,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(i);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);gI()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,BI):s()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},FI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}f_.type="LOCAL";const $I=f_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_ extends d_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}p_.type="SESSION";const g_=p_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;const i=new Ca(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:s,data:r}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,r)),l=await WI(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ca.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=wu("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(d.data.response);break;default:clearTimeout(u),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(){return window}function HI(e){Xe().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(){return typeof Xe().WorkerGlobalScope<"u"&&typeof Xe().importScripts=="function"}async function zI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VI(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function jI(){return m_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="firebaseLocalStorageDb",KI=1,Vo="firebaseLocalStorage",b_="fbase_key";class Pr{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ta(e,t){return e.transaction([Vo],t?"readwrite":"readonly").objectStore(Vo)}function qI(){const e=indexedDB.deleteDatabase(__);return new Pr(e).toPromise()}function ec(){const e=indexedDB.open(__,KI);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Vo,{keyPath:b_})}catch(s){n(s)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Vo)?t(i):(i.close(),await qI(),t(await ec()))})})}async function xd(e,t,n){const i=Ta(e,!0).put({[b_]:t,value:n});return new Pr(i).toPromise()}async function GI(e,t){const n=Ta(e,!1).get(t),i=await new Pr(n).toPromise();return i===void 0?null:i.value}function Sd(e,t){const n=Ta(e,!0).delete(t);return new Pr(n).toPromise()}const YI=800,XI=3;class y_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ec(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>XI)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return m_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ca._getInstance(jI()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await zI(),!this.activeServiceWorker)return;this.sender=new UI(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||VI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await ec();return await xd(t,zo,"1"),await Sd(t,zo),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>xd(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>GI(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sd(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const r=Ta(s,!1).getAll();return new Pr(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:r}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}y_.type="LOCAL";const QI=y_;new Mr(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(e,t){return t?hn(t):(et(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends u_{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ji(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ji(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ji(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function JI(e){return OI(e.auth,new xu(e),e.bypassAuthState)}function ZI(e){const{auth:t,user:n}=e;return et(n,t,"internal-error"),PI(n,new xu(e),e.bypassAuthState)}async function tC(e){const{auth:t,user:n}=e;return et(n,t,"internal-error"),RI(n,new xu(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(t,n,i,s,r=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return JI;case"linkViaPopup":case"linkViaRedirect":return tC;case"reauthViaPopup":case"reauthViaRedirect":return ZI;default:tn(this.auth,"internal-error")}}resolve(t){bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=new Mr(2e3,1e4);async function X1(e,t,n){const i=Ia(e);YE(e,t,vu);const s=v_(i,n);return new ci(i,"signInViaPopup",t,s).executeNotNull()}class ci extends w_{constructor(t,n,i,s,r){super(t,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,ci.currentPopupAction&&ci.currentPopupAction.cancel(),ci.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return et(t,this.auth,"internal-error"),t}async onExecution(){bn(this.filter.length===1,"Popup operations only handle one event");const t=wu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ye(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ci.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ye(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,eC.get())};t()}}ci.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="pendingRedirect",_o=new Map;class iC extends w_{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=_o.get(this.auth._key());if(!t){try{const i=await sC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}_o.set(this.auth._key(),t)}return this.bypassAuthState||_o.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sC(e,t){const n=aC(t),i=oC(e);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function rC(e,t){_o.set(e._key(),t)}function oC(e){return hn(e._redirectPersistence)}function aC(e){return mo(nC,e.config.apiKey,e.name)}async function lC(e,t,n=!1){const i=Ia(e),s=v_(i,t),o=await new iC(i,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=10*60*1e3;class uC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!hC(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!x_(t)){const s=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ye(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=cC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ed(t))}saveEventToCache(t){this.cachedEventUids.add(Ed(t)),this.lastProcessedEventTime=Date.now()}}function Ed(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function x_({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function hC(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return x_(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(e,t={}){return Ss(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pC=/^https?/;async function gC(e){if(e.config.emulator)return;const{authorizedDomains:t}=await dC(e);for(const n of t)try{if(mC(n))return}catch{}tn(e,"unauthorized-domain")}function mC(e){const t=tc(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!pC.test(n))return!1;if(fC.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=new Mr(3e4,6e4);function Id(){const e=Xe().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function bC(e){return new Promise((t,n)=>{var i,s,r;function o(){Id(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Id(),n(Ye(e,"network-request-failed"))},timeout:_C.get()})}if(!((s=(i=Xe().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)t(gapi.iframes.getContext());else if(!((r=Xe().gapi)===null||r===void 0)&&r.load)o();else{const a=EI("iframefcb");return Xe()[a]=()=>{gapi.load?o():n(Ye(e,"network-request-failed"))},SI(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(t=>{throw bo=null,t})}let bo=null;function yC(e){return bo=bo||bC(e),bo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new Mr(5e3,15e3),wC="__/auth/iframe",xC="emulator/auth/iframe",SC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IC(e){const t=e.config;et(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?mu(t,xC):`https://${e.config.authDomain}/${wC}`,i={apiKey:t.apiKey,appName:e.name,v:xs},s=EC.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${ws(i).slice(1)}`}async function CC(e){const t=await yC(e),n=Xe().gapi;return et(n,e,"internal-error"),t.open({where:document.body,url:IC(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SC,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=Ye(e,"network-request-failed"),a=Xe().setTimeout(()=>{r(o)},vC.get());function l(){Xe().clearTimeout(a),s(i)}i.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kC=500,AC=600,MC="_blank",RC="http://localhost";class Cd{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PC(e,t,n,i=kC,s=AC){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},TC),{width:i.toString(),height:s.toString(),top:r,left:o}),c=ie().toLowerCase();n&&(a=n_(c)?MC:n),e_(c)&&(t=t||RC,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(pI(c)&&a!=="_self")return OC(t||"",a),new Cd(null);const h=window.open(t||"",a,u);et(h,e,"popup-blocked");try{h.focus()}catch{}return new Cd(h)}function OC(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="__/auth/handler",NC="emulator/auth/handler",LC=encodeURIComponent("fac");async function Td(e,t,n,i,s,r){et(e.config.authDomain,e,"auth-domain-config-required"),et(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:xs,eventId:s};if(t instanceof vu){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",jl(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[u,h]of Object.entries(r||{}))o[u]=h}if(t instanceof Rr){const u=t.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${LC}=${encodeURIComponent(l)}`:"";return`${FC(e)}?${ws(a).slice(1)}${c}`}function FC({config:e}){return e.emulator?mu(e,NC):`https://${e.authDomain}/${DC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al="webStorageSupport";class BC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=g_,this._completeRedirectFn=lC,this._overrideRedirectResult=rC}async _openPopup(t,n,i,s){var r;bn((r=this.eventManagers[t._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await Td(t,n,i,tc(),s);return PC(t,o,wu())}async _openRedirect(t,n,i,s){await this._originValidation(t);const r=await Td(t,n,i,tc(),s);return HI(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(bn(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await CC(t),i=new uC(t);return n.register("authEvent",s=>(et(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(al,{type:al},s=>{var r;const o=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[al];o!==void 0&&n(!!o),tn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gC(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return a_()||yu()||Ea()}}const $C=BC;var kd="@firebase/auth",Ad="1.5.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function HC(e){Ze(new Fe("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;et(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:l_(e)},c=new wI(i,s,r,l);return CI(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Ze(new Fe("auth-internal",t=>{const n=Ia(t.getProvider("auth").getImmediate());return(i=>new WC(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xe(kd,Ad,UC(e)),xe(kd,Ad,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=5*60,VC=dm("authIdTokenMaxAge")||zC;let Md=null;const jC=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>VC)return;const s=n==null?void 0:n.token;Md!==s&&(Md=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Q1(e=au()){const t=Ri(e,"auth");if(t.isInitialized())return t.getImmediate();const n=II(e,{popupRedirectResolver:$C,persistence:[QI,$I,g_]}),i=dm("authTokenSyncURL");if(i){const r=jC(i);NI(n,r,()=>r(n.currentUser)),DI(n,o=>r(o))}const s=um("auth");return s&&TI(n,`http://${s}`),n}HC("Browser");var Rd={};const Pd="@firebase/database",Od="1.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S_="";function KC(e){S_=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Xt(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:fr(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return xn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new qC(t)}}catch{}return new GC},ui=E_("localStorage"),nc=E_("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new wa("@firebase/database"),YC=function(){let e=1;return function(){return e++}}(),I_=function(e){const t=rx(e),n=new ex;n.update(t);const i=n.digest();return nu.encodeByteArray(i)},Or=function(...e){let t="";for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=Or.apply(null,i):typeof i=="object"?t+=Xt(i):t+=i,t+=" "}return t};let mi=null,Dd=!0;const XC=function(e,t){H(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Zi.logLevel=It.VERBOSE,mi=Zi.log.bind(Zi),t&&nc.set("logging_enabled",!0)):typeof e=="function"?mi=e:(mi=null,nc.remove("logging_enabled"))},Zt=function(...e){if(Dd===!0&&(Dd=!1,mi===null&&nc.get("logging_enabled")===!0&&XC(!0)),mi){const t=Or.apply(null,e);mi(t)}},Dr=function(e){return function(...t){Zt(e,...t)}},ic=function(...e){const t="FIREBASE INTERNAL ERROR: "+Or(...e);Zi.error(t)},yn=function(...e){const t=`FIREBASE FATAL ERROR: ${Or(...e)}`;throw Zi.error(t),new Error(t)},he=function(...e){const t="FIREBASE WARNING: "+Or(...e);Zi.warn(t)},QC=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&he("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},C_=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},JC=function(e){if(document.readyState==="complete")e();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ls="[MIN_NAME]",Ei="[MAX_NAME]",Es=function(e,t){if(e===t)return 0;if(e===ls||t===Ei)return-1;if(t===ls||e===Ei)return 1;{const n=Nd(e),i=Nd(t);return n!==null?i!==null?n-i===0?e.length-t.length:n-i:-1:i!==null?1:e<t?-1:1}},ZC=function(e,t){return e===t?0:e<t?-1:1},As=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Xt(t))},Su=function(e){if(typeof e!="object"||e===null)return Xt(e);const t=[];for(const i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)i!==0&&(n+=","),n+=Xt(t[i]),n+=":",n+=Su(e[t[i]]);return n+="}",n},T_=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let s=0;s<n;s+=t)s+t>n?i.push(e.substring(s,n)):i.push(e.substring(s,s+t));return i};function Se(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const k_=function(e){H(!C_(e),"Invalid JSON number");const t=11,n=52,i=(1<<t-1)-1;let s,r,o,a,l;e===0?(r=0,o=0,s=1/e===-1/0?1:0):(s=e<0,e=Math.abs(e),e>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),i),r=a+i,o=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(r=0,o=Math.round(e/Math.pow(2,1-i-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=t;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(s?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(u.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},tT=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},eT=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},nT=new RegExp("^-?(0*)\\d{1,10}$"),iT=-2147483648,sT=2147483647,Nd=function(e){if(nT.test(e)){const t=Number(e);if(t>=iT&&t<=sT)return t}return null},Is=function(e){try{e()}catch(t){setTimeout(()=>{const n=t.stack||"";throw he("Exception was thrown by user callback.",n),t},Math.floor(0))}},rT=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Qs=function(e,t){const n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){he(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(t,n,i){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(Zt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',he(t)}}class ts{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}ts.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu="5",A_="v",M_="s",R_="r",P_="f",O_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,D_="ls",N_="p",sc="ac",L_="websocket",F_="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(t,n,i,s,r=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ui.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ui.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function lT(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function $_(e,t,n){H(typeof t=="string","typeof type must == string"),H(typeof n=="object","typeof params must == object");let i;if(t===L_)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===F_)i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);lT(e)&&(n.ns=e.namespace);const s=[];return Se(n,(r,o)=>{s.push(r+"="+o)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.counters_={}}incrementCounter(t,n=1){xn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return Ww(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll={},cl={};function Iu(e){const t=e.toString();return ll[t]||(ll[t]=new cT),ll[t]}function uT(e,t){const n=e.toString();return cl[n]||(cl[n]=t()),cl[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&Is(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="start",dT="close",fT="pLPCommand",pT="pRTLPCB",W_="id",U_="pw",H_="ser",gT="cb",mT="seg",_T="ts",bT="d",yT="dframe",z_=1870,V_=30,vT=z_-V_,wT=25e3,xT=3e4;class Vi{constructor(t,n,i,s,r,o,a){this.connId=t,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Dr(t),this.stats_=Iu(n),this.urlFn=l=>(this.appCheckToken&&(l[sc]=this.appCheckToken),$_(n,F_,l))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new hT(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(xT)),JC(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Cu((...r)=>{const[o,a,l,c,u]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Ld)this.id=a,this.password=l;else if(o===dT)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{const[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[Ld]="t",i[H_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[gT]=this.scriptTagHolder.uniqueCallbackIdentifier),i[A_]=Eu,this.transportSessionId&&(i[M_]=this.transportSessionId),this.lastSessionId&&(i[D_]=this.lastSessionId),this.applicationId&&(i[N_]=this.applicationId),this.appCheckToken&&(i[sc]=this.appCheckToken),typeof location<"u"&&location.hostname&&O_.test(location.hostname)&&(i[R_]=P_);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Vi.forceAllow_=!0}static forceDisallow(){Vi.forceDisallow_=!0}static isAvailable(){return Vi.forceAllow_?!0:!Vi.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!tT()&&!eT()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=Xt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=lm(n),s=T_(i,vT);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[yT]="t",i[W_]=t,i[U_]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=Xt(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Cu{constructor(t,n,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=YC(),window[fT+this.uniqueCallbackIdentifier]=t,window[pT+this.uniqueCallbackIdentifier]=n,this.myIFrame=Cu.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Zt("frame writing exception"),a.stack&&Zt(a.stack),Zt(a)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Zt("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[W_]=this.myID,t[U_]=this.myPW,t[H_]=this.currentSerial;let n=this.urlFn(t),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+V_+i.length<=z_;){const o=this.pendingSegs.shift();i=i+"&"+mT+s+"="+o.seg+"&"+_T+s+"="+o.ts+"&"+bT+s+"="+o.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,i){this.pendingSegs.push({seg:t,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(wT)),r=()=>{clearTimeout(s),i()};this.addTag(t,r)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Zt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=16384,ET=45e3;let jo=null;typeof MozWebSocket<"u"?jo=MozWebSocket:typeof WebSocket<"u"&&(jo=WebSocket);class ke{constructor(t,n,i,s,r,o,a){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Dr(this.connId),this.stats_=Iu(n),this.connURL=ke.connectionURL_(n,o,a,s,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,i,s,r){const o={};return o[A_]=Eu,typeof location<"u"&&location.hostname&&O_.test(location.hostname)&&(o[R_]=P_),n&&(o[M_]=n),i&&(o[D_]=i),s&&(o[sc]=s),r&&(o[N_]=r),$_(t,L_,o)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ui.set("previous_websocket_failure",!0);try{let i;gm(),this.mySock=new jo(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){ke.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&jo!==null&&!ke.forceDisallow_}static previouslyFailed(){return ui.isInMemoryStorage||ui.get("previous_websocket_failure")===!0}markConnectionHealthy(){ui.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=fr(n);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(H(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const n=Xt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=T_(n,ST);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ET))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ke.responsesRequiredToBeHealthy=2;ke.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Vi,ke]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const n=ke&&ke.isAvailable();let i=n&&!ke.previouslyFailed();if(t.webSocketOnly&&(n||he("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ke];else{const s=this.transports_=[];for(const r of br.ALL_TRANSPORTS)r&&r.isAvailable()&&s.push(r);br.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}br.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=6e4,CT=5e3,TT=10*1024,kT=100*1024,ul="t",Fd="d",AT="s",Bd="r",MT="e",$d="o",Wd="a",Ud="n",Hd="p",RT="h";class PT{constructor(t,n,i,s,r,o,a,l,c,u){this.id=t,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Dr("c:"+this.id+":"),this.transportManager_=new br(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=Qs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>kT?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>TT?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(ul in t){const n=t[ul];n===Wd?this.upgradeIfSecondaryHealthy_():n===Bd?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===$d&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=As("t",t),i=As("d",t);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Hd,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Wd,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Ud,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=As("t",t),i=As("d",t);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=As(ul,t);if(Fd in t){const i=t[Fd];if(n===RT){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Ud){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===AT?this.onConnectionShutdown_(i):n===Bd?this.onReset_(i):n===MT?ic("Server Error: "+i):n===$d?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ic("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,i=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Eu!==i&&he("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Qs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(IT))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(CT))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Hd,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ui.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{put(t,n,i,s){}merge(t,n,i,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,i){}onDisconnectMerge(t,n,i){}onDisconnectCancel(t,n){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(t){this.allowedEvents_=t,this.listeners_={},H(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(t,n,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:i});const s=this.getInitialEvent(t);s&&n.apply(i,s)}off(t,n,i){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(t){H(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends K_{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!su()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ko}getInitialEvent(t){return H(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd=32,Vd=768;class Dt{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function Ct(){return new Dt("")}function ut(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Kn(e){return e.pieces_.length-e.pieceNum_}function Mt(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Dt(e.pieces_,t)}function q_(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function OT(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function G_(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Y_(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Dt(t,0)}function Ht(e,t){const n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof Dt)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{const i=t.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new Dt(n,0)}function dt(e){return e.pieceNum_>=e.pieces_.length}function we(e,t){const n=ut(e),i=ut(t);if(n===null)return t;if(n===i)return we(Mt(e),Mt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function X_(e,t){if(Kn(e)!==Kn(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Pe(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(Kn(e)>Kn(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class DT{constructor(t,n){this.errorPrefix_=n,this.parts_=G_(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=va(this.parts_[i]);Q_(this)}}function NT(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=va(t),Q_(e)}function LT(e){const t=e.parts_.pop();e.byteLength_-=va(t),e.parts_.length>0&&(e.byteLength_-=1)}function Q_(e){if(e.byteLength_>Vd)throw new Error(e.errorPrefix_+"has a key path longer than "+Vd+" bytes ("+e.byteLength_+").");if(e.parts_.length>zd)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+zd+") or object contains a cycle "+ii(e))}function ii(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends K_{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Tu}getInitialEvent(t){return H(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=1e3,FT=60*5*1e3,jd=30*1e3,BT=1.3,$T=3e4,WT="server_kill",Kd=3;class _n extends j_{constructor(t,n,i,s,r,o,a,l){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=_n.nextPersistentConnectionId_++,this.log_=Dr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ms,this.maxReconnectDelay_=FT,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!gm())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Tu.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Ko.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,i){const s=++this.requestNumber_,r={r:s,a:t,b:n};this.log_(Xt(r)),H(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const n=new ya,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(t,n,i,s){this.initConnection_();const r=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),H(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),H(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:t,tag:i};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(t){const n=t.query,i=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+i+" for "+s);const r={p:i},o="q";t.tag&&(r.q=n._queryObject,r.t=t.tag),r.h=t.hashFn(),this.sendRequest(o,r,a=>{const l=a.d,c=a.s;_n.warnOnListenWarnings_(l,n),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(c,l))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&xn(t,"w")){const i=os(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();he(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||tx(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=jd)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=Zw(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,s=>{const r=s.s,o=s.d||"error";this.authToken_===t&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,i=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(t,n){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),H(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,n)}sendUnlisten_(t,n,i,s){this.log_("Unlisten on "+t+" for "+n);const r={p:t},o="n";s&&(r.q=i,r.t=s),this.sendRequest(o,r)}onDisconnectPut(t,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:i})}onDisconnectMerge(t,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:i})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,i,s){const r={p:n,d:i};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(t,n,i,s){this.putInternal("p",t,n,i,s)}merge(t,n,i,s){this.putInternal("m",t,n,i,s)}putInternal(t,n,i,s,r){this.initConnection_();const o={p:n,d:i};r!==void 0&&(o.h=r),this.outstandingPuts_.push({action:t,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,i,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(r.s,r.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const r=i.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Xt(t));const n=t.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):ic("Unrecognized action received from server: "+Xt(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){H(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ms,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ms,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>$T&&(this.reconnectDelay_=Ms),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*BT)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+_n.nextConnectionId_++,r=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,i())},c=function(h){H(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Zt("getToken() completed but was canceled"):(Zt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new PT(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,i,f=>{he(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(WT)},r))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&he(h),l())}}}interrupt(t){Zt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Zt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],jl(this.interruptReasons_)&&(this.reconnectDelay_=Ms,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let i;n?i=n.map(r=>Su(r)).join("$"):i="default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,n){const i=new Dt(t).toString();let s;if(this.listens.has(i)){const r=this.listens.get(i);s=r.get(n),r.delete(n),r.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,n){Zt("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Kd&&(this.reconnectDelay_=jd,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){Zt("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Kd&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+S_.replace(/\./g,"-")]=1,su()?t["framework.cordova"]=1:pm()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Ko.getInstance().currentlyOnline();return jl(this.interruptReasons_)&&t}}_n.nextPersistentConnectionId_=0;_n.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new ft(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const i=new ft(ls,t),s=new ft(ls,n);return this.compare(i,s)!==0}minPost(){return ft.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qr;class J_ extends ka{static get __EMPTY_NODE(){return qr}static set __EMPTY_NODE(t){qr=t}compare(t,n){return Es(t.name,n.name)}isDefinedOn(t){throw vs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return ft.MIN}maxPost(){return new ft(Ei,qr)}makePost(t,n){return H(typeof t=="string","KeyIndex indexValue must always be a string."),new ft(t,qr)}toString(){return".key"}}const es=new J_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(t,n,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=n?i(t.key,n):1,s&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class jt{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??jt.RED,this.left=s??ce.EMPTY_NODE,this.right=r??ce.EMPTY_NODE}copy(t,n,i,s,r){return new jt(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return r<0?s=s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ce.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let i,s;if(i=this,n(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(t,i.key)===0){if(i.right.isEmpty())return ce.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}jt.RED=!0;jt.BLACK=!1;class UT{copy(t,n,i,s,r){return this}insert(t,n,i){return new jt(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ce{constructor(t,n=ce.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new ce(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,jt.BLACK,null,null))}remove(t){return new ce(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,jt.BLACK,null,null))}get(t){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(t,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(t){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(t,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Gr(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Gr(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Gr(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Gr(this.root_,null,this.comparator_,!0,t)}}ce.EMPTY_NODE=new UT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(e,t){return Es(e.name,t.name)}function ku(e,t){return Es(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rc;function zT(e){rc=e}const Z_=function(e){return typeof e=="number"?"number:"+k_(e):"string:"+e},tb=function(e){if(e.isLeafNode()){const t=e.val();H(typeof t=="string"||typeof t=="number"||typeof t=="object"&&xn(t,".sv"),"Priority must be a string or number.")}else H(e===rc||e.isEmpty(),"priority of unexpected type.");H(e===rc||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd;class Vt{constructor(t,n=Vt.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,H(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),tb(this.priorityNode_)}static set __childrenNodeConstructor(t){qd=t}static get __childrenNodeConstructor(){return qd}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Vt(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Vt.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return dt(t)?this:ut(t)===".priority"?this.priorityNode_:Vt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:Vt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const i=ut(t);return i===null?n:n.isEmpty()&&i!==".priority"?this:(H(i!==".priority"||Kn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Vt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Mt(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Z_(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=k_(this.value_):t+=this.value_,this.lazyHash_=I_(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Vt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Vt.__childrenNodeConstructor?-1:(H(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,i=typeof this.value_,s=Vt.VALUE_TYPE_ORDER.indexOf(n),r=Vt.VALUE_TYPE_ORDER.indexOf(i);return H(s>=0,"Unknown leaf type: "+n),H(r>=0,"Unknown leaf type: "+i),s===r?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:r-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Vt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eb,nb;function VT(e){eb=e}function jT(e){nb=e}class KT extends ka{compare(t,n){const i=t.node.getPriority(),s=n.node.getPriority(),r=i.compareTo(s);return r===0?Es(t.name,n.name):r}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return ft.MIN}maxPost(){return new ft(Ei,new Vt("[PRIORITY-POST]",nb))}makePost(t,n){const i=eb(t);return new ft(n,new Vt("[PRIORITY-POST]",i))}toString(){return".priority"}}const ee=new KT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=Math.log(2);class GT{constructor(t){const n=r=>parseInt(Math.log(r)/qT,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const s=i(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const qo=function(e,t,n,i){e.sort(t);const s=function(l,c){const u=c-l;let h,d;if(u===0)return null;if(u===1)return h=e[l],d=n?n(h):h,new jt(d,h.node,jt.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=s(l,f),g=s(f+1,c);return h=e[f],d=n?n(h):h,new jt(d,h.node,jt.BLACK,p,g)}},r=function(l){let c=null,u=null,h=e.length;const d=function(p,g){const m=h-p,y=h;h-=p;const v=s(m+1,y),S=e[m],x=n?n(S):S;f(new jt(x,S.node,g,null,v))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const g=l.nextBitIsOne(),m=Math.pow(2,l.count-(p+1));g?d(m,jt.BLACK):(d(m,jt.BLACK),d(m,jt.RED))}return u},o=new GT(e.length),a=r(o);return new ce(i||t,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hl;const $i={};class dn{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return H($i&&ee,"ChildrenNode.ts has not been loaded"),hl=hl||new dn({".priority":$i},{".priority":ee}),hl}get(t){const n=os(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof ce?n:null}hasIndex(t){return xn(this.indexSet_,t.toString())}addIndex(t,n){H(t!==es,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const r=n.getIterator(ft.Wrap);let o=r.getNext();for(;o;)s=s||t.isDefinedOn(o.node),i.push(o),o=r.getNext();let a;s?a=qo(i,t.getCompare()):a=$i;const l=t.toString(),c=Object.assign({},this.indexSet_);c[l]=t;const u=Object.assign({},this.indexes_);return u[l]=a,new dn(u,c)}addToIndexes(t,n){const i=Lo(this.indexes_,(s,r)=>{const o=os(this.indexSet_,r);if(H(o,"Missing index implementation for "+r),s===$i)if(o.isDefinedOn(t.node)){const a=[],l=n.getIterator(ft.Wrap);let c=l.getNext();for(;c;)c.name!==t.name&&a.push(c),c=l.getNext();return a.push(t),qo(a,o.getCompare())}else return $i;else{const a=n.get(t.name);let l=s;return a&&(l=l.remove(new ft(t.name,a))),l.insert(t,t.node)}});return new dn(i,this.indexSet_)}removeFromIndexes(t,n){const i=Lo(this.indexes_,s=>{if(s===$i)return s;{const r=n.get(t.name);return r?s.remove(new ft(t.name,r)):s}});return new dn(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rs;class wt{constructor(t,n,i){this.children_=t,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&tb(this.priorityNode_),this.children_.isEmpty()&&H(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Rs||(Rs=new wt(new ce(ku),null,dn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Rs}updatePriority(t){return this.children_.isEmpty()?this:new wt(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?Rs:n}}getChild(t){const n=ut(t);return n===null?this:this.getImmediateChild(n).getChild(Mt(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(H(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const i=new ft(t,n);let s,r;n.isEmpty()?(s=this.children_.remove(t),r=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,n),r=this.indexMap_.addToIndexes(i,this.children_));const o=s.isEmpty()?Rs:this.priorityNode_;return new wt(s,o,r)}}updateChild(t,n){const i=ut(t);if(i===null)return n;{H(ut(t)!==".priority"||Kn(t)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Mt(t),n);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let i=0,s=0,r=!0;if(this.forEachChild(ee,(o,a)=>{n[o]=a.val(t),i++,r&&wt.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):r=!1}),!t&&r&&s<2*i){const o=[];for(const a in n)o[a]=n[a];return o}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Z_(this.getPriority().val())+":"),this.forEachChild(ee,(n,i)=>{const s=i.hash();s!==""&&(t+=":"+n+":"+s)}),this.lazyHash_=t===""?"":I_(t)}return this.lazyHash_}getPredecessorChildName(t,n,i){const s=this.resolveIndex_(i);if(s){const r=s.getPredecessorKey(new ft(t,n));return r?r.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new ft(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new ft(n,this.children_.get(n)):null}forEachChild(t,n){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,ft.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,t)<0;)s.getNext(),r=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,ft.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,t)>0;)s.getNext(),r=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Nr?-1:0}withIndex(t){if(t===es||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new wt(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===es||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(ee),s=n.getIterator(ee);let r=i.getNext(),o=s.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=i.getNext(),o=s.getNext()}return r===null&&o===null}else return!1;else return!1}}resolveIndex_(t){return t===es?null:this.indexMap_.get(t.toString())}}wt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class YT extends wt{constructor(){super(new ce(ku),wt.EMPTY_NODE,dn.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return wt.EMPTY_NODE}isEmpty(){return!1}}const Nr=new YT;Object.defineProperties(ft,{MIN:{value:new ft(ls,wt.EMPTY_NODE)},MAX:{value:new ft(Ei,Nr)}});J_.__EMPTY_NODE=wt.EMPTY_NODE;Vt.__childrenNodeConstructor=wt;zT(Nr);jT(Nr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=!0;function Gt(e,t=null){if(e===null)return wt.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),H(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const n=e;return new Vt(n,Gt(t))}if(!(e instanceof Array)&&XT){const n=[];let i=!1;if(Se(e,(o,a)=>{if(o.substring(0,1)!=="."){const l=Gt(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new ft(o,l)))}}),n.length===0)return wt.EMPTY_NODE;const r=qo(n,HT,o=>o.name,ku);if(i){const o=qo(n,ee.getCompare());return new wt(r,Gt(t),new dn({".priority":o},{".priority":ee}))}else return new wt(r,Gt(t),dn.Default)}else{let n=wt.EMPTY_NODE;return Se(e,(i,s)=>{if(xn(e,i)&&i.substring(0,1)!=="."){const r=Gt(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(i,r))}}),n.updatePriority(Gt(t))}}VT(Gt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT extends ka{constructor(t){super(),this.indexPath_=t,H(!dt(t)&&ut(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const i=this.extractChild(t.node),s=this.extractChild(n.node),r=i.compareTo(s);return r===0?Es(t.name,n.name):r}makePost(t,n){const i=Gt(t),s=wt.EMPTY_NODE.updateChild(this.indexPath_,i);return new ft(n,s)}maxPost(){const t=wt.EMPTY_NODE.updateChild(this.indexPath_,Nr);return new ft(Ei,t)}toString(){return G_(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT extends ka{compare(t,n){const i=t.node.compareTo(n.node);return i===0?Es(t.name,n.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return ft.MIN}maxPost(){return ft.MAX}makePost(t,n){const i=Gt(t);return new ft(n,i)}toString(){return".value"}}const ZT=new JT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(e){return{type:"value",snapshotNode:e}}function ek(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function nk(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Gd(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function ik(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ee}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return H(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return H(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ls}hasEnd(){return this.endSet_}getIndexEndValue(){return H(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return H(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ei}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return H(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ee}copy(){const t=new Au;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Yd(e){const t={};if(e.isDefault())return t;let n;if(e.index_===ee?n="$priority":e.index_===ZT?n="$value":e.index_===es?n="$key":(H(e.index_ instanceof QT,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Xt(n),e.startSet_){const i=e.startAfterSet_?"startAfter":"startAt";t[i]=Xt(e.indexStartValue_),e.startNameSet_&&(t[i]+=","+Xt(e.indexStartName_))}if(e.endSet_){const i=e.endBeforeSet_?"endBefore":"endAt";t[i]=Xt(e.indexEndValue_),e.endNameSet_&&(t[i]+=","+Xt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Xd(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==ee&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go extends j_{constructor(t,n,i,s){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=Dr("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(H(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,i,s){const r=t._path.toString();this.log_("Listen called for "+r+" "+t._queryIdentifier);const o=Go.getListenId_(t,i),a={};this.listens_[o]=a;const l=Yd(t._queryParams);this.restRequest_(r+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(r,h,!1,i),os(this.listens_,o)===a){let d;c?c===401?d="permission_denied":d="rest_error:"+c:d="ok",s(d,null)}})}unlisten(t,n){const i=Go.getListenId_(t,n);delete this.listens_[i]}get(t){const n=Yd(t._queryParams),i=t._path.toString(),s=new ya;return this.restRequest_(i+".json",n,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(i,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(t){}restRequest_(t,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+ws(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=fr(a.responseText)}catch{he("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&he("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(){this.rootNode_=wt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(){return{value:null,children:new Map}}function ib(e,t,n){if(dt(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{const i=ut(t);e.children.has(i)||e.children.set(i,Yo());const s=e.children.get(i);t=Mt(t),ib(s,t,n)}}function oc(e,t,n){e.value!==null?n(t,e.value):rk(e,(i,s)=>{const r=new Dt(t.toString()+"/"+i);oc(s,r,n)})}function rk(e,t){e.children.forEach((n,i)=>{t(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&Se(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=10*1e3,ak=30*1e3,lk=5*60*1e3;class ck{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new ok(t);const i=Qd+(ak-Qd)*Math.random();Qs(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),n={};let i=!1;Se(t,(s,r)=>{r>0&&xn(this.statsToReport_,s)&&(n[s]=r,i=!0)}),i&&this.server_.reportStats(n),Qs(this.reportStats_.bind(this),Math.floor(Math.random()*2*lk))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ke||(Ke={}));function sb(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function rb(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ob(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(t,n,i){this.path=t,this.affectedTree=n,this.revert=i,this.type=Ke.ACK_USER_WRITE,this.source=sb()}operationForChild(t){if(dt(this.path)){if(this.affectedTree.value!=null)return H(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Dt(t));return new Xo(Ct(),n,this.revert)}}else return H(ut(this.path)===t,"operationForChild called for unrelated child."),new Xo(Mt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t,n,i){this.source=t,this.path=n,this.snap=i,this.type=Ke.OVERWRITE}operationForChild(t){return dt(this.path)?new Ii(this.source,Ct(),this.snap.getImmediateChild(t)):new Ii(this.source,Mt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(t,n,i){this.source=t,this.path=n,this.children=i,this.type=Ke.MERGE}operationForChild(t){if(dt(this.path)){const n=this.children.subtree(new Dt(t));return n.isEmpty()?null:n.value?new Ii(this.source,Ct(),n.value):new yr(this.source,Ct(),n)}else return H(ut(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new yr(this.source,Mt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(t,n,i){this.node_=t,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(dt(t))return this.isFullyInitialized()&&!this.filtered_;const n=ut(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}function uk(e,t,n,i){const s=[],r=[];return t.forEach(o=>{o.type==="child_changed"&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(ik(o.childName,o.snapshotNode))}),Ps(e,s,"child_removed",t,i,n),Ps(e,s,"child_added",t,i,n),Ps(e,s,"child_moved",r,i,n),Ps(e,s,"child_changed",t,i,n),Ps(e,s,"value",t,i,n),s}function Ps(e,t,n,i,s,r){const o=i.filter(a=>a.type===n);o.sort((a,l)=>dk(e,a,l)),o.forEach(a=>{const l=hk(e,a,r);s.forEach(c=>{c.respondsTo(a.type)&&t.push(c.createEvent(l,e.query_))})})}function hk(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function dk(e,t,n){if(t.childName==null||n.childName==null)throw vs("Should only compare child_ events.");const i=new ft(t.childName,t.snapshotNode),s=new ft(n.childName,n.snapshotNode);return e.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(e,t){return{eventCache:e,serverCache:t}}function Js(e,t,n,i){return ab(new Mu(t,n,i),e.serverCache)}function lb(e,t,n,i){return ab(e.eventCache,new Mu(t,n,i))}function ac(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ci(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dl;const fk=()=>(dl||(dl=new ce(ZC)),dl);class At{constructor(t,n=fk()){this.value=t,this.children=n}static fromObject(t){let n=new At(null);return Se(t,(i,s)=>{n=n.set(new Dt(i),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:Ct(),value:this.value};if(dt(t))return null;{const i=ut(t),s=this.children.get(i);if(s!==null){const r=s.findRootMostMatchingPathAndValue(Mt(t),n);return r!=null?{path:Ht(new Dt(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(dt(t))return this;{const n=ut(t),i=this.children.get(n);return i!==null?i.subtree(Mt(t)):new At(null)}}set(t,n){if(dt(t))return new At(n,this.children);{const i=ut(t),r=(this.children.get(i)||new At(null)).set(Mt(t),n),o=this.children.insert(i,r);return new At(this.value,o)}}remove(t){if(dt(t))return this.children.isEmpty()?new At(null):new At(null,this.children);{const n=ut(t),i=this.children.get(n);if(i){const s=i.remove(Mt(t));let r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new At(null):new At(this.value,r)}else return this}}get(t){if(dt(t))return this.value;{const n=ut(t),i=this.children.get(n);return i?i.get(Mt(t)):null}}setTree(t,n){if(dt(t))return n;{const i=ut(t),r=(this.children.get(i)||new At(null)).setTree(Mt(t),n);let o;return r.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,r),new At(this.value,o)}}fold(t){return this.fold_(Ct(),t)}fold_(t,n){const i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(Ht(t,s),n)}),n(t,this.value,i)}findOnPath(t,n){return this.findOnPath_(t,Ct(),n)}findOnPath_(t,n,i){const s=this.value?i(n,this.value):!1;if(s)return s;if(dt(t))return null;{const r=ut(t),o=this.children.get(r);return o?o.findOnPath_(Mt(t),Ht(n,r),i):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,Ct(),n)}foreachOnPath_(t,n,i){if(dt(t))return this;{this.value&&i(n,this.value);const s=ut(t),r=this.children.get(s);return r?r.foreachOnPath_(Mt(t),Ht(n,s),i):new At(null)}}foreach(t){this.foreach_(Ct(),t)}foreach_(t,n){this.children.inorderTraversal((i,s)=>{s.foreach_(Ht(t,i),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,i)=>{i.value&&t(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t){this.writeTree_=t}static empty(){return new Ne(new At(null))}}function Zs(e,t,n){if(dt(t))return new Ne(new At(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(i!=null){const s=i.path;let r=i.value;const o=we(s,t);return r=r.updateChild(o,n),new Ne(e.writeTree_.set(s,r))}else{const s=new At(n),r=e.writeTree_.setTree(t,s);return new Ne(r)}}}function Jd(e,t,n){let i=e;return Se(n,(s,r)=>{i=Zs(i,Ht(t,s),r)}),i}function Zd(e,t){if(dt(t))return Ne.empty();{const n=e.writeTree_.setTree(t,new At(null));return new Ne(n)}}function lc(e,t){return Pi(e,t)!=null}function Pi(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(we(n.path,t)):null}function tf(e){const t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ee,(i,s)=>{t.push(new ft(i,s))}):e.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&t.push(new ft(i,s.value))}),t}function zn(e,t){if(dt(t))return e;{const n=Pi(e,t);return n!=null?new Ne(new At(n)):new Ne(e.writeTree_.subtree(t))}}function cc(e){return e.writeTree_.isEmpty()}function cs(e,t){return cb(Ct(),e.writeTree_,t)}function cb(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((s,r)=>{s===".priority"?(H(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):n=cb(Ht(e,s),r,n)}),!n.getChild(e).isEmpty()&&i!==null&&(n=n.updateChild(Ht(e,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(e,t){return gb(t,e)}function pk(e,t,n,i,s){H(i>e.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:s}),s&&(e.visibleWrites=Zs(e.visibleWrites,t,n)),e.lastWriteId=i}function gk(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}function mk(e,t){const n=e.allWrites.findIndex(a=>a.writeId===t);H(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let s=i.visible,r=!1,o=e.allWrites.length-1;for(;s&&o>=0;){const a=e.allWrites[o];a.visible&&(o>=n&&_k(a,i.path)?s=!1:Pe(i.path,a.path)&&(r=!0)),o--}if(s){if(r)return bk(e),!0;if(i.snap)e.visibleWrites=Zd(e.visibleWrites,i.path);else{const a=i.children;Se(a,l=>{e.visibleWrites=Zd(e.visibleWrites,Ht(i.path,l))})}return!0}else return!1}function _k(e,t){if(e.snap)return Pe(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Pe(Ht(e.path,n),t))return!0;return!1}function bk(e){e.visibleWrites=hb(e.allWrites,yk,Ct()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function yk(e){return e.visible}function hb(e,t,n){let i=Ne.empty();for(let s=0;s<e.length;++s){const r=e[s];if(t(r)){const o=r.path;let a;if(r.snap)Pe(n,o)?(a=we(n,o),i=Zs(i,a,r.snap)):Pe(o,n)&&(a=we(o,n),i=Zs(i,Ct(),r.snap.getChild(a)));else if(r.children){if(Pe(n,o))a=we(n,o),i=Jd(i,a,r.children);else if(Pe(o,n))if(a=we(o,n),dt(a))i=Jd(i,Ct(),r.children);else{const l=os(r.children,ut(a));if(l){const c=l.getChild(Mt(a));i=Zs(i,Ct(),c)}}}else throw vs("WriteRecord should have .snap or .children")}}return i}function db(e,t,n,i,s){if(!i&&!s){const r=Pi(e.visibleWrites,t);if(r!=null)return r;{const o=zn(e.visibleWrites,t);if(cc(o))return n;if(n==null&&!lc(o,Ct()))return null;{const a=n||wt.EMPTY_NODE;return cs(o,a)}}}else{const r=zn(e.visibleWrites,t);if(!s&&cc(r))return n;if(!s&&n==null&&!lc(r,Ct()))return null;{const o=function(c){return(c.visible||s)&&(!i||!~i.indexOf(c.writeId))&&(Pe(c.path,t)||Pe(t,c.path))},a=hb(e.allWrites,o,t),l=n||wt.EMPTY_NODE;return cs(a,l)}}}function vk(e,t,n){let i=wt.EMPTY_NODE;const s=Pi(e.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(ee,(r,o)=>{i=i.updateImmediateChild(r,o)}),i;if(n){const r=zn(e.visibleWrites,t);return n.forEachChild(ee,(o,a)=>{const l=cs(zn(r,new Dt(o)),a);i=i.updateImmediateChild(o,l)}),tf(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const r=zn(e.visibleWrites,t);return tf(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function wk(e,t,n,i,s){H(i||s,"Either existingEventSnap or existingServerSnap must exist");const r=Ht(t,n);if(lc(e.visibleWrites,r))return null;{const o=zn(e.visibleWrites,r);return cc(o)?s.getChild(n):cs(o,s.getChild(n))}}function xk(e,t,n,i){const s=Ht(t,n),r=Pi(e.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(n)){const o=zn(e.visibleWrites,s);return cs(o,i.getNode().getImmediateChild(n))}else return null}function Sk(e,t){return Pi(e.visibleWrites,t)}function Ek(e,t,n,i,s,r,o){let a;const l=zn(e.visibleWrites,t),c=Pi(l,Ct());if(c!=null)a=c;else if(n!=null)a=cs(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=r?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let f=d.getNext();for(;f&&u.length<s;)h(f,i)!==0&&u.push(f),f=d.getNext();return u}else return[]}function Ik(){return{visibleWrites:Ne.empty(),allWrites:[],lastWriteId:-1}}function uc(e,t,n,i){return db(e.writeTree,e.treePath,t,n,i)}function fb(e,t){return vk(e.writeTree,e.treePath,t)}function ef(e,t,n,i){return wk(e.writeTree,e.treePath,t,n,i)}function Qo(e,t){return Sk(e.writeTree,Ht(e.treePath,t))}function Ck(e,t,n,i,s,r){return Ek(e.writeTree,e.treePath,t,n,i,s,r)}function Ru(e,t,n){return xk(e.writeTree,e.treePath,t,n)}function pb(e,t){return gb(Ht(e.treePath,t),e.writeTree)}function gb(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,i=t.childName;H(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),H(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(i,Gd(i,t.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(i,nk(i,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(i,ek(i,t.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(i,Gd(i,t.snapshotNode,s.oldSnap));else throw vs("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{getCompleteChild(t){return null}getChildAfterChild(t,n,i){return null}}const mb=new kk;class Pu{constructor(t,n,i=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const i=this.optCompleteServerCache_!=null?new Mu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ru(this.writes_,t,i)}}getChildAfterChild(t,n,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ci(this.viewCache_),r=Ck(this.writes_,s,n,1,i,t);return r.length===0?null:r[0]}}function Ak(e,t){H(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),H(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Mk(e,t,n,i,s){const r=new Tk;let o,a;if(n.type===Ke.OVERWRITE){const c=n;c.source.fromUser?o=hc(e,t,c.path,c.snap,i,s,r):(H(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!dt(c.path),o=Jo(e,t,c.path,c.snap,i,s,a,r))}else if(n.type===Ke.MERGE){const c=n;c.source.fromUser?o=Pk(e,t,c.path,c.children,i,s,r):(H(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),o=dc(e,t,c.path,c.children,i,s,a,r))}else if(n.type===Ke.ACK_USER_WRITE){const c=n;c.revert?o=Nk(e,t,c.path,i,s,r):o=Ok(e,t,c.path,c.affectedTree,i,s,r)}else if(n.type===Ke.LISTEN_COMPLETE)o=Dk(e,t,n.path,i,r);else throw vs("Unknown operation type: "+n.type);const l=r.getChanges();return Rk(t,o,l),{viewCache:o,changes:l}}function Rk(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=ac(e);(n.length>0||!e.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(tk(ac(t)))}}function _b(e,t,n,i,s,r){const o=t.eventCache;if(Qo(i,n)!=null)return t;{let a,l;if(dt(n))if(H(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const c=Ci(t),u=c instanceof wt?c:wt.EMPTY_NODE,h=fb(i,u);a=e.filter.updateFullNode(t.eventCache.getNode(),h,r)}else{const c=uc(i,Ci(t));a=e.filter.updateFullNode(t.eventCache.getNode(),c,r)}else{const c=ut(n);if(c===".priority"){H(Kn(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=t.serverCache.getNode();const h=ef(i,n,u,l);h!=null?a=e.filter.updatePriority(u,h):a=o.getNode()}else{const u=Mt(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const d=ef(i,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(c).updateChild(u,d):h=o.getNode().getImmediateChild(c)}else h=Ru(i,c,t.serverCache);h!=null?a=e.filter.updateChild(o.getNode(),c,h,u,s,r):a=o.getNode()}}return Js(t,a,o.isFullyInitialized()||dt(n),e.filter.filtersNodes())}}function Jo(e,t,n,i,s,r,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(dt(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),f,null)}else{const f=ut(n);if(!l.isCompleteForPath(n)&&Kn(n)>1)return t;const p=Mt(n),m=l.getNode().getImmediateChild(f).updateChild(p,i);f===".priority"?c=u.updatePriority(l.getNode(),m):c=u.updateChild(l.getNode(),f,m,p,mb,null)}const h=lb(t,c,l.isFullyInitialized()||dt(n),u.filtersNodes()),d=new Pu(s,h,r);return _b(e,h,n,s,d,a)}function hc(e,t,n,i,s,r,o){const a=t.eventCache;let l,c;const u=new Pu(s,t,r);if(dt(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,o),l=Js(t,c,!0,e.filter.filtersNodes());else{const h=ut(n);if(h===".priority")c=e.filter.updatePriority(t.eventCache.getNode(),i),l=Js(t,c,a.isFullyInitialized(),a.isFiltered());else{const d=Mt(n),f=a.getNode().getImmediateChild(h);let p;if(dt(d))p=i;else{const g=u.getCompleteChild(h);g!=null?q_(d)===".priority"&&g.getChild(Y_(d)).isEmpty()?p=g:p=g.updateChild(d,i):p=wt.EMPTY_NODE}if(f.equals(p))l=t;else{const g=e.filter.updateChild(a.getNode(),h,p,d,u,o);l=Js(t,g,a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function nf(e,t){return e.eventCache.isCompleteForChild(t)}function Pk(e,t,n,i,s,r,o){let a=t;return i.foreach((l,c)=>{const u=Ht(n,l);nf(t,ut(u))&&(a=hc(e,a,u,c,s,r,o))}),i.foreach((l,c)=>{const u=Ht(n,l);nf(t,ut(u))||(a=hc(e,a,u,c,s,r,o))}),a}function sf(e,t,n){return n.foreach((i,s)=>{t=t.updateChild(i,s)}),t}function dc(e,t,n,i,s,r,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l=t,c;dt(n)?c=i:c=new At(null).setTree(n,i);const u=t.serverCache.getNode();return c.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const f=t.serverCache.getNode().getImmediateChild(h),p=sf(e,f,d);l=Jo(e,l,new Dt(h),p,s,r,o,a)}}),c.children.inorderTraversal((h,d)=>{const f=!t.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!f){const p=t.serverCache.getNode().getImmediateChild(h),g=sf(e,p,d);l=Jo(e,l,new Dt(h),g,s,r,o,a)}}),l}function Ok(e,t,n,i,s,r,o){if(Qo(s,n)!=null)return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(i.value!=null){if(dt(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Jo(e,t,n,l.getNode().getChild(n),s,r,a,o);if(dt(n)){let c=new At(null);return l.getNode().forEachChild(es,(u,h)=>{c=c.set(new Dt(u),h)}),dc(e,t,n,c,s,r,a,o)}else return t}else{let c=new At(null);return i.foreach((u,h)=>{const d=Ht(n,u);l.isCompleteForPath(d)&&(c=c.set(u,l.getNode().getChild(d)))}),dc(e,t,n,c,s,r,a,o)}}function Dk(e,t,n,i,s){const r=t.serverCache,o=lb(t,r.getNode(),r.isFullyInitialized()||dt(n),r.isFiltered());return _b(e,o,n,i,mb,s)}function Nk(e,t,n,i,s,r){let o;if(Qo(i,n)!=null)return t;{const a=new Pu(i,t,s),l=t.eventCache.getNode();let c;if(dt(n)||ut(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=uc(i,Ci(t));else{const h=t.serverCache.getNode();H(h instanceof wt,"serverChildren would be complete if leaf node"),u=fb(i,h)}u=u,c=e.filter.updateFullNode(l,u,r)}else{const u=ut(n);let h=Ru(i,u,t.serverCache);h==null&&t.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=e.filter.updateChild(l,u,h,Mt(n),a,r):t.eventCache.getNode().hasChild(u)?c=e.filter.updateChild(l,u,wt.EMPTY_NODE,Mt(n),a,r):c=l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=uc(i,Ci(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,r)))}return o=t.serverCache.isFullyInitialized()||Qo(i,Ct())!=null,Js(t,c,o,e.filter.filtersNodes())}}function Lk(e,t){const n=Ci(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!dt(t)&&!n.getImmediateChild(ut(t)).isEmpty())?n.getChild(t):null}function rf(e,t,n,i){t.type===Ke.MERGE&&t.source.queryId!==null&&(H(Ci(e.viewCache_),"We should always have a full cache before handling merges"),H(ac(e.viewCache_),"Missing event cache, even though we have a server cache"));const s=e.viewCache_,r=Mk(e.processor_,s,t,n,i);return Ak(e.processor_,r.viewCache),H(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=r.viewCache,Fk(e,r.changes,r.viewCache.eventCache.getNode(),null)}function Fk(e,t,n,i){const s=i?[i]:e.eventRegistrations_;return uk(e.eventGenerator_,t,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of;function Bk(e){H(!of,"__referenceConstructor has already been defined"),of=e}function Ou(e,t,n,i){const s=t.source.queryId;if(s!==null){const r=e.views.get(s);return H(r!=null,"SyncTree gave us an op for an invalid query."),rf(r,t,n,i)}else{let r=[];for(const o of e.views.values())r=r.concat(rf(o,t,n,i));return r}}function Du(e,t){let n=null;for(const i of e.views.values())n=n||Lk(i,t);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let af;function $k(e){H(!af,"__referenceConstructor has already been defined"),af=e}class lf{constructor(t){this.listenProvider_=t,this.syncPointTree_=new At(null),this.pendingWriteTree_=Ik(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function bb(e,t,n,i,s){return pk(e.pendingWriteTree_,t,n,i,s),s?Ma(e,new Ii(sb(),t,n)):[]}function hi(e,t,n=!1){const i=gk(e.pendingWriteTree_,t);if(mk(e.pendingWriteTree_,t)){let r=new At(null);return i.snap!=null?r=r.set(Ct(),!0):Se(i.children,o=>{r=r.set(new Dt(o),!0)}),Ma(e,new Xo(i.path,r,n))}else return[]}function Aa(e,t,n){return Ma(e,new Ii(rb(),t,n))}function Wk(e,t,n){const i=At.fromObject(n);return Ma(e,new yr(rb(),t,i))}function Uk(e,t,n,i){const s=wb(e,i);if(s!=null){const r=xb(s),o=r.path,a=r.queryId,l=we(o,t),c=new Ii(ob(a),l,n);return Sb(e,o,c)}else return[]}function Hk(e,t,n,i){const s=wb(e,i);if(s){const r=xb(s),o=r.path,a=r.queryId,l=we(o,t),c=At.fromObject(n),u=new yr(ob(a),l,c);return Sb(e,o,u)}else return[]}function Nu(e,t,n){const s=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(o,a)=>{const l=we(o,t),c=Du(a,l);if(c)return c});return db(s,t,r,n,!0)}function Ma(e,t){return yb(t,e.syncPointTree_,null,ub(e.pendingWriteTree_,Ct()))}function yb(e,t,n,i){if(dt(e.path))return vb(e,t,n,i);{const s=t.get(Ct());n==null&&s!=null&&(n=Du(s,Ct()));let r=[];const o=ut(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=pb(i,o);r=r.concat(yb(a,l,c,u))}return s&&(r=r.concat(Ou(s,e,i,n))),r}}function vb(e,t,n,i){const s=t.get(Ct());n==null&&s!=null&&(n=Du(s,Ct()));let r=[];return t.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=pb(i,o),u=e.operationForChild(o);u&&(r=r.concat(vb(u,a,l,c)))}),s&&(r=r.concat(Ou(s,e,i,n))),r}function wb(e,t){return e.tagToQueryMap.get(t)}function xb(e){const t=e.indexOf("$");return H(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Dt(e.substr(0,t))}}function Sb(e,t,n){const i=e.syncPointTree_.get(t);H(i,"Missing sync point for query tag that we're tracking");const s=ub(e.pendingWriteTree_,t);return Ou(i,n,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new Lu(n)}node(){return this.node_}}class Fu{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=Ht(this.path_,t);return new Fu(this.syncTree_,n)}node(){return Nu(this.syncTree_,this.path_)}}const zk=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},cf=function(e,t,n){if(!e||typeof e!="object")return e;if(H(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return Vk(e[".sv"],t,n);if(typeof e[".sv"]=="object")return jk(e[".sv"],t);H(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},Vk=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:H(!1,"Unexpected server value: "+e)}},jk=function(e,t,n){e.hasOwnProperty("increment")||H(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;typeof i!="number"&&H(!1,"Unexpected increment value: "+i);const s=t.node();if(H(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const o=s.getValue();return typeof o!="number"?i:o+i},Kk=function(e,t,n,i){return Bu(t,new Fu(n,e),i)},Eb=function(e,t,n){return Bu(e,new Lu(t),n)};function Bu(e,t,n){const i=e.getPriority().val(),s=cf(i,t.getImmediateChild(".priority"),n);let r;if(e.isLeafNode()){const o=e,a=cf(o.getValue(),t,n);return a!==o.getValue()||s!==o.getPriority().val()?new Vt(a,Gt(s)):e}else{const o=e;return r=o,s!==o.getPriority().val()&&(r=r.updatePriority(new Vt(s))),o.forEachChild(ee,(a,l)=>{const c=Bu(l,t.getImmediateChild(a),n);c!==l&&(r=r.updateImmediateChild(a,c))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(t="",n=null,i={children:{},childCount:0}){this.name=t,this.parent=n,this.node=i}}function Wu(e,t){let n=t instanceof Dt?t:new Dt(t),i=e,s=ut(n);for(;s!==null;){const r=os(i.node.children,s)||{children:{},childCount:0};i=new $u(s,i,r),n=Mt(n),s=ut(n)}return i}function Cs(e){return e.node.value}function Ib(e,t){e.node.value=t,fc(e)}function Cb(e){return e.node.childCount>0}function qk(e){return Cs(e)===void 0&&!Cb(e)}function Ra(e,t){Se(e.node.children,(n,i)=>{t(new $u(n,e,i))})}function Tb(e,t,n,i){n&&!i&&t(e),Ra(e,s=>{Tb(s,t,!0,i)}),n&&i&&t(e)}function Gk(e,t,n){let i=n?e:e.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function Lr(e){return new Dt(e.parent===null?e.name:Lr(e.parent)+"/"+e.name)}function fc(e){e.parent!==null&&Yk(e.parent,e.name,e)}function Yk(e,t,n){const i=qk(n),s=xn(e.node.children,t);i&&s?(delete e.node.children[t],e.node.childCount--,fc(e)):!i&&!s&&(e.node.children[t]=n.node,e.node.childCount++,fc(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=/[\[\].#$\/\u0000-\u001F\u007F]/,Qk=/[\[\].#$\u0000-\u001F\u007F]/,fl=10*1024*1024,kb=function(e){return typeof e=="string"&&e.length!==0&&!Xk.test(e)},Ab=function(e){return typeof e=="string"&&e.length!==0&&!Qk.test(e)},Jk=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Ab(e)},Zk=function(e,t,n,i){i&&t===void 0||Uu(ru(e,"value"),t,n)},Uu=function(e,t,n){const i=n instanceof Dt?new DT(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+ii(i));if(typeof t=="function")throw new Error(e+"contains a function "+ii(i)+" with contents = "+t.toString());if(C_(t))throw new Error(e+"contains "+t.toString()+" "+ii(i));if(typeof t=="string"&&t.length>fl/3&&va(t)>fl)throw new Error(e+"contains a string greater than "+fl+" utf8 bytes "+ii(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,r=!1;if(Se(t,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!kb(o)))throw new Error(e+" contains an invalid key ("+o+") "+ii(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);NT(i,o),Uu(e,a,i),LT(i)}),s&&r)throw new Error(e+' contains ".value" child '+ii(i)+" in addition to actual children.")}},Mb=function(e,t,n,i){if(!(i&&n===void 0)&&!Ab(n))throw new Error(ru(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},tA=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Mb(e,t,n,i)},eA=function(e,t){if(ut(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},nA=function(e,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!kb(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Jk(n))throw new Error(ru(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Rb(e,t){let n=null;for(let i=0;i<t.length;i++){const s=t[i],r=s.getPath();n!==null&&!X_(r,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&e.eventLists_.push(n)}function vn(e,t,n){Rb(e,n),sA(e,i=>Pe(i,t)||Pe(t,i))}function sA(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const s=e.eventLists_[i];if(s){const r=s.path;t(r)?(rA(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function rA(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(n!==null){e.events[t]=null;const i=n.getEventRunner();mi&&Zt("event: "+n.toString()),Is(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="repo_interrupt",aA=25;class lA{constructor(t,n,i,s){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new iA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Yo(),this.transactionQueueTree_=new $u,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function cA(e,t,n){if(e.stats_=Iu(e.repoInfo_),e.forceRestClient_||rT())e.server_=new Go(e.repoInfo_,(i,s,r,o)=>{uf(e,i,s,r,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>hf(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Xt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new _n(e.repoInfo_,t,(i,s,r,o)=>{uf(e,i,s,r,o)},i=>{hf(e,i)},i=>{hA(e,i)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(i=>{e.server_.refreshAuthToken(i)}),e.appCheckProvider_.addTokenChangeListener(i=>{e.server_.refreshAppCheckToken(i.token)}),e.statsReporter_=uT(e.repoInfo_,()=>new ck(e.stats_,e.server_)),e.infoData_=new sk,e.infoSyncTree_=new lf({startListening:(i,s,r,o)=>{let a=[];const l=e.infoData_.getNode(i._path);return l.isEmpty()||(a=Aa(e.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),zu(e,"connected",!1),e.serverSyncTree_=new lf({startListening:(i,s,r,o)=>(e.server_.listen(i,r,s,(a,l)=>{const c=o(a,l);vn(e.eventQueue_,i._path,c)}),[]),stopListening:(i,s)=>{e.server_.unlisten(i,s)}})}function uA(e){const n=e.infoData_.getNode(new Dt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Hu(e){return zk({timestamp:uA(e)})}function uf(e,t,n,i,s){e.dataUpdateCount++;const r=new Dt(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(s)if(i){const l=Lo(n,c=>Gt(c));o=Hk(e.serverSyncTree_,r,l,s)}else{const l=Gt(n);o=Uk(e.serverSyncTree_,r,l,s)}else if(i){const l=Lo(n,c=>Gt(c));o=Wk(e.serverSyncTree_,r,l)}else{const l=Gt(n);o=Aa(e.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=Pa(e,r)),vn(e.eventQueue_,a,o)}function hf(e,t){zu(e,"connected",t),t===!1&&fA(e)}function hA(e,t){Se(t,(n,i)=>{zu(e,n,i)})}function zu(e,t,n){const i=new Dt("/.info/"+t),s=Gt(n);e.infoData_.updateSnapshot(i,s);const r=Aa(e.infoSyncTree_,i,s);vn(e.eventQueue_,i,r)}function Pb(e){return e.nextWriteId_++}function dA(e,t,n,i,s){Vu(e,"set",{path:t.toString(),value:n,priority:i});const r=Hu(e),o=Gt(n,i),a=Nu(e.serverSyncTree_,t),l=Eb(o,a,r),c=Pb(e),u=bb(e.serverSyncTree_,t,l,c,!0);Rb(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(d,f)=>{const p=d==="ok";p||he("set at "+t+" failed: "+d);const g=hi(e.serverSyncTree_,c,!p);vn(e.eventQueue_,t,g),gA(e,s,d,f)});const h=Fb(e,t);Pa(e,h),vn(e.eventQueue_,h,[])}function fA(e){Vu(e,"onDisconnectEvents");const t=Hu(e),n=Yo();oc(e.onDisconnect_,Ct(),(s,r)=>{const o=Kk(s,r,e.serverSyncTree_,t);ib(n,s,o)});let i=[];oc(n,Ct(),(s,r)=>{i=i.concat(Aa(e.serverSyncTree_,s,r));const o=Fb(e,s);Pa(e,o)}),e.onDisconnect_=Yo(),vn(e.eventQueue_,Ct(),i)}function pA(e){e.persistentConnection_&&e.persistentConnection_.interrupt(oA)}function Vu(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Zt(n,...t)}function gA(e,t,n,i){t&&Is(()=>{if(n==="ok")t(null);else{const s=(n||"error").toUpperCase();let r=s;i&&(r+=": "+i);const o=new Error(r);o.code=s,t(o)}})}function Ob(e,t,n){return Nu(e.serverSyncTree_,t,n)||wt.EMPTY_NODE}function ju(e,t=e.transactionQueueTree_){if(t||Oa(e,t),Cs(t)){const n=Nb(e,t);H(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&mA(e,Lr(t),n)}else Cb(t)&&Ra(t,n=>{ju(e,n)})}function mA(e,t,n){const i=n.map(c=>c.currentWriteId),s=Ob(e,t,i);let r=s;const o=s.hash();for(let c=0;c<n.length;c++){const u=n[c];H(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=we(t,u.path);r=r.updateChild(h,u.currentOutputSnapshotRaw)}const a=r.val(!0),l=t;e.server_.put(l.toString(),a,c=>{Vu(e,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(hi(e.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();Oa(e,Wu(e.transactionQueueTree_,t)),ju(e,e.transactionQueueTree_),vn(e.eventQueue_,t,u);for(let d=0;d<h.length;d++)Is(h[d])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{he("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}Pa(e,t)}},o)}function Pa(e,t){const n=Db(e,t),i=Lr(n),s=Nb(e,n);return _A(e,s,i),i}function _A(e,t,n){if(t.length===0)return;const i=[];let s=[];const o=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){const l=t[a],c=we(n,l.path);let u=!1,h;if(H(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,s=s.concat(hi(e.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=aA)u=!0,h="maxretry",s=s.concat(hi(e.serverSyncTree_,l.currentWriteId,!0));else{const d=Ob(e,l.path,o);l.currentInputSnapshot=d;const f=t[a].update(d.val());if(f!==void 0){Uu("transaction failed: Data returned ",f,l.path);let p=Gt(f);typeof f=="object"&&f!=null&&xn(f,".priority")||(p=p.updatePriority(d.getPriority()));const m=l.currentWriteId,y=Hu(e),v=Eb(p,d,y);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=v,l.currentWriteId=Pb(e),o.splice(o.indexOf(m),1),s=s.concat(bb(e.serverSyncTree_,l.path,v,l.currentWriteId,l.applyLocally)),s=s.concat(hi(e.serverSyncTree_,m,!0))}else u=!0,h="nodata",s=s.concat(hi(e.serverSyncTree_,l.currentWriteId,!0))}vn(e.eventQueue_,n,s),s=[],u&&(t[a].status=2,function(d){setTimeout(d,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(h==="nodata"?i.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):i.push(()=>t[a].onComplete(new Error(h),!1,null))))}Oa(e,e.transactionQueueTree_);for(let a=0;a<i.length;a++)Is(i[a]);ju(e,e.transactionQueueTree_)}function Db(e,t){let n,i=e.transactionQueueTree_;for(n=ut(t);n!==null&&Cs(i)===void 0;)i=Wu(i,n),t=Mt(t),n=ut(t);return i}function Nb(e,t){const n=[];return Lb(e,t,n),n.sort((i,s)=>i.order-s.order),n}function Lb(e,t,n){const i=Cs(t);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);Ra(t,s=>{Lb(e,s,n)})}function Oa(e,t){const n=Cs(t);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,Ib(t,n.length>0?n:void 0)}Ra(t,i=>{Oa(e,i)})}function Fb(e,t){const n=Lr(Db(e,t)),i=Wu(e.transactionQueueTree_,t);return Gk(i,s=>{pl(e,s)}),pl(e,i),Tb(i,s=>{pl(e,s)}),n}function pl(e,t){const n=Cs(t);if(n){const i=[];let s=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(H(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):(H(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(hi(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?Ib(t,void 0):n.length=r+1,vn(e.eventQueue_,Lr(t),s);for(let o=0;o<i.length;o++)Is(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function yA(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const n of e.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):he(`Invalid query segment '${n}' in query '${e}'`)}return t}const df=function(e,t){const n=vA(e),i=n.namespace;n.domain==="firebase.com"&&yn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&yn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||QC();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new B_(n.host,n.secure,i,s,t,"",i!==n.subdomain),path:new Dt(n.pathString)}},vA=function(e){let t="",n="",i="",s="",r="",o=!0,a="https",l=443;if(typeof e=="string"){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");u===-1&&(u=e.length);let h=e.indexOf("?");h===-1&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(s=bA(e.substring(u,h)));const d=yA(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=t.indexOf(".");i=t.substring(0,p).toLowerCase(),n=t.substring(p+1),r=i}"ns"in d&&(r=d.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:s,namespace:r}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(t,n,i,s){this._repo=t,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return dt(this._path)?null:q_(this._path)}get ref(){return new Oi(this._repo,this._path)}get _queryIdentifier(){const t=Xd(this._queryParams),n=Su(t);return n==="{}"?"default":n}get _queryObject(){return Xd(this._queryParams)}isEqual(t){if(t=ge(t),!(t instanceof Ku))return!1;const n=this._repo===t._repo,i=X_(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+OT(this._path)}}class Oi extends Ku{constructor(t,n){super(t,n,new Au,!1)}get parent(){const t=Y_(this._path);return t===null?null:new Oi(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}function J1(e,t){return e=ge(e),e._checkNotDeleted("ref"),t!==void 0?wA(e._root,t):e._root}function wA(e,t){return e=ge(e),ut(e._path)===null?tA("child","path",t,!1):Mb("child","path",t,!1),new Oi(e._repo,Ht(e._path,t))}function Z1(e,t){e=ge(e),eA("set",e._path),Zk("set",t,e._path,!1);const n=new ya;return dA(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}Bk(Oi);$k(Oi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="FIREBASE_DATABASE_EMULATOR_HOST",pc={};let SA=!1;function EA(e,t,n,i){e.repoInfo_=new B_(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}function IA(e,t,n,i,s){let r=i||e.options.databaseURL;r===void 0&&(e.options.projectId||yn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Zt("Using default host for project ",e.options.projectId),r=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=df(r,s),a=o.repoInfo,l,c;typeof process<"u"&&Rd&&(c=Rd[xA]),c?(l=!0,r=`http://${c}?ns=${a.namespace}`,o=df(r,s),a=o.repoInfo):l=!o.repoInfo.secure;const u=s&&l?new ts(ts.OWNER):new aT(e.name,e.options,t);nA("Invalid Firebase Database URL",o),dt(o.path)||yn("Database URL must point to the root of a Firebase Database (not including a child path).");const h=TA(a,e,u,new oT(e.name,n));return new kA(h,e)}function CA(e,t){const n=pc[t];(!n||n[e.key]!==e)&&yn(`Database ${t}(${e.repoInfo_}) has already been deleted.`),pA(e),delete n[e.key]}function TA(e,t,n,i){let s=pc[t.name];s||(s={},pc[t.name]=s);let r=s[e.toURLString()];return r&&yn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new lA(e,SA,n,i),s[e.toURLString()]=r,r}class kA{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(cA(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Oi(this._repo,Ct())),this._rootInternal}_delete(){return this._rootInternal!==null&&(CA(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&yn("Cannot call "+t+" on a deleted database.")}}function tN(e=au(),t){const n=Ri(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const i=Kw("database");i&&AA(n,...i)}return n}function AA(e,t,n,i={}){e=ge(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&yn("Cannot call useEmulator() after instance has already been initialized.");const s=e._repoInternal;let r;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&yn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new ts(ts.OWNER);else if(i.mockUserToken){const o=typeof i.mockUserToken=="string"?i.mockUserToken:qw(i.mockUserToken,e.app.options.projectId);r=new ts(o)}EA(s,t,n,r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(e){KC(xs),Ze(new Fe("database",(t,{instanceIdentifier:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return IA(i,s,r,n)},"PUBLIC").setMultipleInstances(!0)),xe(Pd,Od,e),xe(Pd,Od,"esm2017")}_n.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};_n.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};MA();/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Hi=typeof window<"u";function RA(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const xt=Object.assign;function gl(e,t){const n={};for(const i in t){const s=t[i];n[i]=Be(s)?s.map(e):e(s)}return n}const tr=()=>{},Be=Array.isArray,PA=/\/$/,OA=e=>e.replace(PA,"");function ml(e,t,n="/"){let i,s={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=t.slice(0,l),r=t.slice(l+1,a>-1?a:t.length),s=e(r)),a>-1&&(i=i||t.slice(0,a),o=t.slice(a,t.length)),i=FA(i??t,n),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:o}}function DA(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function ff(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function NA(e,t,n){const i=t.matched.length-1,s=n.matched.length-1;return i>-1&&i===s&&us(t.matched[i],n.matched[s])&&Bb(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function us(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Bb(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!LA(e[n],t[n]))return!1;return!0}function LA(e,t){return Be(e)?pf(e,t):Be(t)?pf(t,e):e===t}function pf(e,t){return Be(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function FA(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=n.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var vr;(function(e){e.pop="pop",e.push="push"})(vr||(vr={}));var er;(function(e){e.back="back",e.forward="forward",e.unknown=""})(er||(er={}));function BA(e){if(!e)if(Hi){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),OA(e)}const $A=/^[^#]+#/;function WA(e,t){return e.replace($A,"#")+t}function UA(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const Da=()=>({left:window.pageXOffset,top:window.pageYOffset});function HA(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=UA(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function gf(e,t){return(history.state?history.state.position-t:-1)+e}const gc=new Map;function zA(e,t){gc.set(e,t)}function VA(e){const t=gc.get(e);return gc.delete(e),t}let jA=()=>location.protocol+"//"+location.host;function $b(e,t){const{pathname:n,search:i,hash:s}=t,r=e.indexOf("#");if(r>-1){let a=s.includes(e.slice(r))?e.slice(r).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),ff(l,"")}return ff(n,e)+i+s}function KA(e,t,n,i){let s=[],r=[],o=null;const a=({state:d})=>{const f=$b(e,location),p=n.value,g=t.value;let m=0;if(d){if(n.value=f,t.value=d,o&&o===p){o=null;return}m=g?d.position-g.position:0}else i(f);s.forEach(y=>{y(n.value,p,{delta:m,type:vr.pop,direction:m?m>0?er.forward:er.back:er.unknown})})};function l(){o=n.value}function c(d){s.push(d);const f=()=>{const p=s.indexOf(d);p>-1&&s.splice(p,1)};return r.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(xt({},d.state,{scroll:Da()}),"")}function h(){for(const d of r)d();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function mf(e,t,n,i=!1,s=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:s?Da():null}}function qA(e){const{history:t,location:n}=window,i={value:$b(e,n)},s={value:t.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const h=e.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+l:jA()+e+l;try{t[u?"replaceState":"pushState"](c,"",d),s.value=c}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(l,c){const u=xt({},t.state,mf(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});r(l,u,!0),i.value=l}function a(l,c){const u=xt({},s.value,t.state,{forward:l,scroll:Da()});r(u.current,u,!0);const h=xt({},mf(i.value,l,null),{position:u.position+1},c);r(l,h,!1),i.value=l}return{location:i,state:s,push:a,replace:o}}function eN(e){e=BA(e);const t=qA(e),n=KA(e,t.state,t.location,t.replace);function i(r,o=!0){o||n.pauseListeners(),history.go(r)}const s=xt({location:"",base:e,go:i,createHref:WA.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function GA(e){return typeof e=="string"||e&&typeof e=="object"}function Wb(e){return typeof e=="string"||typeof e=="symbol"}const Cn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Ub=Symbol("");var _f;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(_f||(_f={}));function hs(e,t){return xt(new Error,{type:e,[Ub]:!0},t)}function nn(e,t){return e instanceof Error&&Ub in e&&(t==null||!!(e.type&t))}const bf="[^/]+?",YA={sensitive:!1,strict:!1,start:!0,end:!0},XA=/[.+*?^${}()[\]/\\]/g;function QA(e,t){const n=xt({},YA,t),i=[];let s=n.start?"^":"";const r=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(XA,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:g,optional:m,regexp:y}=d;r.push({name:p,repeatable:g,optional:m});const v=y||bf;if(v!==bf){f+=10;try{new RegExp(`(${v})`)}catch(x){throw new Error(`Invalid custom RegExp for param "${p}" (${v}): `+x.message)}}let S=g?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;h||(S=m&&c.length<2?`(?:/${S})`:"/"+S),m&&(S+="?"),s+=S,f+=20,m&&(f+=-8),g&&(f+=-20),v===".*"&&(f+=-50)}u.push(f)}i.push(u)}if(n.strict&&n.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",p=r[d-1];h[p.name]=f&&p.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:g,optional:m}=f,y=p in c?c[p]:"";if(Be(y)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const v=Be(y)?y.join("/"):y;if(!v)if(m)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=v}}return u||"/"}return{re:o,score:i,keys:r,parse:a,stringify:l}}function JA(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function ZA(e,t){let n=0;const i=e.score,s=t.score;for(;n<i.length&&n<s.length;){const r=JA(i[n],s[n]);if(r)return r;n++}if(Math.abs(s.length-i.length)===1){if(yf(i))return 1;if(yf(s))return-1}return s.length-i.length}function yf(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const tM={type:0,value:""},eM=/[a-zA-Z0-9_]/;function nM(e){if(!e)return[[]];if(e==="/")return[[tM]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,i=n;const s=[];let r;function o(){r&&s.push(r),r=[]}let a=0,l,c="",u="";function h(){c&&(n===0?r.push({type:0,value:c}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=i;break;case 1:l==="("?n=2:eM.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function iM(e,t,n){const i=QA(nM(e.path),n),s=xt(i,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function sM(e,t){const n=[],i=new Map;t=xf({strict:!1,end:!0,sensitive:!1},t);function s(u){return i.get(u)}function r(u,h,d){const f=!d,p=rM(u);p.aliasOf=d&&d.record;const g=xf(t,u),m=[p];if("alias"in u){const S=typeof u.alias=="string"?[u.alias]:u.alias;for(const x of S)m.push(xt({},p,{components:d?d.record.components:p.components,path:x,aliasOf:d?d.record:p}))}let y,v;for(const S of m){const{path:x}=S;if(h&&x[0]!=="/"){const E=h.record.path,A=E[E.length-1]==="/"?"":"/";S.path=h.record.path+(x&&A+x)}if(y=iM(S,h,g),d?d.alias.push(y):(v=v||y,v!==y&&v.alias.push(y),f&&u.name&&!wf(y)&&o(u.name)),p.children){const E=p.children;for(let A=0;A<E.length;A++)r(E[A],y,d&&d.children[A])}d=d||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&l(y)}return v?()=>{o(v)}:tr}function o(u){if(Wb(u)){const h=i.get(u);h&&(i.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&ZA(u,n[h])>=0&&(u.record.path!==n[h].record.path||!Hb(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!wf(u)&&i.set(u.record.name,u)}function c(u,h){let d,f={},p,g;if("name"in u&&u.name){if(d=i.get(u.name),!d)throw hs(1,{location:u});g=d.record.name,f=xt(vf(h.params,d.keys.filter(v=>!v.optional).map(v=>v.name)),u.params&&vf(u.params,d.keys.map(v=>v.name))),p=d.stringify(f)}else if("path"in u)p=u.path,d=n.find(v=>v.re.test(p)),d&&(f=d.parse(p),g=d.record.name);else{if(d=h.name?i.get(h.name):n.find(v=>v.re.test(h.path)),!d)throw hs(1,{location:u,currentLocation:h});g=d.record.name,f=xt({},h.params,u.params),p=d.stringify(f)}const m=[];let y=d;for(;y;)m.unshift(y.record),y=y.parent;return{name:g,path:p,params:f,matched:m,meta:aM(m)}}return e.forEach(u=>r(u)),{addRoute:r,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function vf(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function rM(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:oM(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function oM(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="object"?n[i]:n;return t}function wf(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function aM(e){return e.reduce((t,n)=>xt(t,n.meta),{})}function xf(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function Hb(e,t){return t.children.some(n=>n===e||Hb(e,n))}const zb=/#/g,lM=/&/g,cM=/\//g,uM=/=/g,hM=/\?/g,Vb=/\+/g,dM=/%5B/g,fM=/%5D/g,jb=/%5E/g,pM=/%60/g,Kb=/%7B/g,gM=/%7C/g,qb=/%7D/g,mM=/%20/g;function qu(e){return encodeURI(""+e).replace(gM,"|").replace(dM,"[").replace(fM,"]")}function _M(e){return qu(e).replace(Kb,"{").replace(qb,"}").replace(jb,"^")}function mc(e){return qu(e).replace(Vb,"%2B").replace(mM,"+").replace(zb,"%23").replace(lM,"%26").replace(pM,"`").replace(Kb,"{").replace(qb,"}").replace(jb,"^")}function bM(e){return mc(e).replace(uM,"%3D")}function yM(e){return qu(e).replace(zb,"%23").replace(hM,"%3F")}function vM(e){return e==null?"":yM(e).replace(cM,"%2F")}function Zo(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function wM(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(Vb," "),o=r.indexOf("="),a=Zo(o<0?r:r.slice(0,o)),l=o<0?null:Zo(r.slice(o+1));if(a in t){let c=t[a];Be(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Sf(e){let t="";for(let n in e){const i=e[n];if(n=bM(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(Be(i)?i.map(r=>r&&mc(r)):[i&&mc(i)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function xM(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=Be(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return t}const SM=Symbol(""),Ef=Symbol(""),Gu=Symbol(""),Gb=Symbol(""),_c=Symbol("");function Os(){let e=[];function t(i){return e.push(i),()=>{const s=e.indexOf(i);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function kn(e,t,n,i,s){const r=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(hs(4,{from:n,to:t})):h instanceof Error?a(h):GA(h)?a(hs(2,{from:t,to:h})):(r&&i.enterCallbacks[s]===r&&typeof h=="function"&&r.push(h),o())},c=e.call(i&&i.instances[s],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch(h=>a(h))})}function _l(e,t,n,i){const s=[];for(const r of e)for(const o in r.components){let a=r.components[o];if(!(t!=="beforeRouteEnter"&&!r.instances[o]))if(EM(a)){const c=(a.__vccOpts||a)[t];c&&s.push(kn(c,n,i,r,o))}else{let l=a();s.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${r.path}"`));const u=RA(c)?c.default:c;r.components[o]=u;const d=(u.__vccOpts||u)[t];return d&&kn(d,n,i,r,o)()}))}}return s}function EM(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function If(e){const t=Ge(Gu),n=Ge(Gb),i=Te(()=>t.resolve(Gi(e.to))),s=Te(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(us.bind(null,u));if(d>-1)return d;const f=Cf(l[c-2]);return c>1&&Cf(u)===f&&h[h.length-1].path!==f?h.findIndex(us.bind(null,l[c-2])):d}),r=Te(()=>s.value>-1&&kM(n.params,i.value.params)),o=Te(()=>s.value>-1&&s.value===n.matched.length-1&&Bb(n.params,i.value.params));function a(l={}){return TM(l)?t[Gi(e.replace)?"replace":"push"](Gi(e.to)).catch(tr):Promise.resolve()}return{route:i,href:Te(()=>i.value.href),isActive:r,isExactActive:o,navigate:a}}const IM=Pg({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:If,setup(e,{slots:t}){const n=Ar(If(e)),{options:i}=Ge(Gu),s=Te(()=>({[Tf(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[Tf(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&t.default(n);return e.custom?r:Gg("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},r)}}}),CM=IM;function TM(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function kM(e,t){for(const n in t){const i=t[n],s=e[n];if(typeof i=="string"){if(i!==s)return!1}else if(!Be(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function Cf(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Tf=(e,t,n)=>e??t??n,AM=Pg({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=Ge(_c),s=Te(()=>e.route||i.value),r=Ge(Ef,0),o=Te(()=>{let c=Gi(r);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Te(()=>s.value.matched[o.value]);fo(Ef,Te(()=>o.value+1)),fo(SM,a),fo(_c,s);const l=Av();return Xi(()=>[l.value,a.value,e.name],([c,u,h],[d,f,p])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!us(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=s.value,u=e.name,h=a.value,d=h&&h.components[u];if(!d)return kf(n.default,{Component:d,route:c});const f=h.props[u],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,m=Gg(d,xt({},p,t,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return kf(n.default,{Component:m,route:c})||m}}});function kf(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const MM=AM;function nN(e){const t=sM(e.routes,e),n=e.parseQuery||wM,i=e.stringifyQuery||Sf,s=e.history,r=Os(),o=Os(),a=Os(),l=Mv(Cn);let c=Cn;Hi&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=gl.bind(null,C=>""+C),h=gl.bind(null,vM),d=gl.bind(null,Zo);function f(C,V){let F,j;return Wb(C)?(F=t.getRecordMatcher(C),j=V):j=C,t.addRoute(j,F)}function p(C){const V=t.getRecordMatcher(C);V&&t.removeRoute(V)}function g(){return t.getRoutes().map(C=>C.record)}function m(C){return!!t.getRecordMatcher(C)}function y(C,V){if(V=xt({},V||l.value),typeof C=="string"){const w=ml(n,C,V.path),I=t.resolve({path:w.path},V),M=s.createHref(w.fullPath);return xt(w,I,{params:d(I.params),hash:Zo(w.hash),redirectedFrom:void 0,href:M})}let F;if("path"in C)F=xt({},C,{path:ml(n,C.path,V.path).path});else{const w=xt({},C.params);for(const I in w)w[I]==null&&delete w[I];F=xt({},C,{params:h(w)}),V.params=h(V.params)}const j=t.resolve(F,V),lt=C.hash||"";j.params=u(d(j.params));const _=DA(i,xt({},C,{hash:_M(lt),path:j.path})),b=s.createHref(_);return xt({fullPath:_,hash:lt,query:i===Sf?xM(C.query):C.query||{}},j,{redirectedFrom:void 0,href:b})}function v(C){return typeof C=="string"?ml(n,C,l.value.path):xt({},C)}function S(C,V){if(c!==C)return hs(8,{from:V,to:C})}function x(C){return D(C)}function E(C){return x(xt(v(C),{replace:!0}))}function A(C){const V=C.matched[C.matched.length-1];if(V&&V.redirect){const{redirect:F}=V;let j=typeof F=="function"?F(C):F;return typeof j=="string"&&(j=j.includes("?")||j.includes("#")?j=v(j):{path:j},j.params={}),xt({query:C.query,hash:C.hash,params:"path"in j?{}:C.params},j)}}function D(C,V){const F=c=y(C),j=l.value,lt=C.state,_=C.force,b=C.replace===!0,w=A(F);if(w)return D(xt(v(w),{state:typeof w=="object"?xt({},lt,w.state):lt,force:_,replace:b}),V||F);const I=F;I.redirectedFrom=V;let M;return!_&&NA(i,j,F)&&(M=hs(16,{to:I,from:j}),rt(j,j,!0,!1)),(M?Promise.resolve(M):z(I,j)).catch(O=>nn(O)?nn(O,2)?O:Q(O):k(O,I,j)).then(O=>{if(O){if(nn(O,2))return D(xt({replace:b},v(O.to),{state:typeof O.to=="object"?xt({},lt,O.to.state):lt,force:_}),V||I)}else O=tt(I,j,!0,b,lt);return W(I,j,O),O})}function L(C,V){const F=S(C,V);return F?Promise.reject(F):Promise.resolve()}function q(C){const V=bt.values().next().value;return V&&typeof V.runWithContext=="function"?V.runWithContext(C):C()}function z(C,V){let F;const[j,lt,_]=RM(C,V);F=_l(j.reverse(),"beforeRouteLeave",C,V);for(const w of j)w.leaveGuards.forEach(I=>{F.push(kn(I,C,V))});const b=L.bind(null,C,V);return F.push(b),yt(F).then(()=>{F=[];for(const w of r.list())F.push(kn(w,C,V));return F.push(b),yt(F)}).then(()=>{F=_l(lt,"beforeRouteUpdate",C,V);for(const w of lt)w.updateGuards.forEach(I=>{F.push(kn(I,C,V))});return F.push(b),yt(F)}).then(()=>{F=[];for(const w of _)if(w.beforeEnter)if(Be(w.beforeEnter))for(const I of w.beforeEnter)F.push(kn(I,C,V));else F.push(kn(w.beforeEnter,C,V));return F.push(b),yt(F)}).then(()=>(C.matched.forEach(w=>w.enterCallbacks={}),F=_l(_,"beforeRouteEnter",C,V),F.push(b),yt(F))).then(()=>{F=[];for(const w of o.list())F.push(kn(w,C,V));return F.push(b),yt(F)}).catch(w=>nn(w,8)?w:Promise.reject(w))}function W(C,V,F){a.list().forEach(j=>q(()=>j(C,V,F)))}function tt(C,V,F,j,lt){const _=S(C,V);if(_)return _;const b=V===Cn,w=Hi?history.state:{};F&&(j||b?s.replace(C.fullPath,xt({scroll:b&&w&&w.scroll},lt)):s.push(C.fullPath,lt)),l.value=C,rt(C,V,F,b),Q()}let mt;function Y(){mt||(mt=s.listen((C,V,F)=>{if(!Lt.listening)return;const j=y(C),lt=A(j);if(lt){D(xt(lt,{replace:!0}),j).catch(tr);return}c=j;const _=l.value;Hi&&zA(gf(_.fullPath,F.delta),Da()),z(j,_).catch(b=>nn(b,12)?b:nn(b,2)?(D(b.to,j).then(w=>{nn(w,20)&&!F.delta&&F.type===vr.pop&&s.go(-1,!1)}).catch(tr),Promise.reject()):(F.delta&&s.go(-F.delta,!1),k(b,j,_))).then(b=>{b=b||tt(j,_,!1),b&&(F.delta&&!nn(b,8)?s.go(-F.delta,!1):F.type===vr.pop&&nn(b,20)&&s.go(-1,!1)),W(j,_,b)}).catch(tr)}))}let P=Os(),T=Os(),R;function k(C,V,F){Q(C);const j=T.list();return j.length?j.forEach(lt=>lt(C,V,F)):console.error(C),Promise.reject(C)}function G(){return R&&l.value!==Cn?Promise.resolve():new Promise((C,V)=>{P.add([C,V])})}function Q(C){return R||(R=!C,Y(),P.list().forEach(([V,F])=>C?F(C):V()),P.reset()),C}function rt(C,V,F,j){const{scrollBehavior:lt}=e;if(!Hi||!lt)return Promise.resolve();const _=!F&&VA(gf(C.fullPath,0))||(j||!F)&&history.state&&history.state.scroll||null;return Sg().then(()=>lt(C,V,_)).then(b=>b&&HA(b)).catch(b=>k(b,C,V))}const it=C=>s.go(C);let _t;const bt=new Set,Lt={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,hasRoute:m,getRoutes:g,resolve:y,options:e,push:x,replace:E,go:it,back:()=>it(-1),forward:()=>it(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:T.add,isReady:G,install(C){const V=this;C.component("RouterLink",CM),C.component("RouterView",MM),C.config.globalProperties.$router=V,Object.defineProperty(C.config.globalProperties,"$route",{enumerable:!0,get:()=>Gi(l)}),Hi&&!_t&&l.value===Cn&&(_t=!0,x(s.location).catch(lt=>{}));const F={};for(const lt in Cn)Object.defineProperty(F,lt,{get:()=>l.value[lt],enumerable:!0});C.provide(Gu,V),C.provide(Gb,pg(F)),C.provide(_c,l);const j=C.unmount;bt.add(C),C.unmount=function(){bt.delete(C),bt.size<1&&(c=Cn,mt&&mt(),mt=null,l.value=Cn,_t=!1,R=!1),j()}}};function yt(C){return C.reduce((V,F)=>V.then(()=>q(F)),Promise.resolve())}return Lt}function RM(e,t){const n=[],i=[],s=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(e.matched.find(c=>us(c,a))?i.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>us(c,l))||s.push(l))}return[n,i,s]}var PM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function OM(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Yb={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(PM,function(){var n=1e3,i=6e4,s=36e5,r="millisecond",o="second",a="minute",l="hour",c="day",u="week",h="month",d="quarter",f="year",p="date",g="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Y){var P=["th","st","nd","rd"],T=Y%100;return"["+Y+(P[(T-20)%10]||P[T]||P[0])+"]"}},S=function(Y,P,T){var R=String(Y);return!R||R.length>=P?Y:""+Array(P+1-R.length).join(T)+Y},x={s:S,z:function(Y){var P=-Y.utcOffset(),T=Math.abs(P),R=Math.floor(T/60),k=T%60;return(P<=0?"+":"-")+S(R,2,"0")+":"+S(k,2,"0")},m:function Y(P,T){if(P.date()<T.date())return-Y(T,P);var R=12*(T.year()-P.year())+(T.month()-P.month()),k=P.clone().add(R,h),G=T-k<0,Q=P.clone().add(R+(G?-1:1),h);return+(-(R+(T-k)/(G?k-Q:Q-k))||0)},a:function(Y){return Y<0?Math.ceil(Y)||0:Math.floor(Y)},p:function(Y){return{M:h,y:f,w:u,d:c,D:p,h:l,m:a,s:o,ms:r,Q:d}[Y]||String(Y||"").toLowerCase().replace(/s$/,"")},u:function(Y){return Y===void 0}},E="en",A={};A[E]=v;var D="$isDayjsObject",L=function(Y){return Y instanceof tt||!(!Y||!Y[D])},q=function Y(P,T,R){var k;if(!P)return E;if(typeof P=="string"){var G=P.toLowerCase();A[G]&&(k=G),T&&(A[G]=T,k=G);var Q=P.split("-");if(!k&&Q.length>1)return Y(Q[0])}else{var rt=P.name;A[rt]=P,k=rt}return!R&&k&&(E=k),k||!R&&E},z=function(Y,P){if(L(Y))return Y.clone();var T=typeof P=="object"?P:{};return T.date=Y,T.args=arguments,new tt(T)},W=x;W.l=q,W.i=L,W.w=function(Y,P){return z(Y,{locale:P.$L,utc:P.$u,x:P.$x,$offset:P.$offset})};var tt=function(){function Y(T){this.$L=q(T.locale,null,!0),this.parse(T),this.$x=this.$x||T.x||{},this[D]=!0}var P=Y.prototype;return P.parse=function(T){this.$d=function(R){var k=R.date,G=R.utc;if(k===null)return new Date(NaN);if(W.u(k))return new Date;if(k instanceof Date)return new Date(k);if(typeof k=="string"&&!/Z$/i.test(k)){var Q=k.match(m);if(Q){var rt=Q[2]-1||0,it=(Q[7]||"0").substring(0,3);return G?new Date(Date.UTC(Q[1],rt,Q[3]||1,Q[4]||0,Q[5]||0,Q[6]||0,it)):new Date(Q[1],rt,Q[3]||1,Q[4]||0,Q[5]||0,Q[6]||0,it)}}return new Date(k)}(T),this.init()},P.init=function(){var T=this.$d;this.$y=T.getFullYear(),this.$M=T.getMonth(),this.$D=T.getDate(),this.$W=T.getDay(),this.$H=T.getHours(),this.$m=T.getMinutes(),this.$s=T.getSeconds(),this.$ms=T.getMilliseconds()},P.$utils=function(){return W},P.isValid=function(){return this.$d.toString()!==g},P.isSame=function(T,R){var k=z(T);return this.startOf(R)<=k&&k<=this.endOf(R)},P.isAfter=function(T,R){return z(T)<this.startOf(R)},P.isBefore=function(T,R){return this.endOf(R)<z(T)},P.$g=function(T,R,k){return W.u(T)?this[R]:this.set(k,T)},P.unix=function(){return Math.floor(this.valueOf()/1e3)},P.valueOf=function(){return this.$d.getTime()},P.startOf=function(T,R){var k=this,G=!!W.u(R)||R,Q=W.p(T),rt=function(F,j){var lt=W.w(k.$u?Date.UTC(k.$y,j,F):new Date(k.$y,j,F),k);return G?lt:lt.endOf(c)},it=function(F,j){return W.w(k.toDate()[F].apply(k.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(j)),k)},_t=this.$W,bt=this.$M,Lt=this.$D,yt="set"+(this.$u?"UTC":"");switch(Q){case f:return G?rt(1,0):rt(31,11);case h:return G?rt(1,bt):rt(0,bt+1);case u:var C=this.$locale().weekStart||0,V=(_t<C?_t+7:_t)-C;return rt(G?Lt-V:Lt+(6-V),bt);case c:case p:return it(yt+"Hours",0);case l:return it(yt+"Minutes",1);case a:return it(yt+"Seconds",2);case o:return it(yt+"Milliseconds",3);default:return this.clone()}},P.endOf=function(T){return this.startOf(T,!1)},P.$set=function(T,R){var k,G=W.p(T),Q="set"+(this.$u?"UTC":""),rt=(k={},k[c]=Q+"Date",k[p]=Q+"Date",k[h]=Q+"Month",k[f]=Q+"FullYear",k[l]=Q+"Hours",k[a]=Q+"Minutes",k[o]=Q+"Seconds",k[r]=Q+"Milliseconds",k)[G],it=G===c?this.$D+(R-this.$W):R;if(G===h||G===f){var _t=this.clone().set(p,1);_t.$d[rt](it),_t.init(),this.$d=_t.set(p,Math.min(this.$D,_t.daysInMonth())).$d}else rt&&this.$d[rt](it);return this.init(),this},P.set=function(T,R){return this.clone().$set(T,R)},P.get=function(T){return this[W.p(T)]()},P.add=function(T,R){var k,G=this;T=Number(T);var Q=W.p(R),rt=function(bt){var Lt=z(G);return W.w(Lt.date(Lt.date()+Math.round(bt*T)),G)};if(Q===h)return this.set(h,this.$M+T);if(Q===f)return this.set(f,this.$y+T);if(Q===c)return rt(1);if(Q===u)return rt(7);var it=(k={},k[a]=i,k[l]=s,k[o]=n,k)[Q]||1,_t=this.$d.getTime()+T*it;return W.w(_t,this)},P.subtract=function(T,R){return this.add(-1*T,R)},P.format=function(T){var R=this,k=this.$locale();if(!this.isValid())return k.invalidDate||g;var G=T||"YYYY-MM-DDTHH:mm:ssZ",Q=W.z(this),rt=this.$H,it=this.$m,_t=this.$M,bt=k.weekdays,Lt=k.months,yt=k.meridiem,C=function(j,lt,_,b){return j&&(j[lt]||j(R,G))||_[lt].slice(0,b)},V=function(j){return W.s(rt%12||12,j,"0")},F=yt||function(j,lt,_){var b=j<12?"AM":"PM";return _?b.toLowerCase():b};return G.replace(y,function(j,lt){return lt||function(_){switch(_){case"YY":return String(R.$y).slice(-2);case"YYYY":return W.s(R.$y,4,"0");case"M":return _t+1;case"MM":return W.s(_t+1,2,"0");case"MMM":return C(k.monthsShort,_t,Lt,3);case"MMMM":return C(Lt,_t);case"D":return R.$D;case"DD":return W.s(R.$D,2,"0");case"d":return String(R.$W);case"dd":return C(k.weekdaysMin,R.$W,bt,2);case"ddd":return C(k.weekdaysShort,R.$W,bt,3);case"dddd":return bt[R.$W];case"H":return String(rt);case"HH":return W.s(rt,2,"0");case"h":return V(1);case"hh":return V(2);case"a":return F(rt,it,!0);case"A":return F(rt,it,!1);case"m":return String(it);case"mm":return W.s(it,2,"0");case"s":return String(R.$s);case"ss":return W.s(R.$s,2,"0");case"SSS":return W.s(R.$ms,3,"0");case"Z":return Q}return null}(j)||Q.replace(":","")})},P.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},P.diff=function(T,R,k){var G,Q=this,rt=W.p(R),it=z(T),_t=(it.utcOffset()-this.utcOffset())*i,bt=this-it,Lt=function(){return W.m(Q,it)};switch(rt){case f:G=Lt()/12;break;case h:G=Lt();break;case d:G=Lt()/3;break;case u:G=(bt-_t)/6048e5;break;case c:G=(bt-_t)/864e5;break;case l:G=bt/s;break;case a:G=bt/i;break;case o:G=bt/n;break;default:G=bt}return k?G:W.a(G)},P.daysInMonth=function(){return this.endOf(h).$D},P.$locale=function(){return A[this.$L]},P.locale=function(T,R){if(!T)return this.$L;var k=this.clone(),G=q(T,R,!0);return G&&(k.$L=G),k},P.clone=function(){return W.w(this.$d,this)},P.toDate=function(){return new Date(this.valueOf())},P.toJSON=function(){return this.isValid()?this.toISOString():null},P.toISOString=function(){return this.$d.toISOString()},P.toString=function(){return this.$d.toUTCString()},Y}(),mt=tt.prototype;return z.prototype=mt,[["$ms",r],["$s",o],["$m",a],["$H",l],["$W",c],["$M",h],["$y",f],["$D",p]].forEach(function(Y){mt[Y[1]]=function(P){return this.$g(P,Y[0],Y[1])}}),z.extend=function(Y,P){return Y.$i||(Y(P,tt,z),Y.$i=!0),z},z.locale=q,z.isDayjs=L,z.unix=function(Y){return z(1e3*Y)},z.en=A[E],z.Ls=A,z.p={},z})})(Yb);var DM=Yb.exports;const iN=OM(DM);/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Fr(e){return e+.5|0}const Dn=(e,t,n)=>Math.max(Math.min(e,n),t);function Us(e){return Dn(Fr(e*2.55),0,255)}function Vn(e){return Dn(Fr(e*255),0,255)}function cn(e){return Dn(Fr(e/2.55)/100,0,1)}function Af(e){return Dn(Fr(e*100),0,100)}const ve={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},bc=[..."0123456789ABCDEF"],NM=e=>bc[e&15],LM=e=>bc[(e&240)>>4]+bc[e&15],Yr=e=>(e&240)>>4===(e&15),FM=e=>Yr(e.r)&&Yr(e.g)&&Yr(e.b)&&Yr(e.a);function BM(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&ve[e[1]]*17,g:255&ve[e[2]]*17,b:255&ve[e[3]]*17,a:t===5?ve[e[4]]*17:255}:(t===7||t===9)&&(n={r:ve[e[1]]<<4|ve[e[2]],g:ve[e[3]]<<4|ve[e[4]],b:ve[e[5]]<<4|ve[e[6]],a:t===9?ve[e[7]]<<4|ve[e[8]]:255})),n}const $M=(e,t)=>e<255?t(e):"";function WM(e){var t=FM(e)?NM:LM;return e?"#"+t(e.r)+t(e.g)+t(e.b)+$M(e.a,t):void 0}const UM=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Xb(e,t,n){const i=t*Math.min(n,1-n),s=(r,o=(r+e/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function HM(e,t,n){const i=(s,r=(s+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function zM(e,t,n){const i=Xb(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)i[s]*=1-t-n,i[s]+=t;return i}function VM(e,t,n,i,s){return e===s?(t-n)/i+(t<n?6:0):t===s?(n-e)/i+2:(e-t)/i+4}function Yu(e){const n=e.r/255,i=e.g/255,s=e.b/255,r=Math.max(n,i,s),o=Math.min(n,i,s),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=VM(n,i,s,u,r),l=l*60+.5),[l|0,c||0,a]}function Xu(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(Vn)}function Qu(e,t,n){return Xu(Xb,e,t,n)}function jM(e,t,n){return Xu(zM,e,t,n)}function KM(e,t,n){return Xu(HM,e,t,n)}function Qb(e){return(e%360+360)%360}function qM(e){const t=UM.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?Us(+t[5]):Vn(+t[5]));const s=Qb(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=jM(s,r,o):t[1]==="hsv"?i=KM(s,r,o):i=Qu(s,r,o),{r:i[0],g:i[1],b:i[2],a:n}}function GM(e,t){var n=Yu(e);n[0]=Qb(n[0]+t),n=Qu(n),e.r=n[0],e.g=n[1],e.b=n[2]}function YM(e){if(!e)return;const t=Yu(e),n=t[0],i=Af(t[1]),s=Af(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${s}%, ${cn(e.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const Mf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Rf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function XM(){const e={},t=Object.keys(Rf),n=Object.keys(Mf);let i,s,r,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],s=0;s<n.length;s++)r=n[s],a=a.replace(r,Mf[r]);r=parseInt(Rf[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let Xr;function QM(e){Xr||(Xr=XM(),Xr.transparent=[0,0,0,0]);const t=Xr[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const JM=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ZM(e){const t=JM.exec(e);let n=255,i,s,r;if(t){if(t[7]!==i){const o=+t[7];n=t[8]?Us(o):Dn(o*255,0,255)}return i=+t[1],s=+t[3],r=+t[5],i=255&(t[2]?Us(i):Dn(i,0,255)),s=255&(t[4]?Us(s):Dn(s,0,255)),r=255&(t[6]?Us(r):Dn(r,0,255)),{r:i,g:s,b:r,a:n}}}function tR(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${cn(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const bl=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Wi=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function eR(e,t,n){const i=Wi(cn(e.r)),s=Wi(cn(e.g)),r=Wi(cn(e.b));return{r:Vn(bl(i+n*(Wi(cn(t.r))-i))),g:Vn(bl(s+n*(Wi(cn(t.g))-s))),b:Vn(bl(r+n*(Wi(cn(t.b))-r))),a:e.a+n*(t.a-e.a)}}function Qr(e,t,n){if(e){let i=Yu(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=Qu(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function Jb(e,t){return e&&Object.assign(t||{},e)}function Pf(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Vn(e[3]))):(t=Jb(e,{r:0,g:0,b:0,a:1}),t.a=Vn(t.a)),t}function nR(e){return e.charAt(0)==="r"?ZM(e):qM(e)}class wr{constructor(t){if(t instanceof wr)return t;const n=typeof t;let i;n==="object"?i=Pf(t):n==="string"&&(i=BM(t)||QM(t)||nR(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Jb(this._rgb);return t&&(t.a=cn(t.a)),t}set rgb(t){this._rgb=Pf(t)}rgbString(){return this._valid?tR(this._rgb):void 0}hexString(){return this._valid?WM(this._rgb):void 0}hslString(){return this._valid?YM(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,s=t.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=eR(this._rgb,t._rgb,n)),this}clone(){return new wr(this.rgb)}alpha(t){return this._rgb.a=Vn(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Fr(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Qr(this._rgb,2,t),this}darken(t){return Qr(this._rgb,2,-t),this}saturate(t){return Qr(this._rgb,1,t),this}desaturate(t){return Qr(this._rgb,1,-t),this}rotate(t){return GM(this._rgb,t),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function sn(){}const iR=(()=>{let e=0;return()=>e++})();function gt(e){return e===null||typeof e>"u"}function Rt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ht(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Bt(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function _e(e,t){return Bt(e)?e:t}function ot(e,t){return typeof e>"u"?t:e}const sR=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,Zb=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function kt(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function St(e,t,n,i){let s,r,o;if(Rt(e))if(r=e.length,i)for(s=r-1;s>=0;s--)t.call(n,e[s],s);else for(s=0;s<r;s++)t.call(n,e[s],s);else if(ht(e))for(o=Object.keys(e),r=o.length,s=0;s<r;s++)t.call(n,e[o[s]],o[s])}function ta(e,t){let n,i,s,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(s=e[n],r=t[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function ea(e){if(Rt(e))return e.map(ea);if(ht(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let s=0;for(;s<i;++s)t[n[s]]=ea(e[n[s]]);return t}return e}function ty(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function rR(e,t,n,i){if(!ty(e))return;const s=t[e],r=n[e];ht(s)&&ht(r)?xr(s,r,i):t[e]=ea(r)}function xr(e,t,n){const i=Rt(t)?t:[t],s=i.length;if(!ht(e))return e;n=n||{};const r=n.merger||rR;let o;for(let a=0;a<s;++a){if(o=i[a],!ht(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],e,o,n)}return e}function nr(e,t){return xr(e,t,{merger:oR})}function oR(e,t,n){if(!ty(e))return;const i=t[e],s=n[e];ht(i)&&ht(s)?nr(i,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=ea(s))}const Of={"":e=>e,x:e=>e.x,y:e=>e.y};function aR(e){const t=e.split("."),n=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function lR(e){const t=aR(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function qn(e,t){return(Of[t]||(Of[t]=lR(t)))(e)}function Ju(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Sr=e=>typeof e<"u",Gn=e=>typeof e=="function",Df=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function cR(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Ot=Math.PI,Pt=2*Ot,uR=Pt+Ot,na=Number.POSITIVE_INFINITY,hR=Ot/180,Wt=Ot/2,Jn=Ot/4,Nf=Ot*2/3,Nn=Math.log10,Qe=Math.sign;function ir(e,t,n){return Math.abs(e-t)<n}function Lf(e){const t=Math.round(e);e=ir(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Nn(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function dR(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((s,r)=>s-r).pop(),t}function ds(e){return!isNaN(parseFloat(e))&&isFinite(e)}function fR(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function ey(e,t,n){let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i][n],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Oe(e){return e*(Ot/180)}function Zu(e){return e*(180/Ot)}function Ff(e){if(!Bt(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function ny(e,t){const n=t.x-e.x,i=t.y-e.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*Ot&&(r+=Pt),{angle:r,distance:s}}function yc(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function pR(e,t){return(e-t+uR)%Pt-Ot}function be(e){return(e%Pt+Pt)%Pt}function Er(e,t,n,i){const s=be(e),r=be(t),o=be(n),a=be(r-s),l=be(o-s),c=be(s-r),u=be(s-o);return s===r||s===o||i&&r===o||a>l&&c<u}function Kt(e,t,n){return Math.max(t,Math.min(n,e))}function gR(e){return Kt(e,-32768,32767)}function fn(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function th(e,t,n){n=n||(o=>e[o]<t);let i=e.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const pn=(e,t,n,i)=>th(e,n,i?s=>{const r=e[s][t];return r<n||r===n&&e[s+1][t]===n}:s=>e[s][t]<n),mR=(e,t,n)=>th(e,n,i=>e[i][t]>=n);function _R(e,t,n){let i=0,s=e.length;for(;i<s&&e[i]<t;)i++;for(;s>i&&e[s-1]>n;)s--;return i>0||s<e.length?e.slice(i,s):e}const iy=["push","pop","shift","splice","unshift"];function bR(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),iy.forEach(n=>{const i="_onData"+Ju(n),s=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function Bf(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(iy.forEach(r=>{delete e[r]}),delete e._chartjs)}function sy(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const ry=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function oy(e,t){let n=[],i=!1;return function(...s){n=s,i||(i=!0,ry.call(window,()=>{i=!1,e.apply(t,n)}))}}function yR(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const eh=e=>e==="start"?"left":e==="end"?"right":"center",Jt=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,vR=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t;function ay(e,t,n){const i=t.length;let s=0,r=i;if(e._sorted){const{iScale:o,_parsed:a}=e,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(s=Kt(Math.min(pn(a,l,c).lo,n?i:pn(t,l,o.getPixelForValue(c)).lo),0,i-1)),d?r=Kt(Math.max(pn(a,o.axis,u,!0).hi+1,n?0:pn(t,l,o.getPixelForValue(u),!0).hi+1),s,i)-s:r=i-s}return{start:s,count:r}}function ly(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=s,!0;const r=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const Jr=e=>e===0||e===1,$f=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Pt/n)),Wf=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Pt/n)+1,sr={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Wt)+1,easeOutSine:e=>Math.sin(e*Wt),easeInOutSine:e=>-.5*(Math.cos(Ot*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Jr(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Jr(e)?e:$f(e,.075,.3),easeOutElastic:e=>Jr(e)?e:Wf(e,.075,.3),easeInOutElastic(e){return Jr(e)?e:e<.5?.5*$f(e*2,.1125,.45):.5+.5*Wf(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-sr.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?sr.easeInBounce(e*2)*.5:sr.easeOutBounce(e*2-1)*.5+.5};function nh(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Uf(e){return nh(e)?e:new wr(e)}function yl(e){return nh(e)?e:new wr(e).saturate(.5).darken(.1).hexString()}const wR=["x","y","borderWidth","radius","tension"],xR=["color","borderColor","backgroundColor"];function SR(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:xR},numbers:{type:"number",properties:wR}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function ER(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Hf=new Map;function IR(e,t){t=t||{};const n=e+JSON.stringify(t);let i=Hf.get(n);return i||(i=new Intl.NumberFormat(e,t),Hf.set(n,i)),i}function Br(e,t,n){return IR(t,n).format(e)}const cy={values(e){return Rt(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let s,r=e;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=CR(e,n)}const o=Nn(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Br(e,i,l)},logarithmic(e,t,n){if(e===0)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(Nn(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?cy.numeric.call(this,e,t,n):""}};function CR(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var Na={formatters:cy};function TR(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Na.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Ti=Object.create(null),vc=Object.create(null);function rr(e,t){if(!t)return e;const n=t.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];e=e[r]||(e[r]=Object.create(null))}return e}function vl(e,t,n){return typeof t=="string"?xr(rr(e,t),n):xr(rr(e,""),t)}class kR{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>yl(s.backgroundColor),this.hoverBorderColor=(i,s)=>yl(s.borderColor),this.hoverColor=(i,s)=>yl(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return vl(this,t,n)}get(t){return rr(this,t)}describe(t,n){return vl(vc,t,n)}override(t,n){return vl(Ti,t,n)}route(t,n,i,s){const r=rr(this,t),o=rr(this,i),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return ht(l)?Object.assign({},c,l):ot(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var $t=new kR({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[SR,ER,TR]);function AR(e){return!e||gt(e.size)||gt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function ia(e,t,n,i,s){let r=t[s];return r||(r=t[s]=e.measureText(s).width,n.push(s)),r>i&&(i=r),i}function MR(e,t,n,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(s=i.data={},r=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],h!=null&&!Rt(h))o=ia(e,s,r,o,h);else if(Rt(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!Rt(d)&&(o=ia(e,s,r,o,d));e.restore();const f=r.length/2;if(f>n.length){for(l=0;l<f;l++)delete s[r[l]];r.splice(0,f)}return o}function Zn(e,t,n){const i=e.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((t-s)*i)/i+s}function zf(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function wc(e,t,n,i){uy(e,t,n,i,null)}function uy(e,t,n,i,s){let r,o,a,l,c,u,h,d;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*hR;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:s?e.ellipse(n,i,s/2,g,0,0,Pt):e.arc(n,i,g,0,Pt),e.closePath();break;case"triangle":u=s?s/2:g,e.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=Nf,e.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=Nf,e.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(m+Jn)*l,h=Math.cos(m+Jn)*(s?s/2-c:l),a=Math.sin(m+Jn)*l,d=Math.sin(m+Jn)*(s?s/2-c:l),e.arc(n-h,i-a,c,m-Ot,m-Wt),e.arc(n+d,i-o,c,m-Wt,m),e.arc(n+h,i+a,c,m,m+Wt),e.arc(n-d,i+o,c,m+Wt,m+Ot),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=s?s/2:l,e.rect(n-u,i-l,2*u,2*l);break}m+=Jn;case"rectRot":h=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(s?s/2:g),e.moveTo(n-h,i-a),e.lineTo(n+d,i-o),e.lineTo(n+h,i+a),e.lineTo(n-d,i+o),e.closePath();break;case"crossRot":m+=Jn;case"cross":h=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(s?s/2:g),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o);break;case"star":h=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(s?s/2:g),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o),m+=Jn,h=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(s?s/2:g),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o);break;case"line":o=s?s/2:Math.cos(m)*g,a=Math.sin(m)*g,e.moveTo(n-o,i-a),e.lineTo(n+o,i+a);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(m)*(s?s/2:g),i+Math.sin(m)*g);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function gn(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function La(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Fa(e){e.restore()}function RR(e,t,n,i,s){if(!t)return e.lineTo(n.x,n.y);if(s==="middle"){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else s==="after"!=!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function PR(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function OR(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),gt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function DR(e,t,n,i,s){if(s.strikethrough||s.underline){const r=e.measureText(i),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function NR(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function ki(e,t,n,i,s,r={}){const o=Rt(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=s.string,OR(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&NR(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),gt(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,n,i,r.maxWidth)),e.fillText(c,n,i,r.maxWidth),DR(e,n,i,c,r),i+=Number(s.lineHeight);e.restore()}function Ir(e,t){const{x:n,y:i,w:s,h:r,radius:o}=t;e.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Ot,Ot,!0),e.lineTo(n,i+r-o.bottomLeft),e.arc(n+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,Ot,Wt,!0),e.lineTo(n+s-o.bottomRight,i+r),e.arc(n+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,Wt,0,!0),e.lineTo(n+s,i+o.topRight),e.arc(n+s-o.topRight,i+o.topRight,o.topRight,0,-Wt,!0),e.lineTo(n+o.topLeft,i)}const LR=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,FR=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function BR(e,t){const n=(""+e).match(LR);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const $R=e=>+e||0;function ih(e,t){const n={},i=ht(t),s=i?Object.keys(t):t,r=ht(e)?i?o=>ot(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of s)n[o]=$R(r(o));return n}function hy(e){return ih(e,{top:"y",right:"x",bottom:"y",left:"x"})}function _i(e){return ih(e,["topLeft","topRight","bottomLeft","bottomRight"])}function se(e){const t=hy(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function zt(e,t){e=e||{},t=t||$t.font;let n=ot(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=ot(e.style,t.style);i&&!(""+i).match(FR)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:ot(e.family,t.family),lineHeight:BR(ot(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:ot(e.weight,t.weight),string:""};return s.string=AR(s),s}function Hs(e,t,n,i){let s=!0,r,o,a;for(r=0,o=e.length;r<o;++r)if(a=e[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),s=!1),n!==void 0&&Rt(a)&&(a=a[n%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function WR(e,t,n){const{min:i,max:s}=e,r=Zb(t,(s-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function Yn(e,t){return Object.assign(Object.create(e),t)}function sh(e,t=[""],n,i,s=()=>e[0]){const r=n||e;typeof i>"u"&&(i=gy("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>sh([a,...e],t,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return fy(a,l,()=>GR(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return jf(a).includes(l)},ownKeys(a){return jf(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function fs(e,t,n,i){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:dy(e,i),setContext:r=>fs(e,r,n,i),override:r=>fs(e.override(r),t,n,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return fy(r,o,()=>HR(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function dy(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:i,isScriptable:Gn(n)?n:()=>n,isIndexable:Gn(i)?i:()=>i}}const UR=(e,t)=>e?e+Ju(t):t,rh=(e,t)=>ht(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function fy(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const i=n();return e[t]=i,i}function HR(e,t,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=e;let a=i[t];return Gn(a)&&o.isScriptable(t)&&(a=zR(t,a,e,n)),Rt(a)&&a.length&&(a=VR(t,a,e,o.isIndexable)),rh(t,a)&&(a=fs(a,s,r&&r[t],o)),a}function zR(e,t,n,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||i);return a.delete(e),rh(e,l)&&(l=oh(s._scopes,s,e,l)),l}function VR(e,t,n,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&i(e))return t[r.index%t.length];if(ht(t[0])){const l=t,c=s._scopes.filter(u=>u!==l);t=[];for(const u of l){const h=oh(c,s,e,u);t.push(fs(h,r,o&&o[e],a))}}return t}function py(e,t,n){return Gn(e)?e(t,n):e}const jR=(e,t)=>e===!0?t:typeof e=="string"?qn(t,e):void 0;function KR(e,t,n,i,s){for(const r of t){const o=jR(n,r);if(o){e.add(o);const a=py(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function oh(e,t,n,i){const s=t._rootScopes,r=py(t._fallback,n,i),o=[...e,...s],a=new Set;a.add(i);let l=Vf(a,o,n,r||n,i);return l===null||typeof r<"u"&&r!==n&&(l=Vf(a,o,r,l,i),l===null)?!1:sh(Array.from(a),[""],s,r,()=>qR(t,n,i))}function Vf(e,t,n,i,s){for(;n;)n=KR(e,t,n,i,s);return n}function qR(e,t,n){const i=e._getTarget();t in i||(i[t]={});const s=i[t];return Rt(s)&&ht(n)?n:s||{}}function GR(e,t,n,i){let s;for(const r of t)if(s=gy(UR(r,e),n),typeof s<"u")return rh(e,s)?oh(n,i,e,s):s}function gy(e,t){for(const n of t){if(!n)continue;const i=n[e];if(typeof i<"u")return i}}function jf(e){let t=e._keys;return t||(t=e._keys=YR(e._scopes)),t}function YR(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}function my(e,t,n,i){const{iScale:s}=e,{key:r="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=t[c],o[a]={r:s.parse(qn(u,r),c)};return o}const XR=Number.EPSILON||1e-14,ps=(e,t)=>t<e.length&&!e[t].skip&&e[t],_y=e=>e==="x"?"y":"x";function QR(e,t,n,i){const s=e.skip?t:e,r=t,o=n.skip?t:n,a=yc(r,s),l=yc(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:r.x-h*(o.x-s.x),y:r.y-h*(o.y-s.y)},next:{x:r.x+d*(o.x-s.x),y:r.y+d*(o.y-s.y)}}}function JR(e,t,n){const i=e.length;let s,r,o,a,l,c=ps(e,0);for(let u=0;u<i-1;++u)if(l=c,c=ps(e,u+1),!(!l||!c)){if(ir(t[u],0,XR)){n[u]=n[u+1]=0;continue}s=n[u]/t[u],r=n[u+1]/t[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*t[u],n[u+1]=r*o*t[u])}}function ZR(e,t,n="x"){const i=_y(n),s=e.length;let r,o,a,l=ps(e,0);for(let c=0;c<s;++c){if(o=a,a=l,l=ps(e,c+1),!a)continue;const u=a[n],h=a[i];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${i}`]=h-r*t[c]),l&&(r=(l[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${i}`]=h+r*t[c])}}function tP(e,t="x"){const n=_y(t),i=e.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=ps(e,0);for(o=0;o<i;++o)if(a=l,l=c,c=ps(e,o+1),!!l){if(c){const u=c[t]-l[t];s[o]=u!==0?(c[n]-l[n])/u:0}r[o]=a?c?Qe(s[o-1])!==Qe(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}JR(e,s,r),ZR(e,r,t)}function Zr(e,t,n){return Math.max(Math.min(e,n),t)}function eP(e,t){let n,i,s,r,o,a=gn(e[0],t);for(n=0,i=e.length;n<i;++n)o=r,r=a,a=n<i-1&&gn(e[n+1],t),r&&(s=e[n],o&&(s.cp1x=Zr(s.cp1x,t.left,t.right),s.cp1y=Zr(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=Zr(s.cp2x,t.left,t.right),s.cp2y=Zr(s.cp2y,t.top,t.bottom)))}function nP(e,t,n,i,s){let r,o,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")tP(e,s);else{let c=i?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],l=QR(c,a,e[Math.min(r+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&eP(e,n)}function ah(){return typeof window<"u"&&typeof document<"u"}function lh(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function sa(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const Ba=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function iP(e,t){return Ba(e).getPropertyValue(t)}const sP=["top","right","bottom","left"];function bi(e,t,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=sP[s];i[r]=parseFloat(e[t+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const rP=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function oP(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(rP(s,r,e.target))a=s,l=r;else{const c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function si(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,s=Ba(n),r=s.boxSizing==="border-box",o=bi(s,"padding"),a=bi(s,"border","width"),{x:l,y:c,box:u}=oP(e,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=t;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}function aP(e,t,n){let i,s;if(t===void 0||n===void 0){const r=lh(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const o=r.getBoundingClientRect(),a=Ba(r),l=bi(a,"border","width"),c=bi(a,"padding");t=o.width-c.width-l.width,n=o.height-c.height-l.height,i=sa(a.maxWidth,r,"clientWidth"),s=sa(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:i||na,maxHeight:s||na}}const to=e=>Math.round(e*10)/10;function lP(e,t,n,i){const s=Ba(e),r=bi(s,"margin"),o=sa(s.maxWidth,e,"clientWidth")||na,a=sa(s.maxHeight,e,"clientHeight")||na,l=aP(e,t,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const d=bi(s,"border","width"),f=bi(s,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?c/i:u-r.height),c=to(Math.min(c,o,l.maxWidth)),u=to(Math.min(u,a,l.maxHeight)),c&&!u&&(u=to(c/2)),(t!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=to(Math.floor(u*i))),{width:c,height:u}}function Kf(e,t,n){const i=t||1,s=Math.floor(e.height*i),r=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(e.currentDevicePixelRatio=i,o.height=s,o.width=r,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const cP=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};ah()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function qf(e,t){const n=iP(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ri(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function uP(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:i==="middle"?n<.5?e.y:t.y:i==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function hP(e,t,n,i){const s={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=ri(e,s,n),a=ri(s,r,n),l=ri(r,t,n),c=ri(o,a,n),u=ri(a,l,n);return ri(c,u,n)}const dP=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},fP=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function ns(e,t,n){return e?dP(t,n):fP()}function by(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function yy(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function vy(e){return e==="angle"?{between:Er,compare:pR,normalize:be}:{between:fn,compare:(t,n)=>t-n,normalize:t=>t}}function Gf({start:e,end:t,count:n,loop:i,style:s}){return{start:e%n,end:t%n,loop:i&&(t-e+1)%n===0,style:s}}function pP(e,t,n){const{property:i,start:s,end:r}=n,{between:o,normalize:a}=vy(i),l=t.length;let{start:c,end:u,loop:h}=e,d,f;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(t[c%l][i]),s,r);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:e.style}}function wy(e,t,n){if(!n)return[e];const{property:i,start:s,end:r}=n,o=t.length,{compare:a,between:l,normalize:c}=vy(i),{start:u,end:h,loop:d,style:f}=pP(e,t,n),p=[];let g=!1,m=null,y,v,S;const x=()=>l(s,S,y)&&a(s,S)!==0,E=()=>a(r,y)===0||l(r,S,y),A=()=>g||x(),D=()=>!g||E();for(let L=u,q=u;L<=h;++L)v=t[L%o],!v.skip&&(y=c(v[i]),y!==S&&(g=l(y,s,r),m===null&&A()&&(m=a(y,s)===0?L:q),m!==null&&D()&&(p.push(Gf({start:m,end:L,loop:d,count:o,style:f})),m=null),q=L,S=y));return m!==null&&p.push(Gf({start:m,end:h,loop:d,count:o,style:f})),p}function xy(e,t){const n=[],i=e.segments;for(let s=0;s<i.length;s++){const r=wy(i[s],e.points,t);r.length&&n.push(...r)}return n}function gP(e,t,n,i){let s=0,r=t-1;if(n&&!i)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(r+=s);r>s&&e[r%t].skip;)r--;return r%=t,{start:s,end:r}}function mP(e,t,n,i){const s=e.length,r=[];let o=t,a=e[t],l;for(l=t+1;l<=n;++l){const c=e[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:t%s,end:(l-1)%s,loop:i}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%s,end:o%s,loop:i}),r}function _P(e,t){const n=e.points,i=e.options.spanGaps,s=n.length;if(!s)return[];const r=!!e._loop,{start:o,end:a}=gP(n,s,r,i);if(i===!0)return Yf(e,[{start:o,end:a,loop:r}],n,t);const l=a<o?a+s:a,c=!!e._fullLoop&&o===0&&a===s-1;return Yf(e,mP(n,o,l,c),n,t)}function Yf(e,t,n,i){return!i||!i.setContext||!n?t:bP(e,t,n,i)}function bP(e,t,n,i){const s=e._chart.getContext(),r=Xf(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let u=r,h=t[0].start,d=h;function f(p,g,m,y){const v=a?-1:1;if(p!==g){for(p+=l;n[p%l].skip;)p-=v;for(;n[g%l].skip;)g+=v;p%l!==g%l&&(c.push({start:p%l,end:g%l,loop:m,style:y}),u=y,h=g%l)}}for(const p of t){h=a?h:p.start;let g=n[h%l],m;for(d=h+1;d<=p.end;d++){const y=n[d%l];m=Xf(i.setContext(Yn(s,{type:"segment",p0:g,p1:y,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),yP(m,u)&&f(h,d-1,p.loop,u),g=y,u=m}h<d-1&&f(h,d-1,p.loop,u)}return c}function Xf(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function yP(e,t){if(!t)return!1;const n=[],i=function(s,r){return nh(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(e,i)!==JSON.stringify(t,i)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class vP{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,s){const r=n.listeners[s],o=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ry.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,t,"progress")),r.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var rn=new vP;const Qf="transparent",wP={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=Uf(e||Qf),s=i.valid&&Uf(t||Qf);return s&&s.valid?s.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class xP{constructor(t,n,i,s){const r=n[i];s=Hs([t.to,s,r,t.from]);const o=Hs([t.from,r,s]);this._active=!0,this._fn=t.fn||wP[t.type||typeof o],this._easing=sr[t.easing]||sr.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Hs([t.to,n,s,t.from]),this._from=Hs([t.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<i),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=r;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class Sy{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!ht(t))return;const n=Object.keys($t.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!ht(r))return;const o={};for(const a of n)o[a]=r[a];(Rt(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,n){const i=n.options,s=EP(t,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&SP(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,n){const i=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(t,n));continue}const u=n[c];let h=r[c];const d=i.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){t[c]=u;continue}r[c]=h=new xP(d,t,c,u),s.push(h)}return s}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return rn.add(this._chart,i),!0}}function SP(e,t){const n=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const r=e[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function EP(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Jf(e,t){const n=e&&e.options||{},i=n.reverse,s=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:i?r:s,end:i?s:r}}function IP(e,t,n){if(n===!1)return!1;const i=Jf(e,n),s=Jf(t,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function CP(e){let t,n,i,s;return ht(e)?(t=e.top,n=e.right,i=e.bottom,s=e.left):t=n=i=s=e,{top:t,right:n,bottom:i,left:s,disabled:e===!1}}function Ey(e,t){const n=[],i=e._getSortedDatasetMetas(t);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function Zf(e,t,n,i={}){const s=e.keys,r=i.mode==="single";let o,a,l,c;if(t!==null){for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(i.all)continue;break}c=e.values[l],Bt(c)&&(r||t===0||Qe(t)===Qe(c))&&(t+=c)}return t}}function TP(e){const t=Object.keys(e),n=new Array(t.length);let i,s,r;for(i=0,s=t.length;i<s;++i)r=t[i],n[i]={x:r,y:e[r]};return n}function tp(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function kP(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function AP(e){const{min:t,max:n,minDefined:i,maxDefined:s}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function MP(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function ep(e,t,n,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const r=e[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function np(e,t){const{chart:n,_cachedMeta:i}=e,s=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,u=kP(r,o,i),h=t.length;let d;for(let f=0;f<h;++f){const p=t[f],{[l]:g,[c]:m}=p,y=p._stacks||(p._stacks={});d=y[c]=MP(s,u,g),d[a]=m,d._top=ep(d,o,!0,i.type),d._bottom=ep(d,o,!1,i.type);const v=d._visualValues||(d._visualValues={});v[a]=m}}function wl(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function RP(e,t){return Yn(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function PP(e,t,n){return Yn(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Ds(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const s of t){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n],r[i]._visualValues!==void 0&&r[i]._visualValues[n]!==void 0&&delete r[i]._visualValues[n]}}}const xl=e=>e==="reset"||e==="none",ip=(e,t)=>t?e:Object.assign({},e),OP=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:Ey(n,!0),values:null};class Le{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=tp(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ds(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(h,d,f,p)=>h==="x"?d:h==="r"?p:f,r=n.xAxisID=ot(i.xAxisID,wl(t,"x")),o=n.yAxisID=ot(i.yAxisID,wl(t,"y")),a=n.rAxisID=ot(i.rAxisID,wl(t,"r")),l=n.indexAxis,c=n.iAxisID=s(l,r,o,a),u=n.vAxisID=s(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Bf(this._data,this),t._stacked&&Ds(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if(ht(n))this._data=TP(n);else if(i!==n){if(i){Bf(i,this);const s=this._cachedMeta;Ds(s),s._parsed=[]}n&&Object.isExtensible(n)&&bR(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=tp(n.vScale,n),n.stack!==i.stack&&(s=!0,Ds(n),n.stack=i.stack),this._resyncElements(t),(s||r!==n._stacked)&&np(this,n._parsed)}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=t===0&&n===s.length?!0:i._sorted,c=t>0&&i._parsed[t-1],u,h,d;if(this._parsing===!1)i._parsed=s,i._sorted=!0,d=s;else{Rt(s[t])?d=this.parseArrayData(i,s,t,n):ht(s[t])?d=this.parseObjectData(i,s,t,n):d=this.parsePrimitiveData(i,s,t,n);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)i._parsed[u+t]=h=d[u],l&&(f()&&(l=!1),c=h);i._sorted=l}o&&np(this,d)}parsePrimitiveData(t,n,i,s){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,h=new Array(s);let d,f,p;for(d=0,f=s;d<f;++d)p=d+i,h[d]={[a]:u||r.parse(c[p],p),[l]:o.parse(n[p],p)};return h}parseArrayData(t,n,i,s){const{xScale:r,yScale:o}=t,a=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+i,h=n[u],a[l]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(t,n,i,s){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,d,f;for(u=0,h=s;u<h;++u)d=u+i,f=n[d],c[u]={x:r.parse(qn(f,a),d),y:o.parse(qn(f,l),d)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const s=this.chart,r=this._cachedMeta,o=n[t.axis],a={keys:Ey(s,!0),values:n._stacks[t.axis]._visualValues};return Zf(a,o,r.index,{mode:i})}updateRangeFromParsed(t,n,i,s){const r=i[n.axis];let o=r===null?NaN:r;const a=s&&i._stacks[n.axis];s&&a&&(s.values=a,o=Zf(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&t===i.iScale,o=s.length,a=this._getOtherScale(t),l=OP(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=AP(a);let d,f;function p(){f=s[d];const g=f[a.axis];return!Bt(f[t.axis])||u>g||h<g}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(c,t,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(c,t,f,l);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=n.length;s<r;++s)o=n[s][t.axis],Bt(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=CP(ot(this.options.clip,IP(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(t,r,a,l),u=a;u<a+l;++u){const h=s[u];h.hidden||(h.active&&c?o.push(h):h.draw(t,r))}for(u=0;u<o.length;++u)o[u].draw(t,r)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const s=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=PP(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=RP(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const s=n==="active",r=this._cachedDataOpts,o=t+"-"+n,a=r[o],l=this.enableOptionSharing&&Sr(i);if(a)return ip(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys($t.elements[t]),p=()=>this.getContext(i,s,n),g=c.resolveNamedOptions(d,f,p,h);return g.$shared&&(g.$shared=l,r[o]=Object.freeze(ip(g,l))),g}_resolveAnimations(t,n,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(t,i,n))}const c=new Sy(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||xl(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(n,r)||r!==s;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:o}}updateElement(t,n,i,s){xl(s)?Object.assign(t,i):this._resolveAnimations(n,s).update(t,i)}updateSharedOptions(t,n,i){t&&!xl(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,s){t.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=n.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,n,i=!0){const s=this._cachedMeta,r=s.data,o=t+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,n),i&&this.updateElements(r,t,n,"reset")}updateElements(t,n,i,s){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,n);i._stacked&&Ds(i,s)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,s]=t;this[n](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}$(Le,"defaults",{}),$(Le,"datasetElementType",null),$(Le,"dataElementType",null);function DP(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let s=0,r=n.length;s<r;s++)i=i.concat(n[s].controller.getAllParsedValues(e));e._cache.$bar=sy(i.sort((s,r)=>s-r))}return e._cache.$bar}function NP(e){const t=e.iScale,n=DP(t,e.type);let i=t._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(Sr(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=n.length;s<r;++s)o=t.getPixelForValue(n[s]),l();for(a=void 0,s=0,r=t.ticks.length;s<r;++s)o=t.getPixelForTick(s),l();return i}function LP(e,t,n,i){const s=n.barThickness;let r,o;return gt(s)?(r=t.min*n.categoryPercentage,o=n.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:t.pixels[e]-r/2}}function FP(e,t,n,i){const s=t.pixels,r=s[e];let o=e>0?s[e-1]:null,a=e<s.length-1?s[e+1]:null;const l=n.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function BP(e,t,n,i){const s=n.parse(e[0],i),r=n.parse(e[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function Iy(e,t,n,i){return Rt(e)?BP(e,t,n,i):t[n.axis]=n.parse(e,i),t}function sp(e,t,n,i){const s=e.iScale,r=e.vScale,o=s.getLabels(),a=s===r,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=t[c],h={},h[s.axis]=a||s.parse(o[c],c),l.push(Iy(d,h,r,c));return l}function Sl(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function $P(e,t,n){return e!==0?Qe(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function WP(e){let t,n,i,s,r;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(s="end",r="start"):(s="start",r="end"),{start:n,end:i,reverse:t,top:s,bottom:r}}function UP(e,t,n,i){let s=t.borderSkipped;const r={};if(!s){e.borderSkipped=r;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=WP(e);s==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?s=c:(n._bottom||0)===i?s=u:(r[rp(u,o,a,l)]=!0,s=c)),r[rp(s,o,a,l)]=!0,e.borderSkipped=r}function rp(e,t,n,i){return i?(e=HP(e,t,n),e=op(e,n,t)):e=op(e,t,n),e}function HP(e,t,n){return e===t?n:e===n?t:e}function op(e,t,n){return e==="start"?t:e==="end"?n:e}function zP(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class yo extends Le{parsePrimitiveData(t,n,i,s){return sp(t,n,i,s)}parseArrayData(t,n,i,s){return sp(t,n,i,s)}parseObjectData(t,n,i,s){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let d,f,p,g;for(d=i,f=i+s;d<f;++d)g=n[d],p={},p[r.axis]=r.parse(qn(g,c),d),h.push(Iy(qn(g,u),p,o,d));return h}updateRangeFromParsed(t,n,i,s){super.updateRangeFromParsed(t,n,i,s);const r=i._custom;r&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:i,vScale:s}=n,r=this.getParsed(t),o=r._custom,a=Sl(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,s);for(let f=n;f<n+i;f++){const p=this.getParsed(f),g=r||gt(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,u),y=(p._stacks||{})[a.axis],v={horizontal:c,base:g.base,enableBorderRadius:!y||Sl(p._custom)||o===y._top||o===y._bottom,x:c?g.head:m.center,y:c?m.center:g.head,height:c?m.size:Math.abs(g.size),width:c?Math.abs(g.size):m.size};d&&(v.options=h||this.resolveDataElementOptions(f,t[f].active?"active":s));const S=v.options||t[f].options;UP(v,S,y,o),zP(v,S,u.ratio),this.updateElement(t[f],f,v,s)}}_getStacks(t,n){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),r=i.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),u=c&&c[l.vScale.axis];if(gt(u)||isNaN(u))return!0};for(const l of s)if(!(n!==void 0&&a(l))&&((r===!1||o.indexOf(l.stack)===-1||r===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,i){const s=this._getStacks(t,i),r=n!==void 0?s.indexOf(n):-1;return r===-1?s.length-1:r}_getRuler(){const t=this.options,n=this._cachedMeta,i=n.iScale,s=[];let r,o;for(r=0,o=n.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=t.barThickness;return{min:a||NP(n),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),c=l._custom,u=Sl(c);let h=l[n.axis],d=0,f=i?this.applyStack(n,l,i):h,p,g;f!==h&&(d=f-h,f=h),u&&(h=c.barStart,f=c.barEnd-c.barStart,h!==0&&Qe(h)!==Qe(c.barEnd)&&(d=0),d+=h);const m=!gt(r)&&!u?r:d;let y=n.getPixelForValue(m);if(this.chart.getDataVisibility(t)?p=n.getPixelForValue(d+f):p=y,g=p-y,Math.abs(g)<o){g=$P(g,n,a)*o,h===a&&(y-=g/2);const v=n.getPixelForDecimal(0),S=n.getPixelForDecimal(1),x=Math.min(v,S),E=Math.max(v,S);y=Math.max(Math.min(y,E),x),p=y+g,i&&!u&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(p)-n.getValueForPixel(y))}if(y===n.getPixelForValue(a)){const v=Qe(g)*n.getLineWidthForValue(a)/2;y+=v,g-=v}return{size:g,base:y,head:p,center:p+g/2}}_calculateBarIndexPixels(t,n){const i=n.scale,s=this.options,r=s.skipNull,o=ot(s.maxBarThickness,1/0);let a,l;if(n.grouped){const c=r?this._getStackCount(t):n.stackCount,u=s.barThickness==="flex"?FP(t,n,s,c):LP(t,n,s,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,n=t.vScale,i=t.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[n.axis]!==null&&i[r].draw(this._ctx)}}$(yo,"id","bar"),$(yo,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),$(yo,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class vo extends Le{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,i,s){const r=super.parsePrimitiveData(t,n,i,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(t,n,i,s){const r=super.parseArrayData(t,n,i,s);for(let o=0;o<r.length;o++){const a=n[i+o];r[o]._custom=ot(a[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(t,n,i,s){const r=super.parseObjectData(t,n,i,s);for(let o=0;o<r.length;o++){const a=n[i+o];r[o]._custom=ot(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let i=t.length-1;i>=0;--i)n=Math.max(n,t[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=n,o=this.getParsed(t),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:i[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,i,s){const r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,s),u=o.axis,h=a.axis;for(let d=n;d<n+i;d++){const f=t[d],p=!r&&this.getParsed(d),g={},m=g[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(p[u]),y=g[h]=r?a.getBasePixel():a.getPixelForValue(p[h]);g.skip=isNaN(m)||isNaN(y),c&&(g.options=l||this.resolveDataElementOptions(d,f.active?"active":s),r&&(g.options.radius=0)),this.updateElement(f,d,g,s)}}resolveDataElementOptions(t,n){const i=this.getParsed(t);let s=super.resolveDataElementOptions(t,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return n!=="active"&&(s.radius=0),s.radius+=ot(i&&i._custom,r),s}}$(vo,"id","bubble"),$(vo,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),$(vo,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function VP(e,t,n){let i=1,s=1,r=0,o=0;if(t<Pt){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(S,x,E)=>Er(S,a,l,!0)?1:Math.max(x,x*n,E,E*n),p=(S,x,E)=>Er(S,a,l,!0)?-1:Math.min(x,x*n,E,E*n),g=f(0,c,h),m=f(Wt,u,d),y=p(Ot,c,h),v=p(Ot+Wt,u,d);i=(g-y)/2,s=(m-v)/2,r=-(g+y)/2,o=-(m+v)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class di extends Le{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=l=>+i[l];if(ht(i[t])){const{key:l="value"}=this._parsing;r=c=>+qn(i[c],l)}let o,a;for(o=t,a=t+n;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return Oe(this.options.rotation-90)}_getCircumference(){return Oe(this.options.circumference)}_getRotationExtents(){let t=Pt,n=-Pt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();t=Math.min(t,r),n=Math.max(n,r+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:i}=n,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(sR(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:p,offsetY:g}=VP(h,u,l),m=(i.width-o)/d,y=(i.height-o)/f,v=Math.max(Math.min(m,y)/2,0),S=Zb(this.options.radius,v),x=Math.max(S*l,0),E=(S-x)/this._getVisibleDatasetWeightTotal();this.offsetX=p*S,this.offsetY=g*S,s.total=this.calculateTotal(),this.outerRadius=S-E*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-E*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,n){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*r/Pt)}updateElements(t,n,i,s){const r=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=r&&c.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,{sharedOptions:g,includeOptions:m}=this._getSharedOptions(n,s);let y=this._getRotation(),v;for(v=0;v<n;++v)y+=this._circumference(v,r);for(v=n;v<n+i;++v){const S=this._circumference(v,r),x=t[v],E={x:u+this.offsetX,y:h+this.offsetY,startAngle:y,endAngle:y+S,circumference:S,outerRadius:p,innerRadius:f};m&&(E.options=g||this.resolveDataElementOptions(v,x.active?"active":s)),y+=S,this.updateElement(x,v,E,s)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let i=0,s;for(s=0;s<n.length;s++){const r=t._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Pt*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Br(n._parsed[t],i.options.locale);return{label:s[t]||"",value:r}}getMaxBorderWidth(t){let n=0;const i=this.chart;let s,r,o,a,l;if(!t){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),t=o.data,a=o.controller;break}}if(!t)return 0;for(s=0,r=t.length;s<r;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let i=0,s=t.length;i<s;++i){const r=this.resolveDataElementOptions(i);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(t){return Math.max(ot(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}$(di,"id","doughnut"),$(di,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),$(di,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),$(di,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return n.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class wo extends Le{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=ay(n,s,o);this._drawStart=a,this._drawCount=l,ly(n)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},t),this.updateElements(s,a,l,t)}updateElements(t,n,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,s),d=o.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,m=ds(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||s==="none",v=n+i,S=t.length;let x=n>0&&this.getParsed(n-1);for(let E=0;E<S;++E){const A=t[E],D=y?A:{};if(E<n||E>=v){D.skip=!0;continue}const L=this.getParsed(E),q=gt(L[f]),z=D[d]=o.getPixelForValue(L[d],E),W=D[f]=r||q?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,L,l):L[f],E);D.skip=isNaN(z)||isNaN(W)||q,D.stop=E>0&&Math.abs(L[d]-x[d])>m,g&&(D.parsed=L,D.raw=c.data[E]),h&&(D.options=u||this.resolveDataElementOptions(E,A.active?"active":s)),y||this.updateElement(A,E,D,s),x=L}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,i=n.options&&n.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}$(wo,"id","line"),$(wo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),$(wo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class or extends Le{constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Br(n._parsed[t].r,i.options.locale);return{label:s[t]||"",value:r}}parseObjectData(t,n,i,s){return my.bind(this)(t,n,i,s)}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){const t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<n.min&&(n.min=r),r>n.max&&(n.max=r))}),n}_updateRadius(){const t=this.chart,n=t.chartArea,i=t.options,s=Math.min(n.right-n.left,n.bottom-n.top),r=Math.max(s/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,n,i,s){const r=s==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,d=c.getIndexAngle(0)-.5*Ot;let f=d,p;const g=360/this.countVisibleElements();for(p=0;p<n;++p)f+=this._computeAngle(p,s,g);for(p=n;p<n+i;p++){const m=t[p];let y=f,v=f+this._computeAngle(p,s,g),S=o.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;f=v,r&&(l.animateScale&&(S=0),l.animateRotate&&(y=v=d));const x={x:u,y:h,innerRadius:0,outerRadius:S,startAngle:y,endAngle:v,options:this.resolveDataElementOptions(p,m.active?"active":s)};this.updateElement(m,p,x,s)}}countVisibleElements(){const t=this._cachedMeta;let n=0;return t.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(t,n,i){return this.chart.getDataVisibility(t)?Oe(this.resolveDataElementOptions(t,n).angle||i):0}}$(or,"id","polarArea"),$(or,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),$(or,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return n.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class xc extends di{}$(xc,"id","pie"),$(xc,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class xo extends Le{getLabelAndValue(t){const n=this._cachedMeta.vScale,i=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(t,n,i,s){return my.bind(this)(t,n,i,s)}update(t){const n=this._cachedMeta,i=n.dataset,s=n.data||[],r=n.iScale.getLabels();if(i.points=s,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(i,void 0,a,t)}this.updateElements(s,0,s.length,t)}updateElements(t,n,i,s){const r=this._cachedMeta.rScale,o=s==="reset";for(let a=n;a<n+i;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":s),u=r.getPointPositionForValue(a,this.getParsed(a).r),h=o?r.xCenter:u.x,d=o?r.yCenter:u.y,f={x:h,y:d,angle:u.angle,skip:isNaN(h)||isNaN(d),options:c};this.updateElement(l,a,f,s)}}}$(xo,"id","radar"),$(xo,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),$(xo,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class So extends Le{getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=n,o=this.getParsed(t),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:i[t]||"",value:"("+a+", "+l+")"}}update(t){const n=this._cachedMeta,{data:i=[]}=n,s=this.chart._animationsDisabled;let{start:r,count:o}=ay(n,i,s);if(this._drawStart=r,this._drawCount=o,ly(n)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},t)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,n,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,s),h=this.getSharedOptions(u),d=this.includeOptions(s,h),f=o.axis,p=a.axis,{spanGaps:g,segment:m}=this.options,y=ds(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||s==="none";let S=n>0&&this.getParsed(n-1);for(let x=n;x<n+i;++x){const E=t[x],A=this.getParsed(x),D=v?E:{},L=gt(A[p]),q=D[f]=o.getPixelForValue(A[f],x),z=D[p]=r||L?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,A,l):A[p],x);D.skip=isNaN(q)||isNaN(z)||L,D.stop=x>0&&Math.abs(A[f]-S[f])>y,m&&(D.parsed=A,D.raw=c.data[x]),d&&(D.options=h||this.resolveDataElementOptions(x,E.active?"active":s)),v||this.updateElement(E,x,D,s),S=A}this.updateSharedOptions(h,s,u)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!n.length)return s;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,r,o)/2}}$(So,"id","scatter"),$(So,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),$(So,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var jP=Object.freeze({__proto__:null,BarController:yo,BubbleController:vo,DoughnutController:di,LineController:wo,PieController:xc,PolarAreaController:or,RadarController:xo,ScatterController:So});function ti(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ch{constructor(t){$(this,"options");this.options=t||{}}static override(t){Object.assign(ch.prototype,t)}init(){}formats(){return ti()}parse(){return ti()}format(){return ti()}add(){return ti()}diff(){return ti()}startOf(){return ti()}endOf(){return ti()}}var KP={_date:ch};function qP(e,t,n,i){const{controller:s,data:r,_sorted:o}=e,a=s._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const l=a._reversePixels?mR:pn;if(i){if(s._sharedOptions){const c=r[0],u=typeof c.getRange=="function"&&c.getRange(t);if(u){const h=l(r,t,n-u),d=l(r,t,n+u);return{lo:h.lo,hi:d.hi}}}}else return l(r,t,n)}return{lo:0,hi:r.length-1}}function $r(e,t,n,i,s){const r=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:h,hi:d}=qP(r[a],t,o,s);for(let f=h;f<=d;++f){const p=u[f];p.skip||i(p,c,f)}}}function GP(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,s){const r=t?Math.abs(i.x-s.x):0,o=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function El(e,t,n,i,s){const r=[];return!s&&!e.isPointInArea(t)||$r(e,n,t,function(a,l,c){!s&&!gn(a,e.chartArea,0)||a.inRange(t.x,t.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function YP(e,t,n,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=ny(o,{x:t.x,y:t.y});Er(h,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return $r(e,n,t,r),s}function XP(e,t,n,i,s,r){let o=[];const a=GP(n);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(t.x,t.y,s);if(i&&!f)return;const p=u.getCenterPoint(s);if(!(!!r||e.isPointInArea(p))&&!f)return;const m=a(t,p);m<l?(o=[{element:u,datasetIndex:h,index:d}],l=m):m===l&&o.push({element:u,datasetIndex:h,index:d})}return $r(e,n,t,c),o}function Il(e,t,n,i,s,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!i?YP(e,t,n,s):XP(e,t,n,i,s,r)}function ap(e,t,n,i,s){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return $r(e,n,t,(l,c,u)=>{l[o](t[n],s)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,s))}),i&&!a?[]:r}var QP={evaluateInteractionItems:$r,modes:{index(e,t,n,i){const s=si(t,e),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?El(e,s,r,i,o):Il(e,s,r,!1,i,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,n,i){const s=si(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?El(e,s,r,i,o):Il(e,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,n,i){const s=si(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return El(e,s,r,i,o)},nearest(e,t,n,i){const s=si(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Il(e,s,r,n.intersect,i,o)},x(e,t,n,i){const s=si(t,e);return ap(e,s,"x",n.intersect,i)},y(e,t,n,i){const s=si(t,e);return ap(e,s,"y",n.intersect,i)}}};const Cy=["left","top","right","bottom"];function Ns(e,t){return e.filter(n=>n.pos===t)}function lp(e,t){return e.filter(n=>Cy.indexOf(n.pos)===-1&&n.box.axis===t)}function Ls(e,t){return e.sort((n,i)=>{const s=t?i:n,r=t?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function JP(e){const t=[];let n,i,s,r,o,a;for(n=0,i=(e||[]).length;n<i;++n)s=e[n],{position:r,options:{stack:o,stackWeight:a=1}}=s,t.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return t}function ZP(e){const t={};for(const n of e){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!Cy.includes(s))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function tO(e,t){const n=ZP(e),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&t.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:l&&t.availableHeight)}return n}function eO(e){const t=JP(e),n=Ls(t.filter(c=>c.box.fullSize),!0),i=Ls(Ns(t,"left"),!0),s=Ls(Ns(t,"right")),r=Ls(Ns(t,"top"),!0),o=Ls(Ns(t,"bottom")),a=lp(t,"x"),l=lp(t,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Ns(t,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function cp(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function Ty(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function nO(e,t,n,i){const{pos:s,box:r}=n,o=e.maxPadding;if(!ht(s)){n.size&&(e[s]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?r.height:r.width),n.size=h.size/h.count,e[s]+=n.size}r.getPadding&&Ty(o,r.getPadding());const a=Math.max(0,t.outerWidth-cp(o,e,"left","right")),l=Math.max(0,t.outerHeight-cp(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function iO(e){const t=e.maxPadding;function n(i){const s=Math.max(t[i]-e[i],0);return e[i]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function sO(e,t){const n=t.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],n[o])}),r}return i(e?["left","right"]:["top","bottom"])}function zs(e,t,n,i){const s=[];let r,o,a,l,c,u;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,sO(a.horizontal,t));const{same:h,other:d}=nO(t,n,a,i);c|=h&&s.length,u=u||d,l.fullSize||s.push(a)}return c&&zs(s,t,n,i)||u}function eo(e,t,n,i,s){e.top=n,e.left=t,e.right=t+i,e.bottom=n+s,e.width=i,e.height=s}function up(e,t,n,i){const s=n.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=t.w*u,d=c.size||l.height;Sr(c.start)&&(o=c.start),l.fullSize?eo(l,s.left,o,n.outerWidth-s.right-s.left,d):eo(l,t.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=t.h*u,d=c.size||l.width;Sr(c.start)&&(r=c.start),l.fullSize?eo(l,r,s.top,d,n.outerHeight-s.bottom-s.top):eo(l,r,t.top+c.placed,d,h),c.start=r,c.placed+=h,r=l.right}}t.x=r,t.y=o}var ne={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const s=se(e.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(n-s.height,0),a=eO(e.boxes),l=a.vertical,c=a.horizontal;St(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},s);Ty(d,se(i));const f=Object.assign({maxPadding:d,w:r,h:o,x:s.left,y:s.top},s),p=tO(l.concat(c),h);zs(a.fullSize,f,h,p),zs(l,f,h,p),zs(c,f,h,p)&&zs(l,f,h,p),iO(f),up(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,up(a.rightAndBottom,f,h,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},St(a.chartArea,g=>{const m=g.box;Object.assign(m,e.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class ky{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,s){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(t){return!0}updateConfig(t){}}class rO extends ky{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Eo="$chartjs",oO={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hp=e=>e===null||e==="";function aO(e,t){const n=e.style,i=e.getAttribute("height"),s=e.getAttribute("width");if(e[Eo]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",hp(s)){const r=qf(e,"width");r!==void 0&&(e.width=r)}if(hp(i))if(e.style.height==="")e.height=e.width/(t||2);else{const r=qf(e,"height");r!==void 0&&(e.height=r)}return e}const Ay=cP?{passive:!0}:!1;function lO(e,t,n){e.addEventListener(t,n,Ay)}function cO(e,t,n){e.canvas.removeEventListener(t,n,Ay)}function uO(e,t){const n=oO[e.type]||e.type,{x:i,y:s}=si(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:s!==void 0?s:null}}function ra(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function hO(e,t,n){const i=e.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||ra(a.addedNodes,i),o=o&&!ra(a.removedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function dO(e,t,n){const i=e.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||ra(a.removedNodes,i),o=o&&!ra(a.addedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Cr=new Map;let dp=0;function My(){const e=window.devicePixelRatio;e!==dp&&(dp=e,Cr.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function fO(e,t){Cr.size||window.addEventListener("resize",My),Cr.set(e,t)}function pO(e){Cr.delete(e),Cr.size||window.removeEventListener("resize",My)}function gO(e,t,n){const i=e.canvas,s=i&&lh(i);if(!s)return;const r=oy((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(s),fO(e,r),o}function Cl(e,t,n){n&&n.disconnect(),t==="resize"&&pO(e)}function mO(e,t,n){const i=e.canvas,s=oy(r=>{e.ctx!==null&&n(uO(r,e))},e);return lO(i,t,s),s}class _O extends ky{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(aO(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[Eo])return!1;const i=n[Eo].initial;["height","width"].forEach(r=>{const o=i[r];gt(o)?n.removeAttribute(r):n.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[Eo],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const s=t.$proxies||(t.$proxies={}),o={attach:hO,detach:dO,resize:gO}[n]||mO;s[n]=o(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),s=i[n];if(!s)return;({attach:Cl,detach:Cl,resize:Cl}[n]||cO)(t,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,s){return lP(t,n,i,s)}isAttached(t){const n=lh(t);return!!(n&&n.isConnected)}}function bO(e){return!ah()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?rO:_O}var co;let Sn=(co=class{constructor(){$(this,"x");$(this,"y");$(this,"active",!1);$(this,"options");$(this,"$animations")}tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return ds(this.x)&&ds(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const s={};return t.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}},$(co,"defaults",{}),$(co,"defaultRoutes"),co);function yO(e,t){const n=e.options.ticks,i=vO(e),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?xO(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return SO(t,c,r,o/s),c;const u=wO(r,t,s);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(no(t,c,u,gt(f)?0:a-f,a),h=0,d=o-1;h<d;h++)no(t,c,u,r[h],r[h+1]);return no(t,c,u,l,gt(f)?t.length:l+f),c}return no(t,c,u),c}function vO(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(i,s))}function wO(e,t,n){const i=EO(e),s=t.length/n;if(!i)return Math.max(s,1);const r=dR(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function xO(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function SO(e,t,n,i){let s=0,r=n[0],o;for(i=Math.ceil(i),o=0;o<e.length;o++)o===r&&(t.push(e[o]),s++,r=n[s*i])}function no(e,t,n,i,s){const r=ot(i,0),o=Math.min(ot(s,e.length),e.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-i,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(t.push(e[c]),a++,u=Math.round(r+a*n))}function EO(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const IO=e=>e==="left"?"right":e==="right"?"left":e,fp=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,pp=(e,t)=>Math.min(t||e,e);function gp(e,t){const n=[],i=e.length/t,s=e.length;let r=0;for(;r<s;r+=i)n.push(e[Math.floor(r)]);return n}function CO(e,t,n){const i=e.ticks.length,s=Math.min(t,i-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(s),c;if(!(n&&(i===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(s-1))/2,l+=s<t?c:-c,l<r-a||l>o+a)))return l}function TO(e,t){St(e,n=>{const i=n.gc,s=i.length/2;let r;if(s>t){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function Fs(e){return e.drawTicks?e.tickLength:0}function mp(e,t){if(!e.display)return 0;const n=zt(e.font,t),i=se(e.padding);return(Rt(e.text)?e.text.length:1)*n.lineHeight+i.height}function kO(e,t){return Yn(e,{scale:t,type:"scale"})}function AO(e,t,n){return Yn(e,{tick:n,index:t,type:"tick"})}function MO(e,t,n){let i=eh(e);return(n&&t!=="right"||!n&&t==="right")&&(i=IO(i)),i}function RO(e,t,n,i){const{top:s,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let h=0,d,f,p;const g=o-s,m=a-r;if(e.isHorizontal()){if(f=Jt(i,r,a),ht(n)){const y=Object.keys(n)[0],v=n[y];p=u[y].getPixelForValue(v)+g-t}else n==="center"?p=(c.bottom+c.top)/2+g-t:p=fp(e,n,t);d=a-r}else{if(ht(n)){const y=Object.keys(n)[0],v=n[y];f=u[y].getPixelForValue(v)-m+t}else n==="center"?f=(c.left+c.right)/2-m+t:f=fp(e,n,t);p=Jt(i,o,s),h=n==="left"?-Wt:Wt}return{titleX:f,titleY:p,maxWidth:d,rotation:h}}class Di extends Sn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return t=_e(t,Number.POSITIVE_INFINITY),n=_e(n,Number.NEGATIVE_INFINITY),i=_e(i,Number.POSITIVE_INFINITY),s=_e(s,Number.NEGATIVE_INFINITY),{min:_e(t,i),max:_e(n,s),minDefined:Bt(t),maxDefined:Bt(n)}}getMinMax(t){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),s||(n=Math.min(n,o.min)),r||(i=Math.max(i,o.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:_e(n,_e(i,n)),max:_e(i,_e(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){kt(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=WR(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?gp(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=yO(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){kt(this.options.afterUpdate,[this])}beforeSetDimensions(){kt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){kt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),kt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){kt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i],r.label=kt(n.callback,[r.value,i,t],this)}afterTickToLabelConversion(){kt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){kt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=pp(this.ticks.length,t.ticks.maxTicksLimit),s=n.minRotation||0,r=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=Kt(this.chart.width-h,0,this.maxWidth);a=t.offset?this.maxWidth/i:f/(i-1),h+6>a&&(a=f/(i-(t.offset?.5:1)),l=this.maxHeight-Fs(t.grid)-n.padding-mp(t.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=Zu(Math.min(Math.asin(Kt((u.highest.height+6)/a,-1,1)),Math.asin(Kt(l/c,-1,1))-Math.asin(Kt(d/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){kt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){kt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=mp(s,n.options.font);if(a?(t.width=this.maxWidth,t.height=Fs(r)+l):(t.height=this.maxHeight,t.width=Fs(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=i.padding*2,p=Oe(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){const y=i.mirror?0:m*h.width+g*d.height;t.height=Math.min(this.maxHeight,t.height+y+f)}else{const y=i.mirror?0:g*h.width+m*d.height;t.width=Math.min(this.maxWidth,t.width+y+f)}this._calculatePadding(c,u,m,g)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=s*t.width,f=i*n.height):(d=i*t.height,f=s*n.width):r==="start"?f=n.width:r==="end"?d=t.width:r!=="inner"&&(d=t.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=t.height/2;r==="start"?(u=0,h=t.height):r==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){kt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)gt(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=gp(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/pp(n,i));let c=0,u=0,h,d,f,p,g,m,y,v,S,x,E;for(h=0;h<n;h+=l){if(p=t[h].label,g=this._resolveTickFontOptions(h),s.font=m=g.string,y=r[m]=r[m]||{data:{},gc:[]},v=g.lineHeight,S=x=0,!gt(p)&&!Rt(p))S=ia(s,y.data,y.gc,S,p),x=v;else if(Rt(p))for(d=0,f=p.length;d<f;++d)E=p[d],!gt(E)&&!Rt(E)&&(S=ia(s,y.data,y.gc,S,E),x+=v);o.push(S),a.push(x),c=Math.max(S,c),u=Math.max(x,u)}TO(r,n);const A=o.indexOf(c),D=a.indexOf(u),L=q=>({width:o[q]||0,height:a[q]||0});return{first:L(0),last:L(n-1),widest:L(A),highest:L(D),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return gR(this._alignToPixels?Zn(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=AO(this.getContext(),t,i))}return this.$context||(this.$context=kO(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Oe(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=Fs(r),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,y=function(T){return Zn(i,T,g)};let v,S,x,E,A,D,L,q,z,W,tt,mt;if(o==="top")v=y(this.bottom),D=this.bottom-d,q=v-m,W=y(t.top)+m,mt=t.bottom;else if(o==="bottom")v=y(this.top),W=t.top,mt=y(t.bottom)-m,D=v+m,q=this.top+d;else if(o==="left")v=y(this.right),A=this.right-d,L=v-m,z=y(t.left)+m,tt=t.right;else if(o==="right")v=y(this.left),z=t.left,tt=y(t.right)-m,A=v+m,L=this.left+d;else if(n==="x"){if(o==="center")v=y((t.top+t.bottom)/2+.5);else if(ht(o)){const T=Object.keys(o)[0],R=o[T];v=y(this.chart.scales[T].getPixelForValue(R))}W=t.top,mt=t.bottom,D=v+m,q=D+d}else if(n==="y"){if(o==="center")v=y((t.left+t.right)/2);else if(ht(o)){const T=Object.keys(o)[0],R=o[T];v=y(this.chart.scales[T].getPixelForValue(R))}A=v-m,L=A-d,z=t.left,tt=t.right}const Y=ot(s.ticks.maxTicksLimit,h),P=Math.max(1,Math.ceil(h/Y));for(S=0;S<h;S+=P){const T=this.getContext(S),R=r.setContext(T),k=a.setContext(T),G=R.lineWidth,Q=R.color,rt=k.dash||[],it=k.dashOffset,_t=R.tickWidth,bt=R.tickColor,Lt=R.tickBorderDash||[],yt=R.tickBorderDashOffset;x=CO(this,S,l),x!==void 0&&(E=Zn(i,x,G),c?A=L=z=tt=E:D=q=W=mt=E,f.push({tx1:A,ty1:D,tx2:L,ty2:q,x1:z,y1:W,x2:tt,y2:mt,width:G,color:Q,borderDash:rt,borderDashOffset:it,tickWidth:_t,tickColor:bt,tickBorderDash:Lt,tickBorderDashOffset:yt}))}return this._ticksLength=h,this._borderValue=v,f}_computeLabelItems(t){const n=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=r,d=Fs(i.grid),f=d+u,p=h?-u:f,g=-Oe(this.labelRotation),m=[];let y,v,S,x,E,A,D,L,q,z,W,tt,mt="middle";if(s==="top")A=this.bottom-p,D=this._getXAxisLabelAlignment();else if(s==="bottom")A=this.top+p,D=this._getXAxisLabelAlignment();else if(s==="left"){const P=this._getYAxisLabelAlignment(d);D=P.textAlign,E=P.x}else if(s==="right"){const P=this._getYAxisLabelAlignment(d);D=P.textAlign,E=P.x}else if(n==="x"){if(s==="center")A=(t.top+t.bottom)/2+f;else if(ht(s)){const P=Object.keys(s)[0],T=s[P];A=this.chart.scales[P].getPixelForValue(T)+f}D=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")E=(t.left+t.right)/2-f;else if(ht(s)){const P=Object.keys(s)[0],T=s[P];E=this.chart.scales[P].getPixelForValue(T)}D=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?mt="top":l==="end"&&(mt="bottom"));const Y=this._getLabelSizes();for(y=0,v=a.length;y<v;++y){S=a[y],x=S.label;const P=r.setContext(this.getContext(y));L=this.getPixelForTick(y)+r.labelOffset,q=this._resolveTickFontOptions(y),z=q.lineHeight,W=Rt(x)?x.length:1;const T=W/2,R=P.color,k=P.textStrokeColor,G=P.textStrokeWidth;let Q=D;o?(E=L,D==="inner"&&(y===v-1?Q=this.options.reverse?"left":"right":y===0?Q=this.options.reverse?"right":"left":Q="center"),s==="top"?c==="near"||g!==0?tt=-W*z+z/2:c==="center"?tt=-Y.highest.height/2-T*z+z:tt=-Y.highest.height+z/2:c==="near"||g!==0?tt=z/2:c==="center"?tt=Y.highest.height/2-T*z:tt=Y.highest.height-W*z,h&&(tt*=-1),g!==0&&!P.showLabelBackdrop&&(E+=z/2*Math.sin(g))):(A=L,tt=(1-W)*z/2);let rt;if(P.showLabelBackdrop){const it=se(P.backdropPadding),_t=Y.heights[y],bt=Y.widths[y];let Lt=tt-it.top,yt=0-it.left;switch(mt){case"middle":Lt-=_t/2;break;case"bottom":Lt-=_t;break}switch(D){case"center":yt-=bt/2;break;case"right":yt-=bt;break;case"inner":y===v-1?yt-=bt:y>0&&(yt-=bt/2);break}rt={left:yt,top:Lt,width:bt+it.width,height:_t+it.height,color:P.backdropColor}}m.push({label:x,font:q,textOffset:tt,options:{rotation:g,color:R,strokeColor:k,strokeWidth:G,textAlign:Q,textBaseline:mt,translation:[E,A],backdrop:rt}})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Oe(this.labelRotation))return t==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:s,width:r,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,s,r,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(r=0,o=s.length;r<o;++r){const l=s[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=Zn(t,this.left,o)-o/2,u=Zn(t,this.right,a)+a/2,h=d=l):(h=Zn(t,this.top,o)-o/2,d=Zn(t,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&La(i,s);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;ki(i,c,0,u,l,a)}s&&Fa(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=zt(i.font),o=se(i.padding),a=i.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||ht(n)?(l+=o.bottom,Rt(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=RO(this,l,n,a);ki(t,i.text,0,0,r,{color:i.color,maxWidth:h,rotation:d,textAlign:MO(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=ot(t.grid&&t.grid.z,-1),s=ot(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Di.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[i]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return zt(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class io{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;DO(n)&&(i=this.register(n));const s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,PO(t,o,i),this.override&&$t.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,s=this.scope;i in n&&delete n[i],s&&i in $t[s]&&(delete $t[s][i],this.override&&delete Ti[i])}}function PO(e,t,n){const i=xr(Object.create(null),[n?$t.get(n):{},$t.get(t),e.defaults]);$t.set(t,i),e.defaultRoutes&&OO(t,e.defaultRoutes),e.descriptors&&$t.describe(t,e.descriptors)}function OO(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),s=i.pop(),r=[e].concat(i).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");$t.route(r,s,l,a)})}function DO(e){return"id"in e&&"defaults"in e}class NO{constructor(){this.controllers=new io(Le,"datasets",!0),this.elements=new io(Sn,"elements"),this.plugins=new io(Object,"plugins"),this.scales=new io(Di,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):St(s,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,i){const s=Ju(t);kt(i["before"+s],[],i),n[t](i),kt(i["after"+s],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const s=n.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var ze=new NO;class LO{constructor(){this._init=[]}notify(t,n,i,s){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,n,i);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,i,s){s=s||{};for(const r of t){const o=r.plugin,a=o[i],l=[n,s,r.options];if(kt(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){gt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,s=ot(i.options&&i.options.plugins,{}),r=FO(i);return s===!1&&!n?[]:$O(t,r,s,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,i),t,"stop"),this._notify(s(i,n),t,"start")}}function FO(e){const t={},n=[],i=Object.keys(ze.plugins.items);for(let r=0;r<i.length;r++)n.push(ze.getPlugin(i[r]));const s=e.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function BO(e,t){return!t&&e===!1?null:e===!0?{}:e}function $O(e,{plugins:t,localIds:n},i,s){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=BO(i[l],s);c!==null&&r.push({plugin:a,options:WO(e.config,{plugin:a,local:n[l]},c,o)})}return r}function WO(e,{plugin:t,local:n},i,s){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(i,r);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Sc(e,t){const n=$t.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function UO(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function HO(e,t){return e===t?"_index_":"_value_"}function _p(e){if(e==="x"||e==="y"||e==="r")return e}function zO(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Ec(e,...t){if(_p(e))return e;for(const n of t){const i=n.axis||zO(n.position)||e.length>1&&_p(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function bp(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function VO(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(n.length)return bp(e,"x",n[0])||bp(e,"y",n[0])}return{}}function jO(e,t){const n=Ti[e.type]||{scales:{}},i=t.scales||{},s=Sc(e.type,t),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!ht(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Ec(o,a,VO(o,e),$t.scales[a.type]),c=HO(l,s),u=n.scales||{};r[o]=nr(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||Sc(a,t),u=(Ti[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=UO(h,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),nr(r[f],[{axis:d},i[f],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];nr(a,[$t.scales[a.type],$t.scale])}),r}function Ry(e){const t=e.options||(e.options={});t.plugins=ot(t.plugins,{}),t.scales=jO(e,t)}function Py(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function KO(e){return e=e||{},e.data=Py(e.data),Ry(e),e}const yp=new Map,Oy=new Set;function so(e,t){let n=yp.get(e);return n||(n=t(),yp.set(e,n),Oy.add(n)),n}const Bs=(e,t,n)=>{const i=qn(t,n);i!==void 0&&e.add(i)};class qO{constructor(t){this._config=KO(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Py(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Ry(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return so(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return so(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return so(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return so(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let s=i.get(t);return(!s||n)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,n,i){const{options:s,type:r}=this,o=this._cachedScopes(t,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{t&&(l.add(t),u.forEach(h=>Bs(l,t,h))),u.forEach(h=>Bs(l,s,h)),u.forEach(h=>Bs(l,Ti[r]||{},h)),u.forEach(h=>Bs(l,$t,h)),u.forEach(h=>Bs(l,vc,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Oy.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,Ti[n]||{},$t.datasets[n]||{},{type:n},$t,vc]}resolveNamedOptions(t,n,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=vp(this._resolverCache,t,s);let l=o;if(YO(o,n)){r.$shared=!1,i=Gn(i)?i():i;const c=this.createResolver(t,i,a);l=fs(o,i,c)}for(const c of n)r[c]=l[c];return r}createResolver(t,n,i=[""],s){const{resolver:r}=vp(this._resolverCache,t,i);return ht(n)?fs(r,n,void 0,s):r}}function vp(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const s=n.join();let r=i.get(s);return r||(r={resolver:sh(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const GO=e=>ht(e)&&Object.getOwnPropertyNames(e).some(t=>Gn(e[t]));function YO(e,t){const{isScriptable:n,isIndexable:i}=dy(e);for(const s of t){const r=n(s),o=i(s),a=(o||r)&&e[s];if(r&&(Gn(a)||GO(a))||o&&Rt(a))return!0}return!1}var XO="4.4.1";const QO=["top","bottom","left","right","chartArea"];function wp(e,t){return e==="top"||e==="bottom"||QO.indexOf(e)===-1&&t==="x"}function xp(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function Sp(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),kt(n&&n.onComplete,[e],t)}function JO(e){const t=e.chart,n=t.options.animation;kt(n&&n.onProgress,[e],t)}function Dy(e){return ah()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Io={},Ep=e=>{const t=Dy(e);return Object.values(Io).filter(n=>n.canvas===t).pop()};function ZO(e,t,n){const i=Object.keys(e);for(const s of i){const r=+s;if(r>=t){const o=e[s];delete e[s],(n>0||r>t)&&(e[r+n]=o)}}}function tD(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}function ro(e,t,n){return e.options.clip?e[n]:t[n]}function eD(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:ro(n,t,"left"),right:ro(n,t,"right"),top:ro(i,t,"top"),bottom:ro(i,t,"bottom")}:t}class An{static register(...t){ze.add(...t),Ip()}static unregister(...t){ze.remove(...t),Ip()}constructor(t,n){const i=this.config=new qO(n),s=Dy(t),r=Ep(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||bO(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=iR(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new LO,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=yR(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Io[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}rn.listen(this,"complete",Sp),rn.listen(this,"progress",JO),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return gt(t)?n&&r?r:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ze}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Kf(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return zf(this.canvas,this.ctx),this}stop(){return rn.stop(this),this}resize(t,n){rn.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,n,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Kf(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),kt(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};St(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=Ec(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),St(r,o=>{const a=o.options,l=a.id,c=Ec(l,a),u=ot(a.type,o.dtype);(a.position===void 0||wp(a.position,c)!==wp(o.dposition))&&(a.position=o.dposition),s[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const d=ze.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,t)}),St(s,(o,a)=>{o||delete i[a]}),St(i,o=>{ne.configure(this,o,o.options),ne.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(xp("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||Sc(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=ze.getController(a),{datasetElementType:c,dataElementType:u}=$t.datasets[a];Object.assign(l,{dataElementType:ze.getElement(u),datasetElementType:c&&ze.getElement(c)}),o.controller=new l(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){St(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!s&&r.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||St(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(xp("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){St(this.scales,t=>{ne.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Df(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const o=i==="_removeElements"?-r:r;ZO(t,s,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!Df(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ne.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],St(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Gn(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(rn.has(this)?this.attached&&!rn.running(this)&&rn.start(this):(this.draw(),Sp({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const o=n[s];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i=t._clip,s=!i.disabled,r=eD(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&La(n,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),t.controller.draw(),s&&Fa(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return gn(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,s){const r=QP.modes[n];return typeof r=="function"?r(this,t,i,s):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Yn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,s);Sr(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),rn.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),zf(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Io[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(r,o)=>{n.addEventListener(this,r,o),t[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};St(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),t[l]=c},s=(l,c)=>{t[l]&&(n.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){St(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},St(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const s=i?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!ta(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const s=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(n,t),a=i?t:r(t,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:s=[],options:r}=this,o=n,a=this._getActiveElements(t,s,i,o),l=cR(t),c=tD(t,this._lastEvent,i,l);i&&(this._lastEvent=null,kt(r.onHover,[t,a,this],this),l&&kt(r.onClick,[t,a,this],this));const u=!ta(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(t,n,i,s){if(t.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}}$(An,"defaults",$t),$(An,"instances",Io),$(An,"overrides",Ti),$(An,"registry",ze),$(An,"version",XO),$(An,"getChart",Ep);function Ip(){return St(An.instances,e=>e._plugins.invalidate())}function nD(e,t,n){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=t;let c=s/a;e.beginPath(),e.arc(r,o,a,i-c,n+c),l>s?(c=s/l,e.arc(r,o,l,n+c,i-c,!0)):e.arc(r,o,s,n+Wt,i-Wt),e.closePath(),e.clip()}function iD(e){return ih(e,["outerStart","outerEnd","innerStart","innerEnd"])}function sD(e,t,n,i){const s=iD(e.options.borderRadius),r=(n-t)/2,o=Math.min(r,i*t/2),a=l=>{const c=(n-Math.min(r,l))*i/2;return Kt(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Kt(s.innerStart,0,o),innerEnd:Kt(s.innerEnd,0,o)}}function Ui(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function oa(e,t,n,i,s,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const p=s-l;if(i){const P=u>0?u-i:0,T=h>0?h-i:0,R=(P+T)/2,k=R!==0?p*R/(R+i):p;f=(p-k)/2}const g=Math.max(.001,p*h-n/Ot)/h,m=(p-g)/2,y=l+m+f,v=s-m-f,{outerStart:S,outerEnd:x,innerStart:E,innerEnd:A}=sD(t,d,h,v-y),D=h-S,L=h-x,q=y+S/D,z=v-x/L,W=d+E,tt=d+A,mt=y+E/W,Y=v-A/tt;if(e.beginPath(),r){const P=(q+z)/2;if(e.arc(o,a,h,q,P),e.arc(o,a,h,P,z),x>0){const G=Ui(L,z,o,a);e.arc(G.x,G.y,x,z,v+Wt)}const T=Ui(tt,v,o,a);if(e.lineTo(T.x,T.y),A>0){const G=Ui(tt,Y,o,a);e.arc(G.x,G.y,A,v+Wt,Y+Math.PI)}const R=(v-A/d+(y+E/d))/2;if(e.arc(o,a,d,v-A/d,R,!0),e.arc(o,a,d,R,y+E/d,!0),E>0){const G=Ui(W,mt,o,a);e.arc(G.x,G.y,E,mt+Math.PI,y-Wt)}const k=Ui(D,y,o,a);if(e.lineTo(k.x,k.y),S>0){const G=Ui(D,q,o,a);e.arc(G.x,G.y,S,y-Wt,q)}}else{e.moveTo(o,a);const P=Math.cos(q)*h+o,T=Math.sin(q)*h+a;e.lineTo(P,T);const R=Math.cos(z)*h+o,k=Math.sin(z)*h+a;e.lineTo(R,k)}e.closePath()}function rD(e,t,n,i,s){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){oa(e,t,n,i,l,s);for(let c=0;c<r;++c)e.fill();isNaN(a)||(l=o+(a%Pt||Pt))}return oa(e,t,n,i,l,s),e.fill(),l}function oD(e,t,n,i,s){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,f?(e.lineWidth=c*2,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let p=t.endAngle;if(r){oa(e,t,n,i,p,s);for(let g=0;g<r;++g)e.stroke();isNaN(a)||(p=o+(a%Pt||Pt))}f&&nD(e,t,p),r||(oa(e,t,n,i,p,s),e.stroke())}class Vs extends Sn{constructor(n){super();$(this,"circumference");$(this,"endAngle");$(this,"fullCircles");$(this,"innerRadius");$(this,"outerRadius");$(this,"pixelMargin");$(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.getProps(["x","y"],s),{angle:o,distance:a}=ny(r,{x:n,y:i}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=(this.options.spacing+this.options.borderWidth)/2,g=ot(d,c-l)>=Pt||Er(o,l,c),m=fn(a,u+f,h+f);return g&&m}getCenterPoint(n){const{x:i,y:s,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(r+o)/2,d=(a+l+u+c)/2;return{x:i+Math.cos(h)*d,y:s+Math.sin(h)*d}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:s}=this,r=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>Pt?Math.floor(s/Pt):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(Ot,s||0)),u=r*c;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,rD(n,this,u,o,a),oD(n,this,u,o,a),n.restore()}}$(Vs,"id","arc"),$(Vs,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),$(Vs,"defaultRoutes",{backgroundColor:"backgroundColor"}),$(Vs,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function Ny(e,t,n=t){e.lineCap=ot(n.borderCapStyle,t.borderCapStyle),e.setLineDash(ot(n.borderDash,t.borderDash)),e.lineDashOffset=ot(n.borderDashOffset,t.borderDashOffset),e.lineJoin=ot(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ot(n.borderWidth,t.borderWidth),e.strokeStyle=ot(n.borderColor,t.borderColor)}function aD(e,t,n){e.lineTo(n.x,n.y)}function lD(e){return e.stepped?RR:e.tension||e.cubicInterpolationMode==="monotone"?PR:aD}function Ly(e,t,n={}){const i=e.length,{start:s=0,end:r=i-1}=n,{start:o,end:a}=t,l=Math.max(s,o),c=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function cD(e,t,n,i){const{points:s,options:r}=t,{count:o,start:a,loop:l,ilen:c}=Ly(s,n,i),u=lD(r);let{move:h=!0,reverse:d}=i||{},f,p,g;for(f=0;f<=c;++f)p=s[(a+(d?c-f:f))%o],!p.skip&&(h?(e.moveTo(p.x,p.y),h=!1):u(e,g,p,d,r.stepped),g=p);return l&&(p=s[(a+(d?c:0))%o],u(e,g,p,d,r.stepped)),!!l}function uD(e,t,n,i){const s=t.points,{count:r,start:o,ilen:a}=Ly(s,n,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,d,f,p,g,m,y;const v=x=>(o+(c?a-x:x))%r,S=()=>{g!==m&&(e.lineTo(u,m),e.lineTo(u,g),e.lineTo(u,y))};for(l&&(f=s[v(0)],e.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=s[v(d)],f.skip)continue;const x=f.x,E=f.y,A=x|0;A===p?(E<g?g=E:E>m&&(m=E),u=(h*u+x)/++h):(S(),e.lineTo(x,E),p=A,h=0,g=m=E),y=E}S()}function Ic(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?uD:cD}function hD(e){return e.stepped?uP:e.tension||e.cubicInterpolationMode==="monotone"?hP:ri}function dD(e,t,n,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,i)&&s.closePath()),Ny(e,t.options),e.stroke(s)}function fD(e,t,n,i){const{segments:s,options:r}=t,o=Ic(t);for(const a of s)Ny(e,r,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}const pD=typeof Path2D=="function";function gD(e,t,n,i){pD&&!t.options.segment?dD(e,t,n,i):fD(e,t,n,i)}class Ln extends Sn{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;nP(this._points,i,t,s,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=_P(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,i=t.length;return i&&n[t[i-1].end]}interpolate(t,n){const i=this.options,s=t[n],r=this.points,o=xy(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=hD(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],f=r[h],p=r[d];if(f===p){a.push(f);continue}const g=Math.abs((s-f[n])/(p[n]-f[n])),m=l(f,p,g,i.stepped);m[n]=t[n],a.push(m)}return a.length===1?a[0]:a}pathSegment(t,n,i){return Ic(this)(t,this,n,i)}path(t,n,i){const s=this.segments,r=Ic(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of s)o&=r(t,this,a,{start:n,end:n+i-1});return!!o}draw(t,n,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),gD(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}$(Ln,"id","line"),$(Ln,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),$(Ln,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),$(Ln,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Cp(e,t,n,i){const s=e.options,{[n]:r}=e.getProps([n],i);return Math.abs(t-r)<s.radius+s.hitRadius}class Co extends Sn{constructor(n){super();$(this,"parsed");$(this,"skip");$(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,i){return Cp(this,n,"x",i)}inYRange(n,i){return Cp(this,n,"y",i)}getCenterPoint(n){const{x:i,y:s}=this.getProps(["x","y"],n);return{x:i,y:s}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const s=i&&n.borderWidth||0;return(i+s)*2}draw(n,i){const s=this.options;this.skip||s.radius<.1||!gn(this,i,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,wc(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}$(Co,"id","point"),$(Co,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),$(Co,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Fy(e,t){const{x:n,y:i,base:s,width:r,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,h;return e.horizontal?(h=o/2,a=Math.min(n,s),l=Math.max(n,s),c=i-h,u=i+h):(h=r/2,a=n-h,l=n+h,c=Math.min(i,s),u=Math.max(i,s)),{left:a,top:c,right:l,bottom:u}}function Fn(e,t,n,i){return e?0:Kt(t,n,i)}function mD(e,t,n){const i=e.options.borderWidth,s=e.borderSkipped,r=hy(i);return{t:Fn(s.top,r.top,0,n),r:Fn(s.right,r.right,0,t),b:Fn(s.bottom,r.bottom,0,n),l:Fn(s.left,r.left,0,t)}}function _D(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,r=_i(s),o=Math.min(t,n),a=e.borderSkipped,l=i||ht(s);return{topLeft:Fn(!l||a.top||a.left,r.topLeft,0,o),topRight:Fn(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Fn(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Fn(!l||a.bottom||a.right,r.bottomRight,0,o)}}function bD(e){const t=Fy(e),n=t.right-t.left,i=t.bottom-t.top,s=mD(e,n/2,i/2),r=_D(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function Tl(e,t,n,i){const s=t===null,r=n===null,a=e&&!(s&&r)&&Fy(e,i);return a&&(s||fn(t,a.left,a.right))&&(r||fn(n,a.top,a.bottom))}function yD(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function vD(e,t){e.rect(t.x,t.y,t.w,t.h)}function kl(e,t,n={}){const i=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,r=(e.x+e.w!==n.x+n.w?t:0)-i,o=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+i,y:e.y+s,w:e.w+r,h:e.h+o,radius:e.radius}}class To extends Sn{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=bD(this),a=yD(o.radius)?Ir:vD;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,kl(o,n,r)),t.clip(),a(t,kl(r,-n,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,kl(r,n)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,n,i){return Tl(this,t,n,i)}inXRange(t,n){return Tl(this,t,null,n)}inYRange(t,n){return Tl(this,null,t,n)}getCenterPoint(t){const{x:n,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(n+s)/2:n,y:r?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}$(To,"id","bar"),$(To,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),$(To,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var wD=Object.freeze({__proto__:null,ArcElement:Vs,BarElement:To,LineElement:Ln,PointElement:Co});const Cc=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Tp=Cc.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function By(e){return Cc[e%Cc.length]}function $y(e){return Tp[e%Tp.length]}function xD(e,t){return e.borderColor=By(t),e.backgroundColor=$y(t),++t}function SD(e,t){return e.backgroundColor=e.data.map(()=>By(t++)),t}function ED(e,t){return e.backgroundColor=e.data.map(()=>$y(t++)),t}function ID(e){let t=0;return(n,i)=>{const s=e.getDatasetMeta(i).controller;s instanceof di?t=SD(n,t):s instanceof or?t=ED(n,t):s&&(t=xD(n,t))}}function kp(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function CD(e){return e&&(e.borderColor||e.backgroundColor)}var TD={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:i},options:s}=e.config,{elements:r}=s;if(!n.forceOverride&&(kp(i)||CD(s)||r&&kp(r)))return;const o=ID(e);i.forEach(o)}};function kD(e,t,n,i,s){const r=s.samples||i;if(r>=n)return e.slice(t,t+n);const o=[],a=(n-2)/(r-2);let l=0;const c=t+n-1;let u=t,h,d,f,p,g;for(o[l++]=e[u],h=0;h<r-2;h++){let m=0,y=0,v;const S=Math.floor((h+1)*a)+1+t,x=Math.min(Math.floor((h+2)*a)+1,n)+t,E=x-S;for(v=S;v<x;v++)m+=e[v].x,y+=e[v].y;m/=E,y/=E;const A=Math.floor(h*a)+1+t,D=Math.min(Math.floor((h+1)*a)+1,n)+t,{x:L,y:q}=e[u];for(f=p=-1,v=A;v<D;v++)p=.5*Math.abs((L-m)*(e[v].y-q)-(L-e[v].x)*(y-q)),p>f&&(f=p,d=e[v],g=v);o[l++]=d,u=g}return o[l++]=e[c],o}function AD(e,t,n,i){let s=0,r=0,o,a,l,c,u,h,d,f,p,g;const m=[],y=t+n-1,v=e[t].x,x=e[y].x-v;for(o=t;o<t+n;++o){a=e[o],l=(a.x-v)/x*i,c=a.y;const E=l|0;if(E===u)c<p?(p=c,h=o):c>g&&(g=c,d=o),s=(r*s+a.x)/++r;else{const A=o-1;if(!gt(h)&&!gt(d)){const D=Math.min(h,d),L=Math.max(h,d);D!==f&&D!==A&&m.push({...e[D],x:s}),L!==f&&L!==A&&m.push({...e[L],x:s})}o>0&&A!==f&&m.push(e[A]),m.push(a),u=E,r=0,p=g=c,h=d=f=o}}return m}function Wy(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Ap(e){e.data.datasets.forEach(t=>{Wy(t)})}function MD(e,t){const n=t.length;let i=0,s;const{iScale:r}=e,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=Kt(pn(t,r.axis,o).lo,0,n-1)),c?s=Kt(pn(t,r.axis,a).hi+1,i,n)-i:s=n-i,{start:i,count:s}}var RD={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){Ap(e);return}const i=e.width;e.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:a}=s,l=e.getDatasetMeta(r),c=o||s.data;if(Hs([a,e.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=e.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||e.options.parsing)return;let{start:h,count:d}=MD(l,c);const f=n.threshold||4*i;if(d<=f){Wy(s);return}gt(o)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(n.algorithm){case"lttb":p=kD(c,h,d,i,n);break;case"min-max":p=AD(c,h,d,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}s._decimated=p})},destroy(e){Ap(e)}};function PD(e,t,n){const i=e.segments,s=e.points,r=t.points,o=[];for(const a of i){let{start:l,end:c}=a;c=uh(l,c,s);const u=Tc(n,s[l],s[c],a.loop);if(!t.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const h=xy(t,u);for(const d of h){const f=Tc(n,r[d.start],r[d.end],d.loop),p=wy(a,s,f);for(const g of p)o.push({source:g,target:d,start:{[n]:Mp(u,f,"start",Math.max)},end:{[n]:Mp(u,f,"end",Math.min)}})}}return o}function Tc(e,t,n,i){if(i)return;let s=t[e],r=n[e];return e==="angle"&&(s=be(s),r=be(r)),{property:e,start:s,end:r}}function OD(e,t){const{x:n=null,y:i=null}=e||{},s=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=uh(o,a,s);const l=s[o],c=s[a];i!==null?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):n!==null&&(r.push({x:n,y:l.y}),r.push({x:n,y:c.y}))}),r}function uh(e,t,n){for(;t>e;t--){const i=n[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function Mp(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function Uy(e,t){let n=[],i=!1;return Rt(e)?(i=!0,n=e):n=OD(e,t),n.length?new Ln({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function Rp(e){return e&&e.fill!==!1}function DD(e,t,n){let s=e[t].fill;const r=[t];let o;if(!n)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!Bt(s))return s;if(o=e[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function ND(e,t,n){const i=$D(e);if(ht(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return Bt(s)&&Math.floor(s)===s?LD(i[0],t,s,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function LD(e,t,n,i){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=i?!1:n}function FD(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:ht(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function BD(e,t,n){let i;return e==="start"?i=n:e==="end"?i=t.options.reverse?t.min:t.max:ht(e)?i=e.value:i=t.getBaseValue(),i}function $D(e){const t=e.options,n=t.fill;let i=ot(n&&n.target,n);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function WD(e){const{scale:t,index:n,line:i}=e,s=[],r=i.segments,o=i.points,a=UD(t,n);a.push(Uy({x:null,y:t.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)HD(s,o[u],a)}return new Ln({points:s,options:{}})}function UD(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===t)break;r.hidden||n.unshift(r.dataset)}return n}function HD(e,t,n){const i=[];for(let s=0;s<n.length;s++){const r=n[s],{first:o,last:a,point:l}=zD(r,t,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(e.push(l),!a)break}}e.push(...i)}function zD(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const s=i[n],r=e.segments,o=e.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],h=o[u.start][n],d=o[u.end][n];if(fn(s,h,d)){a=s===h,l=s===d;break}}return{first:a,last:l,point:i}}class Hy{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,i){const{x:s,y:r,radius:o}=this;return n=n||{start:0,end:Pt},t.arc(s,r,o,n.end,n.start,!0),!i.bounds}interpolate(t){const{x:n,y:i,radius:s}=this,r=t.angle;return{x:n+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function VD(e){const{chart:t,fill:n,line:i}=e;if(Bt(n))return jD(t,n);if(n==="stack")return WD(e);if(n==="shape")return!0;const s=KD(e);return s instanceof Hy?s:Uy(s,i)}function jD(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function KD(e){return(e.scale||{}).getPointPositionForValue?GD(e):qD(e)}function qD(e){const{scale:t={},fill:n}=e,i=FD(n,t);if(Bt(i)){const s=t.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function GD(e){const{scale:t,fill:n}=e,i=t.options,s=t.getLabels().length,r=i.reverse?t.max:t.min,o=BD(n,t,r),a=[];if(i.grid.circular){const l=t.getPointPositionForValue(0,r);return new Hy({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(t.getPointPositionForValue(l,o));return a}function Al(e,t,n){const i=VD(t),{line:s,scale:r,axis:o}=t,a=s.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};i&&s.points.length&&(La(e,n),YD(e,{line:s,target:i,above:u,below:h,area:n,scale:r,axis:o}),Fa(e))}function YD(e,t){const{line:n,target:i,above:s,below:r,area:o,scale:a}=t,l=n._loop?"angle":t.axis;e.save(),l==="x"&&r!==s&&(Pp(e,i,o.top),Op(e,{line:n,target:i,color:s,scale:a,property:l}),e.restore(),e.save(),Pp(e,i,o.bottom)),Op(e,{line:n,target:i,color:r,scale:a,property:l}),e.restore()}function Pp(e,t,n){const{segments:i,points:s}=t;let r=!0,o=!1;e.beginPath();for(const a of i){const{start:l,end:c}=a,u=s[l],h=s[uh(l,c,s)];r?(e.moveTo(u.x,u.y),r=!1):(e.lineTo(u.x,n),e.lineTo(u.x,u.y)),o=!!t.pathSegment(e,a,{move:o}),o?e.closePath():e.lineTo(h.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function Op(e,t){const{line:n,target:i,property:s,color:r,scale:o}=t,a=PD(n,i,s);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:d=r}={}}=l,f=i!==!0;e.save(),e.fillStyle=d,XD(e,o,f&&Tc(s,u,h)),e.beginPath();const p=!!n.pathSegment(e,l);let g;if(f){p?e.closePath():Dp(e,i,h,s);const m=!!i.pathSegment(e,c,{move:p,reverse:!0});g=p&&m,g||Dp(e,i,u,s)}e.closePath(),e.fill(g?"evenodd":"nonzero"),e.restore()}}function XD(e,t,n){const{top:i,bottom:s}=t.chart.chartArea,{property:r,start:o,end:a}=n||{};r==="x"&&(e.beginPath(),e.rect(o,i,a-o,s-i),e.clip())}function Dp(e,t,n,i){const s=t.interpolate(n,i);s&&e.lineTo(s.x,s.y)}var QD={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,s=[];let r,o,a,l;for(o=0;o<i;++o)r=e.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof Ln&&(l={visible:e.isDatasetVisible(o),index:o,fill:ND(a,o,i),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=DD(s,o,n.propagate))},beforeDraw(e,t,n){const i=n.drawTime==="beforeDraw",s=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),i&&a.fill&&Al(e.ctx,a,r))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=e.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;Rp(r)&&Al(e.ctx,r,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;!Rp(i)||n.drawTime!=="beforeDatasetDraw"||Al(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Np=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},JD=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Lp extends Sn{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=kt(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=zt(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Np(i,r);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let h=t;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((p,g)=>{const m=i+n/2+r.measureText(p.text).width;(g===0||c[c.length-1]+m+2*a>o)&&(h+=u,c[c.length-(g>0?0:1)]=0,f+=u,d++),l[g]={left:0,top:f,row:d,width:m,height:s},c[c.length-1]+=m+a}),h}_fitCols(t,n,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let h=a,d=0,f=0,p=0,g=0;return this.legendItems.forEach((m,y)=>{const{itemWidth:v,itemHeight:S}=ZD(i,n,r,m,s);y>0&&f+S+2*a>u&&(h+=d+a,c.push({width:d,height:f}),p+=d+a,g++,d=f=0),l[y]={left:p,top:f,col:g,width:v,height:S},d=Math.max(d,v),f+=S+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:r}}=this,o=ns(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Jt(i,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Jt(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+t+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Jt(i,this.top+t+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Jt(i,this.top+t+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;La(t,this),this._draw(),Fa(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:s}=this,{align:r,labels:o}=t,a=$t.color,l=ns(t.rtl,this.left,this.width),c=zt(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:p,boxHeight:g,itemHeight:m}=Np(o,h),y=function(A,D,L){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;s.save();const q=ot(L.lineWidth,1);if(s.fillStyle=ot(L.fillStyle,a),s.lineCap=ot(L.lineCap,"butt"),s.lineDashOffset=ot(L.lineDashOffset,0),s.lineJoin=ot(L.lineJoin,"miter"),s.lineWidth=q,s.strokeStyle=ot(L.strokeStyle,a),s.setLineDash(ot(L.lineDash,[])),o.usePointStyle){const z={radius:g*Math.SQRT2/2,pointStyle:L.pointStyle,rotation:L.rotation,borderWidth:q},W=l.xPlus(A,p/2),tt=D+d;uy(s,z,W,tt,o.pointStyleWidth&&p)}else{const z=D+Math.max((h-g)/2,0),W=l.leftForLtr(A,p),tt=_i(L.borderRadius);s.beginPath(),Object.values(tt).some(mt=>mt!==0)?Ir(s,{x:W,y:z,w:p,h:g,radius:tt}):s.rect(W,z,p,g),s.fill(),q!==0&&s.stroke()}s.restore()},v=function(A,D,L){ki(s,L.text,A,D+m/2,c,{strikethrough:L.hidden,textAlign:l.textAlign(L.textAlign)})},S=this.isHorizontal(),x=this._computeTitleHeight();S?f={x:Jt(r,this.left+u,this.right-i[0]),y:this.top+u+x,line:0}:f={x:this.left+u,y:Jt(r,this.top+x+u,this.bottom-n[0].height),line:0},by(this.ctx,t.textDirection);const E=m+u;this.legendItems.forEach((A,D)=>{s.strokeStyle=A.fontColor,s.fillStyle=A.fontColor;const L=s.measureText(A.text).width,q=l.textAlign(A.textAlign||(A.textAlign=o.textAlign)),z=p+d+L;let W=f.x,tt=f.y;l.setWidth(this.width),S?D>0&&W+z+u>this.right&&(tt=f.y+=E,f.line++,W=f.x=Jt(r,this.left+u,this.right-i[f.line])):D>0&&tt+E>this.bottom&&(W=f.x=W+n[f.line].width+u,f.line++,tt=f.y=Jt(r,this.top+x+u,this.bottom-n[f.line].height));const mt=l.x(W);if(y(mt,tt,A),W=vR(q,W+p+d,S?W+z:this.right,t.rtl),v(l.x(W),tt,A),S)f.x+=z+u;else if(typeof A.text!="string"){const Y=c.lineHeight;f.y+=zy(A,Y)+u}else f.y+=E}),yy(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=zt(n.font),s=se(n.padding);if(!n.display)return;const r=ns(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=s.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=Jt(t.align,h,this.right-d);else{const p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);u=c+Jt(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const f=Jt(a,h,h+d);o.textAlign=r.textAlign(eh(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,ki(o,n.text,f,u,i)}_computeTitleHeight(){const t=this.options.title,n=zt(t.font),i=se(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,s,r;if(fn(t,this.left,this.right)&&fn(n,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],fn(t,s.left,s.left+s.width)&&fn(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!n1(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,r=JD(s,i);s&&!r&&kt(n.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!r&&kt(n.onHover,[t,i,this],this)}else i&&kt(n.onClick,[t,i,this],this)}}function ZD(e,t,n,i,s){const r=t1(i,e,t,n),o=e1(s,i,t.lineHeight);return{itemWidth:r,itemHeight:o}}function t1(e,t,n,i){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),t+n.size/2+i.measureText(s).width}function e1(e,t,n){let i=e;return typeof t.text!="string"&&(i=zy(t,n)),i}function zy(e,t){const n=e.text?e.text.length:0;return t*n}function n1(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var i1={id:"legend",_element:Lp,start(e,t,n){const i=e.legend=new Lp({ctx:e.ctx,options:n,chart:e});ne.configure(e,i,n),ne.addBox(e,i)},stop(e){ne.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;ne.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=se(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class hh extends Sn{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const s=Rt(i.text)?i.text.length:1;this._padding=se(i.padding);const r=s*zt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=Jt(a,i,r),h=n+t,c=r-i):(o.position==="left"?(u=i+t,h=Jt(a,s,n),l=Ot*-.5):(u=r-t,h=Jt(a,n,s),l=Ot*.5),c=s-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const i=zt(n.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);ki(t,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:eh(n.align),textBaseline:"middle",translation:[o,a]})}}function s1(e,t){const n=new hh({ctx:e.ctx,options:t,chart:e});ne.configure(e,n,t),ne.addBox(e,n),e.titleBlock=n}var r1={id:"title",_element:hh,start(e,t,n){s1(e,n)},stop(e){const t=e.titleBlock;ne.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;ne.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const oo=new WeakMap;var o1={id:"subtitle",start(e,t,n){const i=new hh({ctx:e.ctx,options:n,chart:e});ne.configure(e,i,n),ne.addBox(e,i),oo.set(e,i)},stop(e){ne.removeBox(e,oo.get(e)),oo.delete(e)},beforeUpdate(e,t,n){const i=oo.get(e);ne.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const js={average(e){if(!e.length)return!1;let t,n,i=0,s=0,r=0;for(t=0,n=e.length;t<n;++t){const o=e[t].element;if(o&&o.hasValue()){const a=o.tooltipPosition();i+=a.x,s+=a.y,++r}}return{x:i/r,y:s/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=yc(t,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function He(e,t){return t&&(Rt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function on(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function a1(e,t){const{element:n,datasetIndex:i,index:s}=t,r=e.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:e,label:o,parsed:r.getParsed(s),raw:e.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function Fp(e,t){const n=e.chart.ctx,{body:i,footer:s,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=zt(t.bodyFont),c=zt(t.titleFont),u=zt(t.footerFont),h=r.length,d=s.length,f=i.length,p=se(t.padding);let g=p.height,m=0,y=i.reduce((x,E)=>x+E.before.length+E.lines.length+E.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),y){const x=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*x+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let v=0;const S=function(x){m=Math.max(m,n.measureText(x).width+v)};return n.save(),n.font=c.string,St(e.title,S),n.font=l.string,St(e.beforeBody.concat(e.afterBody),S),v=t.displayColors?o+2+t.boxPadding:0,St(i,x=>{St(x.before,S),St(x.lines,S),St(x.after,S)}),v=0,n.font=u.string,St(e.footer,S),n.restore(),m+=p.width,{width:m,height:g}}function l1(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function c1(e,t,n,i){const{x:s,width:r}=i,o=n.caretSize+n.caretPadding;if(e==="left"&&s+r+o>t.width||e==="right"&&s-r-o<0)return!0}function u1(e,t,n,i){const{x:s,width:r}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),c1(c,e,t,n)&&(c="center"),c}function Bp(e,t,n){const i=n.yAlign||t.yAlign||l1(e,n);return{xAlign:n.xAlign||t.xAlign||u1(e,t,n,i),yAlign:i}}function h1(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function d1(e,t,n){let{y:i,height:s}=e;return t==="top"?i+=n:t==="bottom"?i-=s+n:i-=s/2,i}function $p(e,t,n,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=s+r,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=_i(o);let p=h1(t,a);const g=d1(t,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,d)+s:a==="right"&&(p+=Math.max(h,f)+s),{x:Kt(p,0,i.width-t.width),y:Kt(g,0,i.height-t.height)}}function ao(e,t,n){const i=se(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function Wp(e){return He([],on(e))}function f1(e,t,n){return Yn(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function Up(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Vy={beforeTitle:sn,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:sn,beforeBody:sn,beforeLabel:sn,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return gt(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:sn,afterBody:sn,beforeFooter:sn,footer:sn,afterFooter:sn};function oe(e,t,n,i){const s=e[t].call(n,i);return typeof s>"u"?Vy[t].call(n,i):s}class kc extends Sn{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new Sy(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=f1(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,s=oe(i,"beforeTitle",this,t),r=oe(i,"title",this,t),o=oe(i,"afterTitle",this,t);let a=[];return a=He(a,on(s)),a=He(a,on(r)),a=He(a,on(o)),a}getBeforeBody(t,n){return Wp(oe(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,s=[];return St(t,r=>{const o={before:[],lines:[],after:[]},a=Up(i,r);He(o.before,on(oe(a,"beforeLabel",this,r))),He(o.lines,oe(a,"label",this,r)),He(o.after,on(oe(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(t,n){return Wp(oe(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,s=oe(i,"beforeFooter",this,t),r=oe(i,"footer",this,t),o=oe(i,"afterFooter",this,t);let a=[];return a=He(a,on(s)),a=He(a,on(r)),a=He(a,on(o)),a}_createItems(t){const n=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(a1(this.chart,n[l]));return t.filter&&(a=a.filter((u,h,d)=>t.filter(u,h,d,i))),t.itemSort&&(a=a.sort((u,h)=>t.itemSort(u,h,i))),St(a,u=>{const h=Up(t.callbacks,u);s.push(oe(h,"labelColor",this,u)),r.push(oe(h,"labelPointStyle",this,u)),o.push(oe(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=js[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Fp(this,i),c=Object.assign({},a,l),u=Bp(this.chart,i,c),h=$p(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,s){const r=this.getCaretPosition(t,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=_i(a),{x:d,y:f}=t,{width:p,height:g}=n;let m,y,v,S,x,E;return r==="center"?(x=f+g/2,s==="left"?(m=d,y=m-o,S=x+o,E=x-o):(m=d+p,y=m+o,S=x-o,E=x+o),v=m):(s==="left"?y=d+Math.max(l,u)+o:s==="right"?y=d+p-Math.max(c,h)-o:y=this.caretX,r==="top"?(S=f,x=S-o,m=y-o,v=y+o):(S=f+g,x=S+o,m=y+o,v=y-o),E=S),{x1:m,x2:y,x3:v,y1:S,y2:x,y3:E}}drawTitle(t,n,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=ns(i.rtl,this.x,this.width);for(t.x=ao(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=zt(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(s[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,n,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,u=zt(r.bodyFont),h=ao(this,"left",r),d=s.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,p=n.y+f;if(r.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=s.leftForLtr(d,c)+c/2,y=p+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,wc(t,g,m,y),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,wc(t,g,m,y)}else{t.lineWidth=ht(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const g=s.leftForLtr(d,c),m=s.leftForLtr(s.xPlus(d,1),c-2),y=_i(o.borderRadius);Object.values(y).some(v=>v!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Ir(t,{x:g,y:p,w:c,h:l,radius:y}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Ir(t,{x:m,y:p+1,w:c-2,h:l-2,radius:y}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(g,p,c,l),t.strokeRect(g,p,c,l),t.fillStyle=o.backgroundColor,t.fillRect(m,p+1,c-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=zt(i.bodyFont);let d=h.lineHeight,f=0;const p=ns(i.rtl,this.x,this.width),g=function(L){n.fillText(L,p.x(t.x+f),t.y+d/2),t.y+=d+r},m=p.textAlign(o);let y,v,S,x,E,A,D;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,t.x=ao(this,m,i),n.fillStyle=i.bodyColor,St(this.beforeBody,g),f=a&&m!=="right"?o==="center"?c/2+u:c+2+u:0,x=0,A=s.length;x<A;++x){for(y=s[x],v=this.labelTextColors[x],n.fillStyle=v,St(y.before,g),S=y.lines,a&&S.length&&(this._drawColorBox(n,t,x,p,i),d=Math.max(h.lineHeight,l)),E=0,D=S.length;E<D;++E)g(S[E]),d=h.lineHeight;St(y.after,g)}f=0,d=h.lineHeight,St(this.afterBody,g),t.y-=r}drawFooter(t,n,i){const s=this.footer,r=s.length;let o,a;if(r){const l=ns(i.rtl,this.x,this.width);for(t.x=ao(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=zt(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(s[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,n,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:u}=i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=_i(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(t,n,i,s),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(t,n,i,s),n.lineTo(a+c,l+u-p),n.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(t,n,i,s),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&r==="left"&&this.drawCaret(t,n,i,s),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=js[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Fp(this,t),l=Object.assign({},o,this._size),c=Bp(n,t,l),u=$p(t,l,c,n);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=se(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,s,n),by(t,n.textDirection),r.y+=o.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),yy(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,s=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!ta(i,s),o=this._positionChanged(s,n);(r||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(t,r,n,i),a=this._positionChanged(o,t),l=n||!ta(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,i,s){const r=this.options;if(t.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:i,caretY:s,options:r}=this,o=js[r.position].call(this,t,n);return o!==!1&&(i!==o.x||s!==o.y)}}$(kc,"positioners",js);var p1={id:"tooltip",_element:kc,positioners:js,afterInit(e,t,n){n&&(e.tooltip=new kc({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Vy},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},g1=Object.freeze({__proto__:null,Colors:TD,Decimation:RD,Filler:QD,Legend:i1,SubTitle:o1,Title:r1,Tooltip:p1});const m1=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function _1(e,t,n,i){const s=e.indexOf(t);if(s===-1)return m1(e,t,n,i);const r=e.lastIndexOf(t);return s!==r?n:s}const b1=(e,t)=>e===null?null:Kt(Math.round(e),0,t);function Hp(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Ac extends Di{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(gt(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:_1(i,t,ot(n,t),this._addedLabels),b1(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=n;o++)s.push({value:o});return s}getLabelForValue(t){return Hp.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}$(Ac,"id","category"),$(Ac,"defaults",{ticks:{callback:Hp}});function y1(e,t){const n=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=e,f=r||1,p=u-1,{min:g,max:m}=t,y=!gt(o),v=!gt(a),S=!gt(c),x=(m-g)/(h+1);let E=Lf((m-g)/p/f)*f,A,D,L,q;if(E<1e-14&&!y&&!v)return[{value:g},{value:m}];q=Math.ceil(m/E)-Math.floor(g/E),q>p&&(E=Lf(q*E/p/f)*f),gt(l)||(A=Math.pow(10,l),E=Math.ceil(E*A)/A),s==="ticks"?(D=Math.floor(g/E)*E,L=Math.ceil(m/E)*E):(D=g,L=m),y&&v&&r&&fR((a-o)/r,E/1e3)?(q=Math.round(Math.min((a-o)/E,u)),E=(a-o)/q,D=o,L=a):S?(D=y?o:D,L=v?a:L,q=c-1,E=(L-D)/q):(q=(L-D)/E,ir(q,Math.round(q),E/1e3)?q=Math.round(q):q=Math.ceil(q));const z=Math.max(Ff(E),Ff(D));A=Math.pow(10,gt(l)?z:l),D=Math.round(D*A)/A,L=Math.round(L*A)/A;let W=0;for(y&&(d&&D!==o?(n.push({value:o}),D<o&&W++,ir(Math.round((D+W*E)*A)/A,o,zp(o,x,e))&&W++):D<o&&W++);W<q;++W){const tt=Math.round((D+W*E)*A)/A;if(v&&tt>a)break;n.push({value:tt})}return v&&d&&L!==a?n.length&&ir(n[n.length-1].value,a,zp(a,x,e))?n[n.length-1].value=a:n.push({value:a}):(!v||L===a)&&n.push({value:L}),n}function zp(e,t,{horizontal:n,minRotation:i}){const s=Oe(i),r=(n?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class aa extends Di{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return gt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=n?s:l,a=l=>r=i?r:l;if(t){const l=Qe(s),c=Qe(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(s-l)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=y1(s,r);return t.bounds==="ticks"&&ey(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-n)/Math.max(t.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return Br(t,this.chart.options.locale,this.options.ticks.format)}}class Mc extends aa{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Bt(t)?t:0,this.max=Bt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=Oe(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}$(Mc,"id","linear"),$(Mc,"defaults",{ticks:{callback:Na.formatters.numeric}});const Tr=e=>Math.floor(Nn(e)),ei=(e,t)=>Math.pow(10,Tr(e)+t);function Vp(e){return e/Math.pow(10,Tr(e))===1}function jp(e,t,n){const i=Math.pow(10,n),s=Math.floor(e/i);return Math.ceil(t/i)-s}function v1(e,t){const n=t-e;let i=Tr(n);for(;jp(e,t,i)>10;)i++;for(;jp(e,t,i)<10;)i--;return Math.min(i,Tr(e))}function w1(e,{min:t,max:n}){t=_e(e.min,t);const i=[],s=Tr(t);let r=v1(t,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,r)),d=_e(e.min,Math.round((l+u+h*Math.pow(10,r))*o)/o);for(;d<n;)i.push({value:d,major:Vp(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,o=r>=0?1:o),d=Math.round((l+u+h*Math.pow(10,r))*o)/o;const f=_e(e.max,d);return i.push({value:f,major:Vp(f),significand:h}),i}class Rc extends Di{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const i=aa.prototype.parse.apply(this,[t,n]);if(i===0){this._zero=!0;return}return Bt(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Bt(t)?Math.max(0,t):null,this.max=Bt(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Bt(this._userMin)&&(this.min=t===ei(this.min,0)?ei(this.min,-1):ei(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=t?i:a,o=a=>s=n?s:a;i===s&&(i<=0?(r(1),o(10)):(r(ei(i,-1)),o(ei(s,1)))),i<=0&&r(ei(s,-1)),s<=0&&o(ei(i,1)),this.min=i,this.max=s}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},i=w1(n,this);return t.bounds==="ticks"&&ey(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Br(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Nn(t),this._valueRange=Nn(this.max)-Nn(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Nn(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}$(Rc,"id","logarithmic"),$(Rc,"defaults",{ticks:{callback:Na.formatters.logarithmic,major:{enabled:!0}}});function Pc(e){const t=e.ticks;if(t.display&&e.display){const n=se(t.backdropPadding);return ot(t.font&&t.font.size,$t.font.size)+n.height}return 0}function x1(e,t,n){return n=Rt(n)?n:[n],{w:MR(e,t.string,n),h:n.length*t.lineHeight}}function Kp(e,t,n,i,s){return e===i||e===s?{start:t-n/2,end:t+n/2}:e<i||e>s?{start:t-n,end:t}:{start:t,end:t+n}}function S1(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],s=[],r=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?Ot/r:0;for(let l=0;l<r;l++){const c=o.setContext(e.getPointLabelContext(l));s[l]=c.padding;const u=e.getPointPosition(l,e.drawingArea+s[l],a),h=zt(c.font),d=x1(e.ctx,h,e._pointLabels[l]);i[l]=d;const f=be(e.getIndexAngle(l)+a),p=Math.round(Zu(f)),g=Kp(p,u.x,d.w,0,180),m=Kp(p,u.y,d.h,90,270);E1(n,t,f,g,m)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=T1(e,i,s)}function E1(e,t,n,i,s){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/r,e.l=Math.min(e.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/r,e.r=Math.max(e.r,t.r+a)),s.start<t.t?(l=(t.t-s.start)/o,e.t=Math.min(e.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function I1(e,t,n){const i=e.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=n,l=e.getPointPosition(t,i+s+o,r),c=Math.round(Zu(be(l.angle+Wt))),u=M1(l.y,a.h,c),h=k1(c),d=A1(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function C1(e,t){if(!t)return!0;const{left:n,top:i,right:s,bottom:r}=e;return!(gn({x:n,y:i},t)||gn({x:n,y:r},t)||gn({x:s,y:i},t)||gn({x:s,y:r},t))}function T1(e,t,n){const i=[],s=e._pointLabels.length,r=e.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:Pc(r)/2,additionalAngle:o?Ot/s:0};let c;for(let u=0;u<s;u++){l.padding=n[u],l.size=t[u];const h=I1(e,u,l);i.push(h),a==="auto"&&(h.visible=C1(h,c),h.visible&&(c=h))}return i}function k1(e){return e===0||e===180?"center":e<180?"left":"right"}function A1(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function M1(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function R1(e,t,n){const{left:i,top:s,right:r,bottom:o}=n,{backdropColor:a}=t;if(!gt(a)){const l=_i(t.borderRadius),c=se(t.backdropPadding);e.fillStyle=a;const u=i-c.left,h=s-c.top,d=r-i+c.width,f=o-s+c.height;Object.values(l).some(p=>p!==0)?(e.beginPath(),Ir(e,{x:u,y:h,w:d,h:f,radius:l}),e.fill()):e.fillRect(u,h,d,f)}}function P1(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let s=t-1;s>=0;s--){const r=e._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(e.getPointLabelContext(s));R1(n,o,r);const a=zt(o.font),{x:l,y:c,textAlign:u}=r;ki(n,e._pointLabels[s],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function jy(e,t,n,i){const{ctx:s}=e;if(n)s.arc(e.xCenter,e.yCenter,t,0,Pt);else{let r=e.getPointPosition(0,t);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=e.getPointPosition(o,t),s.lineTo(r.x,r.y)}}function O1(e,t,n,i,s){const r=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash),r.lineDashOffset=s.dashOffset,r.beginPath(),jy(e,n,o,i),r.closePath(),r.stroke(),r.restore())}function D1(e,t,n){return Yn(e,{label:n,index:t,type:"pointLabel"})}class Ks extends aa{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=se(Pc(this.options)/2),n=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=Bt(t)&&!isNaN(t)?t:0,this.max=Bt(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Pc(this.options))}generateTickLabels(t){aa.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,i)=>{const s=kt(this.options.pointLabels.callback,[n,i],this);return s||s===0?s:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?S1(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,i,s){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,i,s))}getIndexAngle(t){const n=Pt/(this._pointLabels.length||1),i=this.options.startAngle||0;return be(t*n+Oe(i))}getDistanceFromCenterForValue(t){if(gt(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(gt(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const i=n[t];return D1(this.getContext(),t,i)}}getPointPosition(t,n,i=0){const s=this.getIndexAngle(t)-Wt+i;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:i,right:s,bottom:r}=this._pointLabelItems[t];return{left:n,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),jy(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:i,grid:s,border:r}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&P1(this,o),s.display&&this.ticks.forEach((u,h)=>{if(h!==0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=s.setContext(d),p=r.setContext(d);O1(this,f,l,o,p)}}),i.display){for(t.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(t.lineWidth=d,t.strokeStyle=h,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=zt(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const h=se(c.backdropPadding);t.fillRect(-o/2-h.left,-r-u.size/2-h.top,o+h.width,u.size+h.height)}ki(t,a.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}$(Ks,"id","radialLinear"),$(Ks,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Na.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),$(Ks,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),$(Ks,"descriptors",{angleLines:{_fallback:"grid"}});const $a={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},le=Object.keys($a);function qp(e,t){return e-t}function Gp(e,t){if(gt(t))return null;const n=e._adapter,{parser:i,round:s,isoWeekday:r}=e._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),Bt(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(ds(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,s)),+o)}function Yp(e,t,n,i){const s=le.length;for(let r=le.indexOf(e);r<s-1;++r){const o=$a[le[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=i)return le[r]}return le[s-1]}function N1(e,t,n,i,s){for(let r=le.length-1;r>=le.indexOf(n);r--){const o=le[r];if($a[o].common&&e._adapter.diff(s,i,o)>=t-1)return o}return le[n?le.indexOf(n):0]}function L1(e){for(let t=le.indexOf(e)+1,n=le.length;t<n;++t)if($a[le[t]].common)return le[t]}function Xp(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:s}=th(n,t),r=n[i]>=t?n[i]:n[s];e[r]=!0}}function F1(e,t,n,i){const s=e._adapter,r=+s.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=n[a],l>=0&&(t[l].major=!0);return t}function Qp(e,t,n){const i=[],s={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],s[a]=o,i.push({value:a,major:!1});return r===0||!n?i:F1(e,i,s,n)}class kr extends Di{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),s=this._adapter=new KP._date(t.adapters.date);s.init(n),nr(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Gp(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Bt(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=Bt(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=_R(s,r,o);return this._unit=n.unit||(i.autoSkip?Yp(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):N1(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:L1(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),Qp(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?n=1-s:n=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?i=r:i=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=Kt(n,0,o),i=Kt(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||Yp(r.minUnit,n,i,this._getLabelCapacity(n)),a=ot(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=ds(l)||l===!0,u={};let h=n,d,f;if(c&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,c?"day":o),t.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=s.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<i;d=+t.add(d,a,o),f++)Xp(u,d,p);return(d===i||s.bounds==="ticks"||f===1)&&Xp(u,d,p),Object.keys(u).sort(qp).map(g=>+g)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const s=this.options.time.displayFormats,r=this._unit,o=n||s[r];return this._adapter.format(t,o)}_tickFormatFunction(t,n,i,s){const r=this.options,o=r.ticks.callback;if(o)return kt(o,[t,n,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=i[n],f=c&&h&&d&&d.major;return this._adapter.format(t,s||(f?h:u))}generateTickLabels(t){let n,i,s;for(n=0,i=t.length;n<i;++n)s=t[n],s.label=this._tickFormatFunction(s.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,s=Oe(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(t,0,Qp(this,[t],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)t=t.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)t.push(Gp(this,s[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return sy(t.sort(qp))}}$(kr,"id","time"),$(kr,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function lo(e,t,n){let i=0,s=e.length-1,r,o,a,l;n?(t>=e[i].pos&&t<=e[s].pos&&({lo:i,hi:s}=pn(e,"pos",t)),{pos:r,time:a}=e[i],{pos:o,time:l}=e[s]):(t>=e[i].time&&t<=e[s].time&&({lo:i,hi:s}=pn(e,"time",t)),{time:r,pos:a}=e[i],{time:o,pos:l}=e[s]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class Oc extends kr{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=lo(n,this.min),this._tableRange=lo(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,s=[],r=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=n&&c<=i&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(lo(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return lo(this._table,i*this._tableRange+this._minPos,!0)}}$(Oc,"id","timeseries"),$(Oc,"defaults",kr.defaults);var B1=Object.freeze({__proto__:null,CategoryScale:Ac,LinearScale:Mc,LogarithmicScale:Rc,RadialLinearScale:Ks,TimeScale:kr,TimeSeriesScale:Oc});const $1=[jP,wD,g1,B1];An.register(...$1);export{An as C,ln as F,Rn as G,V1 as a,jg as b,Te as c,Y1 as d,Q1 as e,tN as f,G1 as g,Z1 as h,oS as i,H1 as j,Re as k,q1 as l,Av as m,Ar as n,z1 as o,iN as p,e0 as q,J1 as r,X1 as s,U1 as t,K1 as u,nN as v,eN as w,j1 as x};
